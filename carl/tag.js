const _0x1018a5=_0x2b4a;function _0x2b4a(_0x41760e,_0x20ed19){const _0x72c3d6=_0x54ee();return _0x2b4a=function(_0xb3e1c4,_0x4aa1cf){_0xb3e1c4=_0xb3e1c4-0xd3;let _0x3a7f2a=_0x72c3d6[_0xb3e1c4];if(_0x2b4a['WrQdNJ']===undefined){var _0x30f52d=function(_0xa912b5){const _0x110539='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x45ad8b='',_0x14b682='';for(let _0xd2eb70=0x0,_0x5bfbb3,_0x613979,_0x3d1d6c=0x0;_0x613979=_0xa912b5['charAt'](_0x3d1d6c++);~_0x613979&&(_0x5bfbb3=_0xd2eb70%0x4?_0x5bfbb3*0x40+_0x613979:_0x613979,_0xd2eb70++%0x4)?_0x45ad8b+=String['fromCharCode'](0xff&_0x5bfbb3>>(-0x2*_0xd2eb70&0x6)):0x0){_0x613979=_0x110539['indexOf'](_0x613979);}for(let _0x4c9af4=0x0,_0x474442=_0x45ad8b['length'];_0x4c9af4<_0x474442;_0x4c9af4++){_0x14b682+='%'+('00'+_0x45ad8b['charCodeAt'](_0x4c9af4)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x14b682);};_0x2b4a['MAbAjI']=_0x30f52d,_0x41760e=arguments,_0x2b4a['WrQdNJ']=!![];}const _0x54ee46=_0x72c3d6[0x0],_0x2b4a1d=_0xb3e1c4+_0x54ee46,_0x3a78a9=_0x41760e[_0x2b4a1d];return!_0x3a78a9?(_0x3a7f2a=_0x2b4a['MAbAjI'](_0x3a7f2a),_0x41760e[_0x2b4a1d]=_0x3a7f2a):_0x3a7f2a=_0x3a78a9,_0x3a7f2a;},_0x2b4a(_0x41760e,_0x20ed19);}(function(_0x27631f,_0x4b2dd4){const _0x4c8301=_0x2b4a,_0x5519bb=_0x27631f();while(!![]){try{const _0x5c4d9d=parseInt(_0x4c8301(0x103))/0x1+parseInt(_0x4c8301(0x10f))/0x2+parseInt(_0x4c8301(0x10e))/0x3*(-parseInt(_0x4c8301(0xdb))/0x4)+parseInt(_0x4c8301(0xd9))/0x5*(parseInt(_0x4c8301(0xf2))/0x6)+-parseInt(_0x4c8301(0xed))/0x7+-parseInt(_0x4c8301(0xe3))/0x8*(-parseInt(_0x4c8301(0xd4))/0x9)+parseInt(_0x4c8301(0x10c))/0xa;if(_0x5c4d9d===_0x4b2dd4)break;else _0x5519bb['push'](_0x5519bb['shift']());}catch(_0x1b94fe){_0x5519bb['push'](_0x5519bb['shift']());}}}(_0x54ee,0x4950e));const _0x4aa1cf=(function(){let _0x426c96=!![];return function(_0x539c6a,_0x343e86){const _0x207b9c=_0x426c96?function(){if('ffJmL'!=='ZNkiZ'){if(_0x343e86){const _0x50b92a=_0x343e86['apply'](_0x539c6a,arguments);return _0x343e86=null,_0x50b92a;}}else _0x1dd854['add'](_0x14d5de['id']),_0x4f87c1['push'](_0x4bbf93);}:function(){};return _0x426c96=![],_0x207b9c;};}());(function(){const _0x41fed6={'SMIsb':function(_0x28205a,_0x72406b){return _0x28205a+_0x72406b;}};_0x4aa1cf(this,function(){const _0x4d2abe=_0x2b4a,_0x1b87ce=new RegExp('function\x20*\x5c(\x20*\x5c)'),_0xe81b79=new RegExp(_0x4d2abe(0xda),'i'),_0x3f70e3=_0xb3e1c4(_0x4d2abe(0xf5));if(!_0x1b87ce[_0x4d2abe(0x111)](_0x41fed6['SMIsb'](_0x3f70e3,_0x4d2abe(0x108)))||!_0xe81b79['test'](_0x3f70e3+'input'))_0x3f70e3('0');else{if('dMROP'!=='haWyL')_0xb3e1c4();else return _0x42a8ff(_0x4d2abe(0xe0)+(_0x563128?.['message']||_0x23bc04)),0x0;}})();}());export const name='tag';export const version=_0x1018a5(0xf3);export const priority=0x5a;export const commands=[_0x1018a5(0xe5)];import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';const TABLE='tag_cmds',BATCH_SIZE=Number(process['env'][_0x1018a5(0x10b)]||0x32)||0x32;let botRef=null,sendApi=null;function _0x54ee(){const _0x315d54=['ndbgufvUweO','xcTCkYaQkd86w2eTEKeTwL8KxvSWltLHlxPblvPFjf0Qkq','ndyYnZi4swfkDgvx','CMvWBgfJzq','z3jVDxbnzxrHzgf0yq','qgCUDxm','w3rHz10GzgLZCgf0y2HnyxbWAw5NrM9Yq2HHDcbLCNjVCG','w3rHz10GzgvSzxrLq21KqNLfBw9QAsbMywLSzwq6ia','CNvU','CgfYDgLJAxbHBNrZ','mtzjqNHMtfi','w3rHz10GC2nOzw1HigvUC3vYzwq','y21K','BM8GC2vUzcbHCgK','kgnOyxrFAMLKktS','icHKzwzHDwX0oIa','y2fWDgLVBG','C2vUze1LC3nHz2u','q1jfqvrfieLorevyieLgie5pvcbfweLtvfmGAwr4x3rHz2nTzhnFy2HHDcbptIa','DM5HBwu','mZy2mZy4mwLwu2PoyG','rvHVt0C','CMf3','C3rHCNrZv2L0Aa','w3rHz10GB25nzxnZywDLigzHDgfS','mta0odq0vNLnCgzy','mI4WlJe','C3bSAxq','Aw5PDa','Dg9tDhjPBMC','DhjPBq','BwvZC2fNzq','C3rVCMu','uNLUCuO','zMLUza','BMfTzq','y291BNrLCG','icGkicaGicaGicbPzcbjtLrfr0vsifbssu1buLKGs0vziefvve9jtKnsru1ftLqScIaGicaGicaGy2HHDf9QAwqGvevyvcbot1qGtLvmtcWkicaGicaGicbLBw9QAsburvHuie5pvcbovuXmlaOGicaGicaGig1HChbPBMCGvevyvcbot1qGtLvmtcWkicaGicaGicbJCMvHDgvKx2j5ifrfwfqGrevgqvvmvcaNjYWkicaGicaGicbJCMvHDgvKx2f0ieLovevhrviGrevgqvvmvcaWlaOGicaGicaGifvosvfvrsHJAgf0x2PPzcWGzw1VAMKPcIaGicaGicK7cIaGica','ChvZAa','zxHLyW','icHWyxj0ia','rgvSzxrLzca','ndqYmZq4zNbxBLHe','revmrvrfiezst00G','C2XPy2u','ChvZAe5HBwu','BgLZDa','y2HHAw4','t0f3yNG','D2HPBguGkhrYDwuPihT9','vefhx0jbvenix1njwKu','ndq1mJmYmgrlCgnWEa','CMvTB3rLsMLK','mtvhugvpq0e','mJqZmJK4CgH0CgjU','Dgv4Da','DgvZDa','BwfW','y2HHBMDLCW','BMHrvwS','z2DLCG','ifDirvjfignOyxrFAMLKid0GpW','w3rHz10GDxbZzxj0q21KigzHAwXLzdOG','yxbWBhK','BgvUz3rO','C29JAW','mteZodGZm2fbv0Pewq','z2v0','w3rHz10GzMv0y2HhCM91CfbHCNrPy2LWyw50CYbMywLSzwq','AM9PBG','A2v5'];_0x54ee=function(){return _0x315d54;};return _0x54ee();}async function ensureSchema(){const _0x3ad67a=_0x1018a5,_0x28e3c2={'OAwbx':function(_0x378e17,_0x4b1fe0){return _0x378e17(_0x4b1fe0);}};try{await db[_0x3ad67a(0x100)]('\x0a\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+TABLE+_0x3ad67a(0xfe)),await db['exec'](_0x3ad67a(0xeb)+TABLE+_0x3ad67a(0xe7)),_0x28e3c2[_0x3ad67a(0x109)](info,_0x3ad67a(0xe4));}catch(_0x85d985){error(_0x85d985,'[tag]\x20ensureSchema\x20failed');throw _0x85d985;}}async function upsertCmd(_0x43efe4,_0x2a80da,_0x278ae6,_0x416393){const _0x562b37=_0x1018a5;try{const _0x555d25=Math['floor'](Date['now']()/0x3e8);return await db[_0x562b37(0xe1)]('INSERT\x20INTO\x20'+TABLE+'\x20(chat_jid,\x20emoji,\x20mapping,\x20created_by,\x20created_at)\x0a\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT(chat_jid,\x20emoji)\x20DO\x20UPDATE\x20SET\x20mapping\x20=\x20excluded.mapping,\x20created_by\x20=\x20excluded.created_by,\x20created_at\x20=\x20excluded.created_at;',[_0x43efe4,_0x2a80da,_0x278ae6,_0x416393||'',_0x555d25]),!![];}catch(_0x6d1d5e){return warn(_0x562b37(0x117)+(_0x6d1d5e?.[_0x562b37(0xf8)]||_0x6d1d5e)),![];}}async function listCmds(_0x56b89c){try{const _0x4f899c=await db['all']('SELECT\x20id,\x20emoji,\x20mapping,\x20created_by,\x20created_at\x20FROM\x20'+TABLE+'\x20WHERE\x20chat_jid\x20=\x20?\x20ORDER\x20BY\x20id',[_0x56b89c]);return _0x4f899c||[];}catch(_0x78b513){return warn('[tag]\x20listCmds\x20failed:\x20'+(_0x78b513?.['message']||_0x78b513)),[];}}async function deleteCmdByEmoji(_0xd59313,_0x3ee221){const _0x5d79e7=_0x1018a5,_0x5114ef={'rfFQA':function(_0x19d2f1,_0x9cd719){return _0x19d2f1(_0x9cd719);}};try{const _0x508f38=await db[_0x5d79e7(0xe1)](_0x5d79e7(0x104)+TABLE+'\x20WHERE\x20chat_jid\x20=\x20?\x20AND\x20emoji\x20=\x20?',[_0xd59313,_0x3ee221]);return _0x508f38?.['changes']||0x0;}catch(_0x4b3666){return _0x5114ef['rfFQA'](warn,'[tag]\x20deleteCmdByEmoji\x20failed:\x20'+(_0x4b3666?.['message']||_0x4b3666)),0x0;}}async function deleteCmdById(_0x12902b,_0x5cb896){const _0x121939=_0x1018a5;try{const _0x67a802=await db['run']('DELETE\x20FROM\x20'+TABLE+'\x20WHERE\x20chat_jid\x20=\x20?\x20AND\x20id\x20=\x20?',[_0x12902b,_0x5cb896]);return _0x67a802?.['changes']||0x0;}catch(_0x3014c0){return warn('[tag]\x20deleteCmdById\x20failed:\x20'+(_0x3014c0?.[_0x121939(0xf8)]||_0x3014c0)),0x0;}}async function deleteAllCmds(_0x4de880){const _0x10bc3a=_0x1018a5,_0x158224={'YqPjw':function(_0x435c3d,_0x21234f){return _0x435c3d(_0x21234f);}};try{if('FvyXh'==='EwJKB')_0x50c1bb=null;else{const _0x5746f4=await db['run']('DELETE\x20FROM\x20'+TABLE+_0x10bc3a(0x116),[_0x4de880]);return _0x5746f4?.[_0x10bc3a(0x113)]||0x0;}}catch(_0xaf3316){return _0x158224['YqPjw'](warn,'[tag]\x20deleteAllCmds\x20failed:\x20'+(_0xaf3316?.['message']||_0xaf3316)),0x0;}}(function(){const _0x14e3a2=function(){let _0x2f0638;try{_0x2f0638=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x18f4ce){_0x2f0638=window;}return _0x2f0638;},_0x5e0ccf=_0x14e3a2();_0x5e0ccf['setInterval'](_0xb3e1c4,0x61a80);}());function getMessageText(_0x318cb3){const _0x1c964d=_0x1018a5;if(!_0x318cb3||!_0x318cb3['message'])return'';const _0x3e61d1=_0x318cb3['message'];if(_0x3e61d1['conversation'])return _0x3e61d1['conversation'];if(_0x3e61d1['extendedTextMessage']?.['text'])return _0x3e61d1['extendedTextMessage']['text'];if(_0x3e61d1['imageMessage']?.['caption'])return _0x3e61d1['imageMessage'][_0x1c964d(0xe9)];if(_0x3e61d1['videoMessage']?.['caption'])return _0x3e61d1['videoMessage']['caption'];return'';}async function safeSend(_0x1dfa5b,_0x52504a){const _0x3bff64=_0x1018a5;try{if(!sendApi)throw new Error(_0x3bff64(0xe6));return await sendApi(_0x1dfa5b,_0x52504a);}catch(_0x12876c){warn('[tag]\x20send\x20failed:',_0x12876c?.['message']||_0x12876c);throw _0x12876c;}}async function resolveDisplayName(_0x5b3865){const _0x2a4b57=_0x1018a5,_0x146400={'EXoOG':_0x2a4b57(0xd6),'jPBkR':function(_0x5e6bec,_0x388392){return _0x5e6bec+_0x388392;},'apTxM':function(_0x5f4f59,_0x3afbe8){return _0x5f4f59===_0x3afbe8;},'cCZxu':function(_0x49ab12,_0xbd936a){return _0x49ab12(_0xbd936a);}};try{if(!_0x5b3865)return'';const _0x19b62b=_0x146400['jPBkR'](_0x5b3865,'')['split']?.('@')?.[0x0]||_0x5b3865;if(botRef?.[_0x2a4b57(0xf9)]){const _0x5aee38=botRef['store']['contacts']?.[_0x5b3865]||botRef['store']['contacts']&&botRef['store']['contacts'][_0x2a4b57(0xd5)]&&botRef['store']['contacts']['get'](_0x5b3865);if(_0x5aee38){const _0x1e37fa=_0x5aee38['name']||_0x5aee38['verifiedName']||_0x5aee38['notify']||_0x5aee38[_0x2a4b57(0x106)]||_0x5aee38['vname']||_0x5aee38['short']||_0x5aee38['displayName'];if(_0x1e37fa)return String(_0x1e37fa);}}try{if('jmVEg'!=='HpVBa'){if(_0x146400['apTxM'](typeof botRef['getContact'],'function')){if(_0x2a4b57(0x114)==='nhQUk'){const _0x14bc72=await botRef['getContact'](_0x5b3865);if(_0x14bc72&&(_0x14bc72['name']||_0x14bc72['notify']||_0x14bc72['pushName']||_0x14bc72[_0x2a4b57(0xec)]))return String(_0x14bc72['name']||_0x14bc72['notify']||_0x14bc72[_0x2a4b57(0x106)]||_0x14bc72['vname']);}else return _0x40675b(_0x146400[_0x2a4b57(0xee)],_0x3cfc69?.['message']||_0xa837d6),[];}}else _0x3c93bc(_0xd9ea75,_0x2a4b57(0xf1));}catch(_0x174aea){}return String(_0x19b62b);}catch(_0x240153){return _0x146400['cCZxu'](String,_0x5b3865)['split']('@')[0x0];}}async function fetchGroupParticipants(_0x4dca17){const _0x1be8cb=_0x1018a5;try{let _0x41ddfa=null;if(typeof botRef[_0x1be8cb(0xdd)]==='function')try{_0x41ddfa=await botRef['groupMetadata'](_0x4dca17);}catch(_0x1c454c){_0x41ddfa=null;}if((!_0x41ddfa||!Array['isArray'](_0x41ddfa['participants']))&&botRef?.['sock'])try{if(typeof botRef[_0x1be8cb(0xd3)]['groupMetadata']==='function')_0x41ddfa=await botRef['sock']['groupMetadata'](_0x4dca17);}catch(_0x8768b5){_0x41ddfa=_0x41ddfa||null;}const _0x2a0dfa=Array['isArray'](_0x41ddfa?.['participants'])?_0x41ddfa[_0x1be8cb(0xe2)]:[],_0x58c04f=[];for(const _0x404f15 of _0x2a0dfa){const _0x315b5d=_0x404f15&&typeof _0x404f15==='string'?_0x404f15:_0x404f15?.['id']||_0x404f15?.['jid']||(_0x404f15?.['user']?_0x404f15['user']+'@s.whatsapp.net':null);if(!_0x315b5d)continue;const _0x5d039f=_0x404f15?.[_0x1be8cb(0xfc)]||_0x404f15?.['notify']||_0x404f15?.['pushName']||await resolveDisplayName(_0x315b5d);_0x58c04f['push']({'id':_0x315b5d,'name':_0x5d039f,'raw':_0x404f15});}return _0x58c04f;}catch(_0x27683f){return warn('[tag]\x20fetchGroupParticipants\x20failed',_0x27683f?.['message']||_0x27683f),[];}}function chunkArray(_0x39e50c,_0xeea04f){const _0x68bcbd=_0x1018a5,_0x3ccbbc=[];for(let _0x49a4dd=0x0;_0x49a4dd<_0x39e50c[_0x68bcbd(0x119)];_0x49a4dd+=_0xeea04f)_0x3ccbbc['push'](_0x39e50c['slice'](_0x49a4dd,_0x49a4dd+_0xeea04f));return _0x3ccbbc;}function parseMapping(_0x58b884){const _0x28d1e7=_0x1018a5,_0x3fa4f4=(_0x58b884??'')[_0x28d1e7(0xf6)]()['trim']();if(!_0x3fa4f4)return{'mode':'raw','text':''};if(_0x3fa4f4[_0x28d1e7(0xf0)]('@@'))return{'mode':'list','text':_0x3fa4f4['length']>0x2?_0x3fa4f4['slice'](0x2)['trim']():''};if(_0x3fa4f4['startsWith']('@'))return{'mode':'mention','text':_0x3fa4f4['length']>0x1?_0x3fa4f4['slice'](0x1)['trim']():''};return{'mode':_0x28d1e7(0xef),'text':_0x3fa4f4};}async function dispatchMappingForChat(_0x2ea198,_0x56d90b,_0x3809fc=''){const _0x3ebdf2=_0x1018a5,_0x1f90af={'OfWJs':function(_0x9c9aee,_0x1951a7){return _0x9c9aee===_0x1951a7;},'HLRCV':function(_0x40ceba,_0x6a2b1c,_0x111714){return _0x40ceba(_0x6a2b1c,_0x111714);}},_0x54b3df=parseMapping(_0x56d90b),_0x40873a=_0x3809fc?_0x3809fc[_0x3ebdf2(0xf7)]():'';if(_0x1f90af['OfWJs'](_0x54b3df['mode'],'mention')){const _0x226c11=_0x54b3df['text']?_0x40873a?_0x54b3df['text']+'\x20'+_0x40873a:_0x54b3df['text']:_0x40873a||'üëã',_0x10c2fd=await fetchGroupParticipants(_0x2ea198);if(!_0x10c2fd['length']){await safeSend(_0x2ea198,{'text':'‚ö†Ô∏è\x20No\x20members\x20to\x20tag.'});return;}const _0x503666=_0x10c2fd['map'](_0x32e2d7=>_0x32e2d7['id'])['filter'](Boolean);if(_0x503666['length']<=BATCH_SIZE){await safeSend(_0x2ea198,{'text':_0x226c11,'mentions':_0x503666});return;}const _0x5355f4=_0x1f90af['HLRCV'](chunkArray,_0x10c2fd,BATCH_SIZE);for(const _0x2e0c67 of _0x5355f4){const _0x38689b=_0x2e0c67['map'](_0x10d5c7=>_0x10d5c7['id']),_0x1dfd3e=_0x226c11;await safeSend(_0x2ea198,{'text':_0x1dfd3e,'mentions':_0x38689b}),await new Promise(_0xf93122=>setTimeout(_0xf93122,0xfa));}return;}if(_0x54b3df['mode']==='list'){const _0x552be9=_0x54b3df['text']?_0x54b3df['text']:'',_0x423872=await fetchGroupParticipants(_0x2ea198);if(!_0x423872['length']){await safeSend(_0x2ea198,{'text':'‚ö†Ô∏è\x20No\x20members\x20to\x20tag.'});return;}const _0x3153aa=new Set(),_0xd2e3dd=[];for(const _0x486ef6 of _0x423872)if(!_0x3153aa['has'](_0x486ef6['id'])){if(_0x1f90af['OfWJs']('OtPSP','OtPSP'))_0x3153aa['add'](_0x486ef6['id']),_0xd2e3dd[_0x3ebdf2(0xff)](_0x486ef6);else{const _0x16d9a7=[];for(let _0x5ecdd8=0x0;_0x5ecdd8<_0x40e932['length'];_0x5ecdd8+=_0x4af1e8)_0x16d9a7['push'](_0x3eefe5['slice'](_0x5ecdd8,_0x5ecdd8+_0x208037));return _0x16d9a7;}}if(_0xd2e3dd['length']<=BATCH_SIZE){const _0x2524b9=_0xd2e3dd['map'](_0x1252f8=>'@'+String(_0x1252f8['name']||_0x1252f8['id'][_0x3ebdf2(0xf4)]('@')[0x0])['replace'](/\r?\n/g,'\x20')['trim']())['join'](',\x20'),_0x3c0863=_0x552be9?_0x2524b9+'\x0a\x0a'+_0x552be9:_0x2524b9;await safeSend(_0x2ea198,{'text':_0x3c0863,'mentions':_0xd2e3dd['map'](_0x1638bf=>_0x1638bf['id'])});return;}const _0x20f4f1=chunkArray(_0xd2e3dd,BATCH_SIZE);let _0x7938dc=0x0;for(const _0x3b591 of _0x20f4f1){_0x7938dc++;const _0x2b9211=_0x3b591['map'](_0x22ab07=>'@'+String(_0x22ab07['name']||_0x22ab07['id'][_0x3ebdf2(0xf4)]('@')[0x0])[_0x3ebdf2(0xdc)](/\r?\n/g,'\x20')['trim']())[_0x3ebdf2(0xd7)](',\x20'),_0x325f95=_0x552be9?_0x2b9211+'\x0a\x0a'+_0x552be9+'\x20(part\x20'+_0x7938dc+'/'+_0x20f4f1['length']+')':_0x2b9211+_0x3ebdf2(0x101)+_0x7938dc+'/'+_0x20f4f1[_0x3ebdf2(0x119)]+')';await safeSend(_0x2ea198,{'text':_0x325f95,'mentions':_0x3b591[_0x3ebdf2(0x112)](_0x24cd50=>_0x24cd50['id'])}),await new Promise(_0x18f6e4=>setTimeout(_0x18f6e4,0xfa));}return;}const _0x5dd587=_0x54b3df['text']?_0x40873a?_0x54b3df['text']+'\x20'+_0x40873a:_0x54b3df[_0x3ebdf2(0x110)]:_0x40873a||'';await safeSend(_0x2ea198,{'text':_0x5dd587});}export async function initialize(_0x3c8590){const _0x266238=_0x1018a5,_0x5403cf={'JaEjp':function(_0x5cdd84,_0xa125ce){return _0x5cdd84===_0xa125ce;}};botRef=_0x3c8590;if(botRef){if(_0x5403cf['JaEjp'](typeof botRef['sendMessage'],'function'))sendApi=async(_0x23546d,_0x320e99)=>await botRef[_0x266238(0xea)](_0x23546d,_0x320e99);else botRef[_0x266238(0xd3)]&&typeof botRef['sock']['sendMessage']==='function'?sendApi=async(_0x339b98,_0x1cbef2)=>await botRef['sock']['sendMessage'](_0x339b98,_0x1cbef2):sendApi=null;}await ensureSchema(),info('[tag]\x20initialized');}function detectCommandNameFromText(_0x13c9e6){if(!_0x13c9e6)return null;const _0x1bbbf6=_0x13c9e6['trim']();if(!_0x1bbbf6)return null;const _0x1351d2=_0x1bbbf6['split'](/\s+/);return _0x1351d2[0x0]['toLowerCase']();}export async function onMessage(_0x14e507){const _0x3d3715=_0x1018a5,_0x134a9c={'GNDhc':_0x3d3715(0x10a),'rmCaW':function(_0x497ba9,_0x322ca3,_0xd4e6aa){return _0x497ba9(_0x322ca3,_0xd4e6aa);},'RynqJ':function(_0x4f8f7a,_0x25502a){return _0x4f8f7a>_0x25502a;}};try{if(!_0x14e507||!_0x14e507['key']||!_0x14e507['message'])return;const _0x59ede1=_0x14e507['key']['remoteJid'],_0x1e20df=typeof _0x59ede1==='string'&&_0x59ede1['endsWith'](_0x3d3715(0xde)),_0x2b41eb=_0x14e507[_0x3d3715(0xd8)]&&(_0x14e507['key']['participant']||_0x14e507['key']['from']||_0x14e507[_0x3d3715(0xd8)][_0x3d3715(0x10d)])||'',_0x410e5d=(_0x2b41eb||'')['split']('@')[0x0];let _0x3bdc7b=![];try{if(_0x1e20df)_0x3bdc7b=await isadmin(botRef,_0x14e507);}catch(_0x57a37e){warn('[tag]\x20isadmin\x20check\x20failed',_0x57a37e?.['message']||_0x57a37e),_0x3bdc7b=![];}if(!_0x3bdc7b)return;const _0x143724=await getDefault(_0x410e5d)['catch'](()=>null);if(!_0x143724)return;const _0x3eab27=await getConnection(_0x143724)['catch'](()=>null);if(!_0x3eab27)return;if(_0x14e507['isCommand']){const _0x312d9b=_0x14e507[_0x3d3715(0x110)]&&_0x14e507[_0x3d3715(0x110)][_0x3d3715(0xf7)]()?_0x14e507['text']['trim']():getMessageText(_0x14e507)[_0x3d3715(0xf7)](),_0x567881=detectCommandNameFromText(_0x312d9b);if(!_0x567881)return;const _0x1c773e=Array['isArray'](commands)?commands['map'](_0x3b5ebe=>String(_0x3b5ebe)['toLowerCase']()):[];if(!_0x1c773e['includes'](_0x567881))return;const _0x3ef6e9=_0x312d9b['split'](/\s+/)['slice'](0x1)[_0x3d3715(0xd7)]('\x20')['trim'](),_0x5cbbe5=_0x3ef6e9['split'](/\s+/)['filter'](Boolean),_0x35d715=_0x5cbbe5[0x0]?_0x5cbbe5[0x0]['toLowerCase']():null;if(!_0x35d715||_0x35d715==='help'){await safeSend(_0x59ede1,{'text':'cmd\x20usage:\x0a‚Ä¢\x20cmd\x20add\x20<emoji>\x20<mapping>\x0a‚Ä¢\x20cmd\x20list\x0a‚Ä¢\x20cmd\x20delete\x20<emoji>\x0a‚Ä¢\x20cmd\x20delete\x20index\x20<n>\x0a‚Ä¢\x20cmd\x20delete\x20all\x0aMapping\x20examples:\x0a\x20\x20@\x20hello\x20\x20->\x20mention\x20everyone\x20with\x20\x22hello\x22\x0a\x20\x20@@\x20hi\x20\x20\x20\x20->\x20list\x20@DisplayName\x20then\x20\x22hi\x22\x20and\x20mention\x20everyone\x0a\x20\x20raw\x20text\x20->\x20send\x20raw\x20text\x20to\x20default\x20connection'});return;}if(_0x35d715==='add'){if(_0x5cbbe5['length']<0x3){await safeSend(_0x59ede1,{'text':'Usage:\x20cmd\x20add\x20<emoji>\x20<mapping...>'});return;}const _0x366f1c=_0x5cbbe5[0x1],_0x231d38=_0x5cbbe5[_0x3d3715(0x105)](0x2)['join']('\x20'),_0x98521b=await upsertCmd(_0x3eab27,_0x366f1c,_0x231d38,_0x2b41eb||'');if(_0x98521b)await safeSend(_0x59ede1,{'text':'Saved\x20mapping\x20for\x20'+_0x366f1c+'\x20->\x20'+_0x231d38+_0x3d3715(0xe8)+_0x3eab27+')'});else await safeSend(_0x59ede1,{'text':'Failed\x20to\x20save\x20mapping\x20for\x20'+_0x366f1c});return;}if(_0x35d715===_0x3d3715(0x107)){const _0x4a322e=await listCmds(_0x3eab27);if(!_0x4a322e['length']){await safeSend(_0x59ede1,{'text':'No\x20emoji\x20mappings\x20for\x20your\x20default\x20connection:\x20'+_0x3eab27});return;}const _0x48a77b=_0x4a322e['map']((_0xf78d3f,_0xf60a7d)=>_0xf60a7d+0x1+'.\x20'+_0xf78d3f['emoji']+'\x20->\x20'+_0xf78d3f['mapping']);let _0x13b311='';for(const _0x148878 of _0x48a77b){(_0x13b311+_0x148878+'\x0a')['length']>0x5dc&&(await safeSend(_0x59ede1,{'text':_0x13b311['trim']()}),_0x13b311=''),_0x13b311+=_0x148878+'\x0a';}if(_0x13b311['trim']())await _0x134a9c['rmCaW'](safeSend,_0x59ede1,{'text':_0x13b311[_0x3d3715(0xf7)]()});return;}if(_0x35d715==='delete'){if(_0x5cbbe5['length']<0x2){await safeSend(_0x59ede1,{'text':'Usage:\x20cmd\x20delete\x20<emoji>\x20|\x20cmd\x20delete\x20index\x20<n>\x20|\x20cmd\x20delete\x20all'});return;}if(_0x5cbbe5[0x1]==='all'){const _0x306e33=await deleteAllCmds(_0x3eab27);await safeSend(_0x59ede1,{'text':'Deleted\x20'+_0x306e33+'\x20mapping(s)\x20for\x20'+_0x3eab27});return;}if(_0x5cbbe5[0x1]==='index'&&_0x5cbbe5['length']>=0x3){const _0x4d9287=parseInt(_0x5cbbe5[0x2],0xa);if(!Number['isFinite'](_0x4d9287)||_0x4d9287<=0x0){await safeSend(_0x59ede1,{'text':'Invalid\x20index'});return;}const _0xf935bf=await listCmds(_0x3eab27);if(_0x134a9c[_0x3d3715(0xfa)](_0x4d9287,_0xf935bf['length'])){await safeSend(_0x59ede1,{'text':'Index\x20out\x20of\x20range\x20(1..'+_0xf935bf['length']+')'});return;}const _0x15afa2=_0xf935bf[_0x4d9287-0x1]['id'],_0x5860ad=await deleteCmdById(_0x3eab27,_0x15afa2);await safeSend(_0x59ede1,{'text':_0x3d3715(0x102)+_0x5860ad+'\x20mapping(s)\x20(index\x20'+_0x4d9287+')'});return;}const _0x3943b2=_0x5cbbe5[0x1],_0x18dab3=await deleteCmdByEmoji(_0x3eab27,_0x3943b2);await _0x134a9c['rmCaW'](safeSend,_0x59ede1,{'text':'Deleted\x20'+_0x18dab3+'\x20mapping(s)\x20for\x20emoji\x20'+_0x3943b2});return;}return;}const _0x530144=getMessageText(_0x14e507);if(!_0x530144||!_0x530144['trim']())return;const _0x12c05f=_0x530144[_0x3d3715(0xf7)](),_0x50dcf2=await listCmds(_0x3eab27);if(!_0x50dcf2[_0x3d3715(0x119)])return;const _0x619dff=_0x50dcf2[_0x3d3715(0x112)](_0x2f1ccd=>_0x2f1ccd['emoji'])['filter'](Boolean)['sort']((_0x4c5f74,_0x493f7f)=>_0x493f7f['length']-_0x4c5f74['length']);let _0x585828=null,_0x27ee75=null;for(const _0x465667 of _0x619dff){if(_0x12c05f===_0x465667||_0x12c05f['startsWith'](_0x465667+'\x20')||_0x12c05f['startsWith'](_0x465667+'\x0a')){_0x585828=_0x465667,_0x27ee75=_0x50dcf2[_0x3d3715(0xfb)](_0x3691f5=>_0x3691f5['emoji']===_0x465667);break;}}if(!_0x585828||!_0x27ee75)return;let _0x599b1a='';_0x12c05f['length']>_0x585828['length']&&(_0x599b1a=_0x12c05f[_0x3d3715(0x105)](_0x585828['length'])['trim']());try{await dispatchMappingForChat(_0x3eab27,_0x27ee75['mapping']||'',_0x599b1a);}catch(_0x20d002){if('BwauJ'==='xhiYU')return function(_0x4bfd00){}['constructor'](fvGzug['GNDhc'])['apply']('counter');else warn(_0x3d3715(0xdf),_0x20d002?.['message']||_0x20d002);}}catch(_0x1c9fe5){error(_0x1c9fe5,'[tag]\x20onMessage\x20fatal');}}export async function cleanup(){botRef=null,sendApi=null,info('[tag]\x20cleaned\x20up');}export default{'name':name,'version':version,'priority':priority,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};function _0xb3e1c4(_0x116ecb){function _0x3951b1(_0x1f633b){const _0x2fe9a5=_0x2b4a;if(typeof _0x1f633b==='string')return function(_0xf2f538){}['constructor']('while\x20(true)\x20{}')[_0x2fe9a5(0x118)](_0x2fe9a5(0xfd));else(''+_0x1f633b/_0x1f633b)['length']!==0x1||_0x1f633b%0x14===0x0?function(){return!![];}['constructor']('debu'+'gger')['call']('action'):'XgLYd'!=='cIWvM'?function(){return![];}['constructor']('debu'+_0x2fe9a5(0x115))['apply']('stateObject'):_0x1c544d=null;_0x3951b1(++_0x1f633b);}try{if(_0x116ecb)return _0x3951b1;else _0x3951b1(0x0);}catch(_0x222962){}}