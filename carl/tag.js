(function(_0x3b71dd,_0x59bc22){const _0x2d831f=_0x1fa6,_0x3e5b6b=_0x3b71dd();while(!![]){try{const _0x4b471e=-parseInt(_0x2d831f(0x164))/0x1*(-parseInt(_0x2d831f(0x159))/0x2)+-parseInt(_0x2d831f(0x182))/0x3+parseInt(_0x2d831f(0x14d))/0x4+-parseInt(_0x2d831f(0x15b))/0x5*(parseInt(_0x2d831f(0x17f))/0x6)+parseInt(_0x2d831f(0x152))/0x7*(parseInt(_0x2d831f(0x149))/0x8)+-parseInt(_0x2d831f(0x17b))/0x9+-parseInt(_0x2d831f(0x15a))/0xa;if(_0x4b471e===_0x59bc22)break;else _0x3e5b6b['push'](_0x3e5b6b['shift']());}catch(_0x23fe93){_0x3e5b6b['push'](_0x3e5b6b['shift']());}}}(_0x38f9,0x7f926));const _0x3456c6=(function(){let _0x1b7741=!![];return function(_0x4330f4,_0x1da360){const _0x449e37=_0x1b7741?function(){const _0x3152e0=_0x1fa6;if(_0x1da360){const _0x1b3c73=_0x1da360[_0x3152e0(0x186)](_0x4330f4,arguments);return _0x1da360=null,_0x1b3c73;}}:function(){};return _0x1b7741=![],_0x449e37;};}());(function(){const _0x5b1063={'KvKVV':'function\x20*\x5c(\x20*\x5c)','GsnJb':'mKlLJ'};_0x3456c6(this,function(){const _0x3a52f3=_0x1fa6,_0xbdceb1={'hKYRE':'gger'},_0x3e9e43=new RegExp(_0x5b1063['KvKVV']),_0x3cd299=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0x525ecd=_0x595f9d('init');!_0x3e9e43[_0x3a52f3(0x162)](_0x525ecd+'chain')||!_0x3cd299['test'](_0x525ecd+'input')?'mKlLJ'!==_0x5b1063[_0x3a52f3(0x158)]?function(){return![];}[_0x3a52f3(0x18b)]('debu'+_0xbdceb1[_0x3a52f3(0x168)])['apply']('stateObject'):_0x525ecd('0'):_0x595f9d();})();}());export const name='tag';export const version='2.0.1';export const priority=0x5a;function _0x1fa6(_0x35caa4,_0x1e43e5){const _0x18e403=_0x38f9();return _0x1fa6=function(_0x595f9d,_0x3456c6){_0x595f9d=_0x595f9d-0x145;let _0x23aa68=_0x18e403[_0x595f9d];if(_0x1fa6['duCcXz']===undefined){var _0x8a7397=function(_0x3e46af){const _0x325803='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xcf5b6f='',_0x250f27='';for(let _0x44536e=0x0,_0x566905,_0x1221d6,_0x48630d=0x0;_0x1221d6=_0x3e46af['charAt'](_0x48630d++);~_0x1221d6&&(_0x566905=_0x44536e%0x4?_0x566905*0x40+_0x1221d6:_0x1221d6,_0x44536e++%0x4)?_0xcf5b6f+=String['fromCharCode'](0xff&_0x566905>>(-0x2*_0x44536e&0x6)):0x0){_0x1221d6=_0x325803['indexOf'](_0x1221d6);}for(let _0x14dda3=0x0,_0x5c9c27=_0xcf5b6f['length'];_0x14dda3<_0x5c9c27;_0x14dda3++){_0x250f27+='%'+('00'+_0xcf5b6f['charCodeAt'](_0x14dda3)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x250f27);};_0x1fa6['ttHArO']=_0x8a7397,_0x35caa4=arguments,_0x1fa6['duCcXz']=!![];}const _0x38f9e4=_0x18e403[0x0],_0x1fa6e5=_0x595f9d+_0x38f9e4,_0x67c07=_0x35caa4[_0x1fa6e5];return!_0x67c07?(_0x23aa68=_0x1fa6['ttHArO'](_0x23aa68),_0x35caa4[_0x1fa6e5]=_0x23aa68):_0x23aa68=_0x67c07,_0x23aa68;},_0x1fa6(_0x35caa4,_0x1e43e5);}export const commands=['cmd'];import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';const TABLE='tag_cmds',BATCH_SIZE=Number(process['env']['TAG_BATCH_SIZE']||0x32)||0x32;(function(){const _0x1eb0bc=_0x1fa6;let _0x556917;try{const _0x1c4cb7=Function('return\x20(function()\x20'+_0x1eb0bc(0x173)+');');_0x556917=_0x1c4cb7();}catch(_0x3b4b3c){if('tQtvs'!==_0x1eb0bc(0x181))return _0x4b1771('[tag]\x20upsertCmd\x20failed:\x20'+(_0x2f81ed?.['message']||_0x45d1a8)),![];else _0x556917=window;}_0x556917['setInterval'](_0x595f9d,0x61a80);}());let botRef=null,sendApi=null;async function ensureSchema(){const _0x239afd=_0x1fa6,_0x33f9df={'gNBEr':function(_0x1b1355,_0x115e67){return _0x1b1355(_0x115e67);}};try{await db['exec'](_0x239afd(0x14e)+TABLE+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20chat_jid\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20emoji\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20mapping\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20created_by\x20TEXT\x20DEFAULT\x20\x27\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20created_at\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20\x20\x20UNIQUE(chat_jid,\x20emoji)\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20'),await db['exec']('CREATE\x20INDEX\x20IF\x20NOT\x20EXISTS\x20idx_tagcmds_chat\x20ON\x20'+TABLE+'(chat_jid);'),info(_0x239afd(0x16f));}catch(_0xc25f8a){if(_0x239afd(0x146)===_0x239afd(0x146)){error(_0xc25f8a,'[tag]\x20ensureSchema\x20failed');throw _0xc25f8a;}else sxFwTo['gNBEr'](_0x1056bb,'0');}}async function upsertCmd(_0x67791e,_0x400202,_0x3f103e,_0x121b40){try{const _0x17e20e=Math['floor'](Date['now']()/0x3e8);return await db['run']('INSERT\x20INTO\x20'+TABLE+'\x20(chat_jid,\x20emoji,\x20mapping,\x20created_by,\x20created_at)\x0a\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT(chat_jid,\x20emoji)\x20DO\x20UPDATE\x20SET\x20mapping\x20=\x20excluded.mapping,\x20created_by\x20=\x20excluded.created_by,\x20created_at\x20=\x20excluded.created_at;',[_0x67791e,_0x400202,_0x3f103e,_0x121b40||'',_0x17e20e]),!![];}catch(_0x46b1bc){return warn('[tag]\x20upsertCmd\x20failed:\x20'+(_0x46b1bc?.['message']||_0x46b1bc)),![];}}async function listCmds(_0xce4273){const _0x27f559=_0x1fa6;try{const _0x41355d=await db['all']('SELECT\x20id,\x20emoji,\x20mapping,\x20created_by,\x20created_at\x20FROM\x20'+TABLE+'\x20WHERE\x20chat_jid\x20=\x20?\x20ORDER\x20BY\x20id',[_0xce4273]);return _0x41355d||[];}catch(_0xd1c138){return warn(_0x27f559(0x185)+(_0xd1c138?.['message']||_0xd1c138)),[];}}async function deleteCmdByEmoji(_0x2e1f96,_0x5da7d8){const _0x37b61f=_0x1fa6;try{if(_0x37b61f(0x17d)!=='PEIAg'){const _0x30f1a9=await db[_0x37b61f(0x184)]('DELETE\x20FROM\x20'+TABLE+'\x20WHERE\x20chat_jid\x20=\x20?\x20AND\x20emoji\x20=\x20?',[_0x2e1f96,_0x5da7d8]);return _0x30f1a9?.[_0x37b61f(0x156)]||0x0;}else _0xbb2165(0x0);}catch(_0x4c5a4b){return warn('[tag]\x20deleteCmdByEmoji\x20failed:\x20'+(_0x4c5a4b?.['message']||_0x4c5a4b)),0x0;}}async function deleteCmdById(_0x1bdf6b,_0x187c06){const _0x4bd876=_0x1fa6;try{const _0x121b45=await db['run'](_0x4bd876(0x177)+TABLE+_0x4bd876(0x15f),[_0x1bdf6b,_0x187c06]);return _0x121b45?.['changes']||0x0;}catch(_0xf1d360){return warn('[tag]\x20deleteCmdById\x20failed:\x20'+(_0xf1d360?.['message']||_0xf1d360)),0x0;}}async function deleteAllCmds(_0x1adc46){const _0x2371ad=_0x1fa6;try{const _0x398e2e=await db['run']('DELETE\x20FROM\x20'+TABLE+_0x2371ad(0x16b),[_0x1adc46]);return _0x398e2e?.['changes']||0x0;}catch(_0x31899c){return warn(_0x2371ad(0x178)+(_0x31899c?.['message']||_0x31899c)),0x0;}}function getMessageText(_0x36b26b){const _0xcbeb=_0x1fa6;if(!_0x36b26b||!_0x36b26b[_0xcbeb(0x170)])return'';const _0x86880a=_0x36b26b[_0xcbeb(0x170)];if(_0x86880a['conversation'])return _0x86880a['conversation'];if(_0x86880a['extendedTextMessage']?.['text'])return _0x86880a['extendedTextMessage'][_0xcbeb(0x189)];if(_0x86880a['imageMessage']?.['caption'])return _0x86880a['imageMessage']['caption'];if(_0x86880a['videoMessage']?.[_0xcbeb(0x14f)])return _0x86880a['videoMessage'][_0xcbeb(0x14f)];return'';}async function safeSend(_0x37e7f0,_0x2a42c5){const _0x20fc31=_0x1fa6,_0x44a428={'awGaD':function(_0x340f15,_0x2be8c6,_0x25e6f3){return _0x340f15(_0x2be8c6,_0x25e6f3);}};try{if('HHsTQ'!==_0x20fc31(0x179)){if(!sendApi)throw new Error('no\x20send\x20api');return await _0x44a428['awGaD'](sendApi,_0x37e7f0,_0x2a42c5);}else return _0x3e56ad(_0x20fc31(0x171)+(_0x9bfd9c?.['message']||_0x1a17ff)),0x0;}catch(_0x5a4f08){warn('[tag]\x20send\x20failed:',_0x5a4f08?.['message']||_0x5a4f08);throw _0x5a4f08;}}async function resolveDisplayName(_0x67f5be){const _0x2f134f=_0x1fa6;try{if(!_0x67f5be)return'';const _0x33c744=(_0x67f5be+'')['split']?.('@')?.[0x0]||_0x67f5be;if(botRef?.['store']){const _0x23dadf=botRef[_0x2f134f(0x166)]['contacts']?.[_0x67f5be]||botRef['store']['contacts']&&botRef['store']['contacts']['get']&&botRef['store']['contacts']['get'](_0x67f5be);if(_0x23dadf){const _0x4a981c=_0x23dadf['name']||_0x23dadf[_0x2f134f(0x18a)]||_0x23dadf['notify']||_0x23dadf['pushName']||_0x23dadf['vname']||_0x23dadf['short']||_0x23dadf['displayName'];if(_0x4a981c)return String(_0x4a981c);}}try{if(typeof botRef['getContact']==='function'){const _0x5c1c4f=await botRef[_0x2f134f(0x188)](_0x67f5be);if(_0x5c1c4f&&(_0x5c1c4f[_0x2f134f(0x187)]||_0x5c1c4f['notify']||_0x5c1c4f['pushName']||_0x5c1c4f['vname']))return String(_0x5c1c4f['name']||_0x5c1c4f['notify']||_0x5c1c4f['pushName']||_0x5c1c4f['vname']);}}catch(_0x21b76b){}return String(_0x33c744);}catch(_0x49714b){return String(_0x67f5be)[_0x2f134f(0x15c)]('@')[0x0];}}async function fetchGroupParticipants(_0xb47026){const _0x4eb04f=_0x1fa6;try{let _0x3d9d19=null;if(typeof botRef['groupMetadata']==='function')try{if('mbgVt'==='SowBz')return _0x3f9efd;else _0x3d9d19=await botRef['groupMetadata'](_0xb47026);}catch(_0x24c40f){_0x3d9d19=null;}if((!_0x3d9d19||!Array[_0x4eb04f(0x160)](_0x3d9d19['participants']))&&botRef?.['sock'])try{if(typeof botRef['sock']['groupMetadata']==='function')_0x3d9d19=await botRef['sock'][_0x4eb04f(0x175)](_0xb47026);}catch(_0x53d2b9){if(_0x4eb04f(0x17e)===_0x4eb04f(0x145))return _0x2dcf69(_0x3f9e1c)['split']('@')[0x0];else _0x3d9d19=_0x3d9d19||null;}const _0xb3563a=Array['isArray'](_0x3d9d19?.['participants'])?_0x3d9d19['participants']:[],_0x409228=[];for(const _0x352504 of _0xb3563a){const _0x1ac80b=_0x352504&&typeof _0x352504===_0x4eb04f(0x180)?_0x352504:_0x352504?.['id']||_0x352504?.[_0x4eb04f(0x174)]||(_0x352504?.['user']?_0x352504['user']+'@s.whatsapp.net':null);if(!_0x1ac80b)continue;const _0x20d195=_0x352504?.['name']||_0x352504?.[_0x4eb04f(0x15d)]||_0x352504?.[_0x4eb04f(0x18c)]||await resolveDisplayName(_0x1ac80b);_0x409228['push']({'id':_0x1ac80b,'name':_0x20d195,'raw':_0x352504});}return _0x409228;}catch(_0x21df60){return warn('[tag]\x20fetchGroupParticipants\x20failed',_0x21df60?.[_0x4eb04f(0x170)]||_0x21df60),[];}}function chunkArray(_0x20886d,_0x1fa2e7){const _0x4bba4b=_0x1fa6,_0xcc9e43=[];for(let _0x329834=0x0;_0x329834<_0x20886d['length'];_0x329834+=_0x1fa2e7)_0xcc9e43[_0x4bba4b(0x167)](_0x20886d['slice'](_0x329834,_0x329834+_0x1fa2e7));return _0xcc9e43;}function parseMapping(_0x5aaca2){const _0x3ead23=_0x1fa6,_0xa5511e={'Fptql':function(_0xbd5f0e,_0x2eb9c8){return _0xbd5f0e>_0x2eb9c8;}},_0x1e665a=(_0x5aaca2??'')['toString']()[_0x3ead23(0x169)]();if(!_0x1e665a)return{'mode':'raw','text':''};if(_0x1e665a[_0x3ead23(0x161)]('@@'))return{'mode':'list','text':_0x1e665a['length']>0x2?_0x1e665a['slice'](0x2)[_0x3ead23(0x169)]():''};if(_0x1e665a['startsWith']('@'))return{'mode':'mention','text':_0xa5511e['Fptql'](_0x1e665a['length'],0x1)?_0x1e665a[_0x3ead23(0x151)](0x1)['trim']():''};return{'mode':'raw','text':_0x1e665a};}async function dispatchMappingForChat(_0x5c0e20,_0x46b812,_0x232742=''){const _0x1fad6a=_0x1fa6,_0x88d5ca={'aYhfB':'return\x20(function()\x20','tIenq':function(_0x84a1d6){return _0x84a1d6();},'IyFqb':function(_0x3b013b,_0x22a8fd){return _0x3b013b||_0x22a8fd;},'ewtxg':'AsrwT','KMbYY':'âš ï¸\x20No\x20members\x20to\x20tag.'},_0x4b7284=parseMapping(_0x46b812),_0x1091cd=_0x232742?_0x232742['trim']():'';if(_0x4b7284['mode']==='mention'){if('WZJbc'!=='dMrfW'){const _0x120511=_0x4b7284[_0x1fad6a(0x189)]?_0x1091cd?_0x4b7284['text']+'\x20'+_0x1091cd:_0x4b7284['text']:_0x88d5ca['IyFqb'](_0x1091cd,'ðŸ‘‹'),_0xbbc342=await fetchGroupParticipants(_0x5c0e20);if(!_0xbbc342[_0x1fad6a(0x172)]){if(_0x88d5ca[_0x1fad6a(0x14c)]!=='AsrwT')_0x3c7526=null;else{await safeSend(_0x5c0e20,{'text':'âš ï¸\x20No\x20members\x20to\x20tag.'});return;}}const _0x34a1fe=_0xbbc342['map'](_0x3cf659=>_0x3cf659['id'])['filter'](Boolean);if(_0x34a1fe['length']<=BATCH_SIZE){await safeSend(_0x5c0e20,{'text':_0x120511,'mentions':_0x34a1fe});return;}const _0x3bad57=chunkArray(_0xbbc342,BATCH_SIZE);for(const _0x4aafd2 of _0x3bad57){const _0x1f1959=_0x4aafd2['map'](_0x5329df=>_0x5329df['id']),_0x3246c8=_0x120511;await safeSend(_0x5c0e20,{'text':_0x3246c8,'mentions':_0x1f1959}),await new Promise(_0x2f797d=>setTimeout(_0x2f797d,0xfa));}return;}else return _0x3f2a4d(_0x1fad6a(0x17c),_0x563d99?.[_0x1fad6a(0x170)]||_0x1b5ed4),[];}if(_0x4b7284[_0x1fad6a(0x153)]===_0x1fad6a(0x17a)){const _0x15b809=_0x4b7284['text']?_0x4b7284[_0x1fad6a(0x189)]:'',_0x1ce4b5=await fetchGroupParticipants(_0x5c0e20);if(!_0x1ce4b5['length']){await safeSend(_0x5c0e20,{'text':_0x88d5ca['KMbYY']});return;}const _0x393523=new Set(),_0x1e1372=[];for(const _0x340ed6 of _0x1ce4b5)if(!_0x393523['has'](_0x340ed6['id'])){if('ZfFfa'!=='ZfFfa'){const _0x57435e=_0x4be051(PRnKhj['aYhfB']+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x13dd0d=PRnKhj['tIenq'](_0x57435e);}else _0x393523['add'](_0x340ed6['id']),_0x1e1372['push'](_0x340ed6);}if(_0x1e1372['length']<=BATCH_SIZE){if('jnixG'==='PSgYl')return _0x261923('[tag]\x20deleteAllCmds\x20failed:\x20'+(_0x3a2d5d?.['message']||_0x5b0317)),0x0;else{const _0x272872=_0x1e1372['map'](_0x54b6ac=>'@'+String(_0x54b6ac[_0x1fad6a(0x187)]||_0x54b6ac['id']['split']('@')[0x0])['replace'](/\r?\n/g,'\x20')['trim']())['join'](',\x20'),_0x47339d=_0x15b809?_0x272872+'\x0a\x0a'+_0x15b809:_0x272872;await safeSend(_0x5c0e20,{'text':_0x47339d,'mentions':_0x1e1372['map'](_0x382179=>_0x382179['id'])});return;}}const _0x2ad732=chunkArray(_0x1e1372,BATCH_SIZE);let _0x453466=0x0;for(const _0x19f18a of _0x2ad732){_0x453466++;const _0x4412de=_0x19f18a['map'](_0x28b12b=>'@'+String(_0x28b12b['name']||_0x28b12b['id']['split']('@')[0x0])['replace'](/\r?\n/g,'\x20')['trim']())[_0x1fad6a(0x16c)](',\x20'),_0x12674b=_0x15b809?_0x4412de+'\x0a\x0a'+_0x15b809+_0x1fad6a(0x157)+_0x453466+'/'+_0x2ad732['length']+')':_0x4412de+_0x1fad6a(0x157)+_0x453466+'/'+_0x2ad732[_0x1fad6a(0x172)]+')';await safeSend(_0x5c0e20,{'text':_0x12674b,'mentions':_0x19f18a[_0x1fad6a(0x16e)](_0x550302=>_0x550302['id'])}),await new Promise(_0x5cd554=>setTimeout(_0x5cd554,0xfa));}return;}const _0x1b5561=_0x4b7284['text']?_0x1091cd?_0x4b7284['text']+'\x20'+_0x1091cd:_0x4b7284['text']:_0x1091cd||'';await safeSend(_0x5c0e20,{'text':_0x1b5561});}export async function initialize(_0x3571ac){const _0x438c50=_0x1fa6,_0x4de602={'JSpBL':'function'};botRef=_0x3571ac;if(botRef){if(typeof botRef['sendMessage']===_0x438c50(0x183))sendApi=async(_0x19a002,_0x219a40)=>await botRef[_0x438c50(0x155)](_0x19a002,_0x219a40);else botRef['sock']&&typeof botRef['sock']['sendMessage']===_0x4de602['JSpBL']?sendApi=async(_0x42b064,_0xd1e6cf)=>await botRef['sock']['sendMessage'](_0x42b064,_0xd1e6cf):sendApi=null;}await ensureSchema(),info('[tag]\x20initialized');}function detectCommandNameFromText(_0x55bedb){if(!_0x55bedb)return null;const _0x1cfcdb=_0x55bedb['trim']();if(!_0x1cfcdb)return null;const _0x1c54ef=_0x1cfcdb['split'](/\s+/);return _0x1c54ef[0x0]['toLowerCase']();}export async function onMessage(_0x2ce7df){const _0x363617=_0x1fa6,_0x4d6c04={'YNwGX':'{}.constructor(\x22return\x20this\x22)(\x20)','zpiwo':function(_0x58c13d,_0xbefc98){return _0x58c13d(_0xbefc98);},'ovUbZ':function(_0x565039,_0x5cd36a){return _0x565039(_0x5cd36a);},'NQdtk':function(_0x79c0fc,_0x5a6ff6){return _0x79c0fc+_0x5a6ff6;},'aoBDI':function(_0xddc11e,_0x55a0a0,_0x2b3794){return _0xddc11e(_0x55a0a0,_0x2b3794);},'vbvqx':function(_0x3f7daa,_0x231716){return _0x3f7daa(_0x231716);},'WSEfg':'index','rNGJD':function(_0x4bf4bc,_0x227558,_0x5bf461){return _0x4bf4bc(_0x227558,_0x5bf461);},'vEcIK':function(_0x20a257,_0x589921,_0x10210e,_0xeeee3c){return _0x20a257(_0x589921,_0x10210e,_0xeeee3c);},'VtHgs':'IRcZi'};try{if(!_0x2ce7df||!_0x2ce7df['key']||!_0x2ce7df['message'])return;const _0x95fcd5=_0x2ce7df[_0x363617(0x14a)][_0x363617(0x165)],_0xad0a64=typeof _0x95fcd5==='string'&&_0x95fcd5['endsWith'](_0x363617(0x148)),_0x1b3cf7=_0x2ce7df['key']&&(_0x2ce7df['key']['participant']||_0x2ce7df['key']['from']||_0x2ce7df['key']['remoteJid'])||'',_0xa8c583=(_0x1b3cf7||'')[_0x363617(0x15c)]('@')[0x0];let _0x2d2e5f=![];try{if(_0xad0a64)_0x2d2e5f=await isadmin(botRef,_0x2ce7df);}catch(_0x1b802d){warn('[tag]\x20isadmin\x20check\x20failed',_0x1b802d?.['message']||_0x1b802d),_0x2d2e5f=![];}if(!_0x2d2e5f)return;const _0x2d4b5e=await _0x4d6c04['zpiwo'](getDefault,_0xa8c583)['catch'](()=>null);if(!_0x2d4b5e)return;const _0x291ca3=await getConnection(_0x2d4b5e)['catch'](()=>null);if(!_0x291ca3)return;if(_0x2ce7df['isCommand']){const _0x26fb78=_0x2ce7df['text']&&_0x2ce7df[_0x363617(0x189)]['trim']()?_0x2ce7df['text']['trim']():getMessageText(_0x2ce7df)['trim'](),_0x1b113e=detectCommandNameFromText(_0x26fb78);if(!_0x1b113e)return;const _0x597651=Array['isArray'](commands)?commands['map'](_0x5b1ad7=>String(_0x5b1ad7)['toLowerCase']()):[];if(!_0x597651['includes'](_0x1b113e))return;const _0x679d8=_0x26fb78['split'](/\s+/)['slice'](0x1)['join']('\x20')['trim'](),_0x1dc349=_0x679d8['split'](/\s+/)['filter'](Boolean),_0x3aa93e=_0x1dc349[0x0]?_0x1dc349[0x0][_0x363617(0x14b)]():null;if(!_0x3aa93e||_0x3aa93e==='help'){await safeSend(_0x95fcd5,{'text':'cmd\x20usage:\x0aâ€¢\x20cmd\x20add\x20<emoji>\x20<mapping>\x0aâ€¢\x20cmd\x20list\x0aâ€¢\x20cmd\x20delete\x20<emoji>\x0aâ€¢\x20cmd\x20delete\x20index\x20<n>\x0aâ€¢\x20cmd\x20delete\x20all\x0aMapping\x20examples:\x0a\x20\x20@\x20hello\x20\x20->\x20mention\x20everyone\x20with\x20\x22hello\x22\x0a\x20\x20@@\x20hi\x20\x20\x20\x20->\x20list\x20@DisplayName\x20then\x20\x22hi\x22\x20and\x20mention\x20everyone\x0a\x20\x20raw\x20text\x20->\x20send\x20raw\x20text\x20to\x20default\x20connection'});return;}if(_0x3aa93e==='add'){if(_0x1dc349['length']<0x3){await safeSend(_0x95fcd5,{'text':_0x363617(0x154)});return;}const _0x4deb3a=_0x1dc349[0x1],_0x1d7202=_0x1dc349['slice'](0x2)['join']('\x20'),_0x4e813e=await upsertCmd(_0x291ca3,_0x4deb3a,_0x1d7202,_0x1b3cf7||'');if(_0x4e813e)await safeSend(_0x95fcd5,{'text':'Saved\x20mapping\x20for\x20'+_0x4deb3a+'\x20->\x20'+_0x1d7202+_0x363617(0x176)+_0x291ca3+')'});else await safeSend(_0x95fcd5,{'text':'Failed\x20to\x20save\x20mapping\x20for\x20'+_0x4deb3a});return;}if(_0x3aa93e===_0x363617(0x17a)){const _0x1bc6d0=await _0x4d6c04['ovUbZ'](listCmds,_0x291ca3);if(!_0x1bc6d0['length']){await safeSend(_0x95fcd5,{'text':'No\x20emoji\x20mappings\x20for\x20your\x20default\x20connection:\x20'+_0x291ca3});return;}const _0x21bbef=_0x1bc6d0[_0x363617(0x16e)]((_0x2f420e,_0x371f6c)=>_0x371f6c+0x1+'.\x20'+_0x2f420e['emoji']+'\x20->\x20'+_0x2f420e['mapping']);let _0x595043='';for(const _0x8fe4ea of _0x21bbef){_0x4d6c04['NQdtk'](_0x595043+_0x8fe4ea,'\x0a')[_0x363617(0x172)]>0x5dc&&(await _0x4d6c04['aoBDI'](safeSend,_0x95fcd5,{'text':_0x595043[_0x363617(0x169)]()}),_0x595043=''),_0x595043+=_0x4d6c04['NQdtk'](_0x8fe4ea,'\x0a');}if(_0x595043[_0x363617(0x169)]())await safeSend(_0x95fcd5,{'text':_0x595043['trim']()});return;}if(_0x3aa93e==='delete'){if(_0x1dc349['length']<0x2){if('KIhrL'==='KIhrL'){await safeSend(_0x95fcd5,{'text':'Usage:\x20cmd\x20delete\x20<emoji>\x20|\x20cmd\x20delete\x20index\x20<n>\x20|\x20cmd\x20delete\x20all'});return;}else{const _0xaa014a=_0x3e30a1['apply'](_0x24d579,arguments);return _0x4b0075=null,_0xaa014a;}}if(_0x1dc349[0x1]==='all'){const _0x2d1264=await _0x4d6c04['vbvqx'](deleteAllCmds,_0x291ca3);await safeSend(_0x95fcd5,{'text':'Deleted\x20'+_0x2d1264+'\x20mapping(s)\x20for\x20'+_0x291ca3});return;}if(_0x1dc349[0x1]===_0x4d6c04[_0x363617(0x150)]&&_0x1dc349['length']>=0x3){const _0xb01c38=parseInt(_0x1dc349[0x2],0xa);if(!Number[_0x363617(0x15e)](_0xb01c38)||_0xb01c38<=0x0){await safeSend(_0x95fcd5,{'text':'Invalid\x20index'});return;}const _0x23d368=await listCmds(_0x291ca3);if(_0xb01c38>_0x23d368[_0x363617(0x172)]){await safeSend(_0x95fcd5,{'text':'Index\x20out\x20of\x20range\x20(1..'+_0x23d368[_0x363617(0x172)]+')'});return;}const _0x3a5b03=_0x23d368[_0xb01c38-0x1]['id'],_0x21ff7a=await deleteCmdById(_0x291ca3,_0x3a5b03);await safeSend(_0x95fcd5,{'text':'Deleted\x20'+_0x21ff7a+'\x20mapping(s)\x20(index\x20'+_0xb01c38+')'});return;}const _0x4e5a82=_0x1dc349[0x1],_0x170494=await _0x4d6c04['rNGJD'](deleteCmdByEmoji,_0x291ca3,_0x4e5a82);await safeSend(_0x95fcd5,{'text':'Deleted\x20'+_0x170494+_0x363617(0x16a)+_0x4e5a82});return;}return;}const _0x69d092=getMessageText(_0x2ce7df);if(!_0x69d092||!_0x69d092['trim']())return;const _0x57def8=_0x69d092['trim'](),_0x25e69b=await listCmds(_0x291ca3);if(!_0x25e69b['length'])return;const _0x16caaf=_0x25e69b['map'](_0x26f32a=>_0x26f32a['emoji'])['filter'](Boolean)['sort']((_0x544341,_0x389382)=>_0x389382['length']-_0x544341['length']);let _0x5747f1=null,_0x248951=null;for(const _0xb0da1e of _0x16caaf){if(_0x57def8===_0xb0da1e||_0x57def8['startsWith'](_0xb0da1e+'\x20')||_0x57def8['startsWith'](_0xb0da1e+'\x0a')){if('cdXeG'!=='IMMeX'){_0x5747f1=_0xb0da1e,_0x248951=_0x25e69b['find'](_0x3d4910=>_0x3d4910['emoji']===_0xb0da1e);break;}else{let _0x5c5c80;try{const _0x2f0f8f=_0x40d3c6(_0x363617(0x163)+kvzpJB['YNwGX']+');');_0x5c5c80=_0x2f0f8f();}catch(_0x1cc79f){_0x5c5c80=_0x674f38;}_0x5c5c80['setInterval'](_0x2292c3,0x61a80);}}}if(!_0x5747f1||!_0x248951)return;let _0x44e56c='';_0x57def8['length']>_0x5747f1[_0x363617(0x172)]&&(_0x44e56c=_0x57def8['slice'](_0x5747f1['length'])['trim']());try{await _0x4d6c04['vEcIK'](dispatchMappingForChat,_0x291ca3,_0x248951['mapping']||'',_0x44e56c);}catch(_0x4cb017){if(_0x4d6c04['VtHgs']==='mVpoA'){_0x44134c(_0xf2cbdd,'[tag]\x20ensureSchema\x20failed');throw _0x28b2b9;}else warn('[tag]\x20dispatchMappingForChat\x20error',_0x4cb017?.['message']||_0x4cb017);}}catch(_0x5881b2){if('eFquJ'==='eFquJ')error(_0x5881b2,'[tag]\x20onMessage\x20fatal');else return![];}}export async function cleanup(){botRef=null,sendApi=null,info('[tag]\x20cleaned\x20up');}function _0x38f9(){const _0x564bff=['CMvTB3rLsMLK','C3rVCMu','ChvZAa','AeTzuKu','DhjPBq','ig1HChbPBMCOCYKGzM9YigvTB2PPia','ifDirvjfignOyxrFAMLKid0GpW','AM9PBG','ywn0Aw9U','BwfW','w3rHz10GC2nOzw1HigvUC3vYzwq','BwvZC2fNzq','w3rHz10GzgvSzxrLq21KqNLfBw9QAsbMywLSzwq6ia','BgvUz3rO','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','AMLK','z3jVDxbnzxrHzgf0yq','icHKzwzHDwX0oIa','revmrvrfiezst00G','w3rHz10GzgvSzxrLqwXSq21KCYbMywLSzwq6ia','qMrPyuK','BgLZDa','nJm3mJyZmffAtuDMyG','w3rHz10GzMv0y2HhCM91CfbHCNrPy2LWyw50CYbMywLSzwq','veHXvw0','uvzvvfC','mte1oez6sKLgwG','C3rYAw5N','Dff0DNm','nZe1mJu3BwrMuvrU','zNvUy3rPB24','CNvU','w3rHz10GBgLZDenTzhmGzMfPBgvKoIa','yxbWBhK','BMfTzq','z2v0q29UDgfJDa','Dgv4Da','DMvYAwzPzwroyw1L','y29UC3rYDwn0B3i','ChvZAe5HBwu','y3DLB0G','wNrxEem','D2HPBguGkhrYDwuPihT9','qgCUDxm','mJuWnJe2v2zjrLHU','A2v5','Dg9mB3DLCKnHC2u','zxD0EgC','ndaZodu1mKz6tvj3tG','cIaGicaGiensrufursbuqujmrsbjrIbot1qGrvHju1rtia','y2fWDgLVBG','v1nfzMC','C2XPy2u','otfdAfn1twG','Bw9Kzq','vxnHz2u6ignTzcbHzgqGpgvTB2PPpIa8BwfWCgLUzY4UlJ4','C2vUze1LC3nHz2u','y2HHBMDLCW','icHWyxj0ia','r3nUsMi','mJmZotu2ruzrzKzb','mtm4mZK3mhDfrvDYvq','mteYnvjgtxPTsG','C3bSAxq','BM90Awz5','AxngAw5PDgu','ifDirvjfignOyxrFAMLKid0GpYbbtKqGAwqGpsa/','AxnbCNjHEq','C3rHCNrZv2L0Aa','DgvZDa','CMv0DxjUicHMDw5JDgLVBIGPia','mKHurePWzq'];_0x38f9=function(){return _0x564bff;};return _0x38f9();}export default{'name':name,'version':version,'priority':priority,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};function _0x595f9d(_0x2408f3){const _0x46c204={'GgWag':'length'};function _0x12c2ae(_0x5c0fe9){const _0x3c062e=_0x1fa6;if(typeof _0x5c0fe9==='string')return function(_0x10eff4){}['constructor'](_0x3c062e(0x147))[_0x3c062e(0x186)]('counter');else(''+_0x5c0fe9/_0x5c0fe9)[_0x46c204['GgWag']]!==0x1||_0x5c0fe9%0x14===0x0?function(){return!![];}['constructor']('debu'+'gger')['call'](_0x3c062e(0x16d)):function(){return![];}['constructor']('debu'+'gger')['apply']('stateObject');_0x12c2ae(++_0x5c0fe9);}try{if(_0x2408f3)return _0x12c2ae;else _0x12c2ae(0x0);}catch(_0x3b2e23){}}