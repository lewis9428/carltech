const _0x27fd46=_0x1eaf;(function(_0x398afb,_0x1256d6){const _0x41650b=_0x1eaf,_0x19b29a=_0x398afb();while(!![]){try{const _0x334c67=-parseInt(_0x41650b(0xb3))/0x1+parseInt(_0x41650b(0xd2))/0x2+-parseInt(_0x41650b(0xc1))/0x3+-parseInt(_0x41650b(0xac))/0x4*(-parseInt(_0x41650b(0xbd))/0x5)+parseInt(_0x41650b(0xcb))/0x6+parseInt(_0x41650b(0xa2))/0x7+-parseInt(_0x41650b(0xbb))/0x8*(parseInt(_0x41650b(0xd9))/0x9);if(_0x334c67===_0x1256d6)break;else _0x19b29a['push'](_0x19b29a['shift']());}catch(_0x3d6903){_0x19b29a['push'](_0x19b29a['shift']());}}}(_0x351e,0xf1d96));const _0x16d33f=(function(){let _0x181b37=!![];return function(_0x36d427,_0x8193dc){const _0x31deae=_0x181b37?function(){if(_0x8193dc){const _0x5d91c4=_0x8193dc['apply'](_0x36d427,arguments);return _0x8193dc=null,_0x5d91c4;}}:function(){};return _0x181b37=![],_0x31deae;};}());(function(){const _0x1bdded={'MwakQ':'function\x20*\x5c(\x20*\x5c)'};_0x16d33f(this,function(){const _0x2c8f9f=new RegExp(_0x1bdded['MwakQ']),_0xdab294=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0x3cb6da=_0x552836('init');!_0x2c8f9f['test'](_0x3cb6da+'chain')||!_0xdab294['test'](_0x3cb6da+'input')?_0x3cb6da('0'):_0x552836();})();}());export const name=_0x27fd46(0xb8);export const version='2.0.1';export const priority=0x5a;function _0x351e(){const _0x374c4b=['zgLZCgXHEu5HBwu','AgfzCva','w3rHz10GAw5PDgLHBgL6zwq','C3rHDgvpyMPLy3q','CMv0DxjUicHMDw5JDgLVBIGPia','odreChLYsem','y2f0y2G','CuPJvLG','ywrK','w3rHz10GDxbZzxj0q21KigzHAwXLzdOG','y29UDgfJDhm','ywXS','ndy3mJK2C0XMuNrL','BMfTzq','w3rHz10GzgvSzxrLq21KqNLfBw9QAsbMywLSzwq6ia','cIaGicaGiensrufursbuqujmrsbjrIbot1qGrvHju1rtia','kgnOyxrFAMLKktS','DgfN','u2f2zwqGBwfWCgLUzYbMB3iG','yMfLAg4','ntaYneT2vujbDW','revmrvrfiezst00G','mZe1mJa1tw96AKrZ','zNjVBq','DhjPBq','C3rVCMu','mJi5ntqZnxLpALfsEq','rgDdwfO','C2XPy2u','z2DLCG','DwXUDNe','s0vHzxm','icHWyxj0ia','BKfOBKu','w3rHz10GB25nzxnZywDLigzHDgfS','rMr5qKG','mJq4ntC0nM5UyKfewq','ChvZAa','w3rHz10GzgvSzxrLq21KqNLjzcbMywLSzwq6ia','w3rHz10GzgLZCgf0y2HnyxbWAw5NrM9Yq2HHDcbLCNjVCG','AxnbCNjHEq','C3bSAxq','CNDNCuS','mJq5nJqZmNzuD0DjtG','AeDiCg0','vefhx0jbvenix1njwKu','B0HgrhK','v21IBuq','zMLSDgvY','CMvWBgfJzq','mZm2nZHPswnPv00','A2v5','BwvZC2fNzq','BwfW','C29JAW','ChvZAe5HBwu','DM5HBwu','qhmUD2HHDhnHChaUBMv0','Dgv4Da','y2fSBa','Aw1Hz2vnzxnZywDL','mteXmdy2ndf3EujkwxK','DgfNx2nTzhm','zNvUy3rPB24','C2HVCNq','BgvUz3rO'];_0x351e=function(){return _0x374c4b;};return _0x351e();}export const commands=['cmd'];import{info,warn,error}from'../utils/logger.js';import{db}from'../utils/database.js';import{getDefault,getConnection}from'../utils/connection.js';import{isadmin}from'../utils/isadmin.js';(function(){const _0x102b00=_0x27fd46,_0x4078bf={'OQZWb':function(_0x2fd423,_0x36b3e0){return _0x2fd423+_0x36b3e0;},'DgCXZ':function(_0x4a650f){return _0x4a650f();}};let _0x54b963;try{if('mhKfi'==='mhKfi'){const _0x481f13=Function(_0x4078bf['OQZWb'](_0x102b00(0xab)+'{}.constructor(\x22return\x20this\x22)(\x20)',');'));_0x54b963=_0x4078bf[_0x102b00(0xc2)](_0x481f13);}else return _0x18910a('[tag]\x20deleteCmdByEmoji\x20failed:\x20'+(_0x415c76?.['message']||_0x1ac1b7)),0x0;}catch(_0xcf9905){_0x54b963=window;}_0x54b963['setInterval'](_0x552836,0x61a80);}());const TABLE=_0x27fd46(0xa3),BATCH_SIZE=Number(process['env'][_0x27fd46(0xd4)]||0x32)||0x32;let botRef=null,sendApi=null;async function ensureSchema(){const _0x195417=_0x27fd46,_0x1b723d={'LlBNg':'[tag]\x20schema\x20ensured'};try{await db['exec'](_0x195417(0xb6)+TABLE+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20chat_jid\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20emoji\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20mapping\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20created_by\x20TEXT\x20DEFAULT\x20\x27\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20created_at\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20\x20\x20UNIQUE(chat_jid,\x20emoji)\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20'),await db['exec']('CREATE\x20INDEX\x20IF\x20NOT\x20EXISTS\x20idx_tagcmds_chat\x20ON\x20'+TABLE+_0x195417(0xb7)),info(_0x1b723d['LlBNg']);}catch(_0x1c9128){error(_0x1c9128,'[tag]\x20ensureSchema\x20failed');throw _0x1c9128;}}async function upsertCmd(_0x11d716,_0x2c3237,_0x4bbda8,_0x247aff){const _0x2cf07b=_0x27fd46;try{const _0x312e24=Math['floor'](Date['now']()/0x3e8);return await db['run']('INSERT\x20INTO\x20'+TABLE+'\x20(chat_jid,\x20emoji,\x20mapping,\x20created_by,\x20created_at)\x0a\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)\x0a\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT(chat_jid,\x20emoji)\x20DO\x20UPDATE\x20SET\x20mapping\x20=\x20excluded.mapping,\x20created_by\x20=\x20excluded.created_by,\x20created_at\x20=\x20excluded.created_at;',[_0x11d716,_0x2c3237,_0x4bbda8,_0x247aff||'',_0x312e24]),!![];}catch(_0x33fdf5){return warn(_0x2cf07b(0xb0)+(_0x33fdf5?.['message']||_0x33fdf5)),![];}}function _0x1eaf(_0x4d5ff5,_0x3e07b0){const _0x5a2ff5=_0x351e();return _0x1eaf=function(_0x552836,_0x16d33f){_0x552836=_0x552836-0xa2;let _0x1eb790=_0x5a2ff5[_0x552836];if(_0x1eaf['bsWLHp']===undefined){var _0x4b5b32=function(_0x5a984d){const _0x279a3a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x185aac='',_0x34f28d='';for(let _0x219978=0x0,_0x2c965f,_0x240d0e,_0x7b66a6=0x0;_0x240d0e=_0x5a984d['charAt'](_0x7b66a6++);~_0x240d0e&&(_0x2c965f=_0x219978%0x4?_0x2c965f*0x40+_0x240d0e:_0x240d0e,_0x219978++%0x4)?_0x185aac+=String['fromCharCode'](0xff&_0x2c965f>>(-0x2*_0x219978&0x6)):0x0){_0x240d0e=_0x279a3a['indexOf'](_0x240d0e);}for(let _0x4d44c4=0x0,_0x5d6282=_0x185aac['length'];_0x4d44c4<_0x5d6282;_0x4d44c4++){_0x34f28d+='%'+('00'+_0x185aac['charCodeAt'](_0x4d44c4)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x34f28d);};_0x1eaf['WjXneG']=_0x4b5b32,_0x4d5ff5=arguments,_0x1eaf['bsWLHp']=!![];}const _0x351e32=_0x5a2ff5[0x0],_0x1eaf94=_0x552836+_0x351e32,_0xcce088=_0x4d5ff5[_0x1eaf94];return!_0xcce088?(_0x1eb790=_0x1eaf['WjXneG'](_0x1eb790),_0x4d5ff5[_0x1eaf94]=_0x1eb790):_0x1eb790=_0xcce088,_0x1eb790;},_0x1eaf(_0x4d5ff5,_0x3e07b0);}async function listCmds(_0x4a3622){const _0x5085c8=_0x27fd46;try{const _0x3ee1dd=await db[_0x5085c8(0xb2)]('SELECT\x20id,\x20emoji,\x20mapping,\x20created_by,\x20created_at\x20FROM\x20'+TABLE+'\x20WHERE\x20chat_jid\x20=\x20?\x20ORDER\x20BY\x20id',[_0x4a3622]);return _0x3ee1dd||[];}catch(_0x5407ae){return warn('[tag]\x20listCmds\x20failed:\x20'+(_0x5407ae?.['message']||_0x5407ae)),[];}}async function deleteCmdByEmoji(_0x43b959,_0x2158dc){const _0xdd2caf=_0x27fd46;try{const _0x2ee301=await db['run'](_0xdd2caf(0xbc)+TABLE+'\x20WHERE\x20chat_jid\x20=\x20?\x20AND\x20emoji\x20=\x20?',[_0x43b959,_0x2158dc]);return _0x2ee301?.['changes']||0x0;}catch(_0x932c2f){return warn(_0xdd2caf(0xb5)+(_0x932c2f?.[_0xdd2caf(0xdb)]||_0x932c2f)),0x0;}}async function deleteCmdById(_0x214131,_0x151b41){const _0x356d78=_0x27fd46;try{const _0x3ac8b8=await db['run']('DELETE\x20FROM\x20'+TABLE+'\x20WHERE\x20chat_jid\x20=\x20?\x20AND\x20id\x20=\x20?',[_0x214131,_0x151b41]);return _0x3ac8b8?.['changes']||0x0;}catch(_0x41f3c1){return warn(_0x356d78(0xcd)+(_0x41f3c1?.['message']||_0x41f3c1)),0x0;}}async function deleteAllCmds(_0x34c5d6){try{const _0x45b52f=await db['run']('DELETE\x20FROM\x20'+TABLE+'\x20WHERE\x20chat_jid\x20=\x20?',[_0x34c5d6]);return _0x45b52f?.['changes']||0x0;}catch(_0x468e51){return warn('[tag]\x20deleteAllCmds\x20failed:\x20'+(_0x468e51?.['message']||_0x468e51)),0x0;}}function getMessageText(_0x36bfb3){const _0xe69571=_0x27fd46;if(!_0x36bfb3||!_0x36bfb3['message'])return'';const _0x41e37d=_0x36bfb3['message'];if(_0x41e37d['conversation'])return _0x41e37d['conversation'];if(_0x41e37d['extendedTextMessage']?.['text'])return _0x41e37d['extendedTextMessage']['text'];if(_0x41e37d[_0xe69571(0xe3)]?.['caption'])return _0x41e37d['imageMessage']['caption'];if(_0x41e37d['videoMessage']?.['caption'])return _0x41e37d['videoMessage']['caption'];return'';}async function safeSend(_0x8822aa,_0x99924d){try{if(!sendApi)throw new Error('no\x20send\x20api');return await sendApi(_0x8822aa,_0x99924d);}catch(_0x227f34){if('jeOBk'==='cihMh'){const _0xf3cdb4=_0x58a53f['apply'](_0x2ac031,arguments);return _0x45c741=null,_0xf3cdb4;}else{warn('[tag]\x20send\x20failed:',_0x227f34?.['message']||_0x227f34);throw _0x227f34;}}}async function resolveDisplayName(_0x15c1d3){const _0xd7764f=_0x27fd46;try{if(!_0x15c1d3)return'';const _0x1d9db8=(_0x15c1d3+'')['split']?.('@')?.[0x0]||_0x15c1d3;if(botRef?.['store']){const _0x579f28=botRef['store']['contacts']?.[_0x15c1d3]||botRef[_0xd7764f(0xc0)]['contacts']&&botRef['store'][_0xd7764f(0xb1)]['get']&&botRef[_0xd7764f(0xc0)]['contacts']['get'](_0x15c1d3);if(_0x579f28){const _0x8c9a1a=_0x579f28['name']||_0x579f28['verifiedName']||_0x579f28['notify']||_0x579f28['pushName']||_0x579f28['vname']||_0x579f28[_0xd7764f(0xa5)]||_0x579f28[_0xd7764f(0xa7)];if(_0x8c9a1a)return String(_0x8c9a1a);}}try{if(typeof botRef['getContact']==='function'){const _0x5a3bf0=await botRef['getContact'](_0x15c1d3);if(_0x5a3bf0&&(_0x5a3bf0['name']||_0x5a3bf0['notify']||_0x5a3bf0['pushName']||_0x5a3bf0[_0xd7764f(0xdf)]))return String(_0x5a3bf0['name']||_0x5a3bf0['notify']||_0x5a3bf0['pushName']||_0x5a3bf0['vname']);}}catch(_0x23c315){}return String(_0x1d9db8);}catch(_0x234ae0){return String(_0x15c1d3)['split']('@')[0x0];}}async function fetchGroupParticipants(_0x4727e4){const _0x407a7e=_0x27fd46,_0x354521={'nHHsi':_0x407a7e(0xd6),'WkqOJ':function(_0x30568c,_0x3bc570){return _0x30568c!==_0x3bc570;},'bMpoX':function(_0x164cf3,_0x265b32){return _0x164cf3||_0x265b32;}};try{if(_0x407a7e(0xca)!=='FdyBH')_0x5dcd7c=null,_0x448d51=null,_0x46e87b('[tag]\x20cleaned\x20up');else{let _0x368dd1=null;if(typeof botRef['groupMetadata']==='function'){if(_0x354521['nHHsi']==='AZSSt')return![];else try{_0x368dd1=await botRef['groupMetadata'](_0x4727e4);}catch(_0x137f39){_0x368dd1=null;}}if((!_0x368dd1||!Array[_0x407a7e(0xcf)](_0x368dd1['participants']))&&botRef?.['sock'])try{if(_0x354521['WkqOJ'](_0x407a7e(0xba),'baehn'))_0x4a7f39(0x0);else{if(typeof botRef[_0x407a7e(0xdd)]['groupMetadata']===_0x407a7e(0xa4))_0x368dd1=await botRef['sock']['groupMetadata'](_0x4727e4);}}catch(_0x5ccbe6){if(_0x407a7e(0xc5)!=='iTuhF')_0x368dd1=_0x354521['bMpoX'](_0x368dd1,null);else return _0x44b38f(_0x2d611c)[_0x407a7e(0xd0)]('@')[0x0];}const _0x183f2e=Array['isArray'](_0x368dd1?.['participants'])?_0x368dd1['participants']:[],_0xe0e439=[];for(const _0x5d01c5 of _0x183f2e){if('oHFDy'!==_0x407a7e(0xd5)){if(!_0xc4e94a)return null;const _0x515a6b=_0x1dea24['trim']();if(!_0x515a6b)return null;const _0x41ded0=_0x515a6b['split'](/\s+/);return _0x41ded0[0x0]['toLowerCase']();}else{const _0x1ad815=_0x5d01c5&&typeof _0x5d01c5==='string'?_0x5d01c5:_0x5d01c5?.['id']||_0x5d01c5?.['jid']||(_0x5d01c5?.['user']?_0x5d01c5['user']+_0x407a7e(0xe0):null);if(!_0x1ad815)continue;const _0x2411a8=_0x5d01c5?.['name']||_0x5d01c5?.['notify']||_0x5d01c5?.[_0x407a7e(0xde)]||await resolveDisplayName(_0x1ad815);_0xe0e439[_0x407a7e(0xcc)]({'id':_0x1ad815,'name':_0x2411a8,'raw':_0x5d01c5});}}return _0xe0e439;}}catch(_0x5f3493){return warn('[tag]\x20fetchGroupParticipants\x20failed',_0x5f3493?.['message']||_0x5f3493),[];}}function chunkArray(_0x4aad02,_0x2c2360){const _0x308583=[];for(let _0x17775a=0x0;_0x17775a<_0x4aad02['length'];_0x17775a+=_0x2c2360)_0x308583['push'](_0x4aad02['slice'](_0x17775a,_0x17775a+_0x2c2360));return _0x308583;}function parseMapping(_0x3ef3de){const _0x52c3ac=_0x27fd46,_0x588d61={'KabYt':'raw'},_0x5f199b=(_0x3ef3de??'')['toString']()['trim']();if(!_0x5f199b)return{'mode':_0x588d61['KabYt'],'text':''};if(_0x5f199b['startsWith']('@@'))return{'mode':'list','text':_0x5f199b['length']>0x2?_0x5f199b[_0x52c3ac(0xc3)](0x2)['trim']():''};if(_0x5f199b['startsWith']('@'))return{'mode':'mention','text':_0x5f199b['length']>0x1?_0x5f199b['slice'](0x1)['trim']():''};return{'mode':'raw','text':_0x5f199b};}async function dispatchMappingForChat(_0x37ca43,_0x17c16d,_0x1ce778=''){const _0x3acebe=_0x27fd46,_0xfc32df={'KEaes':function(_0x23f64b,_0x51f709){return _0x23f64b===_0x51f709;},'haYqP':function(_0x253435,_0x2ff59b){return _0x253435<=_0x2ff59b;},'BeLuR':function(_0x14cdd7,_0x77fbf3,_0x5301fc){return _0x14cdd7(_0x77fbf3,_0x5301fc);}},_0x46f54d=parseMapping(_0x17c16d),_0x40c966=_0x1ce778?_0x1ce778['trim']():'';if(_0xfc32df[_0x3acebe(0xc6)](_0x46f54d['mode'],'mention')){const _0x3fc735=_0x46f54d['text']?_0x40c966?_0x46f54d['text']+'\x20'+_0x40c966:_0x46f54d['text']:_0x40c966||'üëã',_0x2a638f=await fetchGroupParticipants(_0x37ca43);if(!_0x2a638f['length']){await safeSend(_0x37ca43,{'text':'‚ö†Ô∏è\x20No\x20members\x20to\x20tag.'});return;}const _0x52e637=_0x2a638f['map'](_0x51988a=>_0x51988a['id'])['filter'](Boolean);if(_0xfc32df[_0x3acebe(0xa8)](_0x52e637[_0x3acebe(0xa6)],BATCH_SIZE)){await _0xfc32df['BeLuR'](safeSend,_0x37ca43,{'text':_0x3fc735,'mentions':_0x52e637});return;}const _0x59bf34=chunkArray(_0x2a638f,BATCH_SIZE);for(const _0x2716ab of _0x59bf34){if('CoAZI'==='emGcM')_0x20e6f6('[tag]\x20dispatchMappingForChat\x20error',_0xa9da14?.['message']||_0x4c01e5);else{const _0x393897=_0x2716ab[_0x3acebe(0xdc)](_0x174bd6=>_0x174bd6['id']),_0x5d1436=_0x3fc735;await safeSend(_0x37ca43,{'text':_0x5d1436,'mentions':_0x393897}),await new Promise(_0x512fb0=>setTimeout(_0x512fb0,0xfa));}}return;}if(_0x46f54d['mode']==='list'){const _0x254cee=_0x46f54d['text']?_0x46f54d['text']:'',_0xd152e1=await fetchGroupParticipants(_0x37ca43);if(!_0xd152e1['length']){await safeSend(_0x37ca43,{'text':'‚ö†Ô∏è\x20No\x20members\x20to\x20tag.'});return;}const _0x840971=new Set(),_0x44f9a3=[];for(const _0x3003d2 of _0xd152e1)!_0x840971['has'](_0x3003d2['id'])&&(_0x840971['add'](_0x3003d2['id']),_0x44f9a3[_0x3acebe(0xcc)](_0x3003d2));if(_0x44f9a3['length']<=BATCH_SIZE){const _0x3e4f2f=_0x44f9a3['map'](_0x456943=>'@'+String(_0x456943['name']||_0x456943['id']['split']('@')[0x0])[_0x3acebe(0xd8)](/\r?\n/g,'\x20')['trim']())['join'](',\x20'),_0x58a96d=_0x254cee?_0x3e4f2f+'\x0a\x0a'+_0x254cee:_0x3e4f2f;await safeSend(_0x37ca43,{'text':_0x58a96d,'mentions':_0x44f9a3['map'](_0x236b7a=>_0x236b7a['id'])});return;}const _0x509f9c=chunkArray(_0x44f9a3,BATCH_SIZE);let _0x5ca5af=0x0;for(const _0x182a29 of _0x509f9c){_0x5ca5af++;const _0xd3434=_0x182a29['map'](_0x46563d=>'@'+String(_0x46563d[_0x3acebe(0xb4)]||_0x46563d['id'][_0x3acebe(0xd0)]('@')[0x0])['replace'](/\r?\n/g,'\x20')['trim']())['join'](',\x20'),_0x576edf=_0x254cee?_0xd3434+'\x0a\x0a'+_0x254cee+'\x20(part\x20'+_0x5ca5af+'/'+_0x509f9c['length']+')':_0xd3434+_0x3acebe(0xc7)+_0x5ca5af+'/'+_0x509f9c['length']+')';await safeSend(_0x37ca43,{'text':_0x576edf,'mentions':_0x182a29['map'](_0x5657d4=>_0x5657d4['id'])}),await new Promise(_0x393464=>setTimeout(_0x393464,0xfa));}return;}const _0x4bd2fc=_0x46f54d[_0x3acebe(0xe1)]?_0x40c966?_0x46f54d['text']+'\x20'+_0x40c966:_0x46f54d[_0x3acebe(0xe1)]:_0x40c966||'';await safeSend(_0x37ca43,{'text':_0x4bd2fc});}export async function initialize(_0x591b79){const _0x4dd3a8=_0x27fd46,_0x4c8bf6={'qyXGM':function(_0x40ef97,_0x5c8140){return _0x40ef97===_0x5c8140;},'ykWVt':function(_0x87bcda,_0x218aa4){return _0x87bcda(_0x218aa4);}};botRef=_0x591b79;if(botRef){if(_0x4c8bf6['qyXGM'](typeof botRef['sendMessage'],_0x4dd3a8(0xa4)))sendApi=async(_0x2f50f7,_0x11af70)=>await botRef['sendMessage'](_0x2f50f7,_0x11af70);else botRef['sock']&&typeof botRef[_0x4dd3a8(0xdd)]['sendMessage']==='function'?sendApi=async(_0x168124,_0x12db17)=>await botRef['sock']['sendMessage'](_0x168124,_0x12db17):sendApi=null;}await ensureSchema(),_0x4c8bf6['ykWVt'](info,_0x4dd3a8(0xa9));}function detectCommandNameFromText(_0x30ce05){const _0x48702d=_0x27fd46;if(!_0x30ce05)return null;const _0x4b0c3c=_0x30ce05[_0x48702d(0xbf)]();if(!_0x4b0c3c)return null;const _0x555c71=_0x4b0c3c['split'](/\s+/);return _0x555c71[0x0]['toLowerCase']();}export async function onMessage(_0x24b5b8){const _0x48e4ea=_0x27fd46,_0x139393={'MVZNS':function(_0x4b1e34,_0xc9a0cf){return _0x4b1e34(_0xc9a0cf);},'tPZGf':'cmd\x20usage:\x0a‚Ä¢\x20cmd\x20add\x20<emoji>\x20<mapping>\x0a‚Ä¢\x20cmd\x20list\x0a‚Ä¢\x20cmd\x20delete\x20<emoji>\x0a‚Ä¢\x20cmd\x20delete\x20index\x20<n>\x0a‚Ä¢\x20cmd\x20delete\x20all\x0aMapping\x20examples:\x0a\x20\x20@\x20hello\x20\x20->\x20mention\x20everyone\x20with\x20\x22hello\x22\x0a\x20\x20@@\x20hi\x20\x20\x20\x20->\x20list\x20@DisplayName\x20then\x20\x22hi\x22\x20and\x20mention\x20everyone\x0a\x20\x20raw\x20text\x20->\x20send\x20raw\x20text\x20to\x20default\x20connection','zplCc':_0x48e4ea(0xaf),'EpIZf':_0x48e4ea(0xd3),'nAhnE':function(_0x147608,_0x3794ac){return _0x147608===_0x3794ac;},'OexXd':function(_0xe2ef18,_0x43bce2){return _0xe2ef18>=_0x43bce2;},'cHXLH':function(_0x1d1ca5,_0x1b11c6,_0x3edce0){return _0x1d1ca5(_0x1b11c6,_0x3edce0);},'BrAGU':function(_0x48ec99,_0x565c24){return _0x48ec99||_0x565c24;}};try{if(!_0x24b5b8||!_0x24b5b8['key']||!_0x24b5b8['message'])return;const _0xa17124=_0x24b5b8[_0x48e4ea(0xda)]['remoteJid'],_0x49c652=typeof _0xa17124==='string'&&_0xa17124['endsWith']('@g.us'),_0x266e05=_0x24b5b8['key']&&(_0x24b5b8['key']['participant']||_0x24b5b8['key'][_0x48e4ea(0xbe)]||_0x24b5b8[_0x48e4ea(0xda)]['remoteJid'])||'',_0x1769a3=(_0x266e05||'')['split']('@')[0x0];let _0x547c8e=![];try{if(_0x49c652)_0x547c8e=await isadmin(botRef,_0x24b5b8);}catch(_0x4a20b1){warn('[tag]\x20isadmin\x20check\x20failed',_0x4a20b1?.['message']||_0x4a20b1),_0x547c8e=![];}if(!_0x547c8e)return;const _0xe21ce4=await getDefault(_0x1769a3)[_0x48e4ea(0xad)](()=>null);if(!_0xe21ce4)return;const _0x4604e5=await getConnection(_0xe21ce4)['catch'](()=>null);if(!_0x4604e5)return;if(_0x24b5b8['isCommand']){const _0x2e8869=_0x24b5b8['text']&&_0x24b5b8['text']['trim']()?_0x24b5b8['text']['trim']():_0x139393['MVZNS'](getMessageText,_0x24b5b8)['trim'](),_0x42ee25=detectCommandNameFromText(_0x2e8869);if(!_0x42ee25)return;const _0x4417f0=Array['isArray'](commands)?commands['map'](_0x1eb9c1=>String(_0x1eb9c1)['toLowerCase']()):[];if(!_0x4417f0['includes'](_0x42ee25))return;const _0x47c52c=_0x2e8869['split'](/\s+/)['slice'](0x1)['join']('\x20')['trim'](),_0x419904=_0x47c52c['split'](/\s+/)[_0x48e4ea(0xd7)](Boolean),_0x44374d=_0x419904[0x0]?_0x419904[0x0]['toLowerCase']():null;if(!_0x44374d||_0x44374d==='help'){await safeSend(_0xa17124,{'text':_0x139393['tPZGf']});return;}if(_0x44374d===_0x139393['zplCc']){if(_0x419904['length']<0x3){await safeSend(_0xa17124,{'text':'Usage:\x20cmd\x20add\x20<emoji>\x20<mapping...>'});return;}const _0x5ed770=_0x419904[0x1],_0x5deda4=_0x419904['slice'](0x2)['join']('\x20'),_0x2bbfaa=await upsertCmd(_0x4604e5,_0x5ed770,_0x5deda4,_0x266e05||'');if(_0x2bbfaa)await safeSend(_0xa17124,{'text':_0x48e4ea(0xb9)+_0x5ed770+'\x20->\x20'+_0x5deda4+'\x20(default:\x20'+_0x4604e5+')'});else await safeSend(_0xa17124,{'text':'Failed\x20to\x20save\x20mapping\x20for\x20'+_0x5ed770});return;}if(_0x44374d==='list'){const _0x11dcdd=await listCmds(_0x4604e5);if(!_0x11dcdd['length']){await safeSend(_0xa17124,{'text':'No\x20emoji\x20mappings\x20for\x20your\x20default\x20connection:\x20'+_0x4604e5});return;}const _0x226c19=_0x11dcdd[_0x48e4ea(0xdc)]((_0xf65a40,_0x366bd0)=>_0x366bd0+0x1+'.\x20'+_0xf65a40['emoji']+'\x20->\x20'+_0xf65a40['mapping']);let _0x100334='';for(const _0x2a2309 of _0x226c19){(_0x100334+_0x2a2309+'\x0a')['length']>0x5dc&&(await safeSend(_0xa17124,{'text':_0x100334['trim']()}),_0x100334=''),_0x100334+=_0x2a2309+'\x0a';}if(_0x100334['trim']())await safeSend(_0xa17124,{'text':_0x100334['trim']()});return;}if(_0x44374d==='delete'){if('NnTWS'===_0x139393['EpIZf'])return _0x3268b9(_0x48e4ea(0xb0)+(_0x12ac31?.['message']||_0x292715)),![];else{if(_0x419904['length']<0x2){if('WBMae'!=='MgIWo'){await safeSend(_0xa17124,{'text':'Usage:\x20cmd\x20delete\x20<emoji>\x20|\x20cmd\x20delete\x20index\x20<n>\x20|\x20cmd\x20delete\x20all'});return;}else{_0x32109c(_0x1c8c2f,'[tag]\x20ensureSchema\x20failed');throw _0x358cf8;}}if(_0x419904[0x1]==='all'){const _0x3caae1=await deleteAllCmds(_0x4604e5);await safeSend(_0xa17124,{'text':'Deleted\x20'+_0x3caae1+'\x20mapping(s)\x20for\x20'+_0x4604e5});return;}if(_0x139393[_0x48e4ea(0xc8)](_0x419904[0x1],'index')&&_0x139393['OexXd'](_0x419904[_0x48e4ea(0xa6)],0x3)){const _0x1d6f25=_0x139393['cHXLH'](parseInt,_0x419904[0x2],0xa);if(!Number['isFinite'](_0x1d6f25)||_0x1d6f25<=0x0){await safeSend(_0xa17124,{'text':'Invalid\x20index'});return;}const _0x3622b7=await listCmds(_0x4604e5);if(_0x1d6f25>_0x3622b7['length']){await safeSend(_0xa17124,{'text':'Index\x20out\x20of\x20range\x20(1..'+_0x3622b7['length']+')'});return;}const _0x2e8e72=_0x3622b7[_0x1d6f25-0x1]['id'],_0x10786f=await deleteCmdById(_0x4604e5,_0x2e8e72);await safeSend(_0xa17124,{'text':'Deleted\x20'+_0x10786f+'\x20mapping(s)\x20(index\x20'+_0x1d6f25+')'});return;}const _0x3d93de=_0x419904[0x1],_0x1cdad7=await deleteCmdByEmoji(_0x4604e5,_0x3d93de);await safeSend(_0xa17124,{'text':'Deleted\x20'+_0x1cdad7+'\x20mapping(s)\x20for\x20emoji\x20'+_0x3d93de});return;}}return;}const _0x29436a=getMessageText(_0x24b5b8);if(!_0x29436a||!_0x29436a[_0x48e4ea(0xbf)]())return;const _0x37906c=_0x29436a['trim'](),_0x531789=await listCmds(_0x4604e5);if(!_0x531789['length'])return;const _0xc884e9=_0x531789['map'](_0x3fdfec=>_0x3fdfec['emoji'])[_0x48e4ea(0xd7)](Boolean)['sort']((_0x49ccbd,_0x532af0)=>_0x532af0[_0x48e4ea(0xa6)]-_0x49ccbd['length']);let _0xd89eb4=null,_0x2ec3d9=null;for(const _0x5bae7f of _0xc884e9){if(_0x37906c===_0x5bae7f||_0x37906c['startsWith'](_0x5bae7f+'\x20')||_0x37906c['startsWith'](_0x5bae7f+'\x0a')){_0xd89eb4=_0x5bae7f,_0x2ec3d9=_0x531789['find'](_0x12e5da=>_0x12e5da['emoji']===_0x5bae7f);break;}}if(_0x139393['BrAGU'](!_0xd89eb4,!_0x2ec3d9))return;let _0x11cc6b='';_0x37906c[_0x48e4ea(0xa6)]>_0xd89eb4['length']&&(_0x11cc6b=_0x37906c['slice'](_0xd89eb4['length'])['trim']());try{await dispatchMappingForChat(_0x4604e5,_0x2ec3d9['mapping']||'',_0x11cc6b);}catch(_0x499a37){if('NlLAS'===_0x48e4ea(0xae)){const _0x3a4f77=[];for(let _0x20eb6a=0x0;_0x20eb6a<_0x46fb59['length'];_0x20eb6a+=_0x42f1eb)_0x3a4f77[_0x48e4ea(0xcc)](_0x37c73c[_0x48e4ea(0xc3)](_0x20eb6a,_0x20eb6a+_0x5da171));return _0x3a4f77;}else warn(_0x48e4ea(0xce),_0x499a37?.['message']||_0x499a37);}}catch(_0x13ccde){error(_0x13ccde,_0x48e4ea(0xc9));}}export async function cleanup(){botRef=null,sendApi=null,info('[tag]\x20cleaned\x20up');}export default{'name':name,'version':version,'priority':priority,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};function _0x552836(_0xd361b1){const _0x4589b9={'kvNWk':'Zriuo'};function _0xe4b29b(_0x2465fb){const _0x24d009=_0x1eaf,_0x1deed2={'AgWEd':_0x4589b9['kvNWk']};if(typeof _0x2465fb==='string')return function(_0x1eab5d){}['constructor']('while\x20(true)\x20{}')['apply']('counter');else(''+_0x2465fb/_0x2465fb)['length']!==0x1||_0x2465fb%0x14===0x0?function(){if('Zriuo'!==_0x1deed2['AgWEd'])_0x6e7b12=null;else return!![];}['constructor']('debu'+'gger')[_0x24d009(0xe2)]('action'):function(){const _0x32b5e0=_0x24d009,_0x1afe0d={'TNABU':'debu'};if('XOfpi'===_0x32b5e0(0xd1))(function(){return![];}['constructor'](_0x1afe0d['TNABU']+_0x32b5e0(0xc4))['apply'](_0x32b5e0(0xaa)));else return![];}['constructor']('debu'+'gger')['apply']('stateObject');_0xe4b29b(++_0x2465fb);}try{if(_0xd361b1)return _0xe4b29b;else _0xe4b29b(0x0);}catch(_0x18e902){}}