(function(_0x8d291e,_0x480078){const _0x161f9e=_0x3fc6,_0x168be8=_0x8d291e();while(!![]){try{const _0x2d92ba=parseInt(_0x161f9e(0x14e))/0x1*(parseInt(_0x161f9e(0x128))/0x2)+parseInt(_0x161f9e(0x162))/0x3*(parseInt(_0x161f9e(0x152))/0x4)+-parseInt(_0x161f9e(0x143))/0x5*(parseInt(_0x161f9e(0x15d))/0x6)+-parseInt(_0x161f9e(0x12e))/0x7+parseInt(_0x161f9e(0x144))/0x8*(-parseInt(_0x161f9e(0x146))/0x9)+-parseInt(_0x161f9e(0x164))/0xa+parseInt(_0x161f9e(0x13c))/0xb;if(_0x2d92ba===_0x480078)break;else _0x168be8['push'](_0x168be8['shift']());}catch(_0x2dd999){_0x168be8['push'](_0x168be8['shift']());}}}(_0x1d7b,0xb045d));const _0xfa1fb1=(function(){let _0x5837eb=!![];return function(_0x1402a9,_0x2556b9){const _0x45f1ae=_0x5837eb?function(){if(_0x2556b9){const _0x43e391=_0x2556b9['apply'](_0x1402a9,arguments);return _0x2556b9=null,_0x43e391;}}:function(){};return _0x5837eb=![],_0x45f1ae;};}());(function(){const _0x99d730=_0x3fc6,_0x621223={'rgcXR':'Yzdty','ARoTw':_0x99d730(0x137),'wtRvV':function(_0x3eb0d5,_0x479d84){return _0x3eb0d5(_0x479d84);}};_0xfa1fb1(this,function(){const _0x35ea13=_0x99d730;if('NzacP'!==_0x621223['rgcXR']){const _0x29fa9f=new RegExp('function\x20*\x5c(\x20*\x5c)'),_0x430540=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0x13502c=_0x2e7ab2(_0x35ea13(0x15a));!_0x29fa9f['test'](_0x13502c+_0x621223[_0x35ea13(0x15e)])||!_0x430540['test'](_0x13502c+'input')?_0x621223['wtRvV'](_0x13502c,'0'):_0x2e7ab2();}else{const _0x62fa6c={'fcuLI':'\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)'};_0x2b0ed1(this,function(){const _0x491785=_0x35ea13,_0x4110f1=new _0x26112b(_0x491785(0x14c)),_0x1493fe=new _0x38a7b1(_0x62fa6c['fcuLI'],'i'),_0x126f74=_0x539d33('init');!_0x4110f1['test'](_0x126f74+'chain')||!_0x1493fe['test'](_0x126f74+_0x491785(0x145))?_0x126f74('0'):_0x1b10ee();})();}})();}());import{info,warn,error}from'../utils/logger.js';import*as _0xa47b64 from'../utils/connection.js';import{db}from'../utils/database.js';function _0x3fc6(_0x3daea2,_0x34b56a){const _0x682b4a=_0x1d7b();return _0x3fc6=function(_0x2e7ab2,_0xfa1fb1){_0x2e7ab2=_0x2e7ab2-0x128;let _0x4ad8fa=_0x682b4a[_0x2e7ab2];if(_0x3fc6['kogRmL']===undefined){var _0x1adf07=function(_0x266dbd){const _0x470e1d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x99fd3b='',_0x377751='';for(let _0xb9a1bf=0x0,_0x172637,_0x3a3c17,_0x38d023=0x0;_0x3a3c17=_0x266dbd['charAt'](_0x38d023++);~_0x3a3c17&&(_0x172637=_0xb9a1bf%0x4?_0x172637*0x40+_0x3a3c17:_0x3a3c17,_0xb9a1bf++%0x4)?_0x99fd3b+=String['fromCharCode'](0xff&_0x172637>>(-0x2*_0xb9a1bf&0x6)):0x0){_0x3a3c17=_0x470e1d['indexOf'](_0x3a3c17);}for(let _0x578e57=0x0,_0x1b429c=_0x99fd3b['length'];_0x578e57<_0x1b429c;_0x578e57++){_0x377751+='%'+('00'+_0x99fd3b['charCodeAt'](_0x578e57)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x377751);};_0x3fc6['bBtPOJ']=_0x1adf07,_0x3daea2=arguments,_0x3fc6['kogRmL']=!![];}const _0x1d7b32=_0x682b4a[0x0],_0x3fc6cf=_0x2e7ab2+_0x1d7b32,_0x3dfd=_0x3daea2[_0x3fc6cf];return!_0x3dfd?(_0x4ad8fa=_0x3fc6['bBtPOJ'](_0x4ad8fa),_0x3daea2[_0x3fc6cf]=_0x4ad8fa):_0x4ad8fa=_0x3dfd,_0x4ad8fa;},_0x3fc6(_0x3daea2,_0x34b56a);}import{isadmin}from'../utils/isadmin.js';import{getConfig}from'../utils/config.js';export const name='connection';export const version='1.1.1';export const priority=0x6e;export const configKeys=['COMMAND_PREFIX','PREFIX'];export const commands=['connection','delconnection','listconnection','setdefault','getdefault'];let bot=null,sendApi=null;export const processedMessageKeys=new Map();export const DEDUPE_TTL_MS=0x1e*0x3e8;export function makeDedupeKey(_0x5abefc){const _0x1e928f=_0x3fc6,_0x41eda0={'QLake':function(_0x10d69f,_0x2f68f5){return _0x10d69f(_0x2f68f5);}};if(!_0x5abefc||!_0x5abefc['key'])return null;const _0x12861d=_0x41eda0['QLake'](String,_0x5abefc[_0x1e928f(0x153)]['remoteJid']||_0x5abefc['remoteJid']||''),_0x2ca609=_0x5abefc[_0x1e928f(0x153)]['id']||_0x5abefc['key'][_0x1e928f(0x142)]||_0x5abefc[_0x1e928f(0x153)]?.[_0x1e928f(0x158)]||String(_0x5abefc['messageTimestamp']||_0x5abefc['message']?.['messageTimestamp']||'');return _0x12861d+'::'+_0x2ca609;}export function isProcessed(_0x3c9168){return _0x3c9168&&processedMessageKeys['has'](_0x3c9168);}export function markProcessed(_0x50bb23){const _0x5ba6c0=_0x3fc6,_0xbd0fb4={'hIgFz':function(_0x461a17,_0x5633be){return _0x461a17!==_0x5633be;}};if(!_0x50bb23)return;try{if(processedMessageKeys['has'](_0x50bb23)){if('zTYEM'!==_0x5ba6c0(0x147)){const _0x120765=processedMessageKeys[_0x5ba6c0(0x138)](_0x50bb23);try{_0xbd0fb4['hIgFz'](_0x5ba6c0(0x136),_0x5ba6c0(0x14a))?clearTimeout(_0x120765):_0x49d72d(_0x45ad22,'[connection]\x20initialize\x20error');}catch(_0x5ca3f6){}}else return _0x301274('[connection]\x20sendTextTo\x20error:\x20'+(_0x35c72f?.['message']||_0x4f5aa5)),null;}}catch(_0x44ddbb){}const _0x5c7c16=setTimeout(()=>processedMessageKeys['delete'](_0x50bb23),DEDUPE_TTL_MS);processedMessageKeys['set'](_0x50bb23,_0x5c7c16);}async function ensureConnectionsSchema(){const _0x58c0a0=_0x3fc6,_0x5dfb13={'lNsqj':'function'};try{if(typeof _0xa47b64['ensureSchema']==='function')try{await _0xa47b64['ensureSchema']();}catch(_0x5de209){warn('[connection]\x20conn.ensureSchema\x20warning:\x20'+(_0x5de209?.[_0x58c0a0(0x14f)]||_0x5de209));}try{db&&typeof db['exec']===_0x5dfb13['lNsqj']&&(await db['exec']('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20connections\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20chat_id\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20creator_id\x20TEXT\x20DEFAULT\x20\x27\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20'),await db['exec'](_0x58c0a0(0x15b)));}catch(_0xaa9adb){warn('[connection]\x20direct\x20DB\x20ensureConnectionsSchema\x20fallback\x20failed:\x20'+(_0xaa9adb?.['message']||_0xaa9adb));}info('[connection]\x20schema\x20ensure\x20attempted');}catch(_0x4d2f5e){if('YPNkp'==='YPNkp')error(_0x4d2f5e,'[connection]\x20ensureConnectionsSchema\x20failed');else return _0x4a8b43;}}function normalizeUserKeyFromJid(_0x377105){const _0x9264bd=_0x3fc6,_0x25ad98={'ngrXC':function(_0x41eb27,_0x1863b9){return _0x41eb27(_0x1863b9);}};if(!_0x377105)return null;return _0x25ad98['ngrXC'](String,_0x377105)[_0x9264bd(0x135)]('@')[0x0];}async function isUserAdminInGroup(_0x4dbad5,_0x394462){const _0x569ae6=_0x3fc6,_0x44282a={'WRmlu':function(_0xbd80ab,_0x4920f7){return _0xbd80ab===_0x4920f7;},'rNeVQ':function(_0x35cdc4,_0x5f259c){return _0x35cdc4===_0x5f259c;},'DAWxi':function(_0x215f9a,_0x3958af){return _0x215f9a(_0x3958af);}};try{if(!bot||!bot['sock'])return![];const _0x4481c8=bot['sock']&&typeof bot[_0x569ae6(0x148)]['groupMetadata']==='function'&&(_0x4fcae2=>bot['sock'][_0x569ae6(0x141)](_0x4fcae2))||_0x44282a['rNeVQ'](typeof bot[_0x569ae6(0x141)],'function')&&(_0x1eb195=>bot['groupMetadata'](_0x1eb195))||typeof bot['getGroupMetadata']==='function'&&(_0x47a37a=>bot[_0x569ae6(0x132)](_0x47a37a))||null;if(!_0x4481c8)return![];const _0x2e8892=await _0x44282a[_0x569ae6(0x12f)](_0x4481c8,_0x394462);if(!_0x2e8892||!Array['isArray'](_0x2e8892[_0x569ae6(0x140)]))return![];const _0x5b722f=normalizeUserKeyFromJid(_0x4dbad5),_0x1cafb1=_0x2e8892[_0x569ae6(0x140)]['find'](_0x3b6588=>{const _0x16405f=(_0x3b6588?.['id']||_0x3b6588?.['jid']||_0x3b6588?.['participant']||'')['toString']();return _0x44282a['WRmlu'](_0x16405f['split']('@')[0x0],_0x5b722f);});if(!_0x1cafb1)return![];if(_0x1cafb1['isAdmin']||_0x1cafb1['is_super_admin']||_0x1cafb1['isSuperAdmin']||_0x1cafb1['admin']||_0x1cafb1['superAdmin']||_0x1cafb1['isCreator'])return!![];if(_0x1cafb1['role']&&[_0x569ae6(0x156),'superadmin',_0x569ae6(0x139)]['includes'](_0x1cafb1['role']))return!![];return![];}catch(_0x246096){return warn(_0x569ae6(0x149)+(_0x246096?.['message']||_0x246096)),![];}}async function safeAddConnection(_0x178bff,_0x21e9de,_0x14f220){const _0x443b13={'aGjua':function(_0x3869d8,_0x2afc32,_0x141035){return _0x3869d8(_0x2afc32,_0x141035);}};try{if(typeof _0xa47b64['addConnection']==='function')return await _0xa47b64['addConnection'](_0x178bff,_0x21e9de,_0x14f220);}catch(_0x58e04e){warn('[connection]\x20utils.addConnection\x20failed:\x20'+(_0x58e04e?.['message']||_0x58e04e));}try{return await db['run']('INSERT\x20INTO\x20connections\x20(name,\x20chat_id,\x20creator_id)\x0a\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20?)\x0a\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT(name)\x20DO\x20UPDATE\x20SET\x20chat_id\x20=\x20excluded.chat_id,\x20creator_id\x20=\x20excluded.creator_id;',[_0x178bff,_0x21e9de,_0x14f220||'']),!![];}catch(_0x4f7704){return _0x443b13['aGjua'](error,_0x4f7704,'[connection]\x20safeAddConnection\x20direct\x20DB\x20failed\x20for\x20'+_0x178bff),![];}}async function safeDeleteConnection(_0x337d05){const _0x81bdd7=_0x3fc6,_0xa3789e={'kuiQe':function(_0x47f290,_0x3eacf7){return _0x47f290+_0x3eacf7;}};try{if(typeof _0xa47b64['deleteConnection']==='function')return await _0xa47b64[_0x81bdd7(0x13a)](_0x337d05);}catch(_0x138205){warn(_0xa3789e['kuiQe']('[connection]\x20utils.deleteConnection\x20failed:\x20',_0x138205?.['message']||_0x138205));}try{const _0x945d70=await db['run']('DELETE\x20FROM\x20connections\x20WHERE\x20name\x20=\x20?',[_0x337d05]);return!!_0x945d70?.[_0x81bdd7(0x12b)];}catch(_0x5f1693){return warn(_0x5f1693,_0x81bdd7(0x133)+_0x337d05),![];}}async function safeListConnectionsForUser(_0x4bf248,_0x5b4ce3=null){const _0x42ccf8=_0x3fc6;try{if('eiyEk'==='eiyEk'){if(typeof _0xa47b64['listConnectionsForUser']===_0x42ccf8(0x160)){const _0x3d5499=await _0xa47b64['listConnectionsForUser'](_0x4bf248,_0x5b4ce3);if(Array['isArray'](_0x3d5499))return _0x3d5499['map'](_0xe4b433=>({'name':_0xe4b433['name'],'chat_id':_0xe4b433['chat_id'],'creator_id':_0xe4b433['creator_id']}));}}else _0x12f09a('[connection]\x20utils.getDefault\x20failed:\x20'+(_0x55ce63?.['message']||_0xcf1a5));}catch(_0x4bda72){warn('[connection]\x20utils.listConnections\x20failed:\x20'+(_0x4bda72?.['message']||_0x4bda72));}try{if(!db)return[];if(_0x5b4ce3){const _0x559306=await db['all']('SELECT\x20name,\x20chat_id,\x20creator_id\x20FROM\x20connections\x20WHERE\x20creator_id\x20=\x20?\x20AND\x20chat_id\x20=\x20?',[_0x4bf248,_0x5b4ce3]);return(_0x559306||[])['map'](_0x56509b=>({'name':_0x56509b['name'],'chat_id':_0x56509b['chat_id'],'creator_id':_0x56509b['creator_id']}));}else{const _0x41fdcf=await db['all']('SELECT\x20name,\x20chat_id,\x20creator_id\x20FROM\x20connections\x20WHERE\x20creator_id\x20=\x20?',[_0x4bf248]);return(_0x41fdcf||[])['map'](_0x349b9e=>({'name':_0x349b9e['name'],'chat_id':_0x349b9e['chat_id'],'creator_id':_0x349b9e['creator_id']}));}}catch(_0x5335e1){return warn('[connection]\x20safeListConnectionsForUser\x20DB\x20error:\x20'+(_0x5335e1?.['message']||_0x5335e1)),[];}}async function safeSetDefault(_0x203899,_0x44bddb,_0x4f3709){const _0x298901=_0x3fc6,_0x4d8d82={'gMUaN':'function'};try{if(typeof _0xa47b64[_0x298901(0x163)]===_0x4d8d82['gMUaN'])return await _0xa47b64['setDefault'](_0x203899,_0x44bddb,_0x4f3709);}catch(_0x598c42){warn('[connection]\x20utils.setDefault\x20failed:\x20'+(_0x598c42?.[_0x298901(0x14f)]||_0x598c42));}try{if(!db)throw new Error(_0x298901(0x13f));if(!_0x4f3709)throw new Error('groupJid\x20required\x20for\x20setDefault');if(_0x203899){const _0x291c34=await db[_0x298901(0x138)]('SELECT\x20chat_id\x20FROM\x20connections\x20WHERE\x20name\x20=\x20?',[_0x203899]);if(!_0x291c34)throw new Error('No\x20connection\x20named\x20'+_0x203899);await db['run']('INSERT\x20INTO\x20user_defaults\x20(user_id,\x20group_id,\x20name)\x20VALUES\x20(?,\x20?,\x20?)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT(user_id,\x20group_id)\x20DO\x20UPDATE\x20SET\x20name\x20=\x20excluded.name;',[_0x44bddb,_0x4f3709,_0x203899]);}else await db['run']('DELETE\x20FROM\x20user_defaults\x20WHERE\x20user_id\x20=\x20?\x20AND\x20group_id\x20=\x20?',[_0x44bddb,_0x4f3709]);return!![];}catch(_0x58c951){return warn('[connection]\x20safeSetDefault\x20DB\x20error:\x20'+(_0x58c951?.['message']||_0x58c951)),![];}}async function safeGetDefault(_0x3c82ea,_0x4211fc=null){const _0x1d6972=_0x3fc6,_0x51b4ad={'ManuM':function(_0x5c6f73,_0x54a630){return _0x5c6f73(_0x54a630);}};try{if(typeof _0xa47b64['getDefault']==='function'){const _0x434d31=await _0xa47b64['getDefault'](_0x3c82ea);return _0x434d31||null;}}catch(_0x11a367){warn('[connection]\x20utils.getDefault\x20failed:\x20'+(_0x11a367?.['message']||_0x11a367));}try{if(_0x1d6972(0x130)!==_0x1d6972(0x130))return!![];else{if(!db)return null;if(!_0x4211fc)return null;const _0x49364e=await db['get']('SELECT\x20name\x20FROM\x20user_defaults\x20WHERE\x20user_id\x20=\x20?\x20AND\x20group_id\x20=\x20?',[_0x3c82ea,_0x4211fc]);return _0x49364e?_0x49364e[_0x1d6972(0x15f)]:null;}}catch(_0x1dc48c){return _0x51b4ad['ManuM'](warn,'[connection]\x20safeGetDefault\x20DB\x20error:\x20'+(_0x1dc48c?.['message']||_0x1dc48c)),null;}}async function safeGetConnection(_0x1b4c44){const _0x5a55e7=_0x3fc6,_0x16a34f={'pfStG':function(_0x59783c,_0x596a24){return _0x59783c===_0x596a24;},'NhBgs':function(_0x5b2954,_0x1eb657){return _0x5b2954(_0x1eb657);}};try{if(_0x16a34f['pfStG'](typeof _0xa47b64['getConnection'],'function')){const _0x3eb75c=await _0xa47b64['getConnection'](_0x1b4c44);return _0x3eb75c||null;}}catch(_0x318396){if(_0x5a55e7(0x161)==='YJkyV')warn('[connection]\x20utils.getConnection\x20failed:\x20'+(_0x318396?.['message']||_0x318396));else{if(_0x2b1f90)return _0x3f0d58;else _0x21ef67(0x0);}}try{if(!db)return null;const _0x2bece5=await db['get'](_0x5a55e7(0x157),[_0x1b4c44]);return _0x2bece5?_0x2bece5['chat_id']:null;}catch(_0x16025e){return _0x16a34f['NhBgs'](warn,'[connection]\x20safeGetConnection\x20DB\x20error:\x20'+(_0x16025e?.['message']||_0x16025e)),null;}}(function(){const _0xd4e443={'hUtAB':function(_0x18358a,_0x381336){return _0x18358a(_0x381336);}};let _0x2cb426;try{const _0x4e0f36=_0xd4e443['hUtAB'](Function,'return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2cb426=_0x4e0f36();}catch(_0x482ce9){_0x2cb426=window;}_0x2cb426['setInterval'](_0x2e7ab2,0x61a80);}());function setupSendApiForBot(_0x34ce93){const _0x354c78=_0x3fc6;bot=_0x34ce93;if(!bot){sendApi=null;return;}if(typeof bot['sendMessage']==='function')sendApi=async(_0x46d51f,_0x47232e)=>bot['sendMessage'](_0x46d51f,_0x47232e);else bot['sock']&&typeof bot['sock']['sendMessage']==='function'?sendApi=async(_0x3215af,_0x3b1093)=>bot[_0x354c78(0x148)][_0x354c78(0x134)](_0x3215af,_0x3b1093):sendApi=null;}async function sendTextTo(_0x29e286,_0x1035dc){const _0x1b7096=_0x3fc6,_0x568909={'yMWgI':_0x1b7096(0x12d)};try{if(!_0x29e286)return warn('[connection]\x20sendTextTo\x20missing\x20jid'),null;if(!sendApi)return warn('[connection]\x20no\x20send\x20API\x20available'),null;const _0x4d9491={'text':String(_0x1035dc)};return await sendApi(_0x29e286,_0x4d9491);}catch(_0x21060a){if(_0x1b7096(0x129)==='HkjAC'){_0x1f73e5=null;return;}else return warn(_0x568909['yMWgI']+(_0x21060a?.['message']||_0x21060a)),null;}}export async function initialize(_0x106dc2){setupSendApiForBot(_0x106dc2);try{await ensureConnectionsSchema(),info('[connection]\x20initialized\x20and\x20schema\x20ensured');}catch(_0x4a6e22){error(_0x4a6e22,'[connection]\x20initialize\x20error');}}export async function onMessage(_0x4f95ee){const _0x49f836=_0x3fc6,_0x26fa94={'yuQBk':_0x49f836(0x15a),'DFsYG':_0x49f836(0x145),'UEPvC':'[connection]\x20utils.addConnection\x20failed:\x20','lXQsP':function(_0x2ae66f,_0x382131){return _0x2ae66f(_0x382131);},'vPoCU':function(_0x437958,_0x524cba){return _0x437958(_0x524cba);},'rGPme':'[connection]\x20setActiveGroupForUser\x20failed:\x20','GlxAC':function(_0x4406c6,_0x50103f){return _0x4406c6!==_0x50103f;},'MugdT':function(_0x47db27,_0x3692d3,_0x594495,_0x5d14a5){return _0x47db27(_0x3692d3,_0x594495,_0x5d14a5);},'Hdseq':function(_0x3aa9cd,_0x4ecc0c,_0x5d65e6){return _0x3aa9cd(_0x4ecc0c,_0x5d65e6);},'clfqr':'listconnection','HKrcY':'SgTwY','euVWg':'You\x20have\x20no\x20connections\x20in\x20this\x20group\x20to\x20set\x20as\x20default.\x20Use\x20connection\x20to\x20add\x20one.'};try{if(!_0x4f95ee||!_0x4f95ee['key']||!_0x4f95ee['message'])return;const _0x249cfc=_0x4f95ee[_0x49f836(0x153)]['remoteJid']||_0x4f95ee['remoteJid']||null;if(!_0x249cfc)return;const _0x31a593=String(_0x249cfc)['endsWith']('@g.us'),_0x5e610b=makeDedupeKey(_0x4f95ee);if(isProcessed(_0x5e610b))return;markProcessed(_0x5e610b);if(!_0x4f95ee['isCommand'])return;if(!_0x31a593)return;let _0x15a4f3=![];try{_0x15a4f3=await isadmin(bot,_0x4f95ee);}catch(_0x5ce376){_0x26fa94['lXQsP'](warn,'[connection]\x20isadmin\x20check\x20failed'),_0x15a4f3=![];}if(!_0x15a4f3)return;const _0x21ec5=typeof _0x4f95ee['text']==='string'&&_0x4f95ee['text']['trim']()['length']?_0x4f95ee['text']['trim']():'';if(!_0x21ec5)return;const _0x255903=_0x21ec5['split'](/\s+/),_0x55df4a=(_0x255903[0x0]||'')['toLowerCase']();if(!commands[_0x49f836(0x14d)](_0x55df4a))return;const _0x4e822f=_0x4f95ee['key']['participant']||_0x4f95ee['key']['from']||_0x4f95ee['key']['remoteJid']||'',_0x4cda7d=_0x26fa94['vPoCU'](normalizeUserKeyFromJid,_0x4e822f),_0x500f06=_0x249cfc;info('[connection]\x20command\x20\x27'+_0x55df4a+'\x27\x20from\x20'+_0x4e822f+'\x20in\x20'+_0x249cfc);try{if(typeof _0xa47b64['setActiveGroupForUser']==='function')_0xa47b64['setActiveGroupForUser'](_0x4cda7d,_0x249cfc);}catch(_0x46ae3c){warn(_0x26fa94['rGPme']+(_0x46ae3c?.['message']||_0x46ae3c));}if(_0x55df4a==='connection'){if(_0x255903['length']<0x3){await sendTextTo(_0x500f06,_0x49f836(0x12c));return;}const _0x10c570=_0x255903[0x1],_0x380096=_0x255903[0x2];if(!_0x380096||!_0x380096['includes']('@')){await sendTextTo(_0x500f06,'Group\x20JID\x20must\x20include\x20@\x20(e.g.\x201203...@g.us)');return;}const _0xbf7f26=await isUserAdminInGroup(_0x4e822f,_0x380096)['catch'](_0x2d3192=>{return warn('[connection]\x20isUserAdminInGroup\x20error:\x20'+(_0x2d3192?.['message']||_0x2d3192)),![];});if(!_0xbf7f26){if(_0x26fa94['GlxAC'](_0x49f836(0x159),'pKVkx')){await sendTextTo(_0x500f06,'❌\x20You\x20must\x20be\x20an\x20admin\x20in\x20'+_0x380096+'\x20to\x20add\x20that\x20connection.');return;}else return _0x638327('[connection]\x20safeGetConnection\x20DB\x20error:\x20'+(_0x4d921a?.['message']||_0x56474c)),null;}const _0xa8995b=await _0x26fa94['MugdT'](safeAddConnection,_0x10c570,_0x380096,_0x4cda7d);if(_0xa8995b)await sendTextTo(_0x500f06,'✅\x20Connection\x20\x22'+_0x10c570+'\x22\x20saved\x20->\x20'+_0x380096);else await sendTextTo(_0x500f06,'❌\x20Failed\x20to\x20save\x20connection\x20\x22'+_0x10c570+'\x22.');return;}if(_0x55df4a==='delconnection'){if('gptcn'==='gptcn'){if(_0x255903['length']!==0x2){if(_0x49f836(0x131)==='KGhjA'){const _0x29fe9b=new _0x331cc8('function\x20*\x5c(\x20*\x5c)'),_0x4fa7fc=new _0x3a7620('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0x2b8c76=_0x3b2861(cHJajN['yuQBk']);!_0x29fe9b['test'](_0x2b8c76+_0x49f836(0x137))||!_0x4fa7fc['test'](_0x2b8c76+cHJajN['DFsYG'])?_0x2b8c76('0'):_0x1bd1d0();}else{await sendTextTo(_0x500f06,'Usage:\x20delconnection\x20<name>');return;}}const _0x19dbc5=_0x255903[0x1],_0x25962d=await db['get']('SELECT\x20name,\x20chat_id,\x20creator_id\x20FROM\x20connections\x20WHERE\x20name\x20=\x20?',[_0x19dbc5]);if(!_0x25962d){await sendTextTo(_0x500f06,'❌\x20Connection\x20\x22'+_0x19dbc5+'\x22\x20does\x20not\x20exist.');return;}const _0x474a05=String(_0x25962d['creator_id']||''),_0x38b61b=String(_0x25962d['chat_id']||''),_0x242e3d=await isUserAdminInGroup(_0x4e822f,_0x38b61b)['catch'](_0x27973c=>![]);if(_0x474a05!==_0x4cda7d&&!_0x242e3d){await _0x26fa94['Hdseq'](sendTextTo,_0x500f06,'❌\x20Only\x20the\x20creator\x20(\x22'+_0x474a05+_0x49f836(0x14b)+_0x38b61b+'\x20can\x20delete\x20connection\x20\x22'+_0x19dbc5+'\x22.');return;}const _0x44a453=await safeDeleteConnection(_0x19dbc5);if(_0x44a453)await sendTextTo(_0x500f06,'✅\x20Deleted\x20connection:\x20'+_0x19dbc5);else await sendTextTo(_0x500f06,'❌\x20Failed\x20to\x20delete:\x20'+_0x19dbc5);return;}else _0x46b188(_0x2fbfd5);}if(_0x55df4a===_0x26fa94['clfqr']){const _0x234639=await safeListConnectionsForUser(_0x4cda7d,_0x249cfc);if(!_0x234639||_0x234639['length']===0x0){await sendTextTo(_0x500f06,'You\x20have\x20no\x20saved\x20connections\x20for\x20this\x20group.');return;}const _0x5b46ca=new Set(),_0x55e4b2=[];for(const _0x3ca01b of _0x234639){if('ggxMZ'!=='ggxMZ')_0x2c4e7b(_0x26fa94['UEPvC']+(_0x1d8d2a?.['message']||_0x5b18fe));else{if(!_0x3ca01b||!_0x3ca01b['name'])continue;if(_0x5b46ca['has'](_0x3ca01b['name']))continue;_0x5b46ca['add'](_0x3ca01b['name']),_0x55e4b2['push']('•\x20'+_0x3ca01b['name']+'\x20→\x20'+_0x3ca01b['chat_id']);}}await _0x26fa94['Hdseq'](sendTextTo,_0x500f06,'Your\x20connections\x20for\x20this\x20group:\x0a'+_0x55e4b2['join']('\x0a'));return;}if(_0x55df4a==='setdefault'){if(_0x255903['length']===0x1){const _0x2fe57b=await safeListConnectionsForUser(_0x4cda7d,_0x249cfc);if(!_0x2fe57b['length']){if(_0x26fa94['HKrcY']==='UYTWH'){if(typeof _0x118682[_0x49f836(0x155)]==='function')_0x302d09['setActiveGroupForUser'](_0x3afbbc,_0xccdb83);}else{await sendTextTo(_0x500f06,_0x26fa94['euVWg']);return;}}const _0x143018=_0x2fe57b[_0x49f836(0x13e)](_0x1de095=>'•\x20'+_0x1de095['name'])['join']('\x0a');await sendTextTo(_0x500f06,'Connections\x20in\x20this\x20group:\x0a'+_0x143018+'\x0a\x0aUse\x20setdefault\x20<name>\x20to\x20pick\x20one\x20for\x20this\x20group.');return;}const _0x327146=_0x255903[0x1],_0x17055d=await safeGetConnection(_0x327146);if(!_0x17055d){await sendTextTo(_0x500f06,_0x49f836(0x12a)+_0x327146+'\x22.');return;}const _0x5c20de=await _0x26fa94['MugdT'](safeSetDefault,_0x327146,_0x4cda7d,_0x249cfc);if(_0x5c20de)await sendTextTo(_0x500f06,'✅\x20Default\x20connection\x20for\x20this\x20group\x20set\x20to:\x20'+_0x327146);else await sendTextTo(_0x500f06,'❌\x20Failed\x20to\x20set\x20default:\x20'+_0x327146);return;}if(_0x55df4a==='getdefault'){const _0x280db8=await safeGetDefault(_0x4cda7d,_0x249cfc);if(!_0x280db8){await sendTextTo(_0x500f06,'You\x20have\x20no\x20default\x20connection\x20set\x20for\x20this\x20group.\x20Use\x20setdefault\x20<name>\x20to\x20set\x20one.');return;}const _0x33436e=await safeGetConnection(_0x280db8);await _0x26fa94['Hdseq'](sendTextTo,_0x500f06,'Your\x20default\x20for\x20this\x20group\x20is:\x20'+_0x280db8+'\x20→\x20'+_0x33436e);return;}}catch(_0x2316d1){error(_0x2316d1,'[connection]\x20onMessage\x20failed:\x20'+(_0x2316d1?.['message']||_0x2316d1));}}function _0x1d7b(){const _0x23960f=['BM8Gzgi','CgfYDgLJAxbHBNrZ','z3jVDxbnzxrHzgf0yq','CgfYDgLJAxbHBNq','mJG0nu5UwgHLCW','ofzLB2D6uq','Aw5WDxq','nZG5ntCWoxDIvgrTCq','sM5RD2G','C29JAW','w2nVBM5Ly3rPB25DigLZvxnLCKfKBwLUsw5hCM91CcbLCNjVCJOG','seD5BNG','iIKGB3iGyw4GywrTAw4GB2yG','zNvUy3rPB24GkLWOicPCkq','Aw5JBhvKzxm','ntbSqLfqt1O','BwvZC2fNzq','y2fSBa','EefqsfC','mJrWAfnhsNy','A2v5','BNf2CwC','C2v0qwn0AxzLr3jVDxbgB3jvC2vY','ywrTAw4','u0vmrunuignOyxrFAwqGrLjptsbJB25Uzwn0Aw9UCYbxsevsrsbUyw1Lid0GpW','zNjVBq','rfb4Aum','Aw5PDa','cIaGicaGicaGicbduKvbveuGvefcteuGsuyGtK9uievysvnuuYb1C2vYx2rLzMf1BhrZicGkicaGicaGicaGicaGDxnLCL9PzcburvHuie5pvcbovuXmlaOGicaGicaGicaGicbNCM91Cf9PzcburvHuie5pvcbovuXmlaOGicaGicaGicaGicbUyw1LifrfwfqGtK9uie5vteWScIaGicaGicaGicaGifbssu1buLKGs0vzicH1C2vYx2LKlcbNCM91Cf9PzcKkicaGicaGicaGicK7cIaGicaGicaG','uvfOweW','mZu5nfbQAgPrrG','qvjVvhC','BMfTzq','zNvUy3rPB24','wuPREvy','mtmZotq0tu10vuX5','C2v0rgvMyxvSDa','mZK3mdG2mfryvML3yG','ndG2ntjrq0Xgvgi','DwntvgS','4P2mie5VignVBM5Ly3rPB24GBMfTzwqGiG','y2HHBMDLCW','vxnHz2u6ignVBM5Ly3rPB24Gpg5HBwu+idXNCM91Cf9QAwq+','w2nVBM5Ly3rPB25DihnLBMruzxH0vg8GzxjYB3i6ia','nZyXnZqWBKDIv0Hu','refxEgK','tKjUsMW','AgnSvvm','z2v0r3jVDxbnzxrHzgf0yq','w2nVBM5Ly3rPB25DihnHzMvezwXLDgvdB25Uzwn0Aw9UiercigvYCM9YigzVCIa','C2vUze1LC3nHz2u','C3bSAxq','AhvOvw4','y2HHAw4','z2v0','y3jLyxrVCG','zgvSzxrLq29UBMvJDgLVBG','y29UC3rYDwn0B3i','mta1oda0otnJtvzesw8','BMvUyxu','BwfW'];_0x1d7b=function(){return _0x23960f;};return _0x1d7b();}export async function cleanup(){for(const _0x31e80b of processedMessageKeys['values']())try{if('sDsZm'!=='mtipe')clearTimeout(_0x31e80b);else{const _0x5adb1d=_0x2b3656('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x597a79=_0x5adb1d();}}catch(_0x2b9d28){}processedMessageKeys['clear'](),bot=null,sendApi=null,info('[connection]\x20cleaned\x20up');}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};function _0x2e7ab2(_0x29f68d){const _0x1d9863=_0x3fc6,_0x439526={'xglpZ':function(_0x205af3,_0x3af9cc){return _0x205af3+_0x3af9cc;},'nqvqg':'gger','nenau':'stateObject','QQhXL':function(_0x22b603,_0x2500ae){return _0x22b603(_0x2500ae);},'kaPyR':_0x1d9863(0x151)};function _0x4aa821(_0x238eb0){const _0x546e3a=_0x1d9863;if(typeof _0x238eb0==='string')return function(_0x512e2a){}[_0x546e3a(0x13b)]('while\x20(true)\x20{}')['apply']('counter');else(''+_0x238eb0/_0x238eb0)['length']!==0x1||_0x238eb0%0x14===0x0?function(){return!![];}['constructor'](_0x439526['xglpZ']('debu','gger'))[_0x546e3a(0x150)]('action'):function(){return![];}[_0x546e3a(0x13b)](_0x439526['xglpZ']('debu',_0x439526[_0x546e3a(0x154)]))['apply'](_0x439526[_0x546e3a(0x13d)]);_0x4aa821(++_0x238eb0);}try{if(_0x439526['kaPyR']!=='KBifA'){if(_0x29f68d)return _0x4aa821;else _0x4aa821(0x0);}else _0x439526[_0x1d9863(0x15c)](_0x4627d1,'[connection]\x20setActiveGroupForUser\x20failed:\x20'+(_0x5a1450?.['message']||_0x32bd33));}catch(_0x246a53){}}