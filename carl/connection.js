const _0x32eabc=_0x19c9;(function(_0x58358f,_0x510c76){const _0x34ac7b=_0x19c9,_0x56ebc0=_0x58358f();while(!![]){try{const _0x1e26c5=-parseInt(_0x34ac7b(0xf9))/0x1+-parseInt(_0x34ac7b(0xc8))/0x2+parseInt(_0x34ac7b(0xf8))/0x3*(parseInt(_0x34ac7b(0xca))/0x4)+-parseInt(_0x34ac7b(0xeb))/0x5*(parseInt(_0x34ac7b(0xbe))/0x6)+parseInt(_0x34ac7b(0xd6))/0x7+parseInt(_0x34ac7b(0x105))/0x8*(parseInt(_0x34ac7b(0xf1))/0x9)+-parseInt(_0x34ac7b(0xf4))/0xa*(parseInt(_0x34ac7b(0xcb))/0xb);if(_0x1e26c5===_0x510c76)break;else _0x56ebc0['push'](_0x56ebc0['shift']());}catch(_0x2f94b6){_0x56ebc0['push'](_0x56ebc0['shift']());}}}(_0x3708,0xe97a8));const _0x192bfe=(function(){let _0x141548=!![];return function(_0x365525,_0x4f06e6){const _0x24a4f3=_0x141548?function(){const _0x3e3d0d=_0x19c9;if(_0x4f06e6){const _0x4050e6=_0x4f06e6[_0x3e3d0d(0xf2)](_0x365525,arguments);return _0x4f06e6=null,_0x4050e6;}}:function(){};return _0x141548=![],_0x24a4f3;};}());(function(){const _0x1c8aab={'ZRprD':'chain'};_0x192bfe(this,function(){const _0x548db3=new RegExp('function\x20*\x5c(\x20*\x5c)'),_0x1d4086=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0x56f2ac=_0x37e544('init');!_0x548db3['test'](_0x56f2ac+_0x1c8aab['ZRprD'])||!_0x1d4086['test'](_0x56f2ac+'input')?_0x56f2ac('0'):_0x37e544();})();}());import{info,warn,error}from'../utils/logger.js';(function(){const _0x75e1a6=_0x19c9;let _0x481e32;try{const _0x479d39=Function(_0x75e1a6(0xd7)+_0x75e1a6(0xdb)+');');_0x481e32=_0x479d39();}catch(_0x27f6bf){_0x481e32=window;}_0x481e32['setInterval'](_0x37e544,0x61a80);}());import*as _0x7cde75 from'../utils/connection.js';import{db}from'../utils/database.js';function _0x19c9(_0x219f9c,_0x34c27b){const _0x307980=_0x3708();return _0x19c9=function(_0x37e544,_0x192bfe){_0x37e544=_0x37e544-0xbb;let _0x846881=_0x307980[_0x37e544];if(_0x19c9['WVOOMf']===undefined){var _0x106fd0=function(_0x38de2c){const _0xc634bc='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2249d8='',_0x10b166='';for(let _0x1eda05=0x0,_0x1fe861,_0x1f6ad8,_0x27924d=0x0;_0x1f6ad8=_0x38de2c['charAt'](_0x27924d++);~_0x1f6ad8&&(_0x1fe861=_0x1eda05%0x4?_0x1fe861*0x40+_0x1f6ad8:_0x1f6ad8,_0x1eda05++%0x4)?_0x2249d8+=String['fromCharCode'](0xff&_0x1fe861>>(-0x2*_0x1eda05&0x6)):0x0){_0x1f6ad8=_0xc634bc['indexOf'](_0x1f6ad8);}for(let _0x4853d8=0x0,_0x3f8982=_0x2249d8['length'];_0x4853d8<_0x3f8982;_0x4853d8++){_0x10b166+='%'+('00'+_0x2249d8['charCodeAt'](_0x4853d8)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x10b166);};_0x19c9['IRRkCJ']=_0x106fd0,_0x219f9c=arguments,_0x19c9['WVOOMf']=!![];}const _0x3708e5=_0x307980[0x0],_0x19c9d6=_0x37e544+_0x3708e5,_0x1d2292=_0x219f9c[_0x19c9d6];return!_0x1d2292?(_0x846881=_0x19c9['IRRkCJ'](_0x846881),_0x219f9c[_0x19c9d6]=_0x846881):_0x846881=_0x1d2292,_0x846881;},_0x19c9(_0x219f9c,_0x34c27b);}import{isadmin}from'../utils/isadmin.js';import{getConfig}from'../utils/config.js';export const name='connection';export const version='1.1.1';export const priority=0x6e;export const configKeys=['COMMAND_PREFIX','PREFIX'];export const commands=[_0x32eabc(0xc0),'delconnection',_0x32eabc(0xc2),'setdefault',_0x32eabc(0xf3)];let bot=null,sendApi=null;export const processedMessageKeys=new Map();export const DEDUPE_TTL_MS=0x1e*0x3e8;export function makeDedupeKey(_0x72caf1){const _0x51403f=_0x32eabc,_0x29c83={'boqwa':function(_0x81ec25,_0x15268c){return _0x81ec25(_0x15268c);}};if(!_0x72caf1||!_0x72caf1[_0x51403f(0xc4)])return null;const _0x3b9eae=String(_0x72caf1['key']['remoteJid']||_0x72caf1['remoteJid']||''),_0x31de53=_0x72caf1['key']['id']||_0x72caf1['key']['participant']||_0x72caf1['key']?.[_0x51403f(0xd5)]||_0x29c83['boqwa'](String,_0x72caf1['messageTimestamp']||_0x72caf1['message']?.['messageTimestamp']||'');return _0x3b9eae+'::'+_0x31de53;}export function isProcessed(_0x3f0b65){const _0x333907=_0x32eabc;return _0x3f0b65&&processedMessageKeys[_0x333907(0xe3)](_0x3f0b65);}export function markProcessed(_0x5523e8){const _0xc20557=_0x32eabc;if(!_0x5523e8)return;try{if(processedMessageKeys['has'](_0x5523e8)){const _0x57348f=processedMessageKeys['get'](_0x5523e8);try{clearTimeout(_0x57348f);}catch(_0x37404e){}}}catch(_0x4c48ac){}const _0x577d11=setTimeout(()=>processedMessageKeys[_0xc20557(0xdd)](_0x5523e8),DEDUPE_TTL_MS);processedMessageKeys['set'](_0x5523e8,_0x577d11);}async function ensureConnectionsSchema(){const _0x1406e9=_0x32eabc,_0x33d104={'aMTEy':function(_0x509c7c,_0xcfbb1c){return _0x509c7c(_0xcfbb1c);},'tRhDj':function(_0x56d6d0,_0x6eba01){return _0x56d6d0+_0x6eba01;},'KYPJL':'WuBIy'};try{if(typeof _0x7cde75['ensureSchema']==='function')try{'IbJyC'!==_0x1406e9(0xc7)?await _0x7cde75['ensureSchema']():_0x33d104['aMTEy'](_0x20ea74,_0x1406e9(0x106)+(_0x50b686?.['message']||_0x5dea3a));}catch(_0x39454e){warn(_0x1406e9(0xfe)+(_0x39454e?.['message']||_0x39454e));}try{if(db&&typeof db['exec']==='function'){if('vrHbQ'!=='iZsDP')await db['exec']('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20connections\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20chat_id\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20creator_id\x20TEXT\x20DEFAULT\x20\x27\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20'),await db['exec']('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20user_defaults\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20user_id\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20group_id\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20PRIMARY\x20KEY\x20(user_id,\x20group_id)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20');else return _0x4bc215('[connection]\x20safeSetDefault\x20DB\x20error:\x20'+(_0x1c6fc7?.['message']||_0x47d042)),![];}}catch(_0x309159){_0x33d104['aMTEy'](warn,_0x33d104['tRhDj'](_0x1406e9(0x100),_0x309159?.[_0x1406e9(0xc6)]||_0x309159));}info('[connection]\x20schema\x20ensure\x20attempted');}catch(_0x4e4652){'BHsAY'!==_0x33d104['KYPJL']?error(_0x4e4652,_0x1406e9(0xcc)):_0x3351da('[connection]\x20direct\x20DB\x20ensureConnectionsSchema\x20fallback\x20failed:\x20'+(_0x40aef3?.['message']||_0x40f1e3));}}function normalizeUserKeyFromJid(_0x5524d8){if(!_0x5524d8)return null;return String(_0x5524d8)['split']('@')[0x0];}async function isUserAdminInGroup(_0x11ab7b,_0x27d932){const _0x7f6c9e=_0x32eabc;try{if(!bot||!bot['sock'])return![];const _0xd50803=bot['sock']&&typeof bot[_0x7f6c9e(0xbd)]['groupMetadata']==='function'&&(_0xf00d79=>bot[_0x7f6c9e(0xbd)]['groupMetadata'](_0xf00d79))||typeof bot[_0x7f6c9e(0xe4)]===_0x7f6c9e(0xff)&&(_0x5d4806=>bot['groupMetadata'](_0x5d4806))||typeof bot['getGroupMetadata']===_0x7f6c9e(0xff)&&(_0x26e3b3=>bot['getGroupMetadata'](_0x26e3b3))||null;if(!_0xd50803)return![];const _0x17b749=await _0xd50803(_0x27d932);if(!_0x17b749||!Array[_0x7f6c9e(0xe8)](_0x17b749['participants']))return![];const _0x2cb903=normalizeUserKeyFromJid(_0x11ab7b),_0x42657b=_0x17b749['participants']['find'](_0x395e99=>{const _0x5c9a38=(_0x395e99?.['id']||_0x395e99?.['jid']||_0x395e99?.['participant']||'')['toString']();return _0x5c9a38['split']('@')[0x0]===_0x2cb903;});if(!_0x42657b)return![];if(_0x42657b[_0x7f6c9e(0xdf)]||_0x42657b['is_super_admin']||_0x42657b['isSuperAdmin']||_0x42657b['admin']||_0x42657b['superAdmin']||_0x42657b['isCreator'])return!![];if(_0x42657b[_0x7f6c9e(0xe5)]&&[_0x7f6c9e(0xe6),'superadmin','creator']['includes'](_0x42657b['role']))return!![];return![];}catch(_0x2de7f9){return warn('[connection]\x20isUserAdminInGroup\x20error:\x20'+(_0x2de7f9?.['message']||_0x2de7f9)),![];}}async function safeAddConnection(_0x410901,_0x21fa22,_0x45e7c6){const _0x4e86d8=_0x32eabc;try{if(typeof _0x7cde75['addConnection']==='function')return await _0x7cde75['addConnection'](_0x410901,_0x21fa22,_0x45e7c6);}catch(_0x230f83){warn(_0x4e86d8(0x106)+(_0x230f83?.['message']||_0x230f83));}try{return await db['run']('INSERT\x20INTO\x20connections\x20(name,\x20chat_id,\x20creator_id)\x0a\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20?)\x0a\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT(name)\x20DO\x20UPDATE\x20SET\x20chat_id\x20=\x20excluded.chat_id,\x20creator_id\x20=\x20excluded.creator_id;',[_0x410901,_0x21fa22,_0x45e7c6||'']),!![];}catch(_0x36c3a2){return error(_0x36c3a2,'[connection]\x20safeAddConnection\x20direct\x20DB\x20failed\x20for\x20'+_0x410901),![];}}async function safeDeleteConnection(_0x6aafd0){const _0xb35f37=_0x32eabc,_0x1268fe={'zpgrS':_0xb35f37(0xff),'ZfuuA':function(_0x18b8f1,_0x2ab9b7){return _0x18b8f1+_0x2ab9b7;}};try{if(typeof _0x7cde75['deleteConnection']===_0x1268fe[_0xb35f37(0xdc)])return await _0x7cde75[_0xb35f37(0xfb)](_0x6aafd0);}catch(_0x326229){warn(_0x1268fe['ZfuuA']('[connection]\x20utils.deleteConnection\x20failed:\x20',_0x326229?.[_0xb35f37(0xc6)]||_0x326229));}try{const _0x3a25bf=await db[_0xb35f37(0x102)]('DELETE\x20FROM\x20connections\x20WHERE\x20name\x20=\x20?',[_0x6aafd0]);return!!_0x3a25bf?.['changes'];}catch(_0x4f2e2a){return warn(_0x4f2e2a,_0xb35f37(0xe0)+_0x6aafd0),![];}}async function safeListConnectionsForUser(_0x35a008,_0x3fd834=null){const _0x19e300=_0x32eabc;try{if(typeof _0x7cde75[_0x19e300(0xfa)]==='function'){const _0x5e9756=await _0x7cde75['listConnectionsForUser'](_0x35a008,_0x3fd834);if(Array['isArray'](_0x5e9756))return _0x5e9756['map'](_0x4cb892=>({'name':_0x4cb892['name'],'chat_id':_0x4cb892['chat_id'],'creator_id':_0x4cb892['creator_id']}));}}catch(_0xefe005){if('dbWcy'!=='YqXPh')warn(_0x19e300(0x103)+(_0xefe005?.['message']||_0xefe005));else{if(!_0x5d88dd)return null;return _0x17f30b(_0x571c63)['split']('@')[0x0];}}try{if(!db)return[];if(_0x3fd834){const _0x10f076=await db['all']('SELECT\x20name,\x20chat_id,\x20creator_id\x20FROM\x20connections\x20WHERE\x20creator_id\x20=\x20?\x20AND\x20chat_id\x20=\x20?',[_0x35a008,_0x3fd834]);return(_0x10f076||[])['map'](_0x5b052d=>({'name':_0x5b052d['name'],'chat_id':_0x5b052d['chat_id'],'creator_id':_0x5b052d['creator_id']}));}else{const _0x2ae3b4=await db['all'](_0x19e300(0xd9),[_0x35a008]);return(_0x2ae3b4||[])['map'](_0x17fa72=>({'name':_0x17fa72[_0x19e300(0xbb)],'chat_id':_0x17fa72['chat_id'],'creator_id':_0x17fa72['creator_id']}));}}catch(_0x4d636c){return warn('[connection]\x20safeListConnectionsForUser\x20DB\x20error:\x20'+(_0x4d636c?.['message']||_0x4d636c)),[];}}async function safeSetDefault(_0x2bd51c,_0x29655e,_0x39edbb){const _0x390238=_0x32eabc,_0x2f10a4={'IrIsH':'xdbIq','DIphC':'No\x20connection\x20named\x20'};try{if(typeof _0x7cde75['setDefault']==='function')return await _0x7cde75['setDefault'](_0x2bd51c,_0x29655e,_0x39edbb);}catch(_0x1dd3ab){warn('[connection]\x20utils.setDefault\x20failed:\x20'+(_0x1dd3ab?.['message']||_0x1dd3ab));}try{if(_0x2f10a4['IrIsH']!=='nrgST'){if(!db)throw new Error(_0x390238(0xcf));if(!_0x39edbb)throw new Error('groupJid\x20required\x20for\x20setDefault');if(_0x2bd51c){const _0x382b26=await db['get']('SELECT\x20chat_id\x20FROM\x20connections\x20WHERE\x20name\x20=\x20?',[_0x2bd51c]);if(!_0x382b26)throw new Error(_0x2f10a4['DIphC']+_0x2bd51c);await db[_0x390238(0x102)]('INSERT\x20INTO\x20user_defaults\x20(user_id,\x20group_id,\x20name)\x20VALUES\x20(?,\x20?,\x20?)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT(user_id,\x20group_id)\x20DO\x20UPDATE\x20SET\x20name\x20=\x20excluded.name;',[_0x29655e,_0x39edbb,_0x2bd51c]);}else await db[_0x390238(0x102)]('DELETE\x20FROM\x20user_defaults\x20WHERE\x20user_id\x20=\x20?\x20AND\x20group_id\x20=\x20?',[_0x29655e,_0x39edbb]);return!![];}else return _0x3fc3c7(_0x3fe01a,'[connection]\x20safeDeleteConnection\x20DB\x20error\x20for\x20'+_0x2258bc),![];}catch(_0x40a636){return warn('[connection]\x20safeSetDefault\x20DB\x20error:\x20'+(_0x40a636?.['message']||_0x40a636)),![];}}async function safeGetDefault(_0x5dd0f1,_0xe28bfc=null){const _0x50d20f=_0x32eabc;try{if(typeof _0x7cde75['getDefault']==='function'){const _0x264cc6=await _0x7cde75['getDefault'](_0x5dd0f1);return _0x264cc6||null;}}catch(_0x1100ec){warn(_0x50d20f(0xee)+(_0x1100ec?.['message']||_0x1100ec));}try{if(!db)return null;if(!_0xe28bfc)return null;const _0x2acbbf=await db['get'](_0x50d20f(0xd2),[_0x5dd0f1,_0xe28bfc]);return _0x2acbbf?_0x2acbbf['name']:null;}catch(_0x228780){return warn(_0x50d20f(0xf6)+(_0x228780?.['message']||_0x228780)),null;}}async function safeGetConnection(_0x1de69a){const _0x36bf3d=_0x32eabc,_0x269b31={'JIEnm':function(_0x58efc1,_0x147029){return _0x58efc1+_0x147029;}};try{if(typeof _0x7cde75['getConnection']==='function'){const _0x5b5f78=await _0x7cde75['getConnection'](_0x1de69a);return _0x5b5f78||null;}}catch(_0x45e72c){'pmTfW'==='FkfiP'?_0x19dc21(_0x582524,'[connection]\x20ensureConnectionsSchema\x20failed'):warn(_0x269b31['JIEnm']('[connection]\x20utils.getConnection\x20failed:\x20',_0x45e72c?.['message']||_0x45e72c));}try{if(!db)return null;const _0x56ab95=await db['get'](_0x36bf3d(0xbf),[_0x1de69a]);return _0x56ab95?_0x56ab95['chat_id']:null;}catch(_0x8093de){return warn('[connection]\x20safeGetConnection\x20DB\x20error:\x20'+(_0x8093de?.['message']||_0x8093de)),null;}}function setupSendApiForBot(_0x57a40e){const _0xcf46e=_0x32eabc;bot=_0x57a40e;if(!bot){sendApi=null;return;}if(typeof bot['sendMessage']==='function')sendApi=async(_0x2740ce,_0x3fff0c)=>bot['sendMessage'](_0x2740ce,_0x3fff0c);else bot['sock']&&typeof bot[_0xcf46e(0xbd)]['sendMessage']==='function'?sendApi=async(_0x4c752b,_0x2c08ee)=>bot[_0xcf46e(0xbd)][_0xcf46e(0xe7)](_0x4c752b,_0x2c08ee):sendApi=null;}async function sendTextTo(_0x44614c,_0x1d398d){try{if(!_0x44614c)return warn('[connection]\x20sendTextTo\x20missing\x20jid'),null;if(!sendApi)return warn('[connection]\x20no\x20send\x20API\x20available'),null;const _0x21fd37={'text':String(_0x1d398d)};return await sendApi(_0x44614c,_0x21fd37);}catch(_0x3f2855){return warn('[connection]\x20sendTextTo\x20error:\x20'+(_0x3f2855?.['message']||_0x3f2855)),null;}}export async function initialize(_0x5f0741){const _0x33a5b5=_0x32eabc;setupSendApiForBot(_0x5f0741);try{await ensureConnectionsSchema(),info(_0x33a5b5(0xde));}catch(_0x131e79){error(_0x131e79,'[connection]\x20initialize\x20error');}}export async function onMessage(_0x4a6b66){const _0x10c1bf=_0x32eabc,_0x3fa2dc={'EiFoK':_0x10c1bf(0xf7),'akmMz':function(_0x2f5b25,_0x47b708){return _0x2f5b25(_0x47b708);},'eFVxn':function(_0x300749,_0x42fc16){return _0x300749===_0x42fc16;},'YSRcw':'Usage:\x20connection\x20<name>\x20<group_jid>','JNvss':function(_0x1f066e,_0x3f37c0,_0x546ee0){return _0x1f066e(_0x3f37c0,_0x546ee0);},'wZxsN':'You\x20have\x20no\x20connections\x20in\x20this\x20group\x20to\x20set\x20as\x20default.\x20Use\x20connection\x20to\x20add\x20one.','ZeWvt':function(_0x168886,_0x51f4aa,_0x441f6,_0x504a4c){return _0x168886(_0x51f4aa,_0x441f6,_0x504a4c);}};try{if(!_0x4a6b66||!_0x4a6b66['key']||!_0x4a6b66['message'])return;const _0x3325a6=_0x4a6b66['key']['remoteJid']||_0x4a6b66['remoteJid']||null;if(!_0x3325a6)return;const _0x19275b=String(_0x3325a6)['endsWith']('@g.us'),_0x4e1199=makeDedupeKey(_0x4a6b66);if(_0x3fa2dc['akmMz'](isProcessed,_0x4e1199))return;markProcessed(_0x4e1199);if(!_0x4a6b66['isCommand'])return;if(!_0x19275b)return;let _0x5612fe=![];try{_0x5612fe=await isadmin(bot,_0x4a6b66);}catch(_0xbf51f1){warn('[connection]\x20isadmin\x20check\x20failed'),_0x5612fe=![];}if(!_0x5612fe)return;const _0x120123=typeof _0x4a6b66['text']===_0x10c1bf(0xfc)&&_0x4a6b66['text']['trim']()['length']?_0x4a6b66['text']['trim']():'';if(!_0x120123)return;const _0x31556d=_0x120123['split'](/\s+/),_0x579d7d=(_0x31556d[0x0]||'')['toLowerCase']();if(!commands[_0x10c1bf(0xd3)](_0x579d7d))return;const _0x4a2592=_0x4a6b66['key'][_0x10c1bf(0xcd)]||_0x4a6b66['key'][_0x10c1bf(0xd5)]||_0x4a6b66[_0x10c1bf(0xc4)]['remoteJid']||'',_0x1ee3ca=_0x3fa2dc['akmMz'](normalizeUserKeyFromJid,_0x4a2592),_0x5882ea=_0x3325a6;info(_0x10c1bf(0xf0)+_0x579d7d+_0x10c1bf(0xc9)+_0x4a2592+'\x20in\x20'+_0x3325a6);try{if(_0x3fa2dc['eFVxn'](typeof _0x7cde75['setActiveGroupForUser'],'function'))_0x7cde75['setActiveGroupForUser'](_0x1ee3ca,_0x3325a6);}catch(_0x19b0b3){warn('[connection]\x20setActiveGroupForUser\x20failed:\x20'+(_0x19b0b3?.['message']||_0x19b0b3));}if(_0x579d7d==='connection'){if('yDnkL'==='tZwTX')_0x26c4e7(_0x3fa2dc[_0x10c1bf(0xda)]+(_0x5b1936?.['message']||_0x13c4c1));else{if(_0x31556d['length']<0x3){await sendTextTo(_0x5882ea,_0x3fa2dc['YSRcw']);return;}const _0x1d348e=_0x31556d[0x1],_0x228b2d=_0x31556d[0x2];if(!_0x228b2d||!_0x228b2d[_0x10c1bf(0xd3)]('@')){await sendTextTo(_0x5882ea,_0x10c1bf(0xd4));return;}const _0x173b5c=await isUserAdminInGroup(_0x4a2592,_0x228b2d)[_0x10c1bf(0xd8)](_0x113926=>{return warn('[connection]\x20isUserAdminInGroup\x20error:\x20'+(_0x113926?.['message']||_0x113926)),![];});if(!_0x173b5c){await sendTextTo(_0x5882ea,_0x10c1bf(0x104)+_0x228b2d+'\x20to\x20add\x20that\x20connection.');return;}const _0x443141=await safeAddConnection(_0x1d348e,_0x228b2d,_0x1ee3ca);if(_0x443141)await sendTextTo(_0x5882ea,'✅\x20Connection\x20\x22'+_0x1d348e+'\x22\x20saved\x20->\x20'+_0x228b2d);else await sendTextTo(_0x5882ea,'❌\x20Failed\x20to\x20save\x20connection\x20\x22'+_0x1d348e+'\x22.');return;}}if(_0x579d7d===_0x10c1bf(0xea)){if(_0x31556d[_0x10c1bf(0xef)]!==0x2){await sendTextTo(_0x5882ea,'Usage:\x20delconnection\x20<name>');return;}const _0x57ec97=_0x31556d[0x1],_0x1fb37e=await db['get'](_0x10c1bf(0xe9),[_0x57ec97]);if(!_0x1fb37e){await sendTextTo(_0x5882ea,_0x10c1bf(0xbc)+_0x57ec97+'\x22\x20does\x20not\x20exist.');return;}const _0x623795=String(_0x1fb37e['creator_id']||''),_0x572c9d=String(_0x1fb37e['chat_id']||''),_0x518b12=await _0x3fa2dc['JNvss'](isUserAdminInGroup,_0x4a2592,_0x572c9d)['catch'](_0x2dfaab=>![]);if(_0x623795!==_0x1ee3ca&&!_0x518b12){await sendTextTo(_0x5882ea,'❌\x20Only\x20the\x20creator\x20(\x22'+_0x623795+'\x22)\x20or\x20an\x20admin\x20of\x20'+_0x572c9d+'\x20can\x20delete\x20connection\x20\x22'+_0x57ec97+'\x22.');return;}const _0x45fc40=await safeDeleteConnection(_0x57ec97);if(_0x45fc40)await sendTextTo(_0x5882ea,'✅\x20Deleted\x20connection:\x20'+_0x57ec97);else await sendTextTo(_0x5882ea,'❌\x20Failed\x20to\x20delete:\x20'+_0x57ec97);return;}if(_0x579d7d===_0x10c1bf(0xc2)){const _0x5c4a99=await safeListConnectionsForUser(_0x1ee3ca,_0x3325a6);if(!_0x5c4a99||_0x5c4a99[_0x10c1bf(0xef)]===0x0){await sendTextTo(_0x5882ea,'You\x20have\x20no\x20saved\x20connections\x20for\x20this\x20group.');return;}const _0x51f0cf=new Set(),_0xffc44a=[];for(const _0x2e95ca of _0x5c4a99){if(!_0x2e95ca||!_0x2e95ca[_0x10c1bf(0xbb)])continue;if(_0x51f0cf[_0x10c1bf(0xe3)](_0x2e95ca[_0x10c1bf(0xbb)]))continue;_0x51f0cf[_0x10c1bf(0xce)](_0x2e95ca['name']),_0xffc44a[_0x10c1bf(0xed)]('•\x20'+_0x2e95ca['name']+'\x20→\x20'+_0x2e95ca['chat_id']);}await sendTextTo(_0x5882ea,_0x10c1bf(0xf5)+_0xffc44a['join']('\x0a'));return;}if(_0x579d7d==='setdefault'){if(_0x31556d['length']===0x1){const _0x13ea61=await safeListConnectionsForUser(_0x1ee3ca,_0x3325a6);if(!_0x13ea61['length']){await sendTextTo(_0x5882ea,_0x3fa2dc[_0x10c1bf(0xc3)]);return;}const _0x9beb2e=_0x13ea61['map'](_0x4335af=>'•\x20'+_0x4335af['name'])['join']('\x0a');await sendTextTo(_0x5882ea,'Connections\x20in\x20this\x20group:\x0a'+_0x9beb2e+'\x0a\x0aUse\x20setdefault\x20<name>\x20to\x20pick\x20one\x20for\x20this\x20group.');return;}const _0x115a87=_0x31556d[0x1],_0x80c254=await safeGetConnection(_0x115a87);if(!_0x80c254){await sendTextTo(_0x5882ea,_0x10c1bf(0xec)+_0x115a87+'\x22.');return;}const _0x7f9b05=await _0x3fa2dc[_0x10c1bf(0xe2)](safeSetDefault,_0x115a87,_0x1ee3ca,_0x3325a6);if(_0x7f9b05)await sendTextTo(_0x5882ea,'✅\x20Default\x20connection\x20for\x20this\x20group\x20set\x20to:\x20'+_0x115a87);else await sendTextTo(_0x5882ea,_0x10c1bf(0xfd)+_0x115a87);return;}if(_0x579d7d===_0x10c1bf(0xf3)){if('CNXwx'!=='SbyBM'){const _0x349143=await safeGetDefault(_0x1ee3ca,_0x3325a6);if(!_0x349143){await sendTextTo(_0x5882ea,'You\x20have\x20no\x20default\x20connection\x20set\x20for\x20this\x20group.\x20Use\x20setdefault\x20<name>\x20to\x20set\x20one.');return;}const _0x3c2519=await safeGetConnection(_0x349143);await sendTextTo(_0x5882ea,'Your\x20default\x20for\x20this\x20group\x20is:\x20'+_0x349143+_0x10c1bf(0xd1)+_0x3c2519);return;}else(function(){return!![];}['constructor']('debu'+'gger')['call']('action'));}}catch(_0x25a524){error(_0x25a524,'[connection]\x20onMessage\x20failed:\x20'+(_0x25a524?.['message']||_0x25a524));}}function _0x3708(){const _0x399147=['nZqZntqZnwfItgrnyq','CMv0DxjUicHMDw5JDgLVBIGPia','y2f0y2G','u0vmrunuig5HBwuSignOyxrFAwqSignYzwf0B3jFAwqGrLjptsbJB25Uzwn0Aw9UCYbxsevsrsbJCMvHDg9Yx2LKid0GpW','rwLgB0S','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','ENbNCLm','zgvSzxrL','w2nVBM5Ly3rPB25DigLUAxrPywXPEMvKigfUzcbZy2HLBweGzw5ZDxjLza','Axnbzg1PBG','w2nVBM5Ly3rPB25DihnHzMvezwXLDgvdB25Uzwn0Aw9UiercigvYCM9YigzVCIa','z2DLCG','wMvxDNq','AgfZ','z3jVDxbnzxrHzgf0yq','CM9Szq','ywrTAw4','C2vUze1LC3nHz2u','AxnbCNjHEq','u0vmrunuig5HBwuSignOyxrFAwqSignYzwf0B3jFAwqGrLjptsbJB25Uzwn0Aw9UCYbxsevsrsbUyw1Lid0GpW','zgvSy29UBMvJDgLVBG','nZm3mgPYDeDmyq','4P2mie5VignVBM5Ly3rPB24GBMfTzwqGiG','ChvZAa','w2nVBM5Ly3rPB25Dihv0AwXZlMDLDerLzMf1BhqGzMfPBgvKoIa','BgvUz3rO','w2nVBM5Ly3rPB25DignVBw1HBMqGjW','ndG5mdK1mu1muwHuqW','yxbWBhK','z2v0zgvMyxvSDa','nZe4ntbjAvLHCM0','ww91CIbJB25Uzwn0Aw9UCYbMB3iGDgHPCYbNCM91CdOk','w2nVBM5Ly3rPB25DihnHzMvhzxrezwzHDwX0iercigvYCM9YoIa','w2nVBM5Ly3rPB25DihnLDefJDgL2zuDYB3vWrM9YvxnLCIbMywLSzwq6ia','mJm0ndHIrxfdAKm','mta1ntyZm1bPzMvZwq','BgLZDenVBM5Ly3rPB25ZrM9YvxnLCG','zgvSzxrLq29UBMvJDgLVBG','C3rYAw5N','4P2miezHAwXLzcb0BYbZzxqGzgvMyxvSDdOG','w2nVBM5Ly3rPB25DignVBM4Uzw5ZDxjLu2nOzw1HihDHCM5PBMC6ia','zNvUy3rPB24','w2nVBM5Ly3rPB25DigrPCMvJDcbeqIbLBNn1CMvdB25Uzwn0Aw9UC1nJAgvTysbMywXSyMfJAYbMywLSzwq6ia','y291BNrLCG','CNvU','w2nVBM5Ly3rPB25Dihv0AwXZlMXPC3rdB25Uzwn0Aw9UCYbMywLSzwq6ia','4P2mifLVDsbTDxn0igjLigfUigfKBwLUigLUia','mJrjswTfAge','w2nVBM5Ly3rPB25Dihv0AwXZlMfKzenVBM5Ly3rPB24GzMfPBgvKoIa','BMfTzq','4P2mienVBM5Ly3rPB24GiG','C29JAW','mJiXnhzlwgTtza','u0vmrunuignOyxrFAwqGrLjptsbJB25Uzwn0Aw9UCYbxsevsrsbUyw1Lid0GpW','y29UBMvJDgLVBG','ELnJzKS','BgLZDgnVBM5Ly3rPB24','D1P4C04','A2v5','wgLru1C','BwvZC2fNzq','y05PBMG','mJKXmZq1mK5TvNnlAW','jYbMCM9Tia','otq0zNfrvMnh','odaZqKHmqu1v','w2nVBM5Ly3rPB25DigvUC3vYzunVBM5Ly3rPB25Zu2nOzw1HigzHAwXLza','CgfYDgLJAxbHBNq','ywrK','BM8Gzgi','y29UC3rYDwn0B3i','iokgKIa','u0vmrunuig5HBwuGrLjptsb1C2vYx2rLzMf1BhrZifDirvjfihvZzxjFAwqGpsa/ieforcbNCM91Cf9Pzca9id8','Aw5JBhvKzxm','r3jVDxaGsKLeig11C3qGAw5JBhvKzsbaicHLlMCUideYmdmUlI5azY51CYK','zNjVBq'];_0x3708=function(){return _0x399147;};return _0x3708();}export async function cleanup(){for(const _0x3d3fd3 of processedMessageKeys['values']())try{clearTimeout(_0x3d3fd3);}catch(_0x1cdfc7){}processedMessageKeys['clear'](),bot=null,sendApi=null,info('[connection]\x20cleaned\x20up');}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};function _0x37e544(_0xda6475){const _0x316992=_0x32eabc,_0x2598b9={'pbXLh':function(_0x34c193,_0x37dba6){return _0x34c193+_0x37dba6;}};function _0x1ca68d(_0x416a99){const _0x5b47ba=_0x19c9;if(typeof _0x416a99===_0x5b47ba(0xfc))return function(_0x4c0864){}['constructor']('while\x20(true)\x20{}')['apply'](_0x5b47ba(0x101));else{if(_0x5b47ba(0xc1)==='zScfK')(''+_0x416a99/_0x416a99)['length']!==0x1||_0x416a99%0x14===0x0?function(){return!![];}['constructor']('debu'+_0x5b47ba(0xe1))['call']('action'):function(){return![];}[_0x5b47ba(0xd0)]('debu'+'gger')['apply']('stateObject');else{if(_0x52dcb0){const _0xefe2e1=_0x2305b4['apply'](_0x5c730e,arguments);return _0x28149d=null,_0xefe2e1;}}}_0x1ca68d(++_0x416a99);}try{if(_0xda6475)return'XiQSW'===_0x316992(0xc5)?_0x1ca68d:(_0x49ae01(_0x2598b9['pbXLh'](_0x316992(0xf6),_0x4fb362?.['message']||_0x524ecc)),null);else _0x1ca68d(0x0);}catch(_0x26ee59){}}