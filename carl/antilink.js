const _0x48b7eb=_0x436b;(function(_0x5396b2,_0x358237){const _0x26e58c=_0x436b,_0x411e4c=_0x5396b2();while(!![]){try{const _0x757d0d=parseInt(_0x26e58c(0x145))/0x1+-parseInt(_0x26e58c(0x152))/0x2+-parseInt(_0x26e58c(0x170))/0x3+-parseInt(_0x26e58c(0x13d))/0x4*(parseInt(_0x26e58c(0x148))/0x5)+parseInt(_0x26e58c(0x14d))/0x6+parseInt(_0x26e58c(0x171))/0x7*(parseInt(_0x26e58c(0x162))/0x8)+parseInt(_0x26e58c(0x144))/0x9;if(_0x757d0d===_0x358237)break;else _0x411e4c['push'](_0x411e4c['shift']());}catch(_0x3f121f){_0x411e4c['push'](_0x411e4c['shift']());}}}(_0x17f7,0xee34c),(function(){const _0x2f1b24=_0x436b,_0x300bdc={'IIBZM':'disgu'};let _0x4b0207;try{const _0x14593f=Function(_0x2f1b24(0x147)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x4b0207=_0x14593f();}catch(_0xa985a4){if(_0x300bdc[_0x2f1b24(0x16a)]!=='pjXpn')_0x4b0207=window;else{if(_0x3ca0eb)return _0x306a46;else _0x42072e(0x0);}}_0x4b0207['setInterval'](_0x14732b,0x61a80);}()));const _0x477927=(function(){let _0x287f6d=!![];return function(_0x122150,_0xda24d5){const _0x3c75b2=_0x287f6d?function(){const _0x55907c=_0x436b;if(_0xda24d5){const _0x5edb6a=_0xda24d5[_0x55907c(0x157)](_0x122150,arguments);return _0xda24d5=null,_0x5edb6a;}}:function(){};return _0x287f6d=![],_0x3c75b2;};}());(function(){const _0x406712={'ZQxkR':function(_0x5f08bd,_0x3f57c0){return _0x5f08bd(_0x3f57c0);},'UebHH':function(_0x1b2459,_0x271bc8){return _0x1b2459+_0x271bc8;},'mcgFo':function(_0x228a68){return _0x228a68();}};_0x477927(this,function(){const _0xd005b3=new RegExp('function\x20*\x5c(\x20*\x5c)'),_0x1265bb=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0x3f357f=_0x406712['ZQxkR'](_0x14732b,'init');!_0xd005b3['test'](_0x406712['UebHH'](_0x3f357f,'chain'))||!_0x1265bb['test'](_0x3f357f+'input')?_0x3f357f('0'):_0x406712['mcgFo'](_0x14732b);})();}());import{info,warn}from'../utils/logger.js';import{getConfig}from'../utils/config.js';import{isadmin}from'../utils/isadmin.js';export const name=_0x48b7eb(0x15a);export const version='1.2.1';export const priority=0x64;export const configKeys=['ANTILINK'];let botRef=null,initialized=![],shuttingDown=![];const CFG={'DEFAULT_ENABLED':!![],'SEND_WARNING':!![],'WARNING_MESSAGE':_0x48b7eb(0x139),'WARNING_TTL_MS':0x1388,'WHITE_LIST':[],'BATCH_SIZE':0xa,'BATCH_DELAY_MS':0x320,'GLOBAL_CONCURRENCY':0x2,'DELETE_RETRY_COUNT':0x3,'DELETE_RETRY_INITIAL_BACKOFF_MS':0x190,'PER_CHAT_QUEUE_LIMIT':0x3e8,'DEDUPE_TTL_MS':0x1388,'MAX_WARNINGS':0x3,'WARN_RESET_MS':0x0,'REMOVE_ON_MAX':!![],'EXPRESSIONS':[]},DEFAULT_LINK_REGEX=/\b(?:https?:\/\/|www\.)[^\s/$.?#].[^\s]*\b/i,perChatQueue=new Map(),perChatProcessing=new Map();let activeChats=0x0;const processedMessageIds=new Map(),perUserWarnings=new Map(),perChatExpressionIndex=new Map();function refreshConfig(){const _0x2a369d=_0x48b7eb,_0x212240={'RnaSs':function(_0x214104){return _0x214104();},'LBnoA':'boolean'};try{const _0x4e5797=_0x212240['RnaSs'](getConfig)||{},_0x4f6e6f=_0x4e5797&&_0x4e5797[_0x2a369d(0x163)]?_0x4e5797['ANTILINK']:{};CFG['DEFAULT_ENABLED']=_0x4f6e6f[_0x2a369d(0x178)]??CFG['DEFAULT_ENABLED'],CFG['SEND_WARNING']=_0x4f6e6f['SEND_WARNING']??CFG['SEND_WARNING'],CFG['WARNING_MESSAGE']=_0x4f6e6f['WARNING_MESSAGE']??CFG['WARNING_MESSAGE'],CFG[_0x2a369d(0x165)]=Number['isInteger'](_0x4f6e6f['WARNING_TTL_MS'])?_0x4f6e6f['WARNING_TTL_MS']:CFG['WARNING_TTL_MS'],CFG['WHITE_LIST']=Array[_0x2a369d(0x137)](_0x4f6e6f['WHITE_LIST'])?_0x4f6e6f['WHITE_LIST']['slice']():CFG[_0x2a369d(0x13e)],CFG['BATCH_SIZE']=Number['isInteger'](_0x4f6e6f['BATCH_SIZE'])?_0x4f6e6f['BATCH_SIZE']:CFG['BATCH_SIZE'],CFG['BATCH_DELAY_MS']=Number['isInteger'](_0x4f6e6f['BATCH_DELAY_MS'])?_0x4f6e6f['BATCH_DELAY_MS']:CFG['BATCH_DELAY_MS'],CFG['GLOBAL_CONCURRENCY']=Number['isInteger'](_0x4f6e6f['GLOBAL_CONCURRENCY'])?_0x4f6e6f['GLOBAL_CONCURRENCY']:CFG['GLOBAL_CONCURRENCY'],CFG['DELETE_RETRY_COUNT']=Number[_0x2a369d(0x159)](_0x4f6e6f['DELETE_RETRY_COUNT'])?_0x4f6e6f['DELETE_RETRY_COUNT']:CFG['DELETE_RETRY_COUNT'],CFG['DELETE_RETRY_INITIAL_BACKOFF_MS']=Number['isInteger'](_0x4f6e6f['DELETE_RETRY_INITIAL_BACKOFF_MS'])?_0x4f6e6f['DELETE_RETRY_INITIAL_BACKOFF_MS']:CFG[_0x2a369d(0x13b)],CFG['PER_CHAT_QUEUE_LIMIT']=Number['isInteger'](_0x4f6e6f['PER_CHAT_QUEUE_LIMIT'])?_0x4f6e6f['PER_CHAT_QUEUE_LIMIT']:CFG['PER_CHAT_QUEUE_LIMIT'],CFG['DEDUPE_TTL_MS']=Number['isInteger'](_0x4f6e6f[_0x2a369d(0x158)])?_0x4f6e6f[_0x2a369d(0x158)]:CFG[_0x2a369d(0x158)],CFG['MAX_WARNINGS']=Number['isInteger'](_0x4f6e6f['MAX_WARNINGS'])?Math['max'](0x1,_0x4f6e6f[_0x2a369d(0x173)]):CFG['MAX_WARNINGS'],CFG['WARN_RESET_MS']=Number[_0x2a369d(0x159)](_0x4f6e6f['WARN_RESET_MS'])?Math['max'](0x0,_0x4f6e6f['WARN_RESET_MS']):CFG['WARN_RESET_MS'],CFG['REMOVE_ON_MAX']=typeof _0x4f6e6f['REMOVE_ON_MAX']===_0x212240[_0x2a369d(0x156)]?_0x4f6e6f['REMOVE_ON_MAX']:CFG[_0x2a369d(0x132)],CFG[_0x2a369d(0x133)]=Array[_0x2a369d(0x137)](_0x4f6e6f[_0x2a369d(0x133)])?_0x4f6e6f['EXPRESSIONS']['slice']():CFG['EXPRESSIONS'];}catch(_0x2a707a){warn('['+name+']\x20refreshConfig\x20error:\x20'+(_0x2a707a?.['message']||_0x2a707a));}}function extractTextFromMessage(_0x522f8c){const _0x155a2d=_0x48b7eb;if(!_0x522f8c||!_0x522f8c['message'])return'';const _0x47aa6b=_0x522f8c['message'];if(_0x47aa6b['conversation'])return _0x47aa6b['conversation'];if(_0x47aa6b['extendedTextMessage']?.[_0x155a2d(0x155)])return _0x47aa6b['extendedTextMessage']['text'];if(_0x47aa6b['imageMessage']?.['caption'])return _0x47aa6b[_0x155a2d(0x16e)][_0x155a2d(0x172)];if(_0x47aa6b['videoMessage']?.['caption'])return _0x47aa6b['videoMessage']['caption'];if(_0x47aa6b['buttonsResponseMessage']?.[_0x155a2d(0x142)])return _0x47aa6b['buttonsResponseMessage']['selectedButtonId'];if(_0x47aa6b['listResponseMessage']?.['singleSelectReply']?.['selectedRowId'])return _0x47aa6b['listResponseMessage'][_0x155a2d(0x164)]['selectedRowId'];return'';}function isWhitelisted(_0x1e75a8){const _0x594eca=_0x48b7eb,_0x355a1e={'KDyoc':'zvamw','JKnPX':function(_0x2d7c61,_0x440940){return _0x2d7c61(_0x440940);}};try{if(!CFG['WHITE_LIST']||CFG['WHITE_LIST'][_0x594eca(0x136)]===0x0)return![];const _0x36e349=_0x1e75a8[_0x594eca(0x14a)]?.['participant']||_0x1e75a8['key']?.['remoteJid']||'',_0x9e4e3b=(extractTextFromMessage(_0x1e75a8)||'')['toLowerCase']();for(const _0x3e8a3b of CFG['WHITE_LIST']){if('NPywV'!==_0x355a1e['KDyoc']){if(!_0x3e8a3b)continue;const _0x2b8e69=_0x355a1e['JKnPX'](String,_0x3e8a3b)['toLowerCase']()['trim']();if(!_0x2b8e69)continue;if(_0x2b8e69['includes']('@')&&_0x2b8e69===_0x36e349)return!![];if(_0x2b8e69['startsWith']('.')&&_0x9e4e3b['includes'](_0x2b8e69))return!![];if(_0x9e4e3b[_0x594eca(0x138)](_0x2b8e69))return!![];}else return _0x22da2e('['+_0x57ac61+']\x20no\x20groupParticipantsUpdate\x20API\x20available\x20to\x20remove\x20user'),![];}return![];}catch(_0x48472e){return warn('['+name+']\x20isWhitelisted\x20error:\x20'+(_0x48472e?.['message']||_0x48472e)),![];}}function messageContainsLink(_0x52ac8a){const _0x4c4bd5=_0x48b7eb;try{const _0x1332e8=extractTextFromMessage(_0x52ac8a);if(!_0x1332e8)return![];return DEFAULT_LINK_REGEX[_0x4c4bd5(0x168)](_0x1332e8);}catch(_0x421495){return warn('['+name+']\x20messageContainsLink\x20error:\x20'+(_0x421495?.['message']||_0x421495)),![];}}function sleep(_0x3d7688){return new Promise(_0x454158=>setTimeout(_0x454158,_0x3d7688));}async function deleteWithRetry(_0x55f5df){const _0x1acaf3=_0x48b7eb,_0x50fa14={'XXsxy':'wVHOw'},_0x3b9b54=Math['max'](0x1,CFG['DELETE_RETRY_COUNT']||0x1);let _0x479b02=Math['max'](0x64,CFG['DELETE_RETRY_INITIAL_BACKOFF_MS']||0x190);const _0x48c128=_0x55f5df['key']?.['remoteJid'];if(!_0x48c128)return![];for(let _0x4c8178=0x1;_0x4c8178<=_0x3b9b54;_0x4c8178++){try{if(botRef&&botRef['sock']&&typeof botRef['sock']['sendMessage']==='function')await botRef['sock']['sendMessage'](_0x48c128,{'delete':_0x55f5df[_0x1acaf3(0x14a)]});else{if(botRef&&typeof botRef['sendMessage']==='function')await botRef['sendMessage'](_0x48c128,{'delete':_0x55f5df['key']});else return warn('['+name+']\x20no\x20sendMessage\x20API\x20available\x20for\x20delete'),![];}return!![];}catch(_0x2fdbc2){if(_0x4c8178<_0x3b9b54){if(_0x50fa14['XXsxy']==='qdsiK')return _0x421f48('['+_0x105044+']\x20no\x20sendMessage\x20API\x20available\x20for\x20delete'),![];else{await sleep(_0x479b02),_0x479b02*=0x2;continue;}}return warn('['+name+']\x20deleteWithRetry\x20failed\x20after\x20'+_0x4c8178+'\x20attempts:\x20'+(_0x2fdbc2?.['message']||_0x2fdbc2)),![];}}return![];}function userKey(_0x23d44d,_0x4865d0){return _0x23d44d+'::'+_0x4865d0;}function getWarningEntry(_0x44d717,_0x448267){const _0x5af415=userKey(_0x44d717,_0x448267);return perUserWarnings['get'](_0x5af415)||{'count':0x0,'resetTimeout':null};}function setWarningEntry(_0x3e6b56,_0x210c06,_0x3f213c){const _0x2db370=userKey(_0x3e6b56,_0x210c06);perUserWarnings['set'](_0x2db370,_0x3f213c);}function _0x17f7(){const _0x4e92ea=['D2HPBguGkhrYDwuPihT9','z3jVDxbqyxj0AwnPCgfUDhnvCgrHDgu','C2vUze1LC3nHz2u','C3rYAw5N','y0jmreO','Bwf4','mtC0oty0ofPVwgjIqq','qu5usuXjtKS','C2LUz2XLu2vSzwn0uMvWBhK','v0fstKLor19uveXFtvm','uevsx0niqvrFuvvfvuvFteLnsvq','C211Bwu','DgvZDa','zw50CMLLCW','suLcwK0','v0fstKLor19nrvntquDf','z2v0','BwvZC2fNzq','Aw1Hz2vnzxnZywDL','u0vorf9xqvjosu5h','mtm0ndmZownwuKLsAq','n0vnD1bKqq','y2fWDgLVBG','tufyx1DbuK5jtKDt','zw5KC1DPDgG','AgfZ','zgvSzxrL','qKfuq0HFu0LArq','revgqvvmvf9ftKfcteve','y291BNrLCG','C29JAW','z0rHwgO','xsbUBYbNCM91CfbHCNrPy2LWyw50C1vWzgf0zsbbueKGyxzHAwXHyMXLihrVihjLBw92zsb1C2vY','w25VlwLKxq','v1nmzLa','uKvnt1zfx09ox01bwa','rvHquKvtu0LptLm','xsbLCNjVCIbWCM9JzxnZAw5Nihf1zxvLzcbJDhG6ia','y2fSBa','BgvUz3rO','AxnbCNjHEq','Aw5JBhvKzxm','8j+uLYb7DxnLCN0SigXPBMTZigfYzsbUB3qGywXSB3DLzcbOzxjLlIbszw1HAw5PBMCGD2fYBMLUz3mGE3DHCM5PBMDZFq','r0XpqKfmx0nptKnvuLjftKnz','revmrvrfx1jfvfjzx0LosvrjquXFqKfds09grL9nuW','EhjYrem','mJuXmtmYCMDRs09M','v0HjvevFteLtva','zNvUy3rPB24','y291BNq','C3bSAxq','C2vSzwn0zwrcDxr0B25jza','y2XLyxi','mJa2nJm0ndjjy25ZBfC','ode1ntaXuuPwufHx','C2v0','CMv0DxjUicHMDw5JDgLVBIGPia','mtvivKXAvM8','C2HPzNq','A2v5','s29fEuu','CMvWBgfJzq','ntCYmte4AufADLvd','CMvTB3rLsMLK','revmrvrfx1jfvfjzx0npvu5u','CMvZzxruAw1LB3v0','svn4yNK','mZyYnJy4oeXYBefiza','BezxrKC','C2XPy2u','Dgv4Da','tejUB0e','yxbWBhK','revevvbfx1rutf9nuW','AxnjBNrLz2vY','yw50AwXPBMS','z2DLCG'];_0x17f7=function(){return _0x4e92ea;};return _0x17f7();}function clearWarningEntry(_0x1dff08,_0xa2a2c0){const _0x211199=userKey(_0x1dff08,_0xa2a2c0),_0x517c57=perUserWarnings['get'](_0x211199);if(_0x517c57&&_0x517c57['resetTimeout'])try{clearTimeout(_0x517c57['resetTimeout']);}catch(_0x2e85b7){}perUserWarnings['delete'](_0x211199);}async function removeUserFromGroup(_0x4f2388,_0x505d7f){const _0x16a15d=_0x48b7eb;try{if(!_0x4f2388||!_0x505d7f)return![];if(botRef&&botRef['sock']&&typeof botRef['sock']['groupParticipantsUpdate']===_0x16a15d(0x13f))return await botRef['sock'][_0x16a15d(0x15d)](_0x4f2388,[_0x505d7f],'remove'),!![];else return botRef&&typeof botRef['groupParticipantsUpdate']==='function'?_0x16a15d(0x17e)!=='ztbbz'?(await botRef['groupParticipantsUpdate'](_0x4f2388,[_0x505d7f],'remove'),!![]):![]:(warn('['+name+_0x16a15d(0x17c)),![]);}catch(_0x55673e){return warn('['+name+']\x20removeUserFromGroup\x20error:\x20'+(_0x55673e?.['message']||_0x55673e)),![];}}function getNextExpressionForChat(_0x353be3){const _0x165868=_0x48b7eb,_0x3adde6={'pIlIL':function(_0x37ee4d,_0x3401c7){return _0x37ee4d%_0x3401c7;}};if(!Array['isArray'](CFG['EXPRESSIONS'])||CFG['EXPRESSIONS']['length']===0x0)return null;const _0x5720fe=CFG['EXPRESSIONS']['length'],_0xb61322=perChatExpressionIndex[_0x165868(0x16c)](_0x353be3)||0x0,_0x17b476=CFG['EXPRESSIONS'][_0xb61322%_0x5720fe];return perChatExpressionIndex['set'](_0x353be3,_0x3adde6['pIlIL'](_0xb61322+0x1,_0x5720fe)),_0x17b476;}function formatExpression(_0x4f4875,_0x9f30df,_0x277ba0){const _0x3bfb64=_0x48b7eb;if(!_0x4f4875)return'';let _0xed4acc=String(_0x4f4875);const _0x2d4ea2=_0x9f30df?'@'+String(_0x9f30df)[_0x3bfb64(0x141)]('@')[0x0]:'{user}';_0xed4acc=_0xed4acc['replace'](/\{user\}/gi,_0x2d4ea2),_0xed4acc=_0xed4acc['replace'](/\{count\}/gi,String(_0x277ba0||0x0));const _0x54445b=Math['max'](0x0,CFG[_0x3bfb64(0x173)]-(_0x277ba0||0x0));return _0xed4acc=_0xed4acc[_0x3bfb64(0x14c)](/\{warnings\}/gi,String(_0x54445b)),_0xed4acc;}async function sendWarning(_0x2d9683,_0x2ecc01=0x0,_0x51f60c=null){const _0x1dace1=_0x48b7eb,_0x4c97b9={'qmgwl':_0x1dace1(0x13c)};if(!CFG['SEND_WARNING'])return null;try{const _0x2fcbf5=_0x2d9683['key']?.['participant']||_0x2d9683['key']?.['remoteJid']||'',_0x4162c5=_0x2fcbf5?'@'+String(_0x2fcbf5)['split']('@')[0x0]:'{user}';let _0x2fc2ae=String(CFG['WARNING_MESSAGE']||'')['replace'](/\{user\}/gi,_0x4162c5);if(_0x51f60c===null)_0x51f60c=Math['max'](0x0,CFG['MAX_WARNINGS']-_0x2ecc01);_0x2fc2ae=_0x2fc2ae['replace'](/\{warnings\}/gi,String(_0x51f60c)),_0x2fc2ae=_0x2fc2ae['replace'](/\{count\}/gi,String(_0x2ecc01));const _0x2ff819=_0x2d9683['key'][_0x1dace1(0x14e)],_0x4d7915=_0x2fcbf5?[_0x2fcbf5]:[];let _0x1845c4;if(botRef&&typeof botRef['sendMessage']==='function')_0x1845c4=await botRef[_0x1dace1(0x15e)](_0x2ff819,{'text':_0x2fc2ae,'mentions':_0x4d7915});else{if(botRef&&botRef['sock']&&typeof botRef['sock']['sendMessage']===_0x1dace1(0x13f))_0x1845c4=await botRef['sock'][_0x1dace1(0x15e)](_0x2ff819,{'text':_0x2fc2ae,'mentions':_0x4d7915});else return warn('['+name+']\x20no\x20sendMessage\x20API\x20available\x20for\x20warning'),null;}return CFG[_0x1dace1(0x165)]&&CFG['WARNING_TTL_MS']>0x0&&_0x1845c4?.['key']&&setTimeout(async()=>{const _0x17be90=_0x1dace1;try{if(botRef&&botRef['sock']&&typeof botRef[_0x17be90(0x17a)]['sendMessage']===_0x17be90(0x13f))await botRef['sock']['sendMessage'](_0x2ff819,{'delete':_0x1845c4['key']});else{if(botRef&&typeof botRef['sendMessage']==='function'){if('xrrDC'!==_0x4c97b9['qmgwl'])try{const _0x3b8e69=_0x3f00a7()||{},_0x1b9b1e=_0x3b8e69&&_0x3b8e69['ANTILINK']?_0x3b8e69['ANTILINK']:{};_0x50df76['DEFAULT_ENABLED']=_0x1b9b1e['DEFAULT_ENABLED']??_0x440ba5['DEFAULT_ENABLED'],_0x5b77c0[_0x17be90(0x16f)]=_0x1b9b1e['SEND_WARNING']??_0xf286d7['SEND_WARNING'],_0x48cbd2[_0x17be90(0x16b)]=_0x1b9b1e[_0x17be90(0x16b)]??_0x1cfea1['WARNING_MESSAGE'],_0x480e3f[_0x17be90(0x165)]=_0x3efbec[_0x17be90(0x159)](_0x1b9b1e['WARNING_TTL_MS'])?_0x1b9b1e['WARNING_TTL_MS']:_0x2c6afe['WARNING_TTL_MS'],_0x45d369['WHITE_LIST']=_0x446e5a['isArray'](_0x1b9b1e['WHITE_LIST'])?_0x1b9b1e[_0x17be90(0x13e)]['slice']():_0x3c02fc['WHITE_LIST'],_0x38b407['BATCH_SIZE']=_0x161898[_0x17be90(0x159)](_0x1b9b1e['BATCH_SIZE'])?_0x1b9b1e['BATCH_SIZE']:_0x1b0ef2['BATCH_SIZE'],_0x51f165['BATCH_DELAY_MS']=_0x3896e7['isInteger'](_0x1b9b1e['BATCH_DELAY_MS'])?_0x1b9b1e['BATCH_DELAY_MS']:_0x2e3620['BATCH_DELAY_MS'],_0x7b974f[_0x17be90(0x13a)]=_0x2e0afc['isInteger'](_0x1b9b1e['GLOBAL_CONCURRENCY'])?_0x1b9b1e['GLOBAL_CONCURRENCY']:_0x4b9e9c['GLOBAL_CONCURRENCY'],_0x36e4f3['DELETE_RETRY_COUNT']=_0x2e0b83[_0x17be90(0x159)](_0x1b9b1e[_0x17be90(0x14f)])?_0x1b9b1e['DELETE_RETRY_COUNT']:_0x390e91['DELETE_RETRY_COUNT'],_0x46e866['DELETE_RETRY_INITIAL_BACKOFF_MS']=_0x539cab['isInteger'](_0x1b9b1e['DELETE_RETRY_INITIAL_BACKOFF_MS'])?_0x1b9b1e['DELETE_RETRY_INITIAL_BACKOFF_MS']:_0x253302['DELETE_RETRY_INITIAL_BACKOFF_MS'],_0xab9629['PER_CHAT_QUEUE_LIMIT']=_0x386f1e[_0x17be90(0x159)](_0x1b9b1e['PER_CHAT_QUEUE_LIMIT'])?_0x1b9b1e['PER_CHAT_QUEUE_LIMIT']:_0x40e2b9['PER_CHAT_QUEUE_LIMIT'],_0x12da07['DEDUPE_TTL_MS']=_0x45b5e8['isInteger'](_0x1b9b1e['DEDUPE_TTL_MS'])?_0x1b9b1e[_0x17be90(0x158)]:_0x399bf9['DEDUPE_TTL_MS'],_0x5c5139['MAX_WARNINGS']=_0x97e0e9['isInteger'](_0x1b9b1e['MAX_WARNINGS'])?_0x4297a2['max'](0x1,_0x1b9b1e['MAX_WARNINGS']):_0x4a622a['MAX_WARNINGS'],_0x5bb3cb['WARN_RESET_MS']=_0x23dc3d[_0x17be90(0x159)](_0x1b9b1e['WARN_RESET_MS'])?_0x2ae718[_0x17be90(0x161)](0x0,_0x1b9b1e['WARN_RESET_MS']):_0x28ca26['WARN_RESET_MS'],_0xbcae56['REMOVE_ON_MAX']=typeof _0x1b9b1e['REMOVE_ON_MAX']==='boolean'?_0x1b9b1e['REMOVE_ON_MAX']:_0x45ec07['REMOVE_ON_MAX'],_0x36dac9['EXPRESSIONS']=_0x1400ba[_0x17be90(0x137)](_0x1b9b1e['EXPRESSIONS'])?_0x1b9b1e['EXPRESSIONS']['slice']():_0x37be1b['EXPRESSIONS'];}catch(_0x19bbcc){_0x1d02c8('['+_0x3cf835+']\x20refreshConfig\x20error:\x20'+(_0x19bbcc?.['message']||_0x19bbcc));}else await botRef['sendMessage'](_0x2ff819,{'delete':_0x1845c4['key']});}}}catch(_0x4ee676){}},CFG['WARNING_TTL_MS']),_0x1845c4;}catch(_0x51dddb){if('Zcyjy'!=='EKTkK')return warn('['+name+']\x20sendWarning\x20failed:\x20'+(_0x51dddb?.[_0x1dace1(0x16d)]||_0x51dddb)),null;else _0x904290('0');}}async function incrementWarningAndMaybeRemove(_0x52532b){const _0x3135a5=_0x48b7eb,_0x46501c={'cBLDJ':function(_0x13b36b,_0xd5ce36){return _0x13b36b(_0xd5ce36);},'PnTqF':'remove_failed'};try{const _0x4b0990=_0x52532b['key']?.['remoteJid'],_0x72bf2a=_0x52532b['key']?.['participant']||_0x52532b['key']?.['remoteJid']||'';if(!_0x4b0990||!_0x72bf2a)return{'count':0x0,'remaining':CFG['MAX_WARNINGS']};const _0x40b4c3=getWarningEntry(_0x4b0990,_0x72bf2a);_0x40b4c3[_0x3135a5(0x140)]=(_0x40b4c3['count']||0x0)+0x1;if(CFG['WARN_RESET_MS']>0x0){if(_0x40b4c3['resetTimeout'])try{_0x46501c[_0x3135a5(0x160)](clearTimeout,_0x40b4c3['resetTimeout']);}catch(_0xf272ce){}_0x40b4c3[_0x3135a5(0x150)]=setTimeout(()=>{try{clearWarningEntry(_0x4b0990,_0x72bf2a);}catch(_0x4e8227){}},CFG['WARN_RESET_MS']);}setWarningEntry(_0x4b0990,_0x72bf2a,_0x40b4c3);const _0x4f8a32=Math['max'](0x0,CFG['MAX_WARNINGS']-_0x40b4c3['count']);if(CFG['REMOVE_ON_MAX']&&_0x40b4c3['count']>=CFG['MAX_WARNINGS'])try{const _0x289b18=await removeUserFromGroup(_0x4b0990,_0x72bf2a);if(_0x289b18)clearWarningEntry(_0x4b0990,_0x72bf2a);return{'count':_0x40b4c3['count'],'remaining':0x0,'removed':!!_0x289b18,'removeErr':_0x289b18?null:_0x46501c['PnTqF']};}catch(_0x423f2b){return warn('['+name+']\x20remove\x20attempt\x20failed:\x20'+(_0x423f2b?.['message']||_0x423f2b)),{'count':_0x40b4c3['count'],'remaining':_0x4f8a32,'removed':![],'removeErr':_0x423f2b?.['message']||_0x423f2b};}return{'count':_0x40b4c3['count'],'remaining':_0x4f8a32,'removed':![],'removeErr':null};}catch(_0x33fc26){if('rszvY'==='bQLUF')_0x50654e('['+_0x5eea18+']\x20failed\x20fallback\x20expression\x20send:\x20'+(_0x3ffffa?.[_0x3135a5(0x16d)]||_0x56b0f8));else return warn('['+name+']\x20incrementWarning\x20error:\x20'+(_0x33fc26?.['message']||_0x33fc26)),{'count':0x0,'remaining':CFG[_0x3135a5(0x173)],'removed':![],'removeErr':_0x33fc26?.[_0x3135a5(0x16d)]||_0x33fc26};}}function enqueueDeletion(_0x52c3e4){const _0x3671a5=_0x48b7eb,_0x3b0ba3=_0x52c3e4['key']?.['remoteJid'];if(!_0x3b0ba3)return;if(!perChatQueue['has'](_0x3b0ba3))perChatQueue['set'](_0x3b0ba3,[]);const _0x14bdcf=perChatQueue['get'](_0x3b0ba3);if(_0x14bdcf['length']>=CFG['PER_CHAT_QUEUE_LIMIT'])_0x14bdcf[_0x3671a5(0x149)]();_0x14bdcf['push'](_0x52c3e4);if(!perChatProcessing['get'](_0x3b0ba3))tryStartProcessingForChat(_0x3b0ba3);}function _0x436b(_0x3ffab6,_0x4b1eb3){const _0xff36ed=_0x17f7();return _0x436b=function(_0x14732b,_0x477927){_0x14732b=_0x14732b-0x132;let _0x1c4c27=_0xff36ed[_0x14732b];if(_0x436b['HQrzvI']===undefined){var _0x397378=function(_0x395f62){const _0x9ee909='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5ef071='',_0x2a95cb='';for(let _0x332293=0x0,_0x591ca4,_0x4e0395,_0x2fe739=0x0;_0x4e0395=_0x395f62['charAt'](_0x2fe739++);~_0x4e0395&&(_0x591ca4=_0x332293%0x4?_0x591ca4*0x40+_0x4e0395:_0x4e0395,_0x332293++%0x4)?_0x5ef071+=String['fromCharCode'](0xff&_0x591ca4>>(-0x2*_0x332293&0x6)):0x0){_0x4e0395=_0x9ee909['indexOf'](_0x4e0395);}for(let _0x5012f2=0x0,_0x3ab987=_0x5ef071['length'];_0x5012f2<_0x3ab987;_0x5012f2++){_0x2a95cb+='%'+('00'+_0x5ef071['charCodeAt'](_0x5012f2)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2a95cb);};_0x436b['NayVWo']=_0x397378,_0x3ffab6=arguments,_0x436b['HQrzvI']=!![];}const _0x17f727=_0xff36ed[0x0],_0x436b87=_0x14732b+_0x17f727,_0x138f3e=_0x3ffab6[_0x436b87];return!_0x138f3e?(_0x1c4c27=_0x436b['NayVWo'](_0x1c4c27),_0x3ffab6[_0x436b87]=_0x1c4c27):_0x1c4c27=_0x138f3e,_0x1c4c27;},_0x436b(_0x3ffab6,_0x4b1eb3);}function tryStartProcessingForChat(_0x457cf3){const _0x95af3c=_0x48b7eb,_0x32d847={'KoEyE':function(_0x25a124,_0x50b7e1){return _0x25a124(_0x50b7e1);}};if(perChatProcessing[_0x95af3c(0x16c)](_0x457cf3))return;if(activeChats>=(CFG[_0x95af3c(0x13a)]||0x1)){setTimeout(()=>tryStartProcessingForChat(_0x457cf3),0x96);return;}activeChats++,perChatProcessing['set'](_0x457cf3,!![]),((async()=>{const _0x522a51=_0x95af3c;try{await processChatQueue(_0x457cf3);}catch(_0x2f2d42){_0x32d847[_0x522a51(0x14b)](warn,'['+name+']\x20processChatQueue\x20error\x20('+_0x457cf3+'):\x20'+(_0x2f2d42?.[_0x522a51(0x16d)]||_0x2f2d42));}finally{if('MQgml'!=='BrvPX'){perChatProcessing['set'](_0x457cf3,![]),activeChats=Math['max'](0x0,activeChats-0x1);if(perChatQueue['get'](_0x457cf3)?.[_0x522a51(0x136)])setImmediate(()=>tryStartProcessingForChat(_0x457cf3));}else{const _0x4bdc10=_0xd90ddc()||{},_0xc395b4=_0x4bdc10&&_0x4bdc10['ANTILINK']?_0x4bdc10[_0x522a51(0x163)]:{};_0x508cfa['DEFAULT_ENABLED']=_0xc395b4['DEFAULT_ENABLED']??_0x1b6629['DEFAULT_ENABLED'],_0x2c29a5['SEND_WARNING']=_0xc395b4[_0x522a51(0x16f)]??_0x29d4b3['SEND_WARNING'],_0x10e0db['WARNING_MESSAGE']=_0xc395b4['WARNING_MESSAGE']??_0x1cd3a1['WARNING_MESSAGE'],_0x24f5de['WARNING_TTL_MS']=_0xdcf015['isInteger'](_0xc395b4[_0x522a51(0x165)])?_0xc395b4[_0x522a51(0x165)]:_0x4e53ec[_0x522a51(0x165)],_0x44d7d8['WHITE_LIST']=_0x39569d['isArray'](_0xc395b4[_0x522a51(0x13e)])?_0xc395b4['WHITE_LIST'][_0x522a51(0x154)]():_0x51d5c4['WHITE_LIST'],_0x213932['BATCH_SIZE']=_0x3aa149['isInteger'](_0xc395b4[_0x522a51(0x177)])?_0xc395b4['BATCH_SIZE']:_0x2d91c5['BATCH_SIZE'],_0x2ffee4['BATCH_DELAY_MS']=_0x4075fb['isInteger'](_0xc395b4['BATCH_DELAY_MS'])?_0xc395b4['BATCH_DELAY_MS']:_0x2cdc89['BATCH_DELAY_MS'],_0x1c7dfd['GLOBAL_CONCURRENCY']=_0x326cf9['isInteger'](_0xc395b4[_0x522a51(0x13a)])?_0xc395b4['GLOBAL_CONCURRENCY']:_0x5c1c5b[_0x522a51(0x13a)],_0x555be3['DELETE_RETRY_COUNT']=_0xa2822c[_0x522a51(0x159)](_0xc395b4[_0x522a51(0x14f)])?_0xc395b4['DELETE_RETRY_COUNT']:_0x35ee44['DELETE_RETRY_COUNT'],_0x362932[_0x522a51(0x13b)]=_0x33d282['isInteger'](_0xc395b4['DELETE_RETRY_INITIAL_BACKOFF_MS'])?_0xc395b4['DELETE_RETRY_INITIAL_BACKOFF_MS']:_0x502d40['DELETE_RETRY_INITIAL_BACKOFF_MS'],_0x2f9fc2[_0x522a51(0x166)]=_0x4d4994['isInteger'](_0xc395b4['PER_CHAT_QUEUE_LIMIT'])?_0xc395b4['PER_CHAT_QUEUE_LIMIT']:_0x4e524a['PER_CHAT_QUEUE_LIMIT'],_0x2f9f49['DEDUPE_TTL_MS']=_0x47d3c5['isInteger'](_0xc395b4['DEDUPE_TTL_MS'])?_0xc395b4['DEDUPE_TTL_MS']:_0x1137dd['DEDUPE_TTL_MS'],_0x3f1d28[_0x522a51(0x173)]=_0xab5e43['isInteger'](_0xc395b4[_0x522a51(0x173)])?_0x116fd8['max'](0x1,_0xc395b4['MAX_WARNINGS']):_0x3cc9a4['MAX_WARNINGS'],_0x34040b['WARN_RESET_MS']=_0x34a1c7['isInteger'](_0xc395b4['WARN_RESET_MS'])?_0x2d7879['max'](0x0,_0xc395b4['WARN_RESET_MS']):_0x46c839['WARN_RESET_MS'],_0x467890[_0x522a51(0x132)]=typeof _0xc395b4['REMOVE_ON_MAX']==='boolean'?_0xc395b4['REMOVE_ON_MAX']:_0x134afd[_0x522a51(0x132)],_0x1d2505['EXPRESSIONS']=_0xb2a37a['isArray'](_0xc395b4['EXPRESSIONS'])?_0xc395b4['EXPRESSIONS'][_0x522a51(0x154)]():_0x30f721['EXPRESSIONS'];}}})());}async function processChatQueue(_0x1f8314){const _0x162a08=_0x48b7eb,_0x280867={'smume':function(_0x7ddf1e,_0x1dfff0){return _0x7ddf1e(_0x1dfff0);},'siztu':function(_0x3bab99,_0x173714){return _0x3bab99(_0x173714);},'ISxby':function(_0x4c907b,_0x3d48a8){return _0x4c907b===_0x3d48a8;},'QwAvs':'function'};while((perChatQueue['get'](_0x1f8314)||[])['length']>0x0){const _0x23592a=Math['max'](0x1,CFG['BATCH_SIZE']||0x1),_0x8bff03=perChatQueue['get'](_0x1f8314)||[],_0x1ba509=_0x8bff03['splice'](0x0,_0x23592a);for(const _0x4419e3 of _0x1ba509){try{const _0x5d6d62=await deleteWithRetry(_0x4419e3)['catch'](()=>![]);if(_0x5d6d62){const _0x170523=await incrementWarningAndMaybeRemove(_0x4419e3);if(!_0x170523['removed'])await sendWarning(_0x4419e3,_0x170523[_0x162a08(0x140)],_0x170523['remaining'])['catch'](()=>{});else{const _0x3ce439=_0x4419e3['key']?.['participant']||_0x4419e3['key']?.['remoteJid']||'',_0x5991aa=_0x4419e3['key']?.['remoteJid'];await _0x280867['siztu'](sleep,0x2bc);const _0x159c2c=getNextExpressionForChat(_0x5991aa);if(_0x159c2c){const _0x4542c1=formatExpression(_0x159c2c,_0x3ce439,_0x170523['count']);try{if(botRef&&typeof botRef['sendMessage']==='function')await botRef['sendMessage'](_0x5991aa,{'text':_0x4542c1});else botRef&&botRef[_0x162a08(0x17a)]&&typeof botRef['sock']['sendMessage']==='function'?await botRef['sock']['sendMessage'](_0x5991aa,{'text':_0x4542c1}):warn('['+name+']\x20no\x20sendMessage\x20API\x20available\x20for\x20expression');}catch(_0x448a81){warn('['+name+']\x20failed\x20to\x20send\x20expression\x20(no\x20mentions):\x20'+(_0x448a81?.['message']||_0x448a81));try{const _0x5b088a='User\x20'+String(_0x3ce439)['split']('@')[0x0]+'\x20removed\x20after\x20'+_0x170523[_0x162a08(0x140)]+'\x20warnings.';if(botRef&&typeof botRef['sendMessage']==='function')await botRef['sendMessage'](_0x5991aa,{'text':_0x5b088a});else botRef&&botRef['sock']&&typeof botRef['sock']['sendMessage']==='function'&&await botRef['sock']['sendMessage'](_0x5991aa,{'text':_0x5b088a});}catch(_0x13fae5){warn('['+name+']\x20failed\x20fallback\x20expression\x20send:\x20'+(_0x13fae5?.['message']||_0x13fae5));}}}else{if('CSTFb'!=='CSTFb')_0x23f6ef('['+_0x3b2e12+']\x20delete\x20failed\x20for\x20message\x20'+(_0x21a9fd['key']?.['id']||_0x162a08(0x17d))+'\x20in\x20'+_0x543a01);else{const _0x58d528='User\x20'+String(_0x3ce439)[_0x162a08(0x141)]('@')[0x0]+'\x20removed\x20after\x20'+_0x170523[_0x162a08(0x140)]+'\x20warnings.';try{if(botRef&&typeof botRef['sendMessage']===_0x162a08(0x13f))await botRef['sendMessage'](_0x5991aa,{'text':_0x58d528});else botRef&&botRef['sock']&&_0x280867[_0x162a08(0x151)](typeof botRef['sock']['sendMessage'],_0x280867['QwAvs'])&&await botRef['sock']['sendMessage'](_0x5991aa,{'text':_0x58d528});}catch(_0x313dc1){warn('['+name+']\x20failed\x20to\x20send\x20removal\x20note:\x20'+(_0x313dc1?.['message']||_0x313dc1));}}}}}else{if('lFWFG'!==_0x162a08(0x153)){if(_0x292dd7&&_0x371cb4['resetTimeout'])try{_0x280867[_0x162a08(0x167)](_0x38ba68,_0x37f279['resetTimeout']);}catch(_0x54421b){}}else warn('['+name+']\x20delete\x20failed\x20for\x20message\x20'+(_0x4419e3['key']?.['id']||'[no-id]')+'\x20in\x20'+_0x1f8314);}}catch(_0x2d0faf){warn('['+name+_0x162a08(0x134)+(_0x2d0faf?.['message']||_0x2d0faf));}}(perChatQueue['get'](_0x1f8314)||[])['length']>0x0&&await sleep(Math['max'](0x0,CFG['BATCH_DELAY_MS']||0x1f4));}if((perChatQueue['get'](_0x1f8314)||[])['length']===0x0)perChatQueue[_0x162a08(0x176)](_0x1f8314);}function getMessageKey(_0x173ba1){const _0x25cf3d=_0x48b7eb,_0x32c859={'nQizR':'unknown'};if(!_0x173ba1||!_0x173ba1['key'])return null;const _0x3cce0d=_0x173ba1['key']['id'];if(_0x3cce0d)return String(_0x3cce0d);const _0x4866a1=_0x173ba1[_0x25cf3d(0x14a)]['participant']||_0x173ba1['key']['remoteJid']||_0x32c859['nQizR'],_0x4726ae=_0x173ba1['key']['remoteJid']||'unknown',_0x50b905=extractTextFromMessage(_0x173ba1)||'',_0x2f9a62=_0x50b905['slice'](0x0,0xc8)['replace'](/\s+/g,'\x20');return _0x4866a1+'::'+_0x4726ae+'::'+_0x2f9a62;}function isProcessedMessage(_0x27e056){const _0x5300b8=_0x48b7eb;return _0x27e056&&processedMessageIds[_0x5300b8(0x175)](_0x27e056);}function markMessageProcessed(_0x107f23){const _0x2fca9c=_0x48b7eb;if(!_0x107f23)return;try{const _0xc94dc1=processedMessageIds['get'](_0x107f23);if(_0xc94dc1)clearTimeout(_0xc94dc1);}catch(_0x2ccc8a){}const _0x28335b=setTimeout(()=>{const _0x5e7293=_0x436b;try{processedMessageIds[_0x5e7293(0x176)](_0x107f23);}catch(_0x4f7534){}},Math['max'](0x3e8,CFG[_0x2fca9c(0x158)]||0x1388));processedMessageIds[_0x2fca9c(0x146)](_0x107f23,_0x28335b);}export async function initialize(_0x5cba95){if(!_0x5cba95)throw new Error('Antilink.initialize\x20requires\x20bot\x20instance');botRef=_0x5cba95,refreshConfig(),initialized=!![],shuttingDown=![],info('['+name+']\x20initialized.\x20Enabled='+CFG['DEFAULT_ENABLED']+',\x20maxWarnings='+CFG['MAX_WARNINGS']);}export async function onMessage(_0x3c41c4){const _0x1c0164=_0x48b7eb;try{if(!initialized||shuttingDown)return;if(!_0x3c41c4||!_0x3c41c4['key']||!_0x3c41c4['message'])return;const _0x45dd15=_0x3c41c4['key'][_0x1c0164(0x14e)]||_0x3c41c4['remoteJid'];if(!_0x45dd15||!String(_0x45dd15)[_0x1c0164(0x174)]('@g.us'))return;refreshConfig();if(!CFG[_0x1c0164(0x178)])return;if(_0x3c41c4['key']['fromMe'])return;if(isWhitelisted(_0x3c41c4))return;if(!messageContainsLink(_0x3c41c4))return;let _0x3b7fe0=![];try{_0x3b7fe0=await isadmin(botRef,_0x3c41c4);}catch(_0x2c26a5){warn('['+name+']\x20isadmin\x20check\x20failed\x20-\x20skipping\x20deletion:\x20'+(_0x2c26a5?.[_0x1c0164(0x16d)]||_0x2c26a5));return;}if(_0x3b7fe0)return;const _0xed78a0=getMessageKey(_0x3c41c4);if(!_0xed78a0)return;if(isProcessedMessage(_0xed78a0))return;markMessageProcessed(_0xed78a0),enqueueDeletion(_0x3c41c4);}catch(_0x36fc07){warn('['+name+']\x20onMessage\x20error:\x20'+(_0x36fc07?.['message']||_0x36fc07));}}export async function cleanup(){const _0x275fe0=_0x48b7eb;shuttingDown=!![],initialized=![],perChatQueue[_0x275fe0(0x143)](),perChatProcessing['clear'](),activeChats=0x0,botRef=null;try{for(const [_0x3dbad7,_0x3ec1dd]of processedMessageIds[_0x275fe0(0x169)]()){try{clearTimeout(_0x3ec1dd);}catch(_0x1c25f7){}}}catch(_0x4ae40d){}processedMessageIds['clear']();try{for(const [_0x3bdf8c,_0x20675f]of perUserWarnings['entries']()){if(_0x20675f&&_0x20675f['resetTimeout'])try{clearTimeout(_0x20675f['resetTimeout']);}catch(_0x5705d6){}}}catch(_0x1b8848){}perUserWarnings['clear'](),perChatExpressionIndex[_0x275fe0(0x143)](),info('['+name+']\x20cleaned\x20up');}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};function _0x14732b(_0x5f2d90){const _0x34427a={'gDaXj':function(_0x40b610,_0x43547a){return _0x40b610!==_0x43547a;},'BipKf':function(_0x126731,_0x3deda3){return _0x126731(_0x3deda3);}};function _0xdfcf99(_0x59ade3){const _0x596f33=_0x436b;if(typeof _0x59ade3===_0x596f33(0x15f))return function(_0xfe7967){}['constructor'](_0x596f33(0x15c))['apply'](_0x596f33(0x179));else{if('ygwwg'==='ygwwg')(''+_0x59ade3/_0x59ade3)['length']!==0x1||_0x59ade3%0x14===0x0?_0x34427a[_0x596f33(0x17b)]('BMCuG','kPyPy')?function(){return!![];}['constructor']('debu'+_0x596f33(0x15b))[_0x596f33(0x135)]('action'):_0x36989b(_0x27b17c[_0x596f33(0x150)]):function(){return![];}['constructor']('debu'+'gger')['apply']('stateObject');else return _0x12fd68('['+_0x3a0d92+']\x20sendWarning\x20failed:\x20'+(_0x380eff?.[_0x596f33(0x16d)]||_0x48bd7c)),null;}_0x34427a['BipKf'](_0xdfcf99,++_0x59ade3);}try{if(_0x5f2d90)return _0xdfcf99;else _0xdfcf99(0x0);}catch(_0x460400){}}