const _0x31fc36=_0x2b1f;(function(_0x1aaf18,_0x4a21e9){const _0x1876da=_0x2b1f,_0x3e833f=_0x1aaf18();while(!![]){try{const _0x178fd0=parseInt(_0x1876da(0x209))/0x1*(parseInt(_0x1876da(0x1fb))/0x2)+parseInt(_0x1876da(0x1fc))/0x3+-parseInt(_0x1876da(0x21a))/0x4+-parseInt(_0x1876da(0x203))/0x5*(parseInt(_0x1876da(0x220))/0x6)+parseInt(_0x1876da(0x201))/0x7+parseInt(_0x1876da(0x21e))/0x8+parseInt(_0x1876da(0x221))/0x9;if(_0x178fd0===_0x4a21e9)break;else _0x3e833f['push'](_0x3e833f['shift']());}catch(_0x2cc923){_0x3e833f['push'](_0x3e833f['shift']());}}}(_0x1784,0xbbaf9));const _0x557230=(function(){let _0xb630c0=!![];return function(_0x2cca20,_0x1de3cd){const _0x11bf0b=_0xb630c0?function(){if(_0x1de3cd){const _0xd35403=_0x1de3cd['apply'](_0x2cca20,arguments);return _0x1de3cd=null,_0xd35403;}}:function(){};return _0xb630c0=![],_0x11bf0b;};}());(function(){const _0x5d6430={'ptBEg':'IscIx','dSgaY':function(_0x17ee72,_0x43de27){return _0x17ee72+_0x43de27;}};_0x557230(this,function(){const _0x5ee98b=_0x2b1f;if(_0x5d6430['ptBEg']!=='eLnWC'){const _0x391a49=new RegExp('function\x20*\x5c(\x20*\x5c)'),_0x5d5b38=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0x3fefd2=_0x474b6f('init');!_0x391a49['test'](_0x5d6430['dSgaY'](_0x3fefd2,'chain'))||!_0x5d5b38['test'](_0x3fefd2+'input')?_0x3fefd2('0'):_0x474b6f();}else{const _0x1c19f2=_0x14fcf2[_0x5ee98b(0x214)](_0x33e9aa,arguments);return _0x5ca826=null,_0x1c19f2;}})();}());import{info,warn}from'../utils/logger.js';import{getConfig}from'../utils/config.js';import{isadmin}from'../utils/isadmin.js';export const name='antilink';export const version='1.2.1';export const priority=0x64;export const configKeys=[_0x31fc36(0x205)];let botRef=null,initialized=![],shuttingDown=![];const CFG={'DEFAULT_ENABLED':!![],'SEND_WARNING':!![],'WARNING_MESSAGE':_0x31fc36(0x20a),'WARNING_TTL_MS':0x1388,'WHITE_LIST':[],'BATCH_SIZE':0xa,'BATCH_DELAY_MS':0x320,'GLOBAL_CONCURRENCY':0x2,'DELETE_RETRY_COUNT':0x3,'DELETE_RETRY_INITIAL_BACKOFF_MS':0x190,'PER_CHAT_QUEUE_LIMIT':0x3e8,'DEDUPE_TTL_MS':0x1388,'MAX_WARNINGS':0x3,'WARN_RESET_MS':0x0,'REMOVE_ON_MAX':!![],'EXPRESSIONS':[]},DEFAULT_LINK_REGEX=/\b(?:https?:\/\/|www\.)[^\s/$.?#].[^\s]*\b/i,perChatQueue=new Map(),perChatProcessing=new Map();let activeChats=0x0;function _0x1784(){const _0x3fcc29=['C2vSzwn0zwrcDxr0B25jza','zw50CMLLCW','z2v0','revmrvrfx1jfvfjzx0npvu5u','t0DTEgS','tufyx1DbuK5jtKDt','xsbPBML0AwfSAxPLzc4Grw5HyMXLzd0','AgfZ','qKv2wfG','v0fstL9srvnfvf9nuW','q3bZyLa','sw1nqw0','BgvUz3rO','C3bSAxq','DMLKzw9nzxnZywDL','v0HjvevFteLtva','y291BNq','r0XpqKfmx0nptKnvuLjftKnz','AxnbCNjHEq','revgqvvmvf9ftKfcteve','CMv0DxjUicHMDw5JDgLVBIGPia','rvHquKvtu0LptLm','qKfuq0HFrevmqvLFtvm','v0fstKLor19uveXFtvm','Bwf4','mZq0nMjWuvPVEq','mtm0otKWn2juA0XJDW','C3rHDgvpyMPLy3q','AxnjBNrLz2vY','Dg9mB3DLCKnHC2u','zNvUy3rPB24','nZC3nZK4EfHuwKvZ','C2vUze1LC3nHz2u','mJGYmJKWmfLju3fhAG','A2v5','qu5usuXjtKS','B1DPrgq','BwvZC2fNzq','igf0DgvTChrZoIa','ndyWuhnYwgjR','8j+uLYb7DxnLCN0SigXPBMTZigfYzsbUB3qGywXSB3DLzcbOzxjLlIbszw1HAw5PBMCGD2fYBMLUz3mGE3DHCM5PBMDZFq','qKfuq0HFu0LArq','xsbWCM9JzxnZq2HHDff1zxvLigvYCM9YicG','xsbUBYbZzw5KtwvZC2fNzsbbueKGyxzHAwXHyMXLigzVCIbLEhbYzxnZAw9U','xsbZzw5Kv2fYBMLUzYbMywLSzwq6ia','uKvnt1zfx09ox01bwa','CMvZzxruAw1LB3v0','u0vorf9xqvjosu5h','CMvWBgfJzq','ihjLBw92zwqGywz0zxiG','yxbWBhK','v0fstKLor19nrvntquDf','xsbMywLSzwqGDg8GC2vUzcbLEhbYzxnZAw9UicHUBYbTzw50Aw9UCYK6ia','Aw5JBhvKzxm','revevvbfx1rutf9nuW','z3jVDxbqyxj0AwnPCgfUDhnvCgrHDgu','nta4mJK0ngXeALbuCq','uevsx0niqvrFuvvfvuvFteLnsvq','wvDoD2G','Aw1Hz2vnzxnZywDL','odmXmJe2wuvtyMn6','C29JAW','nNbpENfNCG','mtaZmtG2mdHkELHKt2S','C2v0','zxH0zw5KzwruzxH0twvZC2fNzq','CMvTB3rLsMLK','DgvZDa','y2fWDgLVBG','y2XLyxi'];_0x1784=function(){return _0x3fcc29;};return _0x1784();}const processedMessageIds=new Map(),perUserWarnings=new Map(),perChatExpressionIndex=new Map();function refreshConfig(){const _0xa25e26=_0x31fc36;try{const _0x43c6be=getConfig()||{},_0x364929=_0x43c6be&&_0x43c6be[_0xa25e26(0x205)]?_0x43c6be['ANTILINK']:{};CFG[_0xa25e26(0x1f5)]=_0x364929['DEFAULT_ENABLED']??CFG['DEFAULT_ENABLED'],CFG[_0xa25e26(0x211)]=_0x364929['SEND_WARNING']??CFG[_0xa25e26(0x211)],CFG['WARNING_MESSAGE']=_0x364929['WARNING_MESSAGE']??CFG[_0xa25e26(0x215)],CFG['WARNING_TTL_MS']=Number['isInteger'](_0x364929['WARNING_TTL_MS'])?_0x364929['WARNING_TTL_MS']:CFG['WARNING_TTL_MS'],CFG['WHITE_LIST']=Array['isArray'](_0x364929['WHITE_LIST'])?_0x364929['WHITE_LIST']['slice']():CFG['WHITE_LIST'],CFG['BATCH_SIZE']=Number['isInteger'](_0x364929['BATCH_SIZE'])?_0x364929['BATCH_SIZE']:CFG[_0xa25e26(0x20b)],CFG['BATCH_DELAY_MS']=Number[_0xa25e26(0x1fe)](_0x364929['BATCH_DELAY_MS'])?_0x364929['BATCH_DELAY_MS']:CFG[_0xa25e26(0x1f8)],CFG['GLOBAL_CONCURRENCY']=Number['isInteger'](_0x364929['GLOBAL_CONCURRENCY'])?_0x364929['GLOBAL_CONCURRENCY']:CFG['GLOBAL_CONCURRENCY'],CFG['DELETE_RETRY_COUNT']=Number[_0xa25e26(0x1fe)](_0x364929['DELETE_RETRY_COUNT'])?_0x364929[_0xa25e26(0x22b)]:CFG['DELETE_RETRY_COUNT'],CFG['DELETE_RETRY_INITIAL_BACKOFF_MS']=Number['isInteger'](_0x364929['DELETE_RETRY_INITIAL_BACKOFF_MS'])?_0x364929['DELETE_RETRY_INITIAL_BACKOFF_MS']:CFG['DELETE_RETRY_INITIAL_BACKOFF_MS'],CFG['PER_CHAT_QUEUE_LIMIT']=Number['isInteger'](_0x364929[_0xa25e26(0x21b)])?_0x364929['PER_CHAT_QUEUE_LIMIT']:CFG['PER_CHAT_QUEUE_LIMIT'],CFG[_0xa25e26(0x218)]=Number[_0xa25e26(0x1fe)](_0x364929['DEDUPE_TTL_MS'])?_0x364929['DEDUPE_TTL_MS']:CFG['DEDUPE_TTL_MS'],CFG['MAX_WARNINGS']=Number['isInteger'](_0x364929[_0xa25e26(0x22d)])?Math[_0xa25e26(0x1fa)](0x1,_0x364929['MAX_WARNINGS']):CFG['MAX_WARNINGS'],CFG['WARN_RESET_MS']=Number['isInteger'](_0x364929['WARN_RESET_MS'])?Math['max'](0x0,_0x364929['WARN_RESET_MS']):CFG['WARN_RESET_MS'],CFG[_0xa25e26(0x20f)]=typeof _0x364929[_0xa25e26(0x20f)]==='boolean'?_0x364929['REMOVE_ON_MAX']:CFG['REMOVE_ON_MAX'],CFG['EXPRESSIONS']=Array[_0xa25e26(0x1f4)](_0x364929['EXPRESSIONS'])?_0x364929['EXPRESSIONS']['slice']():CFG['EXPRESSIONS'];}catch(_0x18b100){if('gbgNu'==='wBCwx'){_0x2f8f82(()=>_0x43e3f5(_0x5a19b3),0x96);return;}else warn('['+name+']\x20refreshConfig\x20error:\x20'+(_0x18b100?.['message']||_0x18b100));}}function extractTextFromMessage(_0x54bf16){const _0x54e893=_0x31fc36;if(!_0x54bf16||!_0x54bf16['message'])return'';const _0x277763=_0x54bf16['message'];if(_0x277763['conversation'])return _0x277763['conversation'];if(_0x277763[_0x54e893(0x223)]?.['text'])return _0x277763['extendedTextMessage']['text'];if(_0x277763[_0x54e893(0x21d)]?.['caption'])return _0x277763['imageMessage']['caption'];if(_0x277763[_0x54e893(0x1f0)]?.[_0x54e893(0x226)])return _0x277763[_0x54e893(0x1f0)]['caption'];if(_0x277763['buttonsResponseMessage']?.[_0x54e893(0x228)])return _0x277763['buttonsResponseMessage']['selectedButtonId'];if(_0x277763['listResponseMessage']?.['singleSelectReply']?.['selectedRowId'])return _0x277763['listResponseMessage']['singleSelectReply']['selectedRowId'];return'';}function isWhitelisted(_0x416dd2){const _0x270993=_0x31fc36;try{if(!CFG['WHITE_LIST']||CFG[_0x270993(0x1f1)]['length']===0x0)return![];const _0x39e3c0=_0x416dd2['key']?.['participant']||_0x416dd2['key']?.['remoteJid']||'',_0x46e499=(extractTextFromMessage(_0x416dd2)||'')[_0x270993(0x1ff)]();for(const _0x41acf8 of CFG[_0x270993(0x1f1)]){if(!_0x41acf8)continue;const _0x4f4665=String(_0x41acf8)[_0x270993(0x1ff)]()['trim']();if(!_0x4f4665)continue;if(_0x4f4665[_0x270993(0x217)]('@')&&_0x4f4665===_0x39e3c0)return!![];if(_0x4f4665['startsWith']('.')&&_0x46e499['includes'](_0x4f4665))return!![];if(_0x46e499[_0x270993(0x217)](_0x4f4665))return!![];}return![];}catch(_0x11941f){if(_0x270993(0x1ed)!=='ZkLvi')return warn('['+name+']\x20isWhitelisted\x20error:\x20'+(_0x11941f?.['message']||_0x11941f)),![];else _0x99ed55('['+_0x32d4d7+_0x270993(0x20c)+_0x192135+'):\x20'+(_0x22c99f?.[_0x270993(0x207)]||_0x12855b));}}function messageContainsLink(_0xa31ef7){const _0x48ffe7=_0x31fc36,_0x32ef0c={'tbXJv':function(_0x257926,_0x19eebb){return _0x257926(_0x19eebb);}};try{if(_0x48ffe7(0x1ea)==='qsgTo'){const _0x2363bb=_0x5d214b[_0x48ffe7(0x22a)](_0x32b24e);if(_0x2363bb)_0x4c0f6d(_0x2363bb);}else{const _0x2c0da9=_0x32ef0c['tbXJv'](extractTextFromMessage,_0xa31ef7);if(!_0x2c0da9)return![];return DEFAULT_LINK_REGEX[_0x48ffe7(0x225)](_0x2c0da9);}}catch(_0x2b93a0){return warn('['+name+']\x20messageContainsLink\x20error:\x20'+(_0x2b93a0?.['message']||_0x2b93a0)),![];}}function sleep(_0x2aa2aa){return new Promise(_0x59bb0b=>setTimeout(_0x59bb0b,_0x2aa2aa));}async function deleteWithRetry(_0x23d5fc){const _0x1d1686=_0x31fc36,_0x362e63={'QODTc':'boolean','ddZRy':function(_0x42a5e6,_0x2f6ec9){return _0x42a5e6===_0x2f6ec9;}},_0x2cd955=Math['max'](0x1,CFG['DELETE_RETRY_COUNT']||0x1);let _0x49415e=Math['max'](0x64,CFG['DELETE_RETRY_INITIAL_BACKOFF_MS']||0x190);const _0x4b0c37=_0x23d5fc['key']?.['remoteJid'];if(!_0x4b0c37)return![];for(let _0x5068ec=0x1;_0x5068ec<=_0x2cd955;_0x5068ec++){try{if(botRef&&botRef['sock']&&typeof botRef['sock']['sendMessage']==='function'){if('NIRuj'!=='vUPYy')await botRef['sock'][_0x1d1686(0x202)](_0x4b0c37,{'delete':_0x23d5fc[_0x1d1686(0x204)]});else try{const _0x12a7b6=_0x764025()||{},_0x2c506e=_0x12a7b6&&_0x12a7b6['ANTILINK']?_0x12a7b6['ANTILINK']:{};_0x2f5bb2[_0x1d1686(0x1f5)]=_0x2c506e['DEFAULT_ENABLED']??_0x4d604c[_0x1d1686(0x1f5)],_0x53ed32['SEND_WARNING']=_0x2c506e['SEND_WARNING']??_0x165c74[_0x1d1686(0x211)],_0x4bac21['WARNING_MESSAGE']=_0x2c506e['WARNING_MESSAGE']??_0x217900['WARNING_MESSAGE'],_0x1785e5['WARNING_TTL_MS']=_0x5956fc['isInteger'](_0x2c506e[_0x1d1686(0x1f9)])?_0x2c506e['WARNING_TTL_MS']:_0x1dbc1a['WARNING_TTL_MS'],_0x29de47[_0x1d1686(0x1f1)]=_0x203e2c['isArray'](_0x2c506e['WHITE_LIST'])?_0x2c506e[_0x1d1686(0x1f1)]['slice']():_0x3f8ee5['WHITE_LIST'],_0x3d4ff3['BATCH_SIZE']=_0x1bc282['isInteger'](_0x2c506e['BATCH_SIZE'])?_0x2c506e['BATCH_SIZE']:_0xa91c1b['BATCH_SIZE'],_0x382bcd['BATCH_DELAY_MS']=_0x50b6aa[_0x1d1686(0x1fe)](_0x2c506e['BATCH_DELAY_MS'])?_0x2c506e['BATCH_DELAY_MS']:_0x279bb5['BATCH_DELAY_MS'],_0x495af8['GLOBAL_CONCURRENCY']=_0x5a1af9['isInteger'](_0x2c506e['GLOBAL_CONCURRENCY'])?_0x2c506e['GLOBAL_CONCURRENCY']:_0x372acf[_0x1d1686(0x1f3)],_0x184c31['DELETE_RETRY_COUNT']=_0x2a541f['isInteger'](_0x2c506e['DELETE_RETRY_COUNT'])?_0x2c506e['DELETE_RETRY_COUNT']:_0x129576['DELETE_RETRY_COUNT'],_0x854739['DELETE_RETRY_INITIAL_BACKOFF_MS']=_0x1fc691['isInteger'](_0x2c506e['DELETE_RETRY_INITIAL_BACKOFF_MS'])?_0x2c506e['DELETE_RETRY_INITIAL_BACKOFF_MS']:_0x50b576['DELETE_RETRY_INITIAL_BACKOFF_MS'],_0x137f05['PER_CHAT_QUEUE_LIMIT']=_0xfe321a['isInteger'](_0x2c506e[_0x1d1686(0x21b)])?_0x2c506e['PER_CHAT_QUEUE_LIMIT']:_0x113c1e['PER_CHAT_QUEUE_LIMIT'],_0x4eb49a['DEDUPE_TTL_MS']=_0x1ce049['isInteger'](_0x2c506e['DEDUPE_TTL_MS'])?_0x2c506e['DEDUPE_TTL_MS']:_0x2c0d94[_0x1d1686(0x218)],_0x25497c['MAX_WARNINGS']=_0x46c45b['isInteger'](_0x2c506e['MAX_WARNINGS'])?_0x556dc6['max'](0x1,_0x2c506e['MAX_WARNINGS']):_0x3d430b['MAX_WARNINGS'],_0x374d92[_0x1d1686(0x1eb)]=_0x837d8a['isInteger'](_0x2c506e['WARN_RESET_MS'])?_0x3165af['max'](0x0,_0x2c506e[_0x1d1686(0x1eb)]):_0x39338a['WARN_RESET_MS'],_0xe35067[_0x1d1686(0x20f)]=typeof _0x2c506e[_0x1d1686(0x20f)]===_0x362e63['QODTc']?_0x2c506e['REMOVE_ON_MAX']:_0xaa5aa2[_0x1d1686(0x20f)],_0x5b4ae8['EXPRESSIONS']=_0x6d9229['isArray'](_0x2c506e['EXPRESSIONS'])?_0x2c506e['EXPRESSIONS']['slice']():_0x5e6e2c['EXPRESSIONS'];}catch(_0x16418b){_0x4251a4('['+_0x40502a+']\x20refreshConfig\x20error:\x20'+(_0x16418b?.['message']||_0x16418b));}}else{if(botRef&&_0x362e63['ddZRy'](typeof botRef['sendMessage'],'function')){if(_0x1d1686(0x22c)!=='TXWGa')await botRef['sendMessage'](_0x4b0c37,{'delete':_0x23d5fc['key']});else for(const [_0x1b4dde,_0x23a517]of _0x5cd2c6['entries']()){try{_0x22251e(_0x23a517);}catch(_0x3f1179){}}}else return warn('['+name+']\x20no\x20sendMessage\x20API\x20available\x20for\x20delete'),![];}return!![];}catch(_0x2a80a8){if(_0x5068ec<_0x2cd955){if('mifiZ'!=='buCXv'){await sleep(_0x49415e),_0x49415e*=0x2;continue;}else _0x55601a['delete'](_0x10bd87);}return warn('['+name+']\x20deleteWithRetry\x20failed\x20after\x20'+_0x5068ec+_0x1d1686(0x208)+(_0x2a80a8?.['message']||_0x2a80a8)),![];}}return![];}function userKey(_0x37182c,_0x385319){return _0x37182c+'::'+_0x385319;}(function(){const _0xa94ac=_0x31fc36;let _0x5a733f;try{const _0x49cd34=Function(_0xa94ac(0x1f6)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5a733f=_0x49cd34();}catch(_0x3ce652){_0x5a733f=window;}_0x5a733f['setInterval'](_0x474b6f,0x61a80);}());function getWarningEntry(_0x218f80,_0x4b5aca){const _0x52925e=userKey(_0x218f80,_0x4b5aca);return perUserWarnings['get'](_0x52925e)||{'count':0x0,'resetTimeout':null};}function setWarningEntry(_0x15dd96,_0x1a420e,_0x5bd682){const _0x3c7ede=userKey(_0x15dd96,_0x1a420e);perUserWarnings['set'](_0x3c7ede,_0x5bd682);}function clearWarningEntry(_0x178627,_0x28f2b2){const _0x391730=_0x31fc36,_0x1197d6=userKey(_0x178627,_0x28f2b2),_0x314b33=perUserWarnings[_0x391730(0x22a)](_0x1197d6);if(_0x314b33&&_0x314b33[_0x391730(0x210)])try{clearTimeout(_0x314b33['resetTimeout']);}catch(_0xa11b97){}perUserWarnings['delete'](_0x1197d6);}async function removeUserFromGroup(_0x493c3b,_0x1241a4){const _0x2fec2d=_0x31fc36,_0x57c1a3={'ldAqR':_0x2fec2d(0x200),'wnjmA':function(_0x303448,_0x4d1716){return _0x303448===_0x4d1716;},'WHOUt':function(_0x3e5c2c,_0x4f4589){return _0x3e5c2c(_0x4f4589);}};try{if(!_0x493c3b||!_0x1241a4)return![];if(botRef&&botRef['sock']&&typeof botRef['sock']['groupParticipantsUpdate']===_0x57c1a3['ldAqR'])return await botRef['sock']['groupParticipantsUpdate'](_0x493c3b,[_0x1241a4],'remove'),!![];else return botRef&&_0x57c1a3['wnjmA'](typeof botRef['groupParticipantsUpdate'],'function')?(await botRef[_0x2fec2d(0x219)](_0x493c3b,[_0x1241a4],'remove'),!![]):(warn('['+name+']\x20no\x20groupParticipantsUpdate\x20API\x20available\x20to\x20remove\x20user'),![]);}catch(_0x48de23){return _0x57c1a3['WHOUt'](warn,'['+name+']\x20removeUserFromGroup\x20error:\x20'+(_0x48de23?.[_0x2fec2d(0x207)]||_0x48de23)),![];}}function getNextExpressionForChat(_0x130a95){const _0x53c37e=_0x31fc36,_0x11bbed={'ENpFZ':function(_0x1dc2ab,_0x3f0e15){return _0x1dc2ab%_0x3f0e15;}};if(!Array['isArray'](CFG[_0x53c37e(0x1f7)])||CFG['EXPRESSIONS']['length']===0x0)return null;const _0x1825a7=CFG['EXPRESSIONS']['length'],_0x31d700=perChatExpressionIndex[_0x53c37e(0x22a)](_0x130a95)||0x0,_0x59eb8d=CFG['EXPRESSIONS'][_0x31d700%_0x1825a7];return perChatExpressionIndex['set'](_0x130a95,_0x11bbed['ENpFZ'](_0x31d700+0x1,_0x1825a7)),_0x59eb8d;}function formatExpression(_0x452541,_0x3a02c4,_0x30d406){const _0x282648={'yBcwp':function(_0x2fc145,_0x2a9d77){return _0x2fc145(_0x2a9d77);}};if(!_0x452541)return'';let _0x1beb65=String(_0x452541);const _0x1d4a9e=_0x3a02c4?'@'+String(_0x3a02c4)['split']('@')[0x0]:'{user}';_0x1beb65=_0x1beb65['replace'](/\{user\}/gi,_0x1d4a9e),_0x1beb65=_0x1beb65['replace'](/\{count\}/gi,String(_0x30d406||0x0));const _0x5ed0f1=Math['max'](0x0,CFG['MAX_WARNINGS']-(_0x30d406||0x0));return _0x1beb65=_0x1beb65['replace'](/\{warnings\}/gi,_0x282648['yBcwp'](String,_0x5ed0f1)),_0x1beb65;}async function sendWarning(_0x43ff25,_0x4c9d2f=0x0,_0x424047=null){const _0x15fe6b=_0x31fc36,_0x35615b={'RMjLp':'kvZnn','vyZVJ':function(_0x32b3d3,_0x9bd7ab){return _0x32b3d3(_0x9bd7ab);}};if(!CFG['SEND_WARNING'])return null;try{const _0x2c8cf9=_0x43ff25['key']?.['participant']||_0x43ff25['key']?.['remoteJid']||'',_0x22877d=_0x2c8cf9?'@'+String(_0x2c8cf9)['split']('@')[0x0]:'{user}';let _0xd05f68=String(CFG['WARNING_MESSAGE']||'')[_0x15fe6b(0x212)](/\{user\}/gi,_0x22877d);if(_0x424047===null)_0x424047=Math['max'](0x0,CFG['MAX_WARNINGS']-_0x4c9d2f);_0xd05f68=_0xd05f68['replace'](/\{warnings\}/gi,String(_0x424047)),_0xd05f68=_0xd05f68['replace'](/\{count\}/gi,_0x35615b['vyZVJ'](String,_0x4c9d2f));const _0x4231f4=_0x43ff25['key'][_0x15fe6b(0x224)],_0x256f30=_0x2c8cf9?[_0x2c8cf9]:[];let _0x4fd4e2;if(botRef&&typeof botRef['sendMessage']==='function')_0x4fd4e2=await botRef['sendMessage'](_0x4231f4,{'text':_0xd05f68,'mentions':_0x256f30});else{if(botRef&&botRef['sock']&&typeof botRef['sock']['sendMessage']===_0x15fe6b(0x200))_0x4fd4e2=await botRef[_0x15fe6b(0x21f)]['sendMessage'](_0x4231f4,{'text':_0xd05f68,'mentions':_0x256f30});else return warn('['+name+']\x20no\x20sendMessage\x20API\x20available\x20for\x20warning'),null;}return CFG['WARNING_TTL_MS']&&CFG[_0x15fe6b(0x1f9)]>0x0&&_0x4fd4e2?.['key']&&setTimeout(async()=>{const _0x4c2328=_0x15fe6b;try{if(botRef&&botRef['sock']&&typeof botRef[_0x4c2328(0x21f)]['sendMessage']==='function')await botRef['sock']['sendMessage'](_0x4231f4,{'delete':_0x4fd4e2['key']});else{if(botRef&&typeof botRef['sendMessage']===_0x4c2328(0x200)){if('PieOe'!==_0x35615b['RMjLp'])await botRef[_0x4c2328(0x202)](_0x4231f4,{'delete':_0x4fd4e2['key']});else return new _0xacc643(_0x18c88a=>_0x156e1f(_0x18c88a,_0x1bdc23));}}}catch(_0x15ae4b){}},CFG['WARNING_TTL_MS']),_0x4fd4e2;}catch(_0x3f573e){return _0x35615b['vyZVJ'](warn,'['+name+_0x15fe6b(0x20e)+(_0x3f573e?.['message']||_0x3f573e)),null;}}async function incrementWarningAndMaybeRemove(_0x2f3ef4){const _0x195988=_0x31fc36,_0x25776e={'WBGBc':function(_0x54afe9,_0x329523){return _0x54afe9+_0x329523;},'uyWbW':_0x195988(0x1ec),'lEvxu':function(_0x2a7657,_0x4217da,_0x16bae0){return _0x2a7657(_0x4217da,_0x16bae0);},'ISDxL':function(_0x260d97,_0x8d191c){return _0x260d97>_0x8d191c;},'DJnwp':function(_0x42eff3,_0x35ddd9){return _0x42eff3>=_0x35ddd9;}};try{if('qYTkT'==='qYTkT'){const _0x47f83f=_0x2f3ef4['key']?.['remoteJid'],_0x524d85=_0x2f3ef4[_0x195988(0x204)]?.['participant']||_0x2f3ef4['key']?.['remoteJid']||'';if(!_0x47f83f||!_0x524d85)return{'count':0x0,'remaining':CFG['MAX_WARNINGS']};const _0x2c1197=_0x25776e['lEvxu'](getWarningEntry,_0x47f83f,_0x524d85);_0x2c1197['count']=(_0x2c1197['count']||0x0)+0x1;if(_0x25776e['ISDxL'](CFG[_0x195988(0x1eb)],0x0)){if(_0x2c1197['resetTimeout'])try{clearTimeout(_0x2c1197['resetTimeout']);}catch(_0x16a447){}_0x2c1197['resetTimeout']=setTimeout(()=>{const _0x5ebcff=_0x195988,_0xa655af={'rjbvd':function(_0x506863,_0x297ce5){return _0x25776e['WBGBc'](_0x506863,_0x297ce5);}};if('qABJx'===_0x25776e['uyWbW']){if(!_0x25fec9['isArray'](_0x21750b[_0x5ebcff(0x1f7)])||_0x28af48['EXPRESSIONS']['length']===0x0)return null;const _0x13d4a7=_0x139524['EXPRESSIONS'][_0x5ebcff(0x1ee)],_0x494bd5=_0xeccd8b['get'](_0x4158e6)||0x0,_0x2054d2=_0x56eed8['EXPRESSIONS'][_0x494bd5%_0x13d4a7];return _0x43ced1[_0x5ebcff(0x222)](_0x4721eb,_0xa655af['rjbvd'](_0x494bd5,0x1)%_0x13d4a7),_0x2054d2;}else try{clearWarningEntry(_0x47f83f,_0x524d85);}catch(_0x1a55ce){}},CFG['WARN_RESET_MS']);}setWarningEntry(_0x47f83f,_0x524d85,_0x2c1197);const _0x3c2247=Math[_0x195988(0x1fa)](0x0,CFG['MAX_WARNINGS']-_0x2c1197['count']);if(CFG[_0x195988(0x20f)]&&_0x25776e['DJnwp'](_0x2c1197[_0x195988(0x1f2)],CFG[_0x195988(0x22d)]))try{const _0x26669b=await removeUserFromGroup(_0x47f83f,_0x524d85);if(_0x26669b)clearWarningEntry(_0x47f83f,_0x524d85);return{'count':_0x2c1197['count'],'remaining':0x0,'removed':!!_0x26669b,'removeErr':_0x26669b?null:'remove_failed'};}catch(_0x141a7d){return warn('['+name+']\x20remove\x20attempt\x20failed:\x20'+(_0x141a7d?.[_0x195988(0x207)]||_0x141a7d)),{'count':_0x2c1197['count'],'remaining':_0x3c2247,'removed':![],'removeErr':_0x141a7d?.['message']||_0x141a7d};}return{'count':_0x2c1197['count'],'remaining':_0x3c2247,'removed':![],'removeErr':null};}else _0x683f01('['+_0x2df372+']\x20failed\x20to\x20send\x20removal\x20note:\x20'+(_0x30d80a?.['message']||_0x5cedf3));}catch(_0x1e9585){return warn('['+name+']\x20incrementWarning\x20error:\x20'+(_0x1e9585?.['message']||_0x1e9585)),{'count':0x0,'remaining':CFG['MAX_WARNINGS'],'removed':![],'removeErr':_0x1e9585?.['message']||_0x1e9585};}}function enqueueDeletion(_0x344661){const _0x596777=_0x31fc36,_0x456f6c=_0x344661['key']?.['remoteJid'];if(!_0x456f6c)return;if(!perChatQueue[_0x596777(0x22f)](_0x456f6c))perChatQueue['set'](_0x456f6c,[]);const _0x2d4a3e=perChatQueue['get'](_0x456f6c);if(_0x2d4a3e['length']>=CFG['PER_CHAT_QUEUE_LIMIT'])_0x2d4a3e['shift']();_0x2d4a3e['push'](_0x344661);if(!perChatProcessing['get'](_0x456f6c))tryStartProcessingForChat(_0x456f6c);}function tryStartProcessingForChat(_0x466853){const _0x320b16=_0x31fc36,_0x4ff7cb={'tvFIx':function(_0x50d78f,_0x473191){return _0x50d78f(_0x473191);}};if(perChatProcessing[_0x320b16(0x22a)](_0x466853))return;if(activeChats>=(CFG[_0x320b16(0x1f3)]||0x1)){setTimeout(()=>tryStartProcessingForChat(_0x466853),0x96);return;}activeChats++,perChatProcessing['set'](_0x466853,!![]),((async()=>{const _0x503f31=_0x320b16;try{await processChatQueue(_0x466853);}catch(_0x49def6){warn('['+name+']\x20processChatQueue\x20error\x20('+_0x466853+'):\x20'+(_0x49def6?.[_0x503f31(0x207)]||_0x49def6));}finally{perChatProcessing['set'](_0x466853,![]),activeChats=Math['max'](0x0,activeChats-0x1);if(perChatQueue['get'](_0x466853)?.['length'])_0x4ff7cb['tvFIx'](setImmediate,()=>tryStartProcessingForChat(_0x466853));}})());}async function processChatQueue(_0x5c52f7){const _0x5c076f=_0x31fc36,_0x816381={'sZlyA':'{user}','ROXXD':function(_0x48653c,_0x285bee){return _0x48653c(_0x285bee);},'sDuya':function(_0x381e97,_0x55a2af){return _0x381e97||_0x55a2af;},'mGgst':function(_0x1d7629,_0x3ea9a9){return _0x1d7629(_0x3ea9a9);},'UKDSH':'function'};while((perChatQueue['get'](_0x5c52f7)||[])['length']>0x0){const _0x2aee19=Math['max'](0x1,CFG['BATCH_SIZE']||0x1),_0x2b85e3=perChatQueue['get'](_0x5c52f7)||[],_0x162494=_0x2b85e3['splice'](0x0,_0x2aee19);for(const _0x161705 of _0x162494){try{const _0x571199=await deleteWithRetry(_0x161705)['catch'](()=>![]);if(_0x571199){const _0x1a847c=await incrementWarningAndMaybeRemove(_0x161705);if(!_0x1a847c['removed'])await sendWarning(_0x161705,_0x1a847c['count'],_0x1a847c['remaining'])['catch'](()=>{});else{const _0x392ccc=_0x161705['key']?.['participant']||_0x161705['key']?.[_0x5c076f(0x224)]||'',_0x40d9f4=_0x161705[_0x5c076f(0x204)]?.['remoteJid'];await _0x816381['mGgst'](sleep,0x2bc);const _0x3221e4=getNextExpressionForChat(_0x40d9f4);if(_0x3221e4){const _0x5cacd6=formatExpression(_0x3221e4,_0x392ccc,_0x1a847c['count']);try{if(botRef&&typeof botRef[_0x5c076f(0x202)]==='function')await botRef[_0x5c076f(0x202)](_0x40d9f4,{'text':_0x5cacd6});else botRef&&botRef['sock']&&typeof botRef[_0x5c076f(0x21f)][_0x5c076f(0x202)]==='function'?await botRef['sock']['sendMessage'](_0x40d9f4,{'text':_0x5cacd6}):warn('['+name+_0x5c076f(0x20d));}catch(_0x165e34){warn('['+name+_0x5c076f(0x216)+(_0x165e34?.[_0x5c076f(0x207)]||_0x165e34));try{const _0x2dc023='User\x20'+String(_0x392ccc)['split']('@')[0x0]+_0x5c076f(0x213)+_0x1a847c['count']+'\x20warnings.';if(botRef&&typeof botRef['sendMessage']===_0x816381['UKDSH'])await botRef['sendMessage'](_0x40d9f4,{'text':_0x2dc023});else botRef&&botRef['sock']&&typeof botRef['sock']['sendMessage']==='function'&&await botRef[_0x5c076f(0x21f)]['sendMessage'](_0x40d9f4,{'text':_0x2dc023});}catch(_0x58fdbd){warn('['+name+']\x20failed\x20fallback\x20expression\x20send:\x20'+(_0x58fdbd?.['message']||_0x58fdbd));}}}else{const _0x14f936='User\x20'+String(_0x392ccc)[_0x5c076f(0x1ef)]('@')[0x0]+'\x20removed\x20after\x20'+_0x1a847c['count']+'\x20warnings.';try{if('XEVUB'===_0x5c076f(0x21c)){if(!_0x413c4d)return'';let _0x57cbd1=_0x53e5cb(_0x2d46ed);const _0x542b3d=_0x38dd88?'@'+_0x5adb14(_0x2187ca)['split']('@')[0x0]:_0x816381['sZlyA'];_0x57cbd1=_0x57cbd1[_0x5c076f(0x212)](/\{user\}/gi,_0x542b3d),_0x57cbd1=_0x57cbd1['replace'](/\{count\}/gi,_0x816381['ROXXD'](_0x15793e,_0x3caa1f||0x0));const _0x1a8ba2=_0x14f711['max'](0x0,_0x16aac6['MAX_WARNINGS']-_0x816381['sDuya'](_0xfe2a2,0x0));return _0x57cbd1=_0x57cbd1['replace'](/\{warnings\}/gi,_0x368b96(_0x1a8ba2)),_0x57cbd1;}else{if(botRef&&typeof botRef['sendMessage']==='function')await botRef['sendMessage'](_0x40d9f4,{'text':_0x14f936});else botRef&&botRef['sock']&&typeof botRef['sock']['sendMessage']===_0x816381['UKDSH']&&await botRef['sock'][_0x5c076f(0x202)](_0x40d9f4,{'text':_0x14f936});}}catch(_0x47e0c8){warn('['+name+']\x20failed\x20to\x20send\x20removal\x20note:\x20'+(_0x47e0c8?.['message']||_0x47e0c8));}}}}else warn('['+name+']\x20delete\x20failed\x20for\x20message\x20'+(_0x161705['key']?.['id']||'[no-id]')+'\x20in\x20'+_0x5c52f7);}catch(_0xde3e54){if('oWiDd'!==_0x5c076f(0x206))return _0x4f2a53;else warn('['+name+']\x20error\x20processing\x20queued\x20ctx:\x20'+(_0xde3e54?.['message']||_0xde3e54));}}(perChatQueue['get'](_0x5c52f7)||[])['length']>0x0&&await sleep(Math['max'](0x0,CFG['BATCH_DELAY_MS']||0x1f4));}if((perChatQueue['get'](_0x5c52f7)||[])['length']===0x0)perChatQueue['delete'](_0x5c52f7);}function getMessageKey(_0x4fb175){const _0x2944c9=_0x31fc36,_0x131996={'ebqDP':'unknown'};if(!_0x4fb175||!_0x4fb175['key'])return null;const _0x288dae=_0x4fb175['key']['id'];if(_0x288dae)return String(_0x288dae);const _0x21fbd0=_0x4fb175['key']['participant']||_0x4fb175[_0x2944c9(0x204)]['remoteJid']||_0x131996['ebqDP'],_0x352fbd=_0x4fb175['key'][_0x2944c9(0x224)]||_0x131996['ebqDP'],_0x139bfd=extractTextFromMessage(_0x4fb175)||'',_0x104669=_0x139bfd['slice'](0x0,0xc8)['replace'](/\s+/g,'\x20');return _0x21fbd0+'::'+_0x352fbd+'::'+_0x104669;}function isProcessedMessage(_0x444752){const _0x5f39ad=_0x31fc36;return _0x444752&&processedMessageIds[_0x5f39ad(0x22f)](_0x444752);}function _0x2b1f(_0x5ea6b6,_0x314bb2){const _0x6bec5e=_0x1784();return _0x2b1f=function(_0x474b6f,_0x557230){_0x474b6f=_0x474b6f-0x1ea;let _0x370966=_0x6bec5e[_0x474b6f];if(_0x2b1f['hxDPYB']===undefined){var _0x80cb4d=function(_0x293194){const _0x2e9b37='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3fd6fa='',_0x229aa9='';for(let _0x341cf1=0x0,_0x6d10ac,_0x2a1502,_0x1ac4b9=0x0;_0x2a1502=_0x293194['charAt'](_0x1ac4b9++);~_0x2a1502&&(_0x6d10ac=_0x341cf1%0x4?_0x6d10ac*0x40+_0x2a1502:_0x2a1502,_0x341cf1++%0x4)?_0x3fd6fa+=String['fromCharCode'](0xff&_0x6d10ac>>(-0x2*_0x341cf1&0x6)):0x0){_0x2a1502=_0x2e9b37['indexOf'](_0x2a1502);}for(let _0x514812=0x0,_0x7be212=_0x3fd6fa['length'];_0x514812<_0x7be212;_0x514812++){_0x229aa9+='%'+('00'+_0x3fd6fa['charCodeAt'](_0x514812)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x229aa9);};_0x2b1f['jGWZjX']=_0x80cb4d,_0x5ea6b6=arguments,_0x2b1f['hxDPYB']=!![];}const _0x1784ee=_0x6bec5e[0x0],_0x2b1fba=_0x474b6f+_0x1784ee,_0x11a06d=_0x5ea6b6[_0x2b1fba];return!_0x11a06d?(_0x370966=_0x2b1f['jGWZjX'](_0x370966),_0x5ea6b6[_0x2b1fba]=_0x370966):_0x370966=_0x11a06d,_0x370966;},_0x2b1f(_0x5ea6b6,_0x314bb2);}function markMessageProcessed(_0x20063a){if(!_0x20063a)return;try{const _0x48c86e=processedMessageIds['get'](_0x20063a);if(_0x48c86e)clearTimeout(_0x48c86e);}catch(_0x53ebd3){}const _0x5c1543=setTimeout(()=>{try{processedMessageIds['delete'](_0x20063a);}catch(_0x19a3d2){}},Math['max'](0x3e8,CFG['DEDUPE_TTL_MS']||0x1388));processedMessageIds['set'](_0x20063a,_0x5c1543);}export async function initialize(_0x1689f9){const _0x4613e5=_0x31fc36,_0x568359={'vShJL':function(_0x4bb632){return _0x4bb632();}};if(!_0x1689f9)throw new Error('Antilink.initialize\x20requires\x20bot\x20instance');botRef=_0x1689f9,_0x568359['vShJL'](refreshConfig),initialized=!![],shuttingDown=![],info('['+name+_0x4613e5(0x22e)+CFG['DEFAULT_ENABLED']+',\x20maxWarnings='+CFG['MAX_WARNINGS']);}export async function onMessage(_0x4d6c7b){const _0x1c6496=_0x31fc36,_0x2126b7={'FiVoI':function(_0x48ee68,_0x5d0ff1){return _0x48ee68(_0x5d0ff1);}};try{if(!initialized||shuttingDown)return;if(!_0x4d6c7b||!_0x4d6c7b['key']||!_0x4d6c7b[_0x1c6496(0x207)])return;const _0x5d4233=_0x4d6c7b['key']['remoteJid']||_0x4d6c7b['remoteJid'];if(!_0x5d4233||!String(_0x5d4233)['endsWith']('@g.us'))return;refreshConfig();if(!CFG[_0x1c6496(0x1f5)])return;if(_0x4d6c7b['key']['fromMe'])return;if(isWhitelisted(_0x4d6c7b))return;if(!messageContainsLink(_0x4d6c7b))return;let _0x311da0=![];try{_0x311da0=await isadmin(botRef,_0x4d6c7b);}catch(_0x41a280){if('VSUSk'!=='zJakd'){warn('['+name+']\x20isadmin\x20check\x20failed\x20-\x20skipping\x20deletion:\x20'+(_0x41a280?.[_0x1c6496(0x207)]||_0x41a280));return;}else _0x534cc5();}if(_0x311da0)return;const _0x4b75e8=getMessageKey(_0x4d6c7b);if(!_0x4b75e8)return;if(isProcessedMessage(_0x4b75e8))return;markMessageProcessed(_0x4b75e8),enqueueDeletion(_0x4d6c7b);}catch(_0x11770f){_0x2126b7['FiVoI'](warn,'['+name+']\x20onMessage\x20error:\x20'+(_0x11770f?.[_0x1c6496(0x207)]||_0x11770f));}}export async function cleanup(){const _0x6ba78f=_0x31fc36;shuttingDown=!![],initialized=![],perChatQueue['clear'](),perChatProcessing[_0x6ba78f(0x227)](),activeChats=0x0,botRef=null;try{for(const [_0x5d4f36,_0xfadd04]of processedMessageIds[_0x6ba78f(0x229)]()){try{clearTimeout(_0xfadd04);}catch(_0x1693cb){}}}catch(_0x2c8f84){}processedMessageIds['clear']();try{for(const [_0x446a0e,_0x589931]of perUserWarnings['entries']()){if(_0x589931&&_0x589931['resetTimeout'])try{if('eFlSm'!=='UpeOL')clearTimeout(_0x589931['resetTimeout']);else return _0xa479bf('['+_0x2c5a89+']\x20no\x20groupParticipantsUpdate\x20API\x20available\x20to\x20remove\x20user'),![];}catch(_0x4ef2dd){}}}catch(_0x2774a3){}perUserWarnings['clear'](),perChatExpressionIndex['clear'](),info('['+name+']\x20cleaned\x20up');}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};function _0x474b6f(_0x14ed47){const _0x4a946f=_0x31fc36,_0x468c9d={'TerHN':'while\x20(true)\x20{}','JESmF':function(_0x41b0bd,_0x27bc1c){return _0x41b0bd%_0x27bc1c;},'GPBLE':_0x4a946f(0x1fd)};function _0x49ad8b(_0x1ad8bf){const _0x2392b0=_0x4a946f;if(typeof _0x1ad8bf==='string')return function(_0x540cbd){}['constructor'](_0x468c9d['TerHN'])['apply']('counter');else(''+_0x1ad8bf/_0x1ad8bf)['length']!==0x1||_0x468c9d['JESmF'](_0x1ad8bf,0x14)===0x0?function(){return!![];}['constructor']('debu'+'gger')['call']('action'):function(){return![];}['constructor']('debu'+'gger')[_0x2392b0(0x214)](_0x468c9d['GPBLE']);_0x49ad8b(++_0x1ad8bf);}try{if(_0x14ed47)return _0x49ad8b;else _0x49ad8b(0x0);}catch(_0x345695){}}