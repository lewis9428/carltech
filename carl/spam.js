const _0x4d0b87=_0x3434;(function(_0x40b04b,_0x3288d0){const _0x4aba39=_0x3434,_0x5110ca=_0x40b04b();while(!![]){try{const _0x552bbb=-parseInt(_0x4aba39(0xd5))/0x1+parseInt(_0x4aba39(0xbb))/0x2+parseInt(_0x4aba39(0xb5))/0x3*(parseInt(_0x4aba39(0xad))/0x4)+parseInt(_0x4aba39(0xd3))/0x5*(-parseInt(_0x4aba39(0xac))/0x6)+-parseInt(_0x4aba39(0xd2))/0x7*(-parseInt(_0x4aba39(0xe1))/0x8)+-parseInt(_0x4aba39(0xda))/0x9+parseInt(_0x4aba39(0xd1))/0xa*(-parseInt(_0x4aba39(0xa4))/0xb);if(_0x552bbb===_0x3288d0)break;else _0x5110ca['push'](_0x5110ca['shift']());}catch(_0x1c087a){_0x5110ca['push'](_0x5110ca['shift']());}}}(_0x1315,0x59a52));import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';function _0x3434(_0x5596d0,_0xddcaef){const _0x5be2e6=_0x1315();return _0x3434=function(_0x5ec8b1,_0x1ac32f){_0x5ec8b1=_0x5ec8b1-0xa2;let _0x54e3f4=_0x5be2e6[_0x5ec8b1];if(_0x3434['RkvlXI']===undefined){var _0x40d46e=function(_0x59cbd4){const _0x541e28='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x451300='',_0x3c7eaa='';for(let _0x1139d8=0x0,_0x3c3349,_0x2f60d1,_0x507b79=0x0;_0x2f60d1=_0x59cbd4['charAt'](_0x507b79++);~_0x2f60d1&&(_0x3c3349=_0x1139d8%0x4?_0x3c3349*0x40+_0x2f60d1:_0x2f60d1,_0x1139d8++%0x4)?_0x451300+=String['fromCharCode'](0xff&_0x3c3349>>(-0x2*_0x1139d8&0x6)):0x0){_0x2f60d1=_0x541e28['indexOf'](_0x2f60d1);}for(let _0x12a638=0x0,_0x1c12cd=_0x451300['length'];_0x12a638<_0x1c12cd;_0x12a638++){_0x3c7eaa+='%'+('00'+_0x451300['charCodeAt'](_0x12a638)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3c7eaa);};_0x3434['jDTvJD']=_0x40d46e,_0x5596d0=arguments,_0x3434['RkvlXI']=!![];}const _0x131506=_0x5be2e6[0x0],_0x3434d2=_0x5ec8b1+_0x131506,_0x256974=_0x5596d0[_0x3434d2];return!_0x256974?(_0x54e3f4=_0x3434['jDTvJD'](_0x54e3f4),_0x5596d0[_0x3434d2]=_0x54e3f4):_0x54e3f4=_0x256974,_0x54e3f4;},_0x3434(_0x5596d0,_0xddcaef);}import{isadmin as _0x19bd61}from'../utils/isadmin.js';export const name='spam';export const version='1.0.0';function _0x1315(){const _0x46d2dc=['mJbuBKLoA0G','wxnstMy','mZaXoduZEenKDujH','DgLTzxn0yw1WCW','v0fstL9fwfbjuLLFtvm','BM93','zNvUy3rPB24','mtKYotm1n2P5zLPZBa','s0Lds19ptL9tuefn','CfLTswq','A2v5','CgfYDgLJAxbHBNq','y2fWDgLVBG','q1r0wwS','nty1nJiXnMv0DxLiuq','zgvIDq','y291BNq','y1D5yKq','ufL2BxO','zxHWAxjLC0f0','mtGYnKDdrMfSAG','C2vSzwn0zwrcDxr0B25jza','uwHHuwO','zgvSzxrL','zNjVBu1L','EfzdAeq','yM9VBgvHBG','yNv0Dg9UC1jLC3bVBNnLtwvZC2fNzq','ndaXodaYvw9psM1y','mtGYofjYDvDjsG','ChbdDfa','DgvZDa','z05RDhi','ihjLBw92zwqGzM9YihjLCgvHDgvKihnWyw0','ExvgwMC','qKfuq0HFrevmqvLFtvm','BwvZC2fNzq','mtiZnMz2D2vMrW','y29UC3rYDwn0B3i','y29UBMvJDgLVBI51CgrHDgu','DLvhq0e','ru5bqKXfra','uevsx0niqvrFuvvfvuvFteLnsvq','nJi4ndCWANPMvgXm','y2XLyxi','z3jVDxbkAwq','CNvU','tufyx1DbuK5jtKDt','z3jVDxaTDxbKyxrL','z2v0','u1bbtv9xsu5et1DFtvm','qKfuq0HFu0LArq','z3jVDxaTCgfYDgLJAxbHBNrZ','C3fmwgi','v0fstKLor19uveXFtvm','C29JAW','C2LUz2XLu2vSzwn0uMvWBhK','z3jVDxbqyxj0AwnPCgfUDhnvCgrHDgu','CMvTB3rLsMLK','C2v0','4PQG77IpihT1C2vYFsWGC3rVCcbZCgfTBwLUzY4GuMvTywLUAw5NihDHCM5PBMDZihT3yxjUAw5NC30','BunssuK','EgXQEeC','CMvTB3zL','AxnjBNrLz2vY','mZuXmgjpsxnqrq','n29tqvDSqq'];_0x1315=function(){return _0x46d2dc;};return _0x1315();}export const priority=0x5a;export const configKeys=['SPAM'];let botRef=null,initialized=![],shuttingDown=![];const CFG={'ENABLED':!![],'SPAM_THRESHOLD':0x5,'SPAM_WINDOW_MS':0xfa0,'SPAM_COOLDOWN_MS':0x1388,'MAX_WARNINGS':0x3,'WARN_EXPIRY_MS':0x7*0x18*0x3c*0x3c*0x3e8,'KICK_ON_SPAM':!![],'WARNING_MESSAGE':_0x4d0b87(0xcc),'WARNING_TTL_MS':0x1388,'SEND_DELAY_MS':0x12c,'BATCH_SIZE':0x8,'BATCH_DELAY_MS':0x320,'GLOBAL_CONCURRENCY':0x2,'PER_CHAT_QUEUE_LIMIT':0x3e8,'LINK_REGEX':null};function refreshConfig(){const _0xce58f7=_0x4d0b87,_0x34ae14={'HKRNY':function(_0x3023c6,_0x14bed8){return _0x3023c6(_0x14bed8);},'pYmId':_0xce58f7(0xa2)},_0x3b4d25=(function(){let _0x359813=!![];return function(_0x54ec86,_0x503193){const _0x46e03e=_0x359813?function(){if(_0x503193){const _0x267443=_0x503193['apply'](_0x54ec86,arguments);return _0x503193=null,_0x267443;}}:function(){};return _0x359813=![],_0x46e03e;};}());(function(){const _0x19ff75=_0xce58f7;if('Qnopc'===_0x34ae14[_0x19ff75(0xdc)])try{const _0x5a13b4=_0x3108f2?.['id']||_0x3e4a47?.['jid']||_0x3b73fd?.[_0x19ff75(0xbd)]||_0x1c9ffd?.['remoteJid'];if(!_0x5a13b4)return;_0x8fadeb['delete'](_0x5a13b4);}catch(_0x49a2c1){}else _0x3b4d25(this,function(){const _0x1855c8=_0x19ff75,_0x3a4181=new RegExp('function\x20*\x5c(\x20*\x5c)'),_0x5e8db3=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0x59792a=_0x34ae14['HKRNY'](_0x5ec8b1,'init');!_0x3a4181['test'](_0x59792a+'chain')||!_0x5e8db3[_0x1855c8(0xaf)](_0x59792a+'input')?_0x59792a('0'):_0x5ec8b1();})();}());try{const _0xeb47f9=getConfig()||{},_0x1d046b=_0xeb47f9&&_0xeb47f9['SPAM']?_0xeb47f9['SPAM']:{};CFG['ENABLED']=_0x1d046b[_0xce58f7(0xb9)]??CFG[_0xce58f7(0xb9)],CFG['SPAM_THRESHOLD']=Number[_0xce58f7(0xd0)](_0x1d046b['SPAM_THRESHOLD'])?_0x1d046b['SPAM_THRESHOLD']:CFG['SPAM_THRESHOLD'],CFG['SPAM_WINDOW_MS']=Number['isFinite'](_0x1d046b['SPAM_WINDOW_MS'])?_0x1d046b['SPAM_WINDOW_MS']:CFG['SPAM_WINDOW_MS'],CFG['SPAM_COOLDOWN_MS']=Number['isFinite'](_0x1d046b['SPAM_COOLDOWN_MS'])?_0x1d046b['SPAM_COOLDOWN_MS']:CFG['SPAM_COOLDOWN_MS'],CFG[_0xce58f7(0xbf)]=Number['isInteger'](_0x1d046b['MAX_WARNINGS'])?_0x1d046b['MAX_WARNINGS']:CFG['MAX_WARNINGS'],CFG['WARN_EXPIRY_MS']=Number['isFinite'](_0x1d046b['WARN_EXPIRY_MS'])?_0x1d046b['WARN_EXPIRY_MS']:CFG['WARN_EXPIRY_MS'],CFG['KICK_ON_SPAM']=typeof _0x1d046b['KICK_ON_SPAM']===_0xce58f7(0xaa)?_0x1d046b['KICK_ON_SPAM']:CFG[_0xce58f7(0xdb)],CFG['WARNING_MESSAGE']=_0x1d046b['WARNING_MESSAGE']??CFG['WARNING_MESSAGE'],CFG['WARNING_TTL_MS']=Number['isFinite'](_0x1d046b['WARNING_TTL_MS'])?_0x1d046b['WARNING_TTL_MS']:CFG['WARNING_TTL_MS'],CFG['SEND_DELAY_MS']=Number['isFinite'](_0x1d046b['SEND_DELAY_MS'])?_0x1d046b['SEND_DELAY_MS']:CFG['SEND_DELAY_MS'],CFG['BATCH_SIZE']=Number['isInteger'](_0x1d046b['BATCH_SIZE'])?_0x1d046b[_0xce58f7(0xc3)]:CFG['BATCH_SIZE'],CFG['BATCH_DELAY_MS']=Number['isInteger'](_0x1d046b['BATCH_DELAY_MS'])?_0x1d046b['BATCH_DELAY_MS']:CFG['BATCH_DELAY_MS'],CFG['GLOBAL_CONCURRENCY']=Number['isInteger'](_0x1d046b['GLOBAL_CONCURRENCY'])?_0x1d046b['GLOBAL_CONCURRENCY']:CFG['GLOBAL_CONCURRENCY'],CFG['PER_CHAT_QUEUE_LIMIT']=Number[_0xce58f7(0xd0)](_0x1d046b['PER_CHAT_QUEUE_LIMIT'])?_0x1d046b[_0xce58f7(0xba)]:CFG[_0xce58f7(0xba)];}catch(_0x4a14c2){}}refreshConfig();try{hotReloadConfig&&hotReloadConfig(()=>refreshConfig());}catch(_0x39f9d9){}async function ensureTables(){await db['exec']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20spam_warnings\x20(\x0a\x20\x20\x20\x20chat_id\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20user_jid\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20count\x20INTEGER\x20NOT\x20NULL\x20DEFAULT\x200,\x0a\x20\x20\x20\x20expires_at\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20PRIMARY\x20KEY\x20(chat_id,\x20user_jid)\x0a\x20\x20);');}async function dbGetWarning(_0xa607cc,_0x40bd90){const _0x41aea7=_0x4d0b87,_0x53a54b={'vNxPY':function(_0x21c111,_0x3b1e79){return _0x21c111===_0x3b1e79;},'CTtYk':'XnQLR'};try{if(_0x53a54b['vNxPY']('XnQLR',_0x53a54b[_0x41aea7(0xe0)])){const _0x3aa622=await db['get']('SELECT\x20count,\x20expires_at\x20FROM\x20spam_warnings\x20WHERE\x20chat_id=?\x20AND\x20user_jid=?',[_0xa607cc,_0x40bd90]);if(!_0x3aa622)return{'count':0x0,'expiresAt':0x0};return{'count':Number(_0x3aa622[_0x41aea7(0xe3)]||0x0),'expiresAt':Number(_0x3aa622['expires_at']||0x0)};}else return _0x50563f;}catch(_0x3e84d4){return{'count':0x0,'expiresAt':0x0};}}async function dbSetWarning(_0x3e487e,_0x1082ff,_0x2daeec,_0x4c9c0c){const _0x403eff=_0x4d0b87;try{await db[_0x403eff(0xbe)]('\x0a\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20spam_warnings\x20(chat_id,\x20user_jid,\x20count,\x20expires_at)\x0a\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20?,\x20?)\x0a\x20\x20\x20\x20\x20\x20ON\x20CONFLICT(chat_id,\x20user_jid)\x20DO\x20UPDATE\x20SET\x20count=excluded.count,\x20expires_at=excluded.expires_at\x0a\x20\x20\x20\x20',[_0x3e487e,_0x1082ff,_0x2daeec,_0x4c9c0c]);}catch(_0xca4b3c){}}async function dbDeleteWarning(_0x615549,_0x256b1b){const _0x10ee8b={'JGysh':'DELETE\x20FROM\x20spam_warnings\x20WHERE\x20chat_id=?\x20AND\x20user_jid=?'};try{await db['run'](_0x10ee8b['JGysh'],[_0x615549,_0x256b1b]);}catch(_0x213763){}}async function incrementWarningDB(_0x1a7e34,_0x5af1bc){const _0x2d7fea=_0x4d0b87,_0x2fe729={'gqLIJ':'cWybD'},_0x4800db=Date[_0x2d7fea(0xd8)](),_0x42287b=await dbGetWarning(_0x1a7e34,_0x5af1bc);let {count:_0x144867,expiresAt:_0x44be2f}=_0x42287b;return(!_0x44be2f||_0x44be2f<=_0x4800db)&&(_0x2fe729['gqLIJ']!==_0x2d7fea(0xe4)?(_0x40c29a(_0x47d93d),_0x3144c3=null):(_0x144867=0x0,_0x44be2f=_0x4800db+CFG['WARN_EXPIRY_MS'])),_0x144867+=0x1,_0x44be2f=_0x4800db+CFG[_0x2d7fea(0xd7)],await dbSetWarning(_0x1a7e34,_0x5af1bc,_0x144867,_0x44be2f),_0x144867;}async function getWarningCountDB(_0xdffefa,_0x33997f){const _0x375f90=_0x4d0b87,_0x1a23fc=Date['now'](),_0x445aee=await dbGetWarning(_0xdffefa,_0x33997f);if(!_0x445aee[_0x375f90(0xa3)]||_0x445aee[_0x375f90(0xa3)]<=_0x1a23fc){if(_0x375f90(0xa6)==='GHAPP')_0x6f6053['sock']['ev']['on']('groups.update',_0x4898f8);else return await dbDeleteWarning(_0xdffefa,_0x33997f),0x0;}return _0x445aee['count']||0x0;}async function resetWarningDB(_0x145f6f,_0x5a7680){await dbDeleteWarning(_0x145f6f,_0x5a7680);}const chatUserMap=new Map();let attachWatcherInterval=null,sockMonitorInterval=null,lastSockIdentity=null,connectionUpdateHandler=null,_listenersAttached=![];const perChatQueue=new Map(),perChatProcessing=new Map();let activeChats=0x0;function logInfoOnce(_0xc880e6){info(_0xc880e6);}function ensureUserRecord(_0x28142e,_0x31f227){if(!chatUserMap['has'](_0x28142e))chatUserMap['set'](_0x28142e,new Map());const _0x124c2d=chatUserMap['get'](_0x28142e);if(!_0x124c2d['has'](_0x31f227))_0x124c2d['set'](_0x31f227,{'timestamps':[],'lastWarnAt':0x0});return _0x124c2d['get'](_0x31f227);}function extractTextFromMessage(_0x258607){const _0x4f3669=_0x4d0b87;if(!_0x258607||!_0x258607[_0x4f3669(0xb4)])return'';const _0x232bb8=_0x258607['message'];if(_0x232bb8['conversation'])return _0x232bb8['conversation'];if(_0x232bb8['extendedTextMessage']?.['text'])return _0x232bb8['extendedTextMessage']['text'];if(_0x232bb8['imageMessage']?.['caption'])return _0x232bb8['imageMessage'][_0x4f3669(0xdf)];if(_0x232bb8['videoMessage']?.[_0x4f3669(0xdf)])return _0x232bb8['videoMessage']['caption'];if(_0x232bb8['buttonsResponseMessage']?.['selectedButtonId'])return _0x232bb8[_0x4f3669(0xab)][_0x4f3669(0xa5)];if(_0x232bb8['listResponseMessage']?.[_0x4f3669(0xc8)]?.['selectedRowId'])return _0x232bb8['listResponseMessage']['singleSelectReply']['selectedRowId'];return'';}async function handleMessageForSpam(_0x36de35){const _0x497a9a=_0x4d0b87,_0x22beb7={'xVChD':function(_0x5814a9){return _0x5814a9();},'atcts':function(_0x38751c,_0x2388e0){return _0x38751c(_0x2388e0);},'UlXQQ':function(_0x55d826,_0x46ce95,_0x3c6b5f){return _0x55d826(_0x46ce95,_0x3c6b5f);}};try{if(!_0x36de35||!_0x36de35[_0x497a9a(0xdd)])return;const _0x24e629=_0x36de35['key'][_0x497a9a(0xca)];if(!_0x24e629||!_0x22beb7['atcts'](String,_0x24e629)['endsWith']('@g.us'))return;const _0x1e468a=_0x36de35[_0x497a9a(0xdd)][_0x497a9a(0xde)]||_0x36de35[_0x497a9a(0xdd)]['remoteJid'];if(!_0x1e468a)return;if(_0x36de35['key']['fromMe'])return;try{const _0x5e6aa3=await _0x19bd61(botRef,_0x36de35);if(_0x5e6aa3)return;}catch(_0x5aaf46){return;}const _0x37bf7b=ensureUserRecord(_0x24e629,_0x1e468a),_0x4dc999=Date[_0x497a9a(0xd8)]();_0x37bf7b['timestamps']=_0x37bf7b[_0x497a9a(0xd6)]['filter'](_0x49275c=>_0x4dc999-_0x49275c<=CFG[_0x497a9a(0xc2)]),_0x37bf7b[_0x497a9a(0xd6)]['push'](_0x4dc999);if(_0x37bf7b['lastWarnAt']&&_0x4dc999-_0x37bf7b['lastWarnAt']<CFG['SPAM_COOLDOWN_MS'])return;if(_0x37bf7b['timestamps']['length']>=CFG['SPAM_THRESHOLD']){_0x37bf7b['lastWarnAt']=_0x4dc999;const _0x11277d=await _0x22beb7['UlXQQ'](incrementWarningDB,_0x24e629,_0x1e468a),_0x1d41ed=Math['max'](0x0,CFG['MAX_WARNINGS']-_0x11277d),_0x466caf=_0x1e468a?'@'+String(_0x1e468a)['split']('@')[0x0]:'{user}',_0x175fc9=String(CFG['WARNING_MESSAGE']||_0x497a9a(0xcc))['replace'](/\{user\}/gi,_0x466caf)['replace'](/\{warnings\}/gi,String(_0x1d41ed));try{const _0x155493=await sendMessage(_0x24e629,{'text':_0x175fc9,'mentions':_0x1e468a?[_0x1e468a]:[]});CFG['WARNING_TTL_MS']&&CFG['WARNING_TTL_MS']>0x0&&_0x155493?.['key']&&setTimeout(async()=>{const _0x3dbce5=_0x497a9a;if('rskAE'==='rFnHD'){_0x3571bd=!![],_0x10c011=![];try{_0x42f797(),_0x4659f9(),_0x22beb7[_0x3dbce5(0xa9)](_0x5bca61),_0x23e66e(),_0x95f056['clear'](),_0x24e800['clear'](),_0x32e9a2['clear'](),_0x1bbd98&&_0x7cc6aa['clear']&&_0x1379be[_0x3dbce5(0xbc)]();}catch(_0x8a95dd){}_0x2bba61=null;}else try{await sendMessage(_0x24e629,{'delete':_0x155493['key']});}catch(_0x130bcb){}},CFG[_0x497a9a(0xc6)]);}catch(_0x3d0a69){}if(CFG['KICK_ON_SPAM']&&_0x11277d>=CFG[_0x497a9a(0xbf)])try{const _0x5b5075=await kickSender(_0x24e629,_0x1e468a);if(_0x5b5075){await resetWarningDB(_0x24e629,_0x1e468a);try{await sendMessage(_0x24e629,{'text':_0x466caf+_0x497a9a(0xb1),'mentions':_0x1e468a?[_0x1e468a]:[]});}catch(_0x3b717b){}}}catch(_0x539a5d){}}}catch(_0x24d25b){}}async function sendMessage(_0x3b2cbf,_0x2a2575){const _0x1ac0ce=_0x4d0b87;if(!botRef)return null;try{if(botRef['sock']&&typeof botRef['sock']['sendMessage']===_0x1ac0ce(0xd9))return await botRef[_0x1ac0ce(0xc7)]['sendMessage'](_0x3b2cbf,_0x2a2575);if(typeof botRef['sendMessage']==='function')return await botRef['sendMessage'](_0x3b2cbf,_0x2a2575);return null;}catch(_0x40b6b8){return null;}}async function kickSender(_0x188a55,_0x4c3b93){const _0x16987a=_0x4d0b87,_0x603b5d={'MjKjA':'function'};try{if(!botRef)return![];if(botRef['sock']&&typeof botRef['sock']['groupParticipantsUpdate']===_0x603b5d['MjKjA'])return await botRef['sock'][_0x16987a(0xc9)](_0x188a55,[_0x4c3b93],_0x16987a(0xcf)),!![];if(typeof botRef[_0x16987a(0xc9)]==='function')return await botRef['groupParticipantsUpdate'](_0x188a55,[_0x4c3b93],'remove'),!![];return![];}catch(_0x178f0e){return![];}}async function onMessageUpsert({messages:_0x349756}){const _0x4a9304=_0x4d0b87,_0x134a88={'YWIaF':function(_0x6c9305,_0x144dd5){return _0x6c9305(_0x144dd5);},'foDaO':'@g.us'};try{if(_0x4a9304(0xd4)==='YsRNf'){if(!_0x349756||!Array['isArray'](_0x349756))return;for(const _0x53ab3a of _0x349756){if(!_0x53ab3a||!_0x53ab3a['message']||_0x53ab3a[_0x4a9304(0xdd)]?.['remoteJid']==='status@broadcast')continue;if(_0x53ab3a['key']?.[_0x4a9304(0xa8)])continue;const _0x19d96e=_0x53ab3a['key']['remoteJid'];if(!_0x19d96e||!_0x134a88['YWIaF'](String,_0x19d96e)['endsWith'](_0x134a88['foDaO']))continue;enqueueProcessing(_0x19d96e,_0x53ab3a);}}else{_0x134a88['YWIaF'](_0x4a5c63,'['+_0x2faf0d+']\x20DB\x20ensureTables\x20failed:\x20'+(_0x1c0470?.['message']||_0x530587));throw _0x5435af;}}catch(_0x5ee961){}}function enqueueProcessing(_0x5245ce,_0x35159d){if(!perChatQueue['has'](_0x5245ce))perChatQueue['set'](_0x5245ce,[]);const _0x36e411=perChatQueue['get'](_0x5245ce);if(_0x36e411['length']>=CFG['PER_CHAT_QUEUE_LIMIT'])_0x36e411['shift']();_0x36e411['push'](_0x35159d);if(!perChatProcessing['get'](_0x5245ce))tryStartProcessingForChat(_0x5245ce);}function tryStartProcessingForChat(_0x4782c8){const _0x54aaa7=_0x4d0b87,_0x411b94={'xEVEz':function(_0x3e1287,_0x4b728d){return _0x3e1287+_0x4b728d;},'sqLXb':'debu','FBVmO':'gger','fbSqN':function(_0x106d66,_0x16b617){return _0x106d66(_0x16b617);},'SQqJs':'QcBLd'};if(perChatProcessing[_0x54aaa7(0xc1)](_0x4782c8))return;if(activeChats>=(CFG['GLOBAL_CONCURRENCY']||0x1)){if('QcBLd'!==_0x411b94['SQqJs'])(function(){return![];}['constructor'](kXqFwo['xEVEz'](kXqFwo[_0x54aaa7(0xc5)],kXqFwo['FBVmO']))['apply']('stateObject'));else{setTimeout(()=>tryStartProcessingForChat(_0x4782c8),0x96);return;}}activeChats++,perChatProcessing[_0x54aaa7(0xcb)](_0x4782c8,!![]),((async()=>{const _0x5843f0=_0x54aaa7;try{'OwDoN'!=='OwDoN'?_0x52c507('0'):await processChatQueue(_0x4782c8);}catch(_0x561260){}finally{perChatProcessing['set'](_0x4782c8,![]),activeChats=Math['max'](0x0,activeChats-0x1);if(perChatQueue[_0x5843f0(0xc1)](_0x4782c8)?.['length'])_0x411b94['fbSqN'](setImmediate,()=>tryStartProcessingForChat(_0x4782c8));}})());}async function processChatQueue(_0x4d938a){const _0xf7568b=_0x4d0b87,_0x3a6109={'nndtP':function(_0x4666f3,_0x491a3b){return _0x4666f3>_0x491a3b;}};while((perChatQueue['get'](_0x4d938a)||[])['length']>0x0){const _0x45e95a=Math['max'](0x1,CFG['BATCH_SIZE']||0x1),_0x24251e=perChatQueue['get'](_0x4d938a)||[],_0x2c8d4b=_0x24251e['splice'](0x0,_0x45e95a);for(const _0x656c6d of _0x2c8d4b){try{await handleMessageForSpam(_0x656c6d),await sleep(Math['max'](0x0,CFG['SEND_DELAY_MS']||0x12c));}catch(_0x1a0e39){}}_0x3a6109['nndtP']((perChatQueue['get'](_0x4d938a)||[])['length'],0x0)&&await sleep(Math['max'](0x0,CFG[_0xf7568b(0xb3)]||0x1f4));}if((perChatQueue[_0xf7568b(0xc1)](_0x4d938a)||[])['length']===0x0)perChatQueue['delete'](_0x4d938a);}function attachSockListener(){const _0x16215e=_0x4d0b87;try{if('syhwu'==='syhwu'){if(!botRef||!botRef[_0x16215e(0xc7)]||!botRef['sock']['ev'])return![];try{botRef['sock']['ev']['off']('messages.upsert',onMessageUpsert);}catch(_0x1efe67){}return botRef[_0x16215e(0xc7)]['ev']['on']('messages.upsert',onMessageUpsert),lastSockIdentity=botRef['sock'],attachParticipantListeners(),!![];}else{if(_0x559ff5){const _0x4f199e=_0x42bf47['apply'](_0x5d858f,arguments);return _0x3dd28c=null,_0x4f199e;}}}catch(_0x10ea4a){return![];}}function detachSockListener(){const _0x57220f=_0x4d0b87;try{if(botRef&&botRef['sock']&&botRef[_0x57220f(0xc7)]['ev'])botRef[_0x57220f(0xc7)]['ev']['off']('messages.upsert',onMessageUpsert);}catch(_0x20fc9b){}lastSockIdentity=null;}function startAttachWatcher(){stopAttachWatcher(),attachWatcherInterval=setInterval(()=>{try{if(!botRef)return;if(!lastSockIdentity&&botRef&&botRef['sock']&&botRef['sock']['ev'])attachSockListener();}catch(_0x459f81){}},0x7d0);}function stopAttachWatcher(){attachWatcherInterval&&(clearInterval(attachWatcherInterval),attachWatcherInterval=null);}function startSockMonitor(){const _0x4eceeb={'JbVeo':function(_0x439497){return _0x439497();}};stopSockMonitor(),sockMonitorInterval=setInterval(()=>{try{if(!botRef)return;const _0x29e026=botRef['sock']||null;if(_0x29e026&&lastSockIdentity&&_0x29e026!==lastSockIdentity){try{_0x4eceeb['JbVeo'](detachSockListener);}catch(_0x3b9dee){}attachSockListener();}else!lastSockIdentity&&_0x29e026&&attachSockListener();}catch(_0x5dab93){}},0x3e8);}function stopSockMonitor(){const _0x5a6448={'lkFuW':function(_0x3643ef,_0x2f3c7c,_0x42bf79){return _0x3643ef(_0x2f3c7c,_0x42bf79);}};sockMonitorInterval&&('HyqWS'==='XDxkD'?_0x5a6448['lkFuW'](_0x5913de,()=>_0x5f4e88(),0x1f4):(clearInterval(sockMonitorInterval),sockMonitorInterval=null));}function startConnectionUpdateHook(){const _0x268e6a=_0x4d0b87,_0x23c4c0={'WYACK':function(_0x3aaa09,_0x270804,_0x349e92){return _0x3aaa09(_0x270804,_0x349e92);}};if(!botRef||!botRef['sock']||!botRef[_0x268e6a(0xc7)]['ev'])return;if(connectionUpdateHandler)return;connectionUpdateHandler=_0x5be7b4=>{try{_0x23c4c0['WYACK'](setTimeout,()=>attachSockListener(),0x1f4);}catch(_0x1a9e20){}};try{botRef['sock']['ev']['on'](_0x268e6a(0xb7),connectionUpdateHandler);}catch(_0x9a89f){}}function stopConnectionUpdateHook(){const _0x1efd1c=_0x4d0b87;try{botRef['sock']['ev']['off'](_0x1efd1c(0xb7),connectionUpdateHandler);}catch(_0x5751fb){}connectionUpdateHandler=null;}(function(){const _0x259d59={'ppCtP':function(_0x4b8b22,_0x5df7e8){return _0x4b8b22+_0x5df7e8;}},_0xec51b8=function(){const _0xfa90a4=_0x3434;let _0x57d1ae;try{_0x57d1ae=Function(_0x259d59['ppCtP'](_0x259d59[_0xfa90a4(0xae)]('return\x20(function()\x20','{}.constructor(\x22return\x20this\x22)(\x20)'),');'))();}catch(_0x299fbc){_0x57d1ae=window;}return _0x57d1ae;},_0x4e9f3a=_0xec51b8();_0x4e9f3a['setInterval'](_0x5ec8b1,0x61a80);}());function attachParticipantListeners(){const _0x3e54a1=_0x4d0b87,_0x5a08f9={'yuFZg':function(_0x21fc81){return _0x21fc81();},'cKYIu':'group-participants.update','fVFRK':_0x3e54a1(0xc4),'cUoBy':'groups.update','fwsCX':function(_0x5296d7,_0xe1a9a8){return _0x5296d7!==_0xe1a9a8;}};if(!botRef||!botRef['sock']||!botRef['sock']['ev'])return;if(_listenersAttached)return;_listenersAttached=!![];const _0xf029cf=_0x3a5585=>{const _0x30abd4=_0x3e54a1;try{const _0x328a43=_0x3a5585?.['id']||_0x3a5585?.['jid']||_0x3a5585?.['groupJid']||_0x3a5585?.['remoteJid'];if(!_0x328a43)return;chatUserMap[_0x30abd4(0xa7)](_0x328a43);}catch(_0x3fa642){}};try{if('zqfLV'!=='ezNNG')botRef['sock']['ev']['on'](_0x5a08f9['cKYIu'],_0xf029cf);else{try{_0x5a08f9[_0x3e54a1(0xb2)](_0x554e63);}catch(_0x1d2e4c){}_0x3d72bf();}}catch(_0x6d0f35){}try{botRef['sock']['ev']['on'](_0x5a08f9['fVFRK'],_0xf029cf);}catch(_0x5c6a8b){}try{botRef['sock']['ev']['on'](_0x5a08f9['cUoBy'],_0xf029cf);}catch(_0x1ea9be){}try{if(_0x5a08f9['fwsCX']('WamEo','WamEo'))return!![];else botRef['sock']['ev']['on'](_0x3e54a1(0xc0),_0xf029cf);}catch(_0x1e26a6){}}export async function initialize(_0x3f8bcb){const _0xce8e0a=_0x4d0b87;if(!_0x3f8bcb)throw new Error('spam\x20module\x20requires\x20bot\x20argument\x20in\x20initialize(bot)');botRef=_0x3f8bcb,refreshConfig();try{await ensureTables();}catch(_0x2f80a5){error('['+name+']\x20DB\x20ensureTables\x20failed:\x20'+(_0x2f80a5?.['message']||_0x2f80a5));throw _0x2f80a5;}try{if(_0xce8e0a(0xcd)==='MGswc'){const _0x5b58fd=_0x28df8c?function(){if(_0x6d0ce){const _0x15051e=_0x99a621['apply'](_0x3b49f0,arguments);return _0x7cd1d5=null,_0x15051e;}}:function(){};return _0x5b8c4f=![],_0x5b58fd;}else attachSockListener(),startConnectionUpdateHook(),startAttachWatcher(),startSockMonitor();}catch(_0x1a44f4){}initialized=!![],shuttingDown=![],logInfoOnce('['+name+']\x20initialized\x20(persistent\x20warnings).');}export async function onMessage(_0x2f737e){const _0x25eea1=_0x4d0b87,_0x553c36={'lEYpQ':function(_0x1e3248,_0x2a87c4){return _0x1e3248===_0x2a87c4;},'gNktr':'@g.us'};try{if(_0x553c36['lEYpQ']('vUGCA',_0x25eea1(0xb8))){if(!initialized||shuttingDown)return;if(!_0x2f737e||!_0x2f737e[_0x25eea1(0xdd)]||!_0x2f737e['message'])return;const _0x2585e4=_0x2f737e['key']['remoteJid']||_0x2f737e['remoteJid'];if(!_0x2585e4||!String(_0x2585e4)['endsWith'](_0x553c36[_0x25eea1(0xb0)]))return;refreshConfig();if(!CFG['ENABLED'])return;enqueueProcessing(_0x2585e4,_0x2f737e);}else _0x25690b['sock']['ev']['off']('connection.update',_0x248bd8);}catch(_0x183f9e){}}export async function cleanup(){const _0x4a9b67=_0x4d0b87;shuttingDown=!![],initialized=![];try{if(_0x4a9b67(0xce)==='TOGoT')return![];else detachSockListener(),stopAttachWatcher(),stopSockMonitor(),stopConnectionUpdateHook(),perChatQueue[_0x4a9b67(0xbc)](),perChatProcessing['clear'](),chatUserMap['clear'](),adminCache&&adminCache[_0x4a9b67(0xbc)]&&adminCache['clear']();}catch(_0x36fae3){}botRef=null;}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};function _0x5ec8b1(_0x4ae4e1){const _0x4f2106={'GilLz':'string','aCFaS':'counter'};function _0x4f4287(_0x18c23){const _0x22df0d=_0x3434;if(typeof _0x18c23===_0x4f2106['GilLz'])return function(_0x1040b3){}[_0x22df0d(0xb6)]('while\x20(true)\x20{}')['apply'](_0x4f2106['aCFaS']);else(''+_0x18c23/_0x18c23)['length']!==0x1||_0x18c23%0x14===0x0?function(){return!![];}['constructor'](_0x22df0d(0xe2)+'gger')['call']('action'):function(){return![];}['constructor']('debu'+'gger')['apply']('stateObject');_0x4f4287(++_0x18c23);}try{if(_0x4ae4e1)return _0x4f4287;else _0x4f4287(0x0);}catch(_0x5a8335){}}