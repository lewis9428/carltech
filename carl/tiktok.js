const _0x33bd33=_0x3d5b;function _0x485f(){const _0x5994e1=['z2DLCG','yxbWBhK','mtCZnZK1nu5Zz1bTtW','mtaWnZaYodbVDfnsqvO','yM90','nZy2oeTcy0PQra','D2HPBguGkhrYDwuPihT9','zg93BMXVywrZ','DhjPBq','mZiYmZHnD3fsCfu','odbpEhbuAwi','mZmYtgr2tef1','mJq1CfjRANb2','DxnLCG','qgCUDxm','nZq1mdq5og5nA0nRyG','C3rHCNrZv2L0Aa','ExqTzgXWic0TBM8TCgXHEwXPC3qGls1TzxjNzs1VDxrWDxqTzM9YBwf0ig1WncaTBYaI','zLvsy1y','zNvUy3rPB24GkLWOicPCkq','y2XPzw50','mtmXntGYmw90ywjovG','nty3nJC1zLLTwhzN','mtjXz0XwwxC','C29JAW','mtjsv2ThrLK','y2fSBa','C2vUze1LC3nHz2u','x2jVDa'];_0x485f=function(){return _0x5994e1;};return _0x485f();}(function(_0x31cad0,_0x2a810c){const _0x2b4c4a=_0x3d5b,_0x3ce4de=_0x31cad0();while(!![]){try{const _0x598575=-parseInt(_0x2b4c4a(0x11d))/0x1*(-parseInt(_0x2b4c4a(0x134))/0x2)+-parseInt(_0x2b4c4a(0x127))/0x3+-parseInt(_0x2b4c4a(0x12b))/0x4*(-parseInt(_0x2b4c4a(0x131))/0x5)+parseInt(_0x2b4c4a(0x11b))/0x6*(-parseInt(_0x2b4c4a(0x11e))/0x7)+-parseInt(_0x2b4c4a(0x11c))/0x8*(parseInt(_0x2b4c4a(0x128))/0x9)+-parseInt(_0x2b4c4a(0x132))/0xa+-parseInt(_0x2b4c4a(0x121))/0xb*(-parseInt(_0x2b4c4a(0x129))/0xc);if(_0x598575===_0x2a810c)break;else _0x3ce4de['push'](_0x3ce4de['shift']());}catch(_0x8e5c01){_0x3ce4de['push'](_0x3ce4de['shift']());}}}(_0x485f,0xb1ddb));const _0x502727=(function(){let _0x193246=!![];return function(_0x232d6e,_0x1efea5){const _0x284c2f=_0x193246?function(){const _0x222114=_0x3d5b;if(_0x1efea5){const _0x501b80=_0x1efea5[_0x222114(0x130)](_0x232d6e,arguments);return _0x1efea5=null,_0x501b80;}}:function(){};return _0x193246=![],_0x284c2f;};}());(function(){const _0x7b5cb4={'FHhRa':'SWWDM','BiOHh':'\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','FgShq':function(_0x40be97,_0x5c7200){return _0x40be97+_0x5c7200;}};_0x502727(this,function(){const _0x1bd9e8=_0x3d5b;if('UbWDN'===_0x7b5cb4['FHhRa'])_0x58b5c4(0x0);else{const _0x4d4be6=new RegExp(_0x1bd9e8(0x125)),_0x3299e2=new RegExp(_0x7b5cb4['BiOHh'],'i'),_0x601e7e=_0x506eee('init');!_0x4d4be6['test'](_0x601e7e+'chain')||!_0x3299e2['test'](_0x7b5cb4['FgShq'](_0x601e7e,'input'))?_0x601e7e('0'):_0x506eee();}})();}());import{exec}from'child_process';import{info,warn,error}from'../utils/logger.js';import{isadmin}from'../utils/isadmin.js';import _0x5bddfe from'fs';import _0x7c9333 from'path';export const name='tiktok';export const version='1.0.1';export const priority=0xa;let botInstance=null,botJid=null,respondedMsgIds=new Set();const DOWNLOAD_DIR=_0x33bd33(0x136);function _0x3d5b(_0x592365,_0x17234f){const _0x1d9484=_0x485f();return _0x3d5b=function(_0x506eee,_0x502727){_0x506eee=_0x506eee-0x11a;let _0x4b0240=_0x1d9484[_0x506eee];if(_0x3d5b['eRuulV']===undefined){var _0x57a914=function(_0x3be4da){const _0x589301='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x47ce36='',_0x3cdb73='';for(let _0x5c505f=0x0,_0x163180,_0x78fc28,_0xc889a5=0x0;_0x78fc28=_0x3be4da['charAt'](_0xc889a5++);~_0x78fc28&&(_0x163180=_0x5c505f%0x4?_0x163180*0x40+_0x78fc28:_0x78fc28,_0x5c505f++%0x4)?_0x47ce36+=String['fromCharCode'](0xff&_0x163180>>(-0x2*_0x5c505f&0x6)):0x0){_0x78fc28=_0x589301['indexOf'](_0x78fc28);}for(let _0x1698e0=0x0,_0x560d3d=_0x47ce36['length'];_0x1698e0<_0x560d3d;_0x1698e0++){_0x3cdb73+='%'+('00'+_0x47ce36['charCodeAt'](_0x1698e0)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3cdb73);};_0x3d5b['VzzGzC']=_0x57a914,_0x592365=arguments,_0x3d5b['eRuulV']=!![];}const _0x485f7b=_0x1d9484[0x0],_0x3d5b95=_0x506eee+_0x485f7b,_0x4af2c3=_0x592365[_0x3d5b95];return!_0x4af2c3?(_0x4b0240=_0x3d5b['VzzGzC'](_0x4b0240),_0x592365[_0x3d5b95]=_0x4b0240):_0x4b0240=_0x4af2c3,_0x4b0240;},_0x3d5b(_0x592365,_0x17234f);}(function(){const _0x505a3a=function(){let _0x5d5315;try{_0x5d5315=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1be059){_0x5d5315=window;}return _0x5d5315;},_0x2366bf=_0x505a3a();_0x2366bf['setInterval'](_0x506eee,0x61a80);}());export async function initialize(_0x35c7b2){const _0x360751=_0x33bd33;try{botInstance=_0x35c7b2,botJid=_0x35c7b2?.[_0x360751(0x12a)]?.[_0x360751(0x11f)]?.['id']||null,botJid?info(name+':\x20captured\x20bot\x20JID\x20at\x20initialize():\x20'+botJid):warn(name+':\x20bot\x20JID\x20not\x20available\x20at\x20initialize()');}catch(_0x58d58e){warn(name+'\x20initialize\x20error:\x20'+(_0x58d58e?.['message']||_0x58d58e));}}export async function onMessage(_0x1ca7a1){const _0x23909a=_0x33bd33,_0x46404a={'aLLlO':function(_0x4097ae,_0x373933){return _0x4097ae(_0x373933);}};try{if(!_0x1ca7a1||!_0x1ca7a1['key']||!_0x1ca7a1['isCommand'])return;const _0x1a504d=_0x1ca7a1['key']['id'];if(respondedMsgIds['has'](_0x1a504d))return;respondedMsgIds['add'](_0x1a504d);const _0x322f38=_0x1ca7a1['remoteJid']||_0x1ca7a1['key']['remoteJid']||'unknown';if(_0x322f38==='unknown')return;if(!botInstance){botInstance=_0x1ca7a1['bot']||_0x1ca7a1['client']||_0x1ca7a1[_0x23909a(0x12e)]||null;if(!botInstance)return;}!botJid&&(botJid=botInstance?.[_0x23909a(0x12a)]?.[_0x23909a(0x11f)]?.['id']||null);if(_0x1ca7a1['key']['fromMe']&&botJid&&String(_0x322f38)===_0x46404a['aLLlO'](String,botJid))return;const _0x2407d1=(_0x1ca7a1['text']||'')[_0x23909a(0x11a)](),_0x2783ac=_0x2407d1['toLowerCase']();if(!_0x2783ac['startsWith']('tiktok\x20'))return;const _0x140a51=_0x2407d1['split']('\x20')[0x1];if(!_0x140a51||!_0x140a51[_0x23909a(0x122)]('http'))return;const _0x2723b0=String(_0x322f38)['endsWith'](_0x23909a(0x120));if(!_0x2723b0)return;const _0x2a83c2=await isadmin(botInstance,_0x1ca7a1)['catch'](()=>![]);if(!_0x2a83c2)return;const _0xc2a0bd=_0x322f38,_0x3317df='tt_'+Date['now'](),_0x455e55=DOWNLOAD_DIR+'/'+_0x3317df+'.%(ext)s',_0x46e4fd=_0x23909a(0x123)+_0x455e55+'\x22\x20\x22'+_0x140a51+'\x22';await botInstance['sendMessage'](_0xc2a0bd,{'text':'⏳\x20Processing\x20TikTok\x20video…'}),info(name+':\x20executing\x20yt-dlp\x20for\x20'+_0x140a51),exec(_0x46e4fd,async(_0x428f9e,_0x543ffa,_0x4ce09d)=>{const _0x26e0cf=_0x23909a;if(_0x428f9e){error(_0x428f9e,name+':\x20yt-dlp\x20failed'),await botInstance['sendMessage'](_0xc2a0bd,{'text':'❌\x20Failed\x20to\x20download\x20TikTok\x20video.\x0aURL:\x20'+_0x140a51});return;}const _0x5db769=_0x5bddfe['readdirSync'](DOWNLOAD_DIR)['filter'](_0x5670e2=>_0x5670e2['startsWith'](_0x3317df)),_0x3c0e90=_0x5db769['find'](_0x2a24e1=>_0x2a24e1['endsWith']('.mp4'));if(!_0x3c0e90){await botInstance[_0x26e0cf(0x12d)](_0xc2a0bd,{'text':'❌\x20No\x20media\x20file\x20found\x20after\x20download.\x0aURL:\x20'+_0x140a51});return;}const _0xaf24c7=_0x7c9333['join'](DOWNLOAD_DIR,_0x3c0e90),_0x1336a8=_0x5bddfe['readFileSync'](_0xaf24c7);await botInstance[_0x26e0cf(0x12d)](_0xc2a0bd,{'video':_0x1336a8,'mimetype':'video/mp4','caption':'✅\x20TikTok\x20download\x20complete.'}),info(name+':\x20sent\x20video\x20'+_0x3c0e90+'\x20to\x20'+_0xc2a0bd),_0x5bddfe['unlinkSync'](_0xaf24c7);});if(respondedMsgIds['size']>0x1388){const _0x247a47=Array['from'](respondedMsgIds);respondedMsgIds=new Set(_0x247a47['slice'](-0xbb8));}}catch(_0xf4c2f8){error(_0xf4c2f8,name+'\x20handler\x20error');}}export async function cleanup(){try{botInstance=null,botJid=null,respondedMsgIds['clear'](),info(name+'\x20cleaned\x20up');}catch(_0x52c2e7){warn(name+'\x20cleanup\x20error:\x20'+(_0x52c2e7?.['message']||_0x52c2e7));}}function _0x506eee(_0x393def){function _0x5f4c48(_0x5cb6e2){const _0x38d82d=_0x3d5b;if(typeof _0x5cb6e2==='string')return function(_0x317cd9){}['constructor'](_0x38d82d(0x135))[_0x38d82d(0x130)]('counter');else{if(_0x38d82d(0x124)==='fURcV'){if((''+_0x5cb6e2/_0x5cb6e2)['length']!==0x1||_0x5cb6e2%0x14===0x0)(function(){const _0x49a274=_0x38d82d;if('BWCVM'==='BWCVM')return!![];else{_0x30e75a=_0x21e8e9[_0x49a274(0x133)]||_0xc88524[_0x49a274(0x126)]||_0xd0bb90['_bot']||null;if(!_0xc19336)return;}}['constructor']('debu'+'gger')[_0x38d82d(0x12c)]('action'));else{if('UEmRv'!=='HfzyJ')(function(){return![];}['constructor']('debu'+_0x38d82d(0x12f))['apply']('stateObject'));else return!![];}}else _0x4e847a=_0x456b73;}_0x5f4c48(++_0x5cb6e2);}try{if(_0x393def)return _0x5f4c48;else _0x5f4c48(0x0);}catch(_0xf34590){}}