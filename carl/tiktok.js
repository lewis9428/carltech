const _0x109f9c=_0x4104;(function(_0x4bdd91,_0x33cae8){const _0x15a713=_0x4104,_0x5407b9=_0x4bdd91();while(!![]){try{const _0x276106=parseInt(_0x15a713(0x176))/0x1+parseInt(_0x15a713(0x167))/0x2+parseInt(_0x15a713(0x175))/0x3+parseInt(_0x15a713(0x165))/0x4*(parseInt(_0x15a713(0x179))/0x5)+parseInt(_0x15a713(0x169))/0x6+-parseInt(_0x15a713(0x166))/0x7*(parseInt(_0x15a713(0x164))/0x8)+-parseInt(_0x15a713(0x15f))/0x9*(parseInt(_0x15a713(0x16a))/0xa);if(_0x276106===_0x33cae8)break;else _0x5407b9['push'](_0x5407b9['shift']());}catch(_0x2a8dc9){_0x5407b9['push'](_0x5407b9['shift']());}}}(_0x466f,0x9c3d9));const _0x1c41da=(function(){let _0x3daf5f=!![];return function(_0x312468,_0x15f270){if('GkTfP'!=='JwpFC'){const _0x5f2774=_0x3daf5f?function(){if(_0x15f270){if('TfbFS'==='TfbFS'){const _0x533950=_0x15f270['apply'](_0x312468,arguments);return _0x15f270=null,_0x533950;}else _0x13a93d(_0x527153+'\x20initialize\x20error:\x20'+(_0x391cf5?.['message']||_0x57563f));}}:function(){};return _0x3daf5f=![],_0x5f2774;}else _0x111021=_0x4d1c45;};}());(function(){let _0x41d240;try{const _0x3acf6d=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x41d240=_0x3acf6d();}catch(_0x1c2de1){_0x41d240=window;}_0x41d240['setInterval'](_0x23727a,0x61a80);}()),(function(){_0x1c41da(this,function(){const _0x3d2330=_0x4104,_0x2ed479=new RegExp('function\x20*\x5c(\x20*\x5c)'),_0x5e6959=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0x2cc99e=_0x23727a(_0x3d2330(0x161));!_0x2ed479[_0x3d2330(0x160)](_0x2cc99e+'chain')||!_0x5e6959['test'](_0x2cc99e+'input')?_0x2cc99e('0'):_0x23727a();})();}());import{exec}from'child_process';import{info,warn,error}from'../utils/logger.js';import{isadmin}from'../utils/isadmin.js';import _0x55ea00 from'fs';import _0x682851 from'path';export const name='tiktok';export const version=_0x109f9c(0x174);export const priority=0xa;let botInstance=null,botJid=null,respondedMsgIds=new Set();const DOWNLOAD_DIR='downloads';function _0x466f(){const _0x41f4bf=['Avjnz1C','yM90','mtm3mdq4u1jRzwfh','nJbivureA1G','mJy2tKzgv25Q','oty0nZqWsvr4zevK','y291BNrLCG','mZyWmZe5oeLOr0XsAq','mtGYmZb4yNDOswq','ywrmC2e','zNjVBq','CMvHzezPBgvtEw5J','oIbJyxb0DxjLzcbIB3qGsKLeigf0igLUAxrPywXPEMuOktOG','C2vUze1LC3nHz2u','yxbWBhK','zw5KC1DPDgG','lM1Wna','zMLUza','ms4WlJe','nty1ndiYq1HArKzr','mtK1mtmXANb0uxPs','oIbZzw50ihzPzgvVia','Dgv4Da','ndm1nJv4ugTqwem','A2v5','y29UC3rYDwn0B3i','mtuXmNH5yKHywq','DgvZDa','Aw5PDa'];_0x466f=function(){return _0x41f4bf;};return _0x466f();}export async function initialize(_0x52fc80){const _0xb552a4=_0x109f9c;try{botInstance=_0x52fc80,botJid=_0x52fc80?.['sock']?.['user']?.['id']||null,botJid?info(name+_0xb552a4(0x16e)+botJid):warn(name+':\x20bot\x20JID\x20not\x20available\x20at\x20initialize()');}catch(_0x2fe013){warn(name+'\x20initialize\x20error:\x20'+(_0x2fe013?.['message']||_0x2fe013));}}export async function onMessage(_0x11f8fa){const _0x2cecce=_0x109f9c,_0x2d822c={'lftyE':'IcaFm','RFYuP':function(_0x520d05,_0xe70bf8){return _0x520d05(_0xe70bf8);}};try{if(!_0x11f8fa||!_0x11f8fa['key']||!_0x11f8fa['isCommand'])return;const _0x21e004=_0x11f8fa['key']['id'];if(respondedMsgIds['has'](_0x21e004))return;respondedMsgIds['add'](_0x21e004);const _0x540f7f=_0x11f8fa['remoteJid']||_0x11f8fa[_0x2cecce(0x15d)]['remoteJid']||'unknown';if(_0x540f7f==='unknown')return;if(!botInstance){botInstance=_0x11f8fa[_0x2cecce(0x163)]||_0x11f8fa['client']||_0x11f8fa['_bot']||null;if(!botInstance)return;}!botJid&&(botJid=botInstance?.['sock']?.['user']?.['id']||null);if(_0x11f8fa['key']['fromMe']&&botJid&&String(_0x540f7f)===String(botJid))return;const _0x5beab6=(_0x11f8fa[_0x2cecce(0x178)]||'')['trim'](),_0x1267b6=_0x5beab6['toLowerCase']();if(!_0x1267b6['startsWith']('tiktok\x20'))return;const _0x2f8e81=_0x5beab6['split']('\x20')[0x1];if(!_0x2f8e81||!_0x2f8e81['startsWith']('http'))return;const _0x2500da=_0x2d822c['RFYuP'](String,_0x540f7f)['endsWith']('@g.us');if(!_0x2500da)return;const _0x104582=await isadmin(botInstance,_0x11f8fa)['catch'](()=>![]);if(!_0x104582)return;const _0x2af61f=_0x540f7f,_0x3655cd='tt_'+Date['now'](),_0x29e145=DOWNLOAD_DIR+'/'+_0x3655cd+'.%(ext)s',_0x2404fb='yt-dlp\x20--no-playlist\x20--merge-output-format\x20mp4\x20-o\x20\x22'+_0x29e145+'\x22\x20\x22'+_0x2f8e81+'\x22';await botInstance['sendMessage'](_0x2af61f,{'text':'⏳\x20Processing\x20TikTok\x20video…'}),info(name+':\x20executing\x20yt-dlp\x20for\x20'+_0x2f8e81),exec(_0x2404fb,async(_0x33011b,_0x3555cf,_0x1e7e43)=>{const _0x166f7e=_0x2cecce;if(_0x2d822c['lftyE']==='RzYqK')return function(_0x3e54e4){}[_0x166f7e(0x15e)]('while\x20(true)\x20{}')['apply']('counter');else{if(_0x33011b){error(_0x33011b,name+':\x20yt-dlp\x20failed'),await botInstance['sendMessage'](_0x2af61f,{'text':'❌\x20Failed\x20to\x20download\x20TikTok\x20video.\x0aURL:\x20'+_0x2f8e81});return;}const _0x150248=_0x55ea00['readdirSync'](DOWNLOAD_DIR)['filter'](_0xcb0675=>_0xcb0675['startsWith'](_0x3655cd)),_0x5ae40b=_0x150248[_0x166f7e(0x173)](_0xca2108=>_0xca2108[_0x166f7e(0x171)](_0x166f7e(0x172)));if(!_0x5ae40b){await botInstance[_0x166f7e(0x16f)](_0x2af61f,{'text':'❌\x20No\x20media\x20file\x20found\x20after\x20download.\x0aURL:\x20'+_0x2f8e81});return;}const _0x55c33b=_0x682851['join'](DOWNLOAD_DIR,_0x5ae40b),_0x4c5c53=_0x55ea00[_0x166f7e(0x16d)](_0x55c33b);await botInstance['sendMessage'](_0x2af61f,{'video':_0x4c5c53,'mimetype':'video/mp4','caption':'✅\x20TikTok\x20download\x20complete.'}),info(name+_0x166f7e(0x177)+_0x5ae40b+'\x20to\x20'+_0x2af61f),_0x55ea00['unlinkSync'](_0x55c33b);}});if(respondedMsgIds['size']>0x1388){const _0xeffd6b=Array[_0x2cecce(0x16c)](respondedMsgIds);respondedMsgIds=new Set(_0xeffd6b['slice'](-0xbb8));}}catch(_0x12d1b9){error(_0x12d1b9,name+'\x20handler\x20error');}}export async function cleanup(){const _0xd91763=_0x109f9c,_0x3fab17={'adLsa':function(_0x59c35b,_0x27ccb9){return _0x59c35b(_0x27ccb9);}};try{botInstance=null,botJid=null,respondedMsgIds['clear'](),_0x3fab17[_0xd91763(0x16b)](info,name+'\x20cleaned\x20up');}catch(_0x889d46){warn(name+'\x20cleanup\x20error:\x20'+(_0x889d46?.['message']||_0x889d46));}}function _0x4104(_0x3a3326,_0xf011aa){const _0x2a22cf=_0x466f();return _0x4104=function(_0x23727a,_0x1c41da){_0x23727a=_0x23727a-0x15d;let _0x9d6707=_0x2a22cf[_0x23727a];if(_0x4104['qxYMpv']===undefined){var _0x67b04a=function(_0x581916){const _0x5cc65e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3de81c='',_0x4cd838='';for(let _0x3c33c5=0x0,_0x5943c1,_0x2069ba,_0x364e19=0x0;_0x2069ba=_0x581916['charAt'](_0x364e19++);~_0x2069ba&&(_0x5943c1=_0x3c33c5%0x4?_0x5943c1*0x40+_0x2069ba:_0x2069ba,_0x3c33c5++%0x4)?_0x3de81c+=String['fromCharCode'](0xff&_0x5943c1>>(-0x2*_0x3c33c5&0x6)):0x0){_0x2069ba=_0x5cc65e['indexOf'](_0x2069ba);}for(let _0x699de=0x0,_0x3366a4=_0x3de81c['length'];_0x699de<_0x3366a4;_0x699de++){_0x4cd838+='%'+('00'+_0x3de81c['charCodeAt'](_0x699de)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4cd838);};_0x4104['wDeloO']=_0x67b04a,_0x3a3326=arguments,_0x4104['qxYMpv']=!![];}const _0x466f5d=_0x2a22cf[0x0],_0x410428=_0x23727a+_0x466f5d,_0x15441d=_0x3a3326[_0x410428];return!_0x15441d?(_0x9d6707=_0x4104['wDeloO'](_0x9d6707),_0x3a3326[_0x410428]=_0x9d6707):_0x9d6707=_0x15441d,_0x9d6707;},_0x4104(_0x3a3326,_0xf011aa);}function _0x23727a(_0x36ecc2){const _0x11d80c=_0x109f9c,_0x5fe457={'aqZBu':'debu'};function _0x2bfcb6(_0x1a65cc){const _0x26da73=_0x4104;if(typeof _0x1a65cc==='string')return function(_0x4b5c5f){}[_0x26da73(0x15e)]('while\x20(true)\x20{}')['apply'](_0x26da73(0x168));else(''+_0x1a65cc/_0x1a65cc)['length']!==0x1||_0x1a65cc%0x14===0x0?function(){return!![];}['constructor'](_0x5fe457['aqZBu']+'gger')['call']('action'):function(){return![];}['constructor']('debu'+'gger')[_0x26da73(0x170)]('stateObject');_0x2bfcb6(++_0x1a65cc);}try{if(_0x36ecc2)return _0x2bfcb6;else'iRMgW'!==_0x11d80c(0x162)?function(){return![];}['constructor']('debu'+'gger')['apply']('stateObject'):_0x2bfcb6(0x0);}catch(_0x4503c1){}}