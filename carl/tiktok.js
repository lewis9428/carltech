(function(_0xe49f57,_0x321490){const _0x39956a=_0x47c4,_0x2251bd=_0xe49f57();while(!![]){try{const _0x570f16=parseInt(_0x39956a(0x110))/0x1+-parseInt(_0x39956a(0x115))/0x2*(parseInt(_0x39956a(0x10f))/0x3)+parseInt(_0x39956a(0x117))/0x4+-parseInt(_0x39956a(0x10c))/0x5+-parseInt(_0x39956a(0x10a))/0x6+parseInt(_0x39956a(0x11c))/0x7+-parseInt(_0x39956a(0x119))/0x8*(parseInt(_0x39956a(0x10b))/0x9);if(_0x570f16===_0x321490)break;else _0x2251bd['push'](_0x2251bd['shift']());}catch(_0x4cc320){_0x2251bd['push'](_0x2251bd['shift']());}}}(_0x503a,0x5a47f));const _0x583dde=(function(){const _0xda113a={'UjhsS':function(_0xdf72f6,_0x53a9f3){return _0xdf72f6===_0x53a9f3;}};let _0x1a5d1c=!![];return function(_0x2e6578,_0x5f33db){const _0x2aa0c7=_0x1a5d1c?function(){const _0x4a6b08=_0x47c4,_0x21bb65={'BNlOj':function(_0x33d201,_0x4b1fd2){return _0x33d201(_0x4b1fd2);}};if(_0x5f33db){if(_0xda113a['UjhsS']('VmiHV',_0x4a6b08(0x118)))try{_0x3a324d=null,_0x163577=null,_0x2f80c6['clear'](),_0x21bb65['BNlOj'](_0x20d2a2,_0x24bc3e+'\x20cleaned\x20up');}catch(_0x473bcb){_0x3a2b70(_0x50e912+'\x20cleanup\x20error:\x20'+(_0x473bcb?.['message']||_0x473bcb));}else{const _0x12ebf7=_0x5f33db['apply'](_0x2e6578,arguments);return _0x5f33db=null,_0x12ebf7;}}}:function(){};return _0x1a5d1c=![],_0x2aa0c7;};}());(function(){const _0x5d58c1=function(){const _0x166e1f=_0x47c4;let _0x7333ec;try{_0x7333ec=Function(_0x166e1f(0x123)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x506ad6){_0x7333ec=window;}return _0x7333ec;},_0x53ed1f=_0x5d58c1();_0x53ed1f['setInterval'](_0x311e7f,0x61a80);}()),(function(){const _0x2363e0={'swPzJ':'chain'};_0x583dde(this,function(){const _0x2e033a=new RegExp('function\x20*\x5c(\x20*\x5c)'),_0x5eefc5=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0x4fbb49=_0x311e7f('init');!_0x2e033a['test'](_0x4fbb49+_0x2363e0['swPzJ'])||!_0x5eefc5['test'](_0x4fbb49+'input')?_0x4fbb49('0'):_0x311e7f();})();}());import{exec}from'child_process';import{info,warn,error}from'../utils/logger.js';import{isadmin}from'../utils/isadmin.js';import _0x4636b5 from'fs';function _0x503a(){const _0x27ab34=['mtH1se5fwvu','mty2nJG5nxDAs25zAq','AxndB21Tyw5K','AgfZ','mta2odm2ow54r0HtEG','nZmXmtCYwhnWqKTM','ywrK','Dg9mB3DLCKnHC2u','CMvTB3rLsMLK','C3bSAxq','mNvQEhzxAq','y2f0y2G','mJa2mZK1nM92EKvPvG','qMjHA00','mZa5mZuYvgTXDeL5','BgvUz3rO','4P2mie5Vig1LzgLHigzPBguGzM91BMqGywz0zxiGzg93BMXVywqUcLvstdOG','otC0nta1wwvQCenw','qgCUDxm','DhrF','C29JAW','ihrVia','BwvZC2fNzq','DxnLCG','CMv0DxjUicHMDw5JDgLVBIGPia','C2vUze1LC3nHz2u','A2v5','mtq5odq3mfbOyu1xCq'];_0x503a=function(){return _0x27ab34;};return _0x503a();}import _0x340bc3 from'path';export const name='tiktok';export const version='1.0.1';export const priority=0xa;let botInstance=null,botJid=null,respondedMsgIds=new Set();const DOWNLOAD_DIR='downloads';function _0x47c4(_0x360f2f,_0x3ff1d4){const _0x1da060=_0x503a();return _0x47c4=function(_0x311e7f,_0x583dde){_0x311e7f=_0x311e7f-0x109;let _0x847c89=_0x1da060[_0x311e7f];if(_0x47c4['tHzejw']===undefined){var _0x59df47=function(_0x445066){const _0x82869c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x36638e='',_0x43566b='';for(let _0x599986=0x0,_0x51588c,_0x1b166e,_0x189f28=0x0;_0x1b166e=_0x445066['charAt'](_0x189f28++);~_0x1b166e&&(_0x51588c=_0x599986%0x4?_0x51588c*0x40+_0x1b166e:_0x1b166e,_0x599986++%0x4)?_0x36638e+=String['fromCharCode'](0xff&_0x51588c>>(-0x2*_0x599986&0x6)):0x0){_0x1b166e=_0x82869c['indexOf'](_0x1b166e);}for(let _0x56238f=0x0,_0x3856a3=_0x36638e['length'];_0x56238f<_0x3856a3;_0x56238f++){_0x43566b+='%'+('00'+_0x36638e['charCodeAt'](_0x56238f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x43566b);};_0x47c4['cjaaKS']=_0x59df47,_0x360f2f=arguments,_0x47c4['tHzejw']=!![];}const _0x503a6a=_0x1da060[0x0],_0x47c4bc=_0x311e7f+_0x503a6a,_0x1f2692=_0x360f2f[_0x47c4bc];return!_0x1f2692?(_0x847c89=_0x47c4['cjaaKS'](_0x847c89),_0x360f2f[_0x47c4bc]=_0x847c89):_0x847c89=_0x1f2692,_0x847c89;},_0x47c4(_0x360f2f,_0x3ff1d4);}export async function initialize(_0x5bec0b){const _0x4a8f19=_0x47c4;try{botInstance=_0x5bec0b,botJid=_0x5bec0b?.[_0x4a8f19(0x11f)]?.[_0x4a8f19(0x122)]?.['id']||null,botJid?info(name+':\x20captured\x20bot\x20JID\x20at\x20initialize():\x20'+botJid):warn(name+':\x20bot\x20JID\x20not\x20available\x20at\x20initialize()');}catch(_0x132a93){warn(name+'\x20initialize\x20error:\x20'+(_0x132a93?.['message']||_0x132a93));}}export async function onMessage(_0x570205){const _0x1a576e=_0x47c4,_0x4d18a4={'neRar':function(_0x246f90,_0xe7fed7){return _0x246f90===_0xe7fed7;},'mwxfQ':'EmLER','aaPHo':function(_0x47f2f5,_0x4ff125){return _0x47f2f5(_0x4ff125);},'rIDka':function(_0x461584,_0x255000){return _0x461584>_0x255000;}};try{if(!_0x570205||!_0x570205[_0x1a576e(0x109)]||!_0x570205[_0x1a576e(0x10d)])return;const _0x34db4d=_0x570205['key']['id'];if(respondedMsgIds[_0x1a576e(0x10e)](_0x34db4d))return;respondedMsgIds[_0x1a576e(0x111)](_0x34db4d);const _0x517858=_0x570205['remoteJid']||_0x570205['key'][_0x1a576e(0x113)]||'unknown';if(_0x517858==='unknown')return;if(!botInstance){botInstance=_0x570205['bot']||_0x570205['client']||_0x570205['_bot']||null;if(!botInstance)return;}if(!botJid){if(_0x4d18a4['neRar'](_0x4d18a4['mwxfQ'],'zdrzc')){if(_0x50d35c){const _0x5c0d81=_0x46090e['apply'](_0x38f80b,arguments);return _0x4f5646=null,_0x5c0d81;}}else botJid=botInstance?.['sock']?.['user']?.['id']||null;}if(_0x570205['key']['fromMe']&&botJid&&_0x4d18a4['aaPHo'](String,_0x517858)===String(botJid))return;const _0x237920=(_0x570205['text']||'')['trim'](),_0x1c81f1=_0x237920[_0x1a576e(0x112)]();if(!_0x1c81f1['startsWith']('tiktok\x20'))return;const _0x441ebd=_0x237920[_0x1a576e(0x114)]('\x20')[0x1];if(!_0x441ebd||!_0x441ebd['startsWith']('http'))return;const _0x8ff74=String(_0x517858)['endsWith'](_0x1a576e(0x11d));if(!_0x8ff74)return;const _0x2abc0a=await isadmin(botInstance,_0x570205)[_0x1a576e(0x116)](()=>![]);if(!_0x2abc0a)return;const _0x2141ae=_0x517858,_0x58a3b6=_0x1a576e(0x11e)+Date['now'](),_0x40a94a=DOWNLOAD_DIR+'/'+_0x58a3b6+'.%(ext)s',_0x5e82b9='yt-dlp\x20--no-playlist\x20--merge-output-format\x20mp4\x20-o\x20\x22'+_0x40a94a+'\x22\x20\x22'+_0x441ebd+'\x22';await botInstance[_0x1a576e(0x124)](_0x2141ae,{'text':'⏳\x20Processing\x20TikTok\x20video…'}),info(name+':\x20executing\x20yt-dlp\x20for\x20'+_0x441ebd),exec(_0x5e82b9,async(_0x2794a2,_0x2f4ca1,_0x1881eb)=>{const _0x32a4c4=_0x1a576e;if(_0x2794a2){error(_0x2794a2,name+':\x20yt-dlp\x20failed'),await botInstance[_0x32a4c4(0x124)](_0x2141ae,{'text':'❌\x20Failed\x20to\x20download\x20TikTok\x20video.\x0aURL:\x20'+_0x441ebd});return;}const _0x4b9839=_0x4636b5['readdirSync'](DOWNLOAD_DIR)['filter'](_0x183aee=>_0x183aee['startsWith'](_0x58a3b6)),_0x1dbdd1=_0x4b9839['find'](_0x19fa0e=>_0x19fa0e['endsWith']('.mp4'));if(!_0x1dbdd1){await botInstance['sendMessage'](_0x2141ae,{'text':_0x32a4c4(0x11b)+_0x441ebd});return;}const _0x5d8de8=_0x340bc3['join'](DOWNLOAD_DIR,_0x1dbdd1),_0x245b70=_0x4636b5['readFileSync'](_0x5d8de8);await botInstance['sendMessage'](_0x2141ae,{'video':_0x245b70,'mimetype':'video/mp4','caption':'✅\x20TikTok\x20download\x20complete.'}),info(name+':\x20sent\x20video\x20'+_0x1dbdd1+_0x32a4c4(0x120)+_0x2141ae),_0x4636b5['unlinkSync'](_0x5d8de8);});if(_0x4d18a4['rIDka'](respondedMsgIds['size'],0x1388)){const _0x3d373e=Array['from'](respondedMsgIds);respondedMsgIds=new Set(_0x3d373e['slice'](-0xbb8));}}catch(_0x434ed4){if('TMZGu'==='TMZGu')error(_0x434ed4,name+'\x20handler\x20error');else return _0x4dcf3c;}}export async function cleanup(){const _0x4ee0ad=_0x47c4;try{botInstance=null,botJid=null,respondedMsgIds['clear'](),info(name+'\x20cleaned\x20up');}catch(_0xd45068){warn(name+'\x20cleanup\x20error:\x20'+(_0xd45068?.[_0x4ee0ad(0x121)]||_0xd45068));}}function _0x311e7f(_0x4b9cc7){const _0x140c7f=_0x47c4,_0x1dac51={'gsOcR':'counter','bcujY':function(_0xd79c5c,_0x1c2d17){return _0xd79c5c!==_0x1c2d17;},'IepRC':_0x140c7f(0x11a),'qSjoe':'gger'};function _0x1c7a41(_0x56fa36){if(typeof _0x56fa36==='string')return function(_0x1489a7){}['constructor']('while\x20(true)\x20{}')['apply'](_0x1dac51['gsOcR']);else _0x1dac51['bcujY']((''+_0x56fa36/_0x56fa36)[_0x1dac51['IepRC']],0x1)||_0x56fa36%0x14===0x0?function(){return!![];}['constructor']('debu'+'gger')['call']('action'):function(){return![];}['constructor']('debu'+_0x1dac51['qSjoe'])['apply']('stateObject');_0x1c7a41(++_0x56fa36);}try{if(_0x4b9cc7)return _0x1c7a41;else _0x1c7a41(0x0);}catch(_0x478bea){}}