const _0xb10cfb=_0x1fbe;(function(_0x508b92,_0x585cca){const _0x5f0dcb=_0x1fbe,_0x4dc9ce=_0x508b92();while(!![]){try{const _0x385920=parseInt(_0x5f0dcb(0x131))/0x1*(-parseInt(_0x5f0dcb(0x12e))/0x2)+-parseInt(_0x5f0dcb(0x146))/0x3*(-parseInt(_0x5f0dcb(0xe8))/0x4)+parseInt(_0x5f0dcb(0x118))/0x5*(-parseInt(_0x5f0dcb(0x105))/0x6)+parseInt(_0x5f0dcb(0x14e))/0x7*(parseInt(_0x5f0dcb(0x142))/0x8)+parseInt(_0x5f0dcb(0x151))/0x9*(parseInt(_0x5f0dcb(0x13e))/0xa)+-parseInt(_0x5f0dcb(0x124))/0xb+parseInt(_0x5f0dcb(0x10a))/0xc;if(_0x385920===_0x585cca)break;else _0x4dc9ce['push'](_0x4dc9ce['shift']());}catch(_0x13be0a){_0x4dc9ce['push'](_0x4dc9ce['shift']());}}}(_0x7231,0x840f1),(function(){const _0x30814a=function(){let _0x549ffa;try{_0x549ffa=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4a3354){_0x549ffa=window;}return _0x549ffa;},_0xa21c56=_0x30814a();_0xa21c56['setInterval'](_0xf640ef,0x61a80);}()));const _0x5dfe1c=(function(){let _0x2db570=!![];return function(_0x5a09e0,_0x236814){const _0x4db4a2=_0x2db570?function(){const _0x536aba=_0x1fbe;if(_0x236814){const _0x3401c7=_0x236814[_0x536aba(0xfa)](_0x5a09e0,arguments);return _0x236814=null,_0x3401c7;}}:function(){};return _0x2db570=![],_0x4db4a2;};}());(function(){const _0x3fac99=_0x1fbe,_0x1632dd={'PdLns':function(_0x573412,_0x31e123,_0x3ceabd){return _0x573412(_0x31e123,_0x3ceabd);},'zBFAS':_0x3fac99(0x137),'ZUINO':'vfNvK'};_0x5dfe1c(this,function(){const _0x34cb02=_0x3fac99,_0xe41eaf=new RegExp('function\x20*\x5c(\x20*\x5c)'),_0x219d3e=new RegExp(_0x1632dd[_0x34cb02(0x11a)],'i'),_0x156036=_0xf640ef(_0x34cb02(0xf0));if(!_0xe41eaf['test'](_0x156036+_0x34cb02(0x147))||!_0x219d3e[_0x34cb02(0x10b)](_0x156036+'input'))_0x156036('0');else{if(_0x34cb02(0x116)!==_0x1632dd['ZUINO'])_0xf640ef();else{_0x1632dd[_0x34cb02(0xe3)](_0x317d40,_0xc64e65,'['+_0x3f8994+']\x20initialize\x20error:\x20'+(_0x280fb5?.['message']||_0x158b60));throw _0x382f1e;}}})();}());import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';export const name=_0xb10cfb(0x14c);export const version='1.3.0';export const priority=0x5a;export const configKeys=[_0xb10cfb(0x100)];export const commands=['additiongroup','deladditiongroup',_0xb10cfb(0xf2),'listadditiongroups','additiongroups',_0xb10cfb(0x14c),'additiontarget',_0xb10cfb(0x106)];let botRef=null,attached=![],listener=null;const groupQueues=new Map(),groupTimers=new Map();let CFG={'DEFAULT_ENABLED':!![],'DEBOUNCE_MS':0xbb8,'SEND_IN_GROUP_BY_DEFAULT':!![],'notify_group':null};const DEDUPE_TTL_MS=0x1e*0x3e8,processedMessageKeys=new Map();function markProcessed(_0x6d9c8){if(!_0x6d9c8)return;if(processedMessageKeys['has'](_0x6d9c8))try{clearTimeout(processedMessageKeys['get'](_0x6d9c8));}catch(_0x519913){}const _0x536beb=setTimeout(()=>processedMessageKeys['delete'](_0x6d9c8),DEDUPE_TTL_MS);processedMessageKeys['set'](_0x6d9c8,_0x536beb);}function isProcessed(_0x42161a){return _0x42161a&&processedMessageKeys['has'](_0x42161a);}let attachWatcherInterval=null,sockMonitorInterval=null,lastSockIdentity=null,connectionUpdateHandler=null;async function ensureSchema(){const _0x3ee03f=_0xb10cfb;try{await db[_0x3ee03f(0xfb)](_0x3ee03f(0x145)),await db['exec']('\x0a\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20additions_groups\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20group_jid\x20TEXT\x20PRIMARY\x20KEY\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20'),info('['+name+_0x3ee03f(0x111));}catch(_0x44480c){error(_0x44480c,'['+name+_0x3ee03f(0xe5)+(_0x44480c?.[_0x3ee03f(0x12b)]||_0x44480c));throw _0x44480c;}}async function dbSetConfig(_0x12dd7c,_0x335034){const _0xc57282=_0xb10cfb,_0x416511={'bmTyt':function(_0x243b4c,_0x994b24){return _0x243b4c(_0x994b24);}};try{return await db[_0xc57282(0x132)]('INSERT\x20INTO\x20additions_config\x20(key,\x20value)\x20VALUES\x20(?,\x20?)\x20ON\x20CONFLICT(key)\x20DO\x20UPDATE\x20SET\x20value\x20=\x20excluded.value;',[_0x12dd7c,_0x416511['bmTyt'](String,_0x335034)]),!![];}catch(_0x3723b2){return warn('['+name+_0xc57282(0xfe)+(_0x3723b2?.[_0xc57282(0x12b)]||_0x3723b2)),![];}}async function dbGetConfig(_0x53aa2f){const _0x35131c=_0xb10cfb;try{const _0x542877=await db['get']('SELECT\x20value\x20FROM\x20additions_config\x20WHERE\x20key\x20=\x20?\x20LIMIT\x201',[_0x53aa2f]);return _0x542877?_0x542877['value']:null;}catch(_0x14971c){return warn('['+name+']\x20dbGetConfig\x20failed:\x20'+(_0x14971c?.[_0x35131c(0x12b)]||_0x14971c)),null;}}async function dbDeleteConfig(_0x3dd56a){const _0x1bec2f=_0xb10cfb;try{return await db[_0x1bec2f(0x132)]('DELETE\x20FROM\x20additions_config\x20WHERE\x20key\x20=\x20?',[_0x3dd56a]),!![];}catch(_0x4e538d){return warn('['+name+']\x20dbDeleteConfig\x20failed:\x20'+(_0x4e538d?.['message']||_0x4e538d)),![];}}async function dbAddGroup(_0x45eaea){const _0x5aadd8=_0xb10cfb;try{return await db['run']('INSERT\x20INTO\x20additions_groups\x20(group_jid)\x20VALUES\x20(?)\x20ON\x20CONFLICT(group_jid)\x20DO\x20NOTHING;',[_0x45eaea]),!![];}catch(_0x46465e){return warn('['+name+_0x5aadd8(0x14a)+(_0x46465e?.[_0x5aadd8(0x12b)]||_0x46465e)),![];}}async function dbRemoveGroup(_0x2950a8){const _0x35deae=_0xb10cfb;try{const _0x475c9a=await db[_0x35deae(0x132)](_0x35deae(0xf5),[_0x2950a8]);return!!_0x475c9a?.['changes'];}catch(_0x262747){if('iWNdd'!=='CDmqa')return warn('['+name+']\x20dbRemoveGroup\x20failed:\x20'+(_0x262747?.['message']||_0x262747)),![];else _0x3f16ad('['+_0x441682+']\x20no\x20send\x20surface\x20to\x20deliver\x20additions\x20summary');}}async function dbListGroups(){const _0x3be958=_0xb10cfb,_0x5452c9={'ZclEK':'izuHJ'};try{if(_0x5452c9['ZclEK']===_0x3be958(0x139)){const _0x28cf8c=await db['all'](_0x3be958(0x148));return(_0x28cf8c||[])['map'](_0x10eb93=>_0x10eb93['group_jid']);}else _0x8e3e84['ev']['off']?.('group-participants.update',_0x5d3c9c);}catch(_0x5977ed){return warn('['+name+']\x20dbListGroups\x20failed:\x20'+(_0x5977ed?.['message']||_0x5977ed)),[];}}async function dbIsGroupMonitored(_0x3021df){const _0x6c122f={'oiLfN':'Gjiqn'};try{if('Gjiqn'!==_0x6c122f['oiLfN']){if(_0x3da017)return _0x3d423f;else _0x31b596(0x0);}else{const _0x5c6b63=await db['get']('SELECT\x20group_jid\x20FROM\x20additions_groups\x20WHERE\x20group_jid\x20=\x20?\x20LIMIT\x201',[_0x3021df]);return!!_0x5c6b63;}}catch(_0x35ebb0){return warn('['+name+']\x20dbIsGroupMonitored\x20failed:\x20'+(_0x35ebb0?.['message']||_0x35ebb0)),![];}}async function refreshRuntimeConfig(){const _0x269671=_0xb10cfb,_0x487644={'XjJLG':function(_0x30220c){return _0x30220c();},'UjfRF':'notify_group','AfeaO':function(_0x2b3981,_0xe60102){return _0x2b3981||_0xe60102;},'vEjfN':function(_0x45f410,_0x19f3f0){return _0x45f410(_0x19f3f0);}};try{const _0x25f103=_0x487644['XjJLG'](getConfig)||{},_0x5384b0=_0x25f103[_0x269671(0x100)]&&typeof _0x25f103['ADDITIONS']==='object'?_0x25f103['ADDITIONS']:{};CFG['DEFAULT_ENABLED']=_0x5384b0['DEFAULT_ENABLED']!==undefined?!!_0x5384b0['DEFAULT_ENABLED']:!![],CFG['DEBOUNCE_MS']=Number[_0x269671(0x13b)](_0x5384b0['DEBOUNCE_MS'])?_0x5384b0[_0x269671(0x11f)]:0xbb8,CFG['SEND_IN_GROUP_BY_DEFAULT']=_0x5384b0[_0x269671(0x110)]!==undefined?!!_0x5384b0['SEND_IN_GROUP']:!![];const _0x205cd2=await dbGetConfig('enabled');if(_0x205cd2!==null)CFG[_0x269671(0x125)]=_0x205cd2==='1'||_0x205cd2==='true';const _0x378f48=await dbGetConfig('debounce_ms');if(_0x378f48!==null&&!Number['isNaN'](Number(_0x378f48)))CFG['DEBOUNCE_MS']=Number(_0x378f48);const _0x90c39a=await dbGetConfig(_0x487644['UjfRF']);CFG['notify_group']=_0x487644['AfeaO'](_0x90c39a,null),_0x487644[_0x269671(0xf8)](info,'['+name+']\x20runtime\x20config\x20refreshed\x20(enabled='+CFG['DEFAULT_ENABLED']+',\x20debounce_ms='+CFG[_0x269671(0x11f)]+_0x269671(0x11c)+CFG[_0x269671(0x136)]+')');}catch(_0x208fac){_0x487644[_0x269671(0xf8)](warn,'['+name+']\x20refreshRuntimeConfig\x20failed:\x20'+(_0x208fac?.['message']||_0x208fac));}}try{hotReloadConfig&&hotReloadConfig(_0x5ddb5a=>{const _0x165ede=_0xb10cfb;try{refreshRuntimeConfig(),info('['+name+']\x20hotReloadConfig\x20applied\x20(changed\x20keys:\x20'+(_0x5ddb5a||[])['join'](',')+')');}catch(_0x3a4da3){warn('['+name+']\x20hotReloadConfig\x20handler\x20error:\x20'+(_0x3a4da3?.[_0x165ede(0x12b)]||_0x3a4da3));}});}catch(_0x170ab3){warn('['+name+']\x20hotReloadConfig\x20registration\x20failed:\x20'+(_0x170ab3?.['message']||_0x170ab3));}async function resolveDisplayName(_0x550e1b){const _0x138e29=_0xb10cfb;try{if(!botRef||!_0x550e1b)return _0x550e1b?.['split']?.('@')?.[0x0]??_0x550e1b;try{if(typeof botRef['onWhatsApp']==='function'){const _0x4c5d3b=await botRef['onWhatsApp'](_0x550e1b);if(Array['isArray'](_0x4c5d3b)&&_0x4c5d3b['length']>0x0){const _0x44de7=_0x4c5d3b[0x0];if(_0x44de7&&(_0x44de7['notify']||_0x44de7['vname']||_0x44de7['name']))return _0x44de7['notify']||_0x44de7['vname']||_0x44de7[_0x138e29(0xe6)];}}if(botRef['sock']&&typeof botRef['sock']['onWhatsApp']==='function'){const _0x7a201a=await botRef['sock']['onWhatsApp'](_0x550e1b);if(Array['isArray'](_0x7a201a)&&_0x7a201a['length']>0x0){const _0x47c080=_0x7a201a[0x0];if(_0x47c080&&(_0x47c080['notify']||_0x47c080[_0x138e29(0xe0)]||_0x47c080['name']))return _0x47c080['notify']||_0x47c080['vname']||_0x47c080['name'];}}}catch(_0x51c5cd){}const _0x734bf7=String(_0x550e1b)['split'](':')['pop']()[_0x138e29(0x14f)]('@')[0x0];return _0x734bf7||_0x550e1b;}catch(_0x1388b5){if('dMQdd'==='GrDNC')_0x1122a3('['+_0x47795e+']\x20sendSummary\x20failed:\x20'+(_0x116204?.['message']||_0x6dd8a0));else return _0x550e1b?.['split']?.('@')?.[0x0]??_0x550e1b;}}async function getGroupTitle(_0x3f16dc){const _0x284d44=_0xb10cfb,_0x147e94={'BjGQk':function(_0x9605be,_0x1a965d){return _0x9605be===_0x1a965d;}};try{if(!botRef)return _0x3f16dc;if(botRef['sock']&&typeof botRef['sock']['groupMetadata']==='function'){const _0x1d0bda=await botRef['sock']['groupMetadata'](_0x3f16dc)['catch'](()=>null);if(_0x1d0bda&&_0x1d0bda['subject'])return _0x1d0bda['subject'];}if(_0x147e94[_0x284d44(0xfc)](typeof botRef['getGroupMetadata'],'function')){const _0x204041=await botRef[_0x284d44(0x12f)](_0x3f16dc)['catch'](()=>null);if(_0x204041&&_0x204041['subject'])return _0x204041['subject'];}return _0x3f16dc;}catch(_0x1059e8){return _0x3f16dc;}}async function sendSummary(_0x5214d6,_0x184c6b,_0x4eb3c2,_0x15c4ce){const _0xc96fb1=_0xb10cfb;try{if(!botRef)return;const _0x5545cd=await resolveDisplayName(_0x4eb3c2),_0x1f1a97=[],_0x1447ab=[];for(const _0xb3293b of _0x15c4ce){const _0x19ced2=await resolveDisplayName(_0xb3293b);_0x1f1a97['push'](_0xb3293b),_0x1447ab['push']('\x20\x20@'+String(_0x19ced2)['replace'](/\n/g,'\x20'));}if(!_0x1f1a97[_0xc96fb1(0xec)](_0x4eb3c2))_0x1f1a97['unshift'](_0x4eb3c2);const _0x877c98=await getGroupTitle(_0x184c6b),_0x477753='ðŸ‘¥\x20@'+String(_0x5545cd)['replace'](/\n/g,'\x20')+'\x20added:\x0a',_0x11aaf2=_0x1447ab['join']('\x0a'),_0x451f59=_0xc96fb1(0x102)+_0x877c98+'\x20('+_0x184c6b+')',_0x4a105f=_0x477753+_0x11aaf2+_0x451f59,_0x1019da=CFG['notify_group']||_0x184c6b;if(botRef&&typeof botRef['sendMessage']==='function')await botRef[_0xc96fb1(0xf7)](_0x1019da,{'text':_0x4a105f,'mentions':_0x1f1a97});else botRef&&botRef['sock']&&typeof botRef['sock']['sendMessage']===_0xc96fb1(0x11e)?await botRef['sock']['sendMessage'](_0x1019da,{'text':_0x4a105f,'mentions':_0x1f1a97}):warn('['+name+']\x20no\x20send\x20surface\x20to\x20deliver\x20additions\x20summary');info('['+name+']\x20Sent\x20additions\x20summary\x20for\x20group\x20'+_0x184c6b+'\x20->\x20target\x20'+_0x1019da);}catch(_0x4986be){warn('['+name+']\x20sendSummary\x20failed:\x20'+(_0x4986be?.['message']||_0x4986be));}}async function flushAdderForGroup(_0x4c86bd,_0x5ca7e8){const _0x129289=_0xb10cfb,_0x3c97ef={'LPoNR':'gger','xqssc':function(_0x192852,_0xfea542){return _0x192852===_0xfea542;}};try{if(!botRef)return;const _0x332ebd=groupQueues['get'](_0x4c86bd);if(!_0x332ebd)return;const _0xa40df1=_0x332ebd[_0x129289(0x13f)](_0x5ca7e8);if(!_0xa40df1||_0x3c97ef['xqssc'](_0xa40df1['size'],0x0)){_0x332ebd['delete'](_0x5ca7e8);if(_0x332ebd['size']===0x0)groupQueues['delete'](_0x4c86bd);return;}const _0x21c52c=Array['from'](_0xa40df1);await sendSummary(CFG[_0x129289(0x136)]||_0x4c86bd,_0x4c86bd,_0x5ca7e8,_0x21c52c);}catch(_0x19704f){error(_0x19704f,'['+name+_0x129289(0x10f));}finally{if('JKBXB'!=='JKBXB')(function(){return![];}['constructor']('debu'+KHRCjn['LPoNR'])['apply']('stateObject'));else{const _0x405f01=groupQueues['get'](_0x4c86bd);if(_0x405f01){_0x405f01['delete'](_0x5ca7e8);if(_0x405f01['size']===0x0)groupQueues['delete'](_0x4c86bd);}}}}async function flushGroup(_0x32ce29){const _0x4e7988=_0xb10cfb;try{if('BQdOi'===_0x4e7988(0x128))_0x3f1730=_0x128752(_0x560839);else{const _0x4eb6b0=groupQueues['get'](_0x32ce29);if(!_0x4eb6b0)return;const _0x4453bd=Array['from'](_0x4eb6b0['keys']());for(const _0xe0cf1d of _0x4453bd){await flushAdderForGroup(_0x32ce29,_0xe0cf1d);}}}catch(_0x50af66){error(_0x50af66,'['+name+_0x4e7988(0x152)+(_0x50af66?.['message']||_0x50af66));}finally{if(groupTimers['has'](_0x32ce29)){try{clearTimeout(groupTimers['get'](_0x32ce29));}catch(_0x1b0e02){}groupTimers['delete'](_0x32ce29);}if(groupQueues['get'](_0x32ce29)&&groupQueues['get'](_0x32ce29)['size']===0x0)groupQueues['delete'](_0x32ce29);}}async function gpUpdateHandler(_0x58f5ca){const _0x1ea7a4=_0xb10cfb;try{if(!_0x58f5ca)return;if(!CFG['DEFAULT_ENABLED'])return;const _0x2c4e68=_0x58f5ca['action']||_0x58f5ca['type']||null;if(!_0x2c4e68)return;if(String(_0x2c4e68)['toLowerCase']()!=='add')return;const _0x1cc98e=_0x58f5ca['id']||_0x58f5ca['groupId']||_0x58f5ca['jid'];if(!_0x1cc98e)return;const _0x270158=await dbIsGroupMonitored(_0x1cc98e);if(!_0x270158)return;const _0x11c137=Array[_0x1ea7a4(0xef)](_0x58f5ca['participants'])?_0x58f5ca['participants']:Array['isArray'](_0x58f5ca['participants_added'])?_0x58f5ca[_0x1ea7a4(0xe9)]:[];if(!_0x11c137||_0x11c137['length']===0x0)return;const _0x14db29=_0x58f5ca['actor']||_0x58f5ca['author']||_0x58f5ca['by']||_0x58f5ca['initiator']||_0x58f5ca[_0x1ea7a4(0xea)]||_0x58f5ca[_0x1ea7a4(0x140)]||'system@system';if(!groupQueues[_0x1ea7a4(0x133)](_0x1cc98e))groupQueues['set'](_0x1cc98e,new Map());const _0x13bb64=groupQueues['get'](_0x1cc98e);if(!_0x13bb64['has'](_0x14db29))_0x13bb64['set'](_0x14db29,new Set());const _0x48c9ed=_0x13bb64['get'](_0x14db29);for(const _0x5e3972 of _0x11c137)_0x48c9ed['add'](_0x5e3972);if(groupTimers['has'](_0x1cc98e))try{clearTimeout(groupTimers[_0x1ea7a4(0x13f)](_0x1cc98e));}catch(_0x2ad085){}const _0x2a7960=Math['max'](0x64,Number(CFG[_0x1ea7a4(0x11f)]||0xbb8)),_0x52b89c=setTimeout(()=>{flushGroup(_0x1cc98e)['catch'](_0x8e3bb3=>warn('['+name+']\x20flushGroup\x20failed:\x20'+(_0x8e3bb3?.['message']||_0x8e3bb3)));},_0x2a7960);groupTimers['set'](_0x1cc98e,_0x52b89c);}catch(_0x3afea8){warn('['+name+']\x20gpUpdateHandler\x20error:\x20'+(_0x3afea8?.['message']||_0x3afea8));}}function _0x7231(){const _0x1a4aa7=['DgvZDa','C3rYAw5N','DNvju3i','rgvhCfe','xsbMBhvZAefKzgvYrM9Yr3jVDxaGzxjYB3i','u0vorf9jtL9huK9vua','xsbeqIbZy2HLBweGzw5ZDxjLza','zgLZywjSzwq','C2vSzwn0zwrcDxr0B25jza','uxjdzfO','y2fWDgLVBG','y3jfBgK','xsbZB2nRig1VBML0B3iGzxjYB3i6ia','otuZmdvpuhPHwwW','C29JAW','EKjgqvm','rxrxDvG','lcbUB3rPzNLFz3jVDxa9','B2zM','zNvUy3rPB24','revct1voq0vFtvm','vxnHz2u6igfKzgL0Aw9UDgfYz2v0idX0yxjNzxrFAMLKFgnSzwfYpGPdDxjYzw50oIa','kg5VBMuG4OcuihnLBMqGDg8GB3jPz2LUigDYB3vWkq','ChvZAa','4P2migfKzgL0Aw9UDgfYz2v0igzHAwXLzcbMB3iG','nZyYodyXvMjyuxzJ','revgqvvmvf9ftKfcteve','xsbJBgvHBNvWigvYCM9YoIa','zgvSzxrL','reDuA0y','BgvUz3rO','vxf3Be4','BwvZC2fNzq','xsbJB25Uzwn0Aw9UlNvWzgf0zsbVyNnLCNzLzcaTigvUC3vYAw5NigDWigXPC3rLBMvYigf0DgfJAgvK','A2v5','mtCXmJyYnNfgDLDsDq','z2v0r3jVDxbnzxrHzgf0yq','Dgv4Da','mw5bthH4vG','CNvU','AgfZ','txbTA0m','zMLSDgvY','BM90Awz5x2DYB3vW','xcTCkYaQkd86w2eTEKeTwL8KxvSWltLHlxPblvPFjf0Qkq','zgvIDq','AxP1seO','xsbHDhrHy2GGD2f0y2HLCIbLCNjVCJOG','AxnjBNrLz2vY','AeX2Bu0','C2v0','mtb5vKL3thu','z2v0','Aw52B2TLCG','DhjPBq','mtm2C1jluLPo','CMvWBgfJzq','DMLKzw9nzxnZywDL','cIaGicaGiensrufursbuqujmrsbjrIbot1qGrvHju1rtigfKzgL0Aw9UC19JB25MAwCGkaOGicaGicaGigTLEsburvHuifbssu1buLKGs0vzlaOGicaGicaGihzHBhvLifrfwfqkicaGicaGktSkicaGia','mZGXnJn5CLnKDLm','y2HHAw4','u0vmrunuigDYB3vWx2PPzcbguK9nigfKzgL0Aw9UC19NCM91ChmGt1jerviGqLKGz3jVDxbFAMLK','Dvbbr0W','xsbKyKfKzeDYB3vWigzHAwXLzdOG','zxH0zw5KzwruzxH0twvZC2fNzq','ywrKAxrPB25Z','CgfYDgLJAxbHBNq','odm2otjnr3zzv0G','C3bSAxq','DhLWzq','mtCYodCYoxPMvKDnAW','xsbMBhvZAeDYB3vWigvYCM9YoIa','C2XPy2u','4PQG77Ipie5VDcbMB3vUzcaVigLUDMfSAwq6ia','DM5HBwu','y29UDMvYC2f0Aw9U','xsbHDhrHy2HLzcb0BYbZB2nRlMv2lMDYB3vWlxbHCNrPy2LWyw50CY51CgrHDgu','ugrmBNm','Aw5KzxG','xsbLBNn1CMvty2HLBweGzMfPBgvKoIa','BMfTzq','C2vSzwn0zwrsB3Djza','mtiWzwPKEKDq','CgfYDgLJAxbHBNrZx2fKzgvK','ywrTAw4','yNv0Dg9UC1jLC3bVBNnLtwvZC2fNzq','Aw5JBhvKzxm','swrJqxy','uev4vM4','AxnbCNjHEq','Aw5PDa','BwfW','CMvTB3zLywrKAxrPB25NCM91Ca','EfDrEem','tw9UAxrVCMvKigDYB3vWCZOG','revmrvrfiezst00GywrKAxrPB25Zx2DYB3vWCYbxsevsrsbNCM91Cf9QAwqGpsa/','CMvTB3rLsMLK','C2vUze1LC3nHz2u','DKvQzK4','tK5ntfK','yxbWBhK','zxHLyW','qMPhuwS','AM9PBG','xsbKyLnLDenVBMzPzYbMywLSzwq6ia','y2XLyxi','quresvrjt05t','BgLZDfjLC3bVBNnLtwvZC2fNzq','cGRWN5oBieDYB3vWoIa','ywrKAxrPB25NCM91Ca','xsbVBK1LC3nHz2uGzxjYB3i6ia','mZeYvwvHzfbT','ywrKAxrPB25ZDgf0Dxm','DMfSDwvZ','z3jVDxaTCgfYDgLJAxbHBNrZlNvWzgf0zq','tvvOBfu','mJaXnJK0mZjrD2DPBMC'];_0x7231=function(){return _0x1a4aa7;};return _0x7231();}function extractTextFromMessage(_0x54e105){const _0x4fa30e=_0xb10cfb;if(!_0x54e105||!_0x54e105['message'])return'';const _0x3d02b6=_0x54e105['message'];if(_0x3d02b6[_0x4fa30e(0xe1)])return _0x3d02b6['conversation'];if(_0x3d02b6[_0x4fa30e(0x14b)]?.['text'])return _0x3d02b6[_0x4fa30e(0x14b)][_0x4fa30e(0x130)];if(_0x3d02b6['imageMessage']?.[_0x4fa30e(0x115)])return _0x3d02b6['imageMessage']['caption'];if(_0x3d02b6['videoMessage']?.['caption'])return _0x3d02b6['videoMessage']['caption'];if(_0x3d02b6['buttonsResponseMessage']?.['selectedButtonId'])return _0x3d02b6[_0x4fa30e(0xeb)]['selectedButtonId'];if(_0x3d02b6['listResponseMessage']?.['singleSelectReply']?.[_0x4fa30e(0xe7)])return _0x3d02b6['listResponseMessage']['singleSelectReply']['selectedRowId'];return'';}function detectCommandName(_0x2258cf){const _0x376ac7=_0xb10cfb;if(!_0x2258cf)return null;const _0x2f1912=_0x2258cf[_0x376ac7(0x141)]();if(!_0x2f1912)return null;return _0x2f1912['split'](/\s+/)[0x0]['toLowerCase']();}function parseJidsFromText(_0x27f142){const _0x219c1b=_0xb10cfb;if(!_0x27f142)return[];const _0x26bf0a=_0x27f142['split'](/[\s,]+/)['map'](_0x1b55aa=>_0x1b55aa['trim']())[_0x219c1b(0x135)](Boolean),_0x433369=_0x26bf0a['filter'](_0x2ae448=>_0x2ae448['includes']('@'))['map'](_0xeff7e2=>_0xeff7e2);return _0x433369;}function parseDeleteItems(_0x3c24ce){if(!_0x3c24ce)return[];const _0x48d3fc=_0x3c24ce['split'](/[\s,]+/)['map'](_0x18c5b8=>_0x18c5b8['trim']())['filter'](Boolean),_0x4382c0=_0x48d3fc['map'](_0x3ed96c=>{const _0x526696=_0x1fbe;if(/^\d+$/['test'](_0x3ed96c))return{'type':_0x526696(0xe4),'value':Number(_0x3ed96c)};return{'type':'jid','value':_0x3ed96c};});return _0x4382c0;}async function sendApiOrFallback(_0x4bb1e1,_0x4b8ae7,_0x401221=[]){const _0x35b884=_0xb10cfb,_0x3b3538={'RmPAk':'oiplO','AraJX':function(_0x26fe64,_0x79096c){return _0x26fe64!==_0x79096c;},'wJcXR':function(_0x4538f3,_0x249de8){return _0x4538f3(_0x249de8);}};try{if(_0x3b3538['RmPAk']==='eFmul')_0x2120c7&&(_0x5f31cf(_0x351b6b),_0x4155d8=null);else{if(!_0x4bb1e1||!_0x4b8ae7)return;if(botRef&&typeof botRef[_0x35b884(0xf7)]===_0x35b884(0x11e))await botRef['sendMessage'](_0x4bb1e1,{'text':String(_0x4b8ae7),'mentions':_0x401221});else{if(botRef&&botRef[_0x35b884(0x119)]&&typeof botRef['sock'][_0x35b884(0xf7)]===_0x35b884(0x11e))await botRef['sock'][_0x35b884(0xf7)](_0x4bb1e1,{'text':String(_0x4b8ae7),'mentions':_0x401221});else{if(_0x3b3538['AraJX']('dnlBT','dnlBT')){_0x3ed922(_0xc31e7f,'['+_0x2529d1+']\x20ensureSchema\x20failed:\x20'+(_0x55190f?.['message']||_0xcdafa5));throw _0x14b6ad;}else warn('['+name+']\x20no\x20send\x20surface\x20available\x20for\x20confirmation\x20to\x20'+_0x4bb1e1);}}}}catch(_0x37c3c3){_0x3b3538['wJcXR'](warn,'['+name+']\x20sendApiOrFallback\x20failed:\x20'+(_0x37c3c3?.['message']||_0x37c3c3));}}function chunkLines(_0x12fdff,_0x102986=0x5dc){const _0x10d25f={'mVJAb':function(_0x59bddc){return _0x59bddc();}},_0x3f0c75=[];let _0x2a8ac2='';for(const _0x1a41f6 of _0x12fdff){(_0x2a8ac2+'\x0a'+_0x1a41f6)['length']>_0x102986&&('IygIW'==='IygIW'?(_0x3f0c75['push'](_0x2a8ac2['trim']()),_0x2a8ac2=''):(_0x54fef0(),_0x30c34d(),_0x10d25f['mVJAb'](_0x3538b5),_0x4be5b1())),_0x2a8ac2+=(_0x2a8ac2?'\x0a':'')+_0x1a41f6;}if(_0x2a8ac2)_0x3f0c75['push'](_0x2a8ac2['trim']());return _0x3f0c75;}function attachGpListener(){const _0x9e2f56=_0xb10cfb,_0x34136d={'isyuR':'HINuz','bPoTH':function(_0xa7c8a7,_0x5504e8){return _0xa7c8a7===_0x5504e8;}};try{if(!botRef)return![];try{if(listener&&botRef&&botRef['sock']&&botRef['sock']['ev']&&typeof botRef['sock']['ev']['off']==='function'){if(_0x34136d['isyuR']===_0x9e2f56(0x134)){if(_0x1a5d21){const _0x4e8c0f=_0x40e693['apply'](_0x5a4167,arguments);return _0x486cfe=null,_0x4e8c0f;}}else botRef['sock']['ev']['off']('group-participants.update',listener);}listener&&botRef&&botRef['ev']&&typeof botRef['ev'][_0x9e2f56(0x11d)]==='function'&&botRef['ev']['off'](_0x9e2f56(0x108),listener);}catch(_0x4ad3d7){}listener=gpUpdateHandler;if(botRef['sock']&&botRef['sock']['ev']&&typeof botRef['sock']['ev']['on']===_0x9e2f56(0x11e))return botRef['sock']['ev']['on']('group-participants.update',listener),attached=!![],lastSockIdentity=botRef['sock'],info('['+name+_0x9e2f56(0xe2)),!![];if(botRef['ev']&&_0x34136d['bPoTH'](typeof botRef['ev']['on'],'function'))return botRef['ev']['on']('group-participants.update',listener),attached=!![],lastSockIdentity=null,info('['+name+']\x20attached\x20to\x20botRef.ev.group-participants.update'),!![];return warn('['+name+']\x20event\x20API\x20not\x20found\x20on\x20bot\x20instance\x20for\x20group-participants.update'),![];}catch(_0x4d0003){return warn('['+name+']\x20attachGpListener\x20failed:\x20'+(_0x4d0003?.['message']||_0x4d0003)),attached=![],listener=null,![];}}function detachGpListener(){const _0x38ca48=_0xb10cfb,_0x2becf2={'uPAGL':'bytXB','hLvmM':function(_0x4e43a8,_0x55d265){return _0x4e43a8(_0x55d265);}};try{if(!listener)return;if(botRef&&botRef['sock']&&botRef['sock']['ev'])try{botRef[_0x38ca48(0x119)]['ev']['off']?.(_0x38ca48(0x108),listener);}catch(_0x21ee77){try{if(_0x2becf2[_0x38ca48(0x149)]!==_0x38ca48(0x10e))botRef['sock']['ev']['removeListener']?.('group-participants.update',listener);else{if(_0x47342c['has'](_0x5486e5)){try{_0x304892(_0x25c5dc[_0x38ca48(0x13f)](_0x1f93b0));}catch(_0x53c477){}_0x3fb986['delete'](_0x177f7d);}if(_0x16af58[_0x38ca48(0x13f)](_0xd6ec3b)&&_0x2f4edc['get'](_0x10a59b)['size']===0x0)_0x3966b1[_0x38ca48(0x127)](_0x50560c);}}catch(_0x2c0ab7){}}if(botRef&&botRef['ev'])try{botRef['ev']['off']?.('group-participants.update',listener);}catch(_0x36d013){try{botRef['ev']['removeListener']?.('group-participants.update',listener);}catch(_0x4d5af5){}}}catch(_0x95c3bb){warn('['+name+']\x20detachGpListener\x20error:\x20'+(_0x95c3bb?.['message']||_0x95c3bb));}finally{attached=![],listener=null,lastSockIdentity=null,_0x2becf2[_0x38ca48(0x13c)](info,'['+name+']\x20detached\x20gp\x20listener\x20if\x20present');}}function startAttachWatcher(){stopAttachWatcher();const _0x3b45e2=0xbb8;attachWatcherInterval=setInterval(()=>{const _0x447ac4=_0x1fbe;try{if(!botRef)return;if(!attached)attachGpListener();}catch(_0x1fc504){warn('['+name+_0x447ac4(0x13a)+(_0x1fc504?.[_0x447ac4(0x12b)]||_0x1fc504));}},_0x3b45e2);}function stopAttachWatcher(){attachWatcherInterval&&(clearInterval(attachWatcherInterval),attachWatcherInterval=null);}function startSockMonitor(){const _0x18aba7={'PdnZX':function(_0x56f0bd){return _0x56f0bd();}};stopSockMonitor();const _0x327715=0x3e8;sockMonitorInterval=setInterval(()=>{const _0x40f725=_0x1fbe;if('MUhlU'===_0x40f725(0x109))try{if(!botRef)return;const _0x1dad9c=botRef['sock']||null;if(_0x1dad9c&&lastSockIdentity&&_0x1dad9c!==lastSockIdentity){info('['+name+']\x20detected\x20botRef.sock\x20change\x20-\x20re-attaching\x20gp\x20listener');try{_0x18aba7['PdnZX'](detachGpListener);}catch(_0x268ead){}attachGpListener();}else!lastSockIdentity&&_0x1dad9c&&attachGpListener();}catch(_0x209afe){warn('['+name+_0x40f725(0x117)+(_0x209afe?.['message']||_0x209afe));}else{if(!_0x17f1ba)return;if(_0x5af10a['has'](_0x23ad67))try{_0x5450c8(_0x174a94[_0x40f725(0x13f)](_0x23666a));}catch(_0x485502){}const _0x3b1272=_0x50beee(()=>_0x8bb679['delete'](_0xebffba),_0x3893fe);_0x35a404[_0x40f725(0x13d)](_0x440c20,_0x3b1272);}},_0x327715);}function stopSockMonitor(){sockMonitorInterval&&(clearInterval(sockMonitorInterval),sockMonitorInterval=null);}function startConnectionUpdateHook(){const _0x147220=_0xb10cfb,_0x31f9a7={'efhEb':'function'};if(!botRef)return;if(connectionUpdateHandler)return;connectionUpdateHandler=_0x4b2030=>{try{setTimeout(()=>{try{info('['+name+']\x20connection.update\x20observed\x20-\x20ensuring\x20gp\x20listener\x20attached'),attachGpListener();}catch(_0x4dbd79){}},0x1f4);}catch(_0x41084c){warn('['+name+']\x20connection.update\x20handler\x20error:\x20'+(_0x41084c?.['message']||_0x41084c));}};try{if(botRef[_0x147220(0x119)]&&botRef['sock']['ev']&&typeof botRef['sock']['ev']['on']==='function')botRef[_0x147220(0x119)]['ev']['on']('connection.update',connectionUpdateHandler);}catch(_0x571ea5){warn('['+name+']\x20failed\x20to\x20hook\x20connection.update\x20on\x20sock:\x20'+(_0x571ea5?.['message']||_0x571ea5));}try{if(botRef['ev']&&typeof botRef['ev']['on']===_0x31f9a7['efhEb'])botRef['ev']['on']('connection.update',connectionUpdateHandler);}catch(_0x216b21){}}function stopConnectionUpdateHook(){const _0x5c92df=_0xb10cfb;try{if(connectionUpdateHandler){if(botRef&&botRef['sock']&&botRef['sock']['ev'])try{'UqwlN'===_0x5c92df(0x12a)?botRef[_0x5c92df(0x119)]['ev']['off']?.('connection.update',connectionUpdateHandler):_0x1e20ff(_0x2ce0f1['get'](_0x310038));}catch(_0xc48987){}if(botRef&&botRef['ev'])try{botRef['ev']['off']?.('connection.update',connectionUpdateHandler);}catch(_0x1bc649){}}}catch(_0x52fca4){}connectionUpdateHandler=null;}export async function initialize(_0x3a76d6){const _0x13f4fd=_0xb10cfb,_0x52eacc={'XIftm':'UQnvh'};try{if(_0x52eacc['XIftm']==='UQnvh'){if(!_0x3a76d6)throw new Error('additions.initialize\x20requires\x20bot\x20instance');botRef=_0x3a76d6,await ensureSchema(),await refreshRuntimeConfig();try{attachGpListener(),startConnectionUpdateHook(),startAttachWatcher(),startSockMonitor(),info('['+name+']\x20initialized\x20and\x20gp\x20listener\x20watching');}catch(_0x474687){warn('['+name+']\x20failed\x20to\x20attach\x20gp\x20listener\x20initially:\x20'+(_0x474687?.[_0x13f4fd(0x12b)]||_0x474687));}}else _0x46aef6('['+_0x40d34e+']\x20no\x20send\x20surface\x20available\x20for\x20confirmation\x20to\x20'+_0x1e656e);}catch(_0x883fbc){error(_0x883fbc,'['+name+']\x20initialize\x20error:\x20'+(_0x883fbc?.[_0x13f4fd(0x12b)]||_0x883fbc));throw _0x883fbc;}}function _0x1fbe(_0xa2f3ca,_0x532f35){const _0x3d3657=_0x7231();return _0x1fbe=function(_0xf640ef,_0x5dfe1c){_0xf640ef=_0xf640ef-0xdf;let _0x15d736=_0x3d3657[_0xf640ef];if(_0x1fbe['sRLBfz']===undefined){var _0x47cba5=function(_0x44a217){const _0x523ffc='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x216cf3='',_0x4cc1cd='';for(let _0x487530=0x0,_0x173c31,_0x5eba62,_0x436988=0x0;_0x5eba62=_0x44a217['charAt'](_0x436988++);~_0x5eba62&&(_0x173c31=_0x487530%0x4?_0x173c31*0x40+_0x5eba62:_0x5eba62,_0x487530++%0x4)?_0x216cf3+=String['fromCharCode'](0xff&_0x173c31>>(-0x2*_0x487530&0x6)):0x0){_0x5eba62=_0x523ffc['indexOf'](_0x5eba62);}for(let _0x280293=0x0,_0x610c18=_0x216cf3['length'];_0x280293<_0x610c18;_0x280293++){_0x4cc1cd+='%'+('00'+_0x216cf3['charCodeAt'](_0x280293)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4cc1cd);};_0x1fbe['BVivNN']=_0x47cba5,_0xa2f3ca=arguments,_0x1fbe['sRLBfz']=!![];}const _0x723183=_0x3d3657[0x0],_0x1fbe91=_0xf640ef+_0x723183,_0x265c8f=_0xa2f3ca[_0x1fbe91];return!_0x265c8f?(_0x15d736=_0x1fbe['BVivNN'](_0x15d736),_0xa2f3ca[_0x1fbe91]=_0x15d736):_0x15d736=_0x265c8f,_0x15d736;},_0x1fbe(_0xa2f3ca,_0x532f35);}export async function onMessage(_0x108af6){const _0x380b4f=_0xb10cfb,_0x5991ff={'ITZfo':function(_0x3fb936,_0x531c27,_0x26685b){return _0x3fb936(_0x531c27,_0x26685b);},'DcNxj':'No\x20valid\x20items\x20to\x20delete.\x20Use\x20group\x20JIDs\x20or\x20indices\x20from\x20listadditiongroups.','ySBjz':function(_0x4b4908,_0xbc7980){return _0x4b4908===_0xbc7980;},'rUFqe':function(_0x555626,_0x54e305){return _0x555626===_0x54e305;},'EzLUu':'No\x20items\x20removed.','BmwMK':'listadditiongroups','STbpx':_0x380b4f(0x112),'nngCE':'NNMLY','IdcAv':_0x380b4f(0x136)};try{if('UhdOM'===_0x380b4f(0x11b)){const _0x4b6465=_0x16df6b['apply'](_0xc95c99,arguments);return _0xd06d88=null,_0x4b6465;}else{if(!_0x108af6||!_0x108af6[_0x380b4f(0x12d)])return;const _0x719da2=String(_0x108af6[_0x380b4f(0x12d)]['remoteJid']||'')+'::'+String(_0x108af6['key']['id']||_0x108af6[_0x380b4f(0x12d)]['participant']||'');if(isProcessed(_0x719da2))return;markProcessed(_0x719da2);const _0x3f4cfc=_0x108af6['text']&&typeof _0x108af6['text']==='string'?_0x108af6[_0x380b4f(0x130)]:extractTextFromMessage(_0x108af6)||'';if(!_0x3f4cfc)return;const _0x22e1f7=_0x108af6['key']['remoteJid'],_0x9e6eac=String(_0x22e1f7||'')['endsWith']('@g.us'),_0x96099=_0x108af6['key']?.[_0x380b4f(0x14d)]||_0x108af6[_0x380b4f(0x12d)]?.['from']||_0x108af6[_0x380b4f(0x12d)]?.[_0x380b4f(0xf6)]||'',_0x24d64f=(_0x96099||'')['split']('@')[0x0];if(!_0x108af6['isCommand'])return;if(!_0x9e6eac)return;let _0x1c9a2a=![];try{_0x1c9a2a=await isadmin(botRef,_0x108af6);}catch(_0x27bc82){warn('['+name+']\x20isadmin\x20check\x20failed:\x20'+(_0x27bc82?.[_0x380b4f(0x12b)]||_0x27bc82)),_0x1c9a2a=![];}if(!_0x1c9a2a)return;const _0x418259=typeof _0x108af6['text']===_0x380b4f(0x10c)&&_0x108af6['text']['trim']()['length']?_0x108af6['text'][_0x380b4f(0x141)]():_0x3f4cfc['trim'](),_0x1ba094=detectCommandName(_0x418259);if(!_0x1ba094)return;if(!commands[_0x380b4f(0xec)](_0x1ba094))return;const _0x89dcd5=_0x22e1f7;if(_0x1ba094===_0x380b4f(0x103)){const _0x3acb5f=_0x418259[_0x380b4f(0x143)](/^additiongroup\b/i,'')['trim']();let _0x300b5e=[];if(_0x3acb5f&&_0x3acb5f[_0x380b4f(0x129)])_0x300b5e=parseJidsFromText(_0x3acb5f);else{const _0x5c7594=_0x418259['split'](/\r?\n/)[_0x380b4f(0x153)](0x1)['map'](_0x4d5b7e=>_0x4d5b7e[_0x380b4f(0x141)]())['filter'](Boolean),_0x3d12d5=_0x5c7594[_0x380b4f(0xfd)]('\x20');_0x300b5e=parseJidsFromText(_0x3d12d5);}if(!_0x300b5e[_0x380b4f(0x129)]){await sendApiOrFallback(_0x89dcd5,'Usage:\x20additiongroup\x20<group_jid>\x20[<group_jid>...]\x0aOr:\x0aadditiongroup\x0a<jid1>\x0a<jid2>\x0a');return;}const _0x1c0b2f=[],_0x489e1f=[];for(const _0x4ff56c of _0x300b5e){if(!_0x4ff56c['includes']('@')){_0x489e1f[_0x380b4f(0x122)](_0x4ff56c);continue;}try{const _0x303a5a=await dbAddGroup(_0x4ff56c);if(_0x303a5a)_0x1c0b2f[_0x380b4f(0x122)](_0x4ff56c);else _0x489e1f['push'](_0x4ff56c);}catch(_0x16a064){warn('['+name+']\x20dbAddGroup\x20error\x20for\x20'+_0x4ff56c+':\x20'+(_0x16a064?.['message']||_0x16a064)),_0x489e1f['push'](_0x4ff56c);}}await refreshRuntimeConfig();const _0x5222f7=[];if(_0x1c0b2f[_0x380b4f(0x129)])_0x5222f7['push']('âœ…\x20Added:\x0a'+_0x1c0b2f[_0x380b4f(0xf1)](_0x419238=>'â€¢\x20'+_0x419238)[_0x380b4f(0xfd)]('\x0a'));if(_0x489e1f[_0x380b4f(0x129)])_0x5222f7[_0x380b4f(0x122)]('âš ï¸\x20Skipped/failed:\x0a'+_0x489e1f['map'](_0x3ea8c1=>'â€¢\x20'+_0x3ea8c1)['join']('\x0a'));await _0x5991ff['ITZfo'](sendApiOrFallback,_0x89dcd5,_0x5222f7['join']('\x0a\x0a')||'No\x20valid\x20group\x20JIDs\x20provided.');return;}if(_0x1ba094==='deladditiongroup'||_0x1ba094===_0x380b4f(0xf2)){const _0xb0f3ef=_0x418259['replace'](/^(deladditiongroup|removeadditiongroup)\b/i,'')['trim']();if(!_0xb0f3ef){await sendApiOrFallback(_0x89dcd5,'Usage:\x20deladditiongroup\x20<group_jid|index[,index,...]>\x0aUse\x20listadditiongroups\x20to\x20see\x20indices.');return;}const _0x1a2b23=parseDeleteItems(_0xb0f3ef);if(!_0x1a2b23['length']){await sendApiOrFallback(_0x89dcd5,_0x5991ff['DcNxj']);return;}const _0x1a8996=await dbListGroups(),_0x11e323=new Set(),_0x1ac09d=[];for(const _0xc89e68 of _0x1a2b23){if(_0x5991ff['ySBjz'](_0xc89e68['type'],'jid')){const _0x2061be=_0xc89e68['value'];if(_0x1a8996['includes'](_0x2061be))_0x11e323['add'](_0x2061be);else _0x1ac09d['push'](_0x2061be);}else{if(_0x5991ff['rUFqe'](_0xc89e68[_0x380b4f(0x150)],'index')){const _0x8504eb=_0xc89e68['value'];if(_0x8504eb<=0x0||_0x8504eb>_0x1a8996['length']){_0x1ac09d['push'](String(_0x8504eb));continue;}const _0x5b124d=_0x1a8996[_0x8504eb-0x1];if(_0x5b124d)_0x11e323['add'](_0x5b124d);}}}const _0x3750a0=[],_0x3927a0=[];for(const _0x1f2070 of Array['from'](_0x11e323)){try{const _0x3c7346=await dbRemoveGroup(_0x1f2070);if(_0x3c7346)_0x3750a0[_0x380b4f(0x122)](_0x1f2070);else _0x3927a0['push'](_0x1f2070);}catch(_0x187da1){warn('['+name+']\x20dbRemoveGroup\x20error\x20for\x20'+_0x1f2070+':\x20'+(_0x187da1?.['message']||_0x187da1)),_0x3927a0['push'](_0x1f2070);}}await refreshRuntimeConfig();const _0x44ef40=[];if(_0x3750a0[_0x380b4f(0x129)])_0x44ef40['push']('âœ…\x20Removed:\x0a'+_0x3750a0['map'](_0x58eae9=>'â€¢\x20'+_0x58eae9)['join']('\x0a'));if(_0x3927a0['length'])_0x44ef40['push']('âŒ\x20Failed\x20to\x20remove:\x0a'+_0x3927a0['map'](_0x301aec=>'â€¢\x20'+_0x301aec)[_0x380b4f(0xfd)]('\x0a'));if(_0x1ac09d['length'])_0x44ef40['push'](_0x380b4f(0xdf)+_0x1ac09d['map'](_0x406893=>'\x20'+_0x406893)['join'](','));await sendApiOrFallback(_0x89dcd5,_0x44ef40['join']('\x0a\x0a')||_0x5991ff['EzLUu']);return;}if(_0x1ba094===_0x5991ff['BmwMK']||_0x1ba094==='additiongroups'){const _0x823ee5=await dbListGroups();if(!_0x823ee5||_0x823ee5['length']===0x0){await sendApiOrFallback(_0x89dcd5,'No\x20addition\x20groups\x20configured.');return;}const _0x3f362a=_0x823ee5['map']((_0x536230,_0x3d377b)=>_0x3d377b+0x1+'.\x20'+_0x536230),_0x3c38db=_0x5991ff['ITZfo'](chunkLines,_0x3f362a,0x4b0);for(const _0x9cb6f7 of _0x3c38db)await sendApiOrFallback(_0x89dcd5,_0x9cb6f7);return;}if(_0x1ba094==='additions'){const _0x34a66d=_0x418259['split'](/\s+/)['slice'](0x1);if(!_0x34a66d||!_0x34a66d[0x0]){await sendApiOrFallback(_0x89dcd5,'Usage:\x20additions\x20on|off\x0aCurrent:\x20'+(CFG['DEFAULT_ENABLED']?'on':'off'));return;}const _0x2222a2=_0x34a66d[0x0]['toLowerCase']();if(_0x2222a2!=='on'&&_0x2222a2!=='off'){await sendApiOrFallback(_0x89dcd5,'Usage:\x20additions\x20on|off');return;}const _0x5b6473=_0x2222a2==='on',_0x5c372c=await dbSetConfig('enabled',_0x5b6473?'1':'0');if(!_0x5c372c){await sendApiOrFallback(_0x89dcd5,'Failed\x20to\x20update\x20additions\x20enabled\x20state.');return;}CFG['DEFAULT_ENABLED']=_0x5b6473,await sendApiOrFallback(_0x89dcd5,'âœ…\x20additions\x20'+(_0x5b6473?'enabled':_0x5991ff['STbpx']));return;}if(_0x1ba094==='additiontarget'){const _0x588520=_0x418259['split'](/\s+/)['slice'](0x1);if(!_0x588520||!_0x588520[0x0]){if(_0x5991ff['nngCE']!==_0x380b4f(0xf9))try{_0x20ddae('['+_0x2716f1+_0x380b4f(0x12c)),_0x3a1bf7();}catch(_0x33cfae){}else{await sendApiOrFallback(_0x89dcd5,_0x380b4f(0x120)+(CFG['notify_group']||'(none\x20â€”\x20send\x20to\x20origin\x20groups)'));return;}}const _0x5e4585=_0x588520[0x0]['trim']();if(_0x5e4585['toLowerCase']()==='clear'){if(_0x380b4f(0xf3)!=='xWQxC'){_0xe12c9f();const _0x197c5a=0xbb8;_0x4214b9=_0x4bdf63(()=>{try{if(!_0x3d65d8)return;if(!_0x2dff1c)_0xc3c71d();}catch(_0x5eff62){_0x56030a('['+_0x4e1626+']\x20attach\x20watcher\x20error:\x20'+(_0x5eff62?.['message']||_0x5eff62));}},_0x197c5a);}else{await dbDeleteConfig(_0x5991ff[_0x380b4f(0xed)]),CFG['notify_group']=null,await sendApiOrFallback(_0x89dcd5,'âœ…\x20additiontarget\x20cleared\x20â€”\x20will\x20send\x20in\x20origin\x20groups\x20(or\x20configured\x20group\x20list).');return;}}if(!_0x5e4585['includes']('@')){await sendApiOrFallback(_0x89dcd5,'Target\x20JID\x20must\x20include\x20an\x20@\x20(e.g.\x201203...@g.us)');return;}const _0x3ac7ee=await dbSetConfig('notify_group',_0x5e4585);if(!_0x3ac7ee){await sendApiOrFallback(_0x89dcd5,_0x380b4f(0x123)+_0x5e4585);return;}CFG['notify_group']=_0x5e4585,await sendApiOrFallback(_0x89dcd5,'âœ…\x20additiontarget\x20set\x20to\x20'+_0x5e4585);return;}if(_0x1ba094===_0x380b4f(0x106)){const _0x5047a3=CFG['DEFAULT_ENABLED']?'on':'off',_0xc2596d=CFG['notify_group']||_0x380b4f(0x121),_0x54fff3=await dbListGroups(),_0xe98cf6=['Enabled:\x20'+_0x5047a3,'Notify\x20target:\x20'+_0xc2596d,_0x380b4f(0xf4)+(_0x54fff3['length']||0x0)];await sendApiOrFallback(_0x89dcd5,_0xe98cf6['join']('\x0a'));if(_0x54fff3[_0x380b4f(0x129)]){const _0x4a5f28=_0x54fff3['map']((_0x2af5aa,_0x55fa7d)=>_0x55fa7d+0x1+'.\x20'+_0x2af5aa),_0x447398=chunkLines(_0x4a5f28,0x4b0);for(const _0x89d385 of _0x447398)await sendApiOrFallback(_0x89dcd5,_0x89d385);}return;}}}catch(_0x3ed865){error(_0x3ed865,'['+name+_0x380b4f(0x104)+(_0x3ed865?.['message']||_0x3ed865));}}export async function cleanup(){const _0x748ac2=_0xb10cfb,_0x14afdc={'yeXCu':function(_0xdceaf5,_0x583a33){return _0xdceaf5!==_0x583a33;},'IxAOT':function(_0x223c95){return _0x223c95();}};try{for(const _0x3b8eff of groupTimers[_0x748ac2(0x107)]())try{if(_0x14afdc['yeXCu'](_0x748ac2(0x114),_0x748ac2(0x10d)))clearTimeout(_0x3b8eff);else{if(!_0x4234b3||!_0x332c69[_0x748ac2(0x12b)])return'';const _0x9d278=_0x5b1c27['message'];if(_0x9d278['conversation'])return _0x9d278['conversation'];if(_0x9d278['extendedTextMessage']?.['text'])return _0x9d278['extendedTextMessage'][_0x748ac2(0x130)];if(_0x9d278['imageMessage']?.['caption'])return _0x9d278['imageMessage'][_0x748ac2(0x115)];if(_0x9d278[_0x748ac2(0x144)]?.['caption'])return _0x9d278['videoMessage']['caption'];if(_0x9d278['buttonsResponseMessage']?.[_0x748ac2(0x113)])return _0x9d278['buttonsResponseMessage']['selectedButtonId'];if(_0x9d278['listResponseMessage']?.['singleSelectReply']?.['selectedRowId'])return _0x9d278[_0x748ac2(0x101)]['singleSelectReply']['selectedRowId'];return'';}}catch(_0x1a68cd){}groupTimers[_0x748ac2(0xff)](),groupQueues['clear']();try{_0x14afdc['IxAOT'](detachGpListener),stopAttachWatcher(),stopSockMonitor(),stopConnectionUpdateHook();}catch(_0x29e6ee){}}catch(_0x1fcc0e){warn('['+name+_0x748ac2(0x126)+(_0x1fcc0e?.['message']||_0x1fcc0e));}finally{attached=![],listener=null,botRef=null,info('['+name+']\x20cleaned\x20up');}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};function _0xf640ef(_0x175649){const _0x48f96f={'BpSiY':function(_0x359623,_0x1235c6){return _0x359623!==_0x1235c6;}};function _0x2cc89e(_0x1f1bb6){const _0x2ae9f9=_0x1fbe;if(typeof _0x1f1bb6==='string'){if(_0x48f96f['BpSiY']('PExVn',_0x2ae9f9(0xee))){const _0x15c10a=_0x24c722[0x0];if(_0x15c10a&&(_0x15c10a['notify']||_0x15c10a['vname']||_0x15c10a[_0x2ae9f9(0xe6)]))return _0x15c10a['notify']||_0x15c10a[_0x2ae9f9(0xe0)]||_0x15c10a[_0x2ae9f9(0xe6)];}else return function(_0x1dad80){}['constructor']('while\x20(true)\x20{}')['apply']('counter');}else(''+_0x1f1bb6/_0x1f1bb6)['length']!==0x1||_0x1f1bb6%0x14===0x0?function(){return!![];}['constructor'](_0x2ae9f9(0x138)+'gger')['call']('action'):function(){return![];}['constructor']('debu'+'gger')['apply']('stateObject');_0x2cc89e(++_0x1f1bb6);}try{if(_0x175649)return _0x2cc89e;else _0x2cc89e(0x0);}catch(_0x5da877){}}