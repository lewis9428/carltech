const _0x48f113=_0x460a;(function(_0x5133c1,_0x8b8fbd){const _0x2bf8a0=_0x460a,_0x449adf=_0x5133c1();while(!![]){try{const _0x24b773=parseInt(_0x2bf8a0(0x1c0))/0x1*(parseInt(_0x2bf8a0(0x1c9))/0x2)+parseInt(_0x2bf8a0(0x1e8))/0x3+-parseInt(_0x2bf8a0(0x1c8))/0x4*(-parseInt(_0x2bf8a0(0x1c6))/0x5)+parseInt(_0x2bf8a0(0x1a1))/0x6+parseInt(_0x2bf8a0(0x19e))/0x7+parseInt(_0x2bf8a0(0x1c4))/0x8*(parseInt(_0x2bf8a0(0x1d0))/0x9)+-parseInt(_0x2bf8a0(0x1aa))/0xa;if(_0x24b773===_0x8b8fbd)break;else _0x449adf['push'](_0x449adf['shift']());}catch(_0x2b6d03){_0x449adf['push'](_0x449adf['shift']());}}}(_0xb598,0x4ef3d));const _0x53cdf1=(function(){let _0x33bde6=!![];return function(_0x38edf4,_0x3c6051){const _0x129c13=_0x33bde6?function(){const _0x57d6cc=_0x460a;if('IGShn'==='gdIfj'){if(_0x4cccc3['ev']&&typeof _0x3d6c27['ev']['on']===_0x57d6cc(0x1f0))_0x539d3d['ev']['on']('connection.update',_0x4a2204);}else{if(_0x3c6051){const _0x4c074d=_0x3c6051['apply'](_0x38edf4,arguments);return _0x3c6051=null,_0x4c074d;}}}:function(){};return _0x33bde6=![],_0x129c13;};}());(function(){_0x53cdf1(this,function(){const _0x211dfc=_0x460a,_0x27505c=new RegExp('function\x20*\x5c(\x20*\x5c)'),_0x54d6da=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0x39df5a=_0x8c6b1a('init');!_0x27505c['test'](_0x39df5a+'chain')||!_0x54d6da['test'](_0x39df5a+_0x211dfc(0x1b7))?_0x39df5a('0'):_0x8c6b1a();})();}());import{info,warn,error}from'../utils/logger.js';import{getConfig,hotReloadConfig}from'../utils/config.js';function _0x460a(_0x43e607,_0x16f52e){const _0x35e1c2=_0xb598();return _0x460a=function(_0x8c6b1a,_0x53cdf1){_0x8c6b1a=_0x8c6b1a-0x19d;let _0x2cd1f9=_0x35e1c2[_0x8c6b1a];if(_0x460a['KfrYjt']===undefined){var _0x1a12e2=function(_0x2c105f){const _0x477eae='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x27101b='',_0x54476e='';for(let _0xd65b27=0x0,_0x2f8ada,_0xe1d13b,_0x56b0c2=0x0;_0xe1d13b=_0x2c105f['charAt'](_0x56b0c2++);~_0xe1d13b&&(_0x2f8ada=_0xd65b27%0x4?_0x2f8ada*0x40+_0xe1d13b:_0xe1d13b,_0xd65b27++%0x4)?_0x27101b+=String['fromCharCode'](0xff&_0x2f8ada>>(-0x2*_0xd65b27&0x6)):0x0){_0xe1d13b=_0x477eae['indexOf'](_0xe1d13b);}for(let _0x1fa213=0x0,_0x4c0ce5=_0x27101b['length'];_0x1fa213<_0x4c0ce5;_0x1fa213++){_0x54476e+='%'+('00'+_0x27101b['charCodeAt'](_0x1fa213)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x54476e);};_0x460a['ugfHlD']=_0x1a12e2,_0x43e607=arguments,_0x460a['KfrYjt']=!![];}const _0xb598c4=_0x35e1c2[0x0],_0x460a04=_0x8c6b1a+_0xb598c4,_0x2736b2=_0x43e607[_0x460a04];return!_0x2736b2?(_0x2cd1f9=_0x460a['ugfHlD'](_0x2cd1f9),_0x43e607[_0x460a04]=_0x2cd1f9):_0x2cd1f9=_0x2736b2,_0x2cd1f9;},_0x460a(_0x43e607,_0x16f52e);}import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';export const name='additions';export const version='1.3.0';export const priority=0x5a;export const configKeys=['ADDITIONS'];export const commands=['additiongroup','deladditiongroup','removeadditiongroup','listadditiongroups','additiongroups','additions','additiontarget','additionstatus'];function _0xb598(){const _0x51145d=['C3bSAxq','revgqvvmvf9ftKfcteve','vwPdvue','BgvUz3rO','revmrvrfiezst00GywrKAxrPB25Zx2DYB3vWCYbxsevsrsbNCM91Cf9QAwqGpsa/','tw9UAxrVCMvKigDYB3vWCZOG','xsbJB25Uzwn0Aw9UlNvWzgf0zsbVyNnLCNzLzcaTigvUC3vYAw5NigDWigXPC3rLBMvYigf0DgfJAgvK','A2v5CW','z3jVDxbFAMLK','D2HPBguGkhrYDwuPihT9','4PYfigfKzgL0Aw9UCYa','vxnHz2u6igfKzgL0Aw9Uz3jVDxaGpgDYB3vWx2PPzd4GwZXNCM91Cf9QAwq+lI4UxqPpCJOkywrKAxrPB25NCM91CaO8AMLKmt4kpgPPzdi+cG','xsbKzxrHy2HLzcbNCcbSAxn0zw5LCIbPzIbWCMvZzw50','C3vIAMvJDa','vxnHz2u6igfKzgL0Aw9UCYbVBNXVzMy','xsbOB3rszwXVywrdB25MAwCGyxbWBgLLzcaOy2HHBMDLzcbRzxLZoIa','EKTkrMm','4P2migfKzgL0Aw9UDgfYz2v0igzHAwXLzcbMB3iG','zNjVBq','ywXS','kg5VBMuG4OcuihnLBMqGDg8GB3jPz2LUigDYB3vWkq','igfKzgvKoGO','B2zM','mti0nde4nfLiyvrQBq','C2XPy2u','quresvrjt05t','BM90Awz5x2DYB3vW','su5trvjuieLove8GywrKAxrPB25Zx2nVBMzPzYaOA2v5lcb2ywX1zsKGvKfmvuvticG/lca/ksbptIbdt05gteLdvcHRzxKPierpifvqrefursbtrvqGDMfSDwuGpsbLEgnSDwrLzc52ywX1ztS','xsbKyKfKzeDYB3vWigzHAwXLzdOG','BwvZC2fNzq','z0XjA3y','zNvUy3rPB24','xsbPBML0AwfSAxPLzcbHBMqGz3aGBgLZDgvUzxiGD2f0y2HPBMC','yNv0Dg9UC1jLC3bVBNnLtwvZC2fNzq','mJKWnZeWsu1UwwPp','vffVDey','B210Bu0','mJaWmdG4Au5bwuvH','CNvU','y0fpzfe','ANDosfK','rufjBhu','xsbVBK1LC3nHz2uGzxjYB3i6ia','Aw5KzxG','BwfW','we9Vq1K','ody4nJeWmg9erM5MvG','xsbZzw5KqxbPt3jgywXSyMfJAYbMywLSzwq6ia','DhjPBq','y2XLyxi','AgfZ','rw5HyMXLzdOG','C29JAW','C2vSzwn0zwrsB3Djza','zvvXuwu','DMfSDwu','A2v5','ChvZAa','AxnbCNjHEq','Aw5WDxq','z2DLCG','AM9PBG','y29UC3rYDwn0B3i','z2v0','xsbJBgvHBNvWigvYCM9YoIa','xsbtzw50igfKzgL0Aw9UCYbZDw1Tyxj5igzVCIbNCM91Cca','z3jVDxaTCgfYDgLJAxbHBNrZlNvWzgf0zq','zgvIDq','nJC0ndrmthnHtNe','y29UBMvJDgLVBI51CgrHDgu','u0vorf9jtL9huK9vuf9cwv9eruzbvuXu','C1zxExO','otG5nMLAsuLiBG','C3rHDgvpyMPLy3q','mJeYntuWCev5zwvQ','zxHLyW','ofzyCKTusW','oe9ZBe1zBG','yxbWBhK','xsbUBYbZzw5Kihn1CMzHy2uGDg8GzgvSAxzLCIbHzgrPDgLVBNmGC3vTBwfYEq','BMfTzq','C2LUz2XLu2vSzwn0uMvWBhK','CMvTB3zLtgLZDgvUzxi','Aw52B2TLCG','mJuYovrzvMHnqG'];_0xb598=function(){return _0x51145d;};return _0xb598();}let botRef=null,attached=![],listener=null;const groupQueues=new Map(),groupTimers=new Map();let CFG={'DEFAULT_ENABLED':!![],'DEBOUNCE_MS':0xbb8,'SEND_IN_GROUP_BY_DEFAULT':!![],'notify_group':null};const DEDUPE_TTL_MS=0x1e*0x3e8,processedMessageKeys=new Map();function markProcessed(_0x46d62b){const _0x1a942f=_0x460a;if(!_0x46d62b)return;if(processedMessageKeys[_0x1a942f(0x1ae)](_0x46d62b))try{clearTimeout(processedMessageKeys['get'](_0x46d62b));}catch(_0x633747){}const _0x125a2e=setTimeout(()=>processedMessageKeys['delete'](_0x46d62b),DEDUPE_TTL_MS);processedMessageKeys['set'](_0x46d62b,_0x125a2e);}function isProcessed(_0x2117a8){return _0x2117a8&&processedMessageKeys['has'](_0x2117a8);}let attachWatcherInterval=null,sockMonitorInterval=null,lastSockIdentity=null,connectionUpdateHandler=null;async function ensureSchema(){const _0x447c55=_0x460a;try{await db[_0x447c55(0x1c7)]('\x0a\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20additions_config\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20key\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20value\x20TEXT\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20'),await db['exec']('\x0a\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20additions_groups\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20group_jid\x20TEXT\x20PRIMARY\x20KEY\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20'),info('['+name+']\x20DB\x20schema\x20ensured');}catch(_0x2a7674){error(_0x2a7674,'['+name+']\x20ensureSchema\x20failed:\x20'+(_0x2a7674?.[_0x447c55(0x1ee)]||_0x2a7674));throw _0x2a7674;}}async function dbSetConfig(_0x3e4688,_0x3d264a){const _0xc5a82e=_0x460a;try{return await db[_0xc5a82e(0x1a2)](_0xc5a82e(0x1ec),[_0x3e4688,String(_0x3d264a)]),!![];}catch(_0x503531){return warn('['+name+']\x20dbSetConfig\x20failed:\x20'+(_0x503531?.['message']||_0x503531)),![];}}async function dbGetConfig(_0x505842){try{const _0x28ce63=await db['get']('SELECT\x20value\x20FROM\x20additions_config\x20WHERE\x20key\x20=\x20?\x20LIMIT\x201',[_0x505842]);return _0x28ce63?_0x28ce63['value']:null;}catch(_0x5bd9ac){return warn('['+name+']\x20dbGetConfig\x20failed:\x20'+(_0x5bd9ac?.['message']||_0x5bd9ac)),null;}}(function(){let _0x189e1e;try{const _0x2f4835=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x189e1e=_0x2f4835();}catch(_0x475836){_0x189e1e=window;}_0x189e1e['setInterval'](_0x8c6b1a,0x61a80);}());async function dbDeleteConfig(_0x2b59a4){try{return await db['run']('DELETE\x20FROM\x20additions_config\x20WHERE\x20key\x20=\x20?',[_0x2b59a4]),!![];}catch(_0x240104){return warn('['+name+']\x20dbDeleteConfig\x20failed:\x20'+(_0x240104?.['message']||_0x240104)),![];}}async function dbAddGroup(_0x3927d9){const _0x4acc30=_0x460a;try{return await db['run']('INSERT\x20INTO\x20additions_groups\x20(group_jid)\x20VALUES\x20(?)\x20ON\x20CONFLICT(group_jid)\x20DO\x20NOTHING;',[_0x3927d9]),!![];}catch(_0x1f77c4){return warn('['+name+_0x4acc30(0x1ed)+(_0x1f77c4?.['message']||_0x1f77c4)),![];}}async function dbRemoveGroup(_0x1606ce){const _0x57b542=_0x460a;try{const _0x324f63=await db[_0x57b542(0x1a2)](_0x57b542(0x1d5),[_0x1606ce]);return!!_0x324f63?.['changes'];}catch(_0x161e52){return warn('['+name+']\x20dbRemoveGroup\x20failed:\x20'+(_0x161e52?.[_0x57b542(0x1ee)]||_0x161e52)),![];}}async function dbListGroups(){const _0x4ca50d=_0x460a;try{const _0x41fe09=await db[_0x4ca50d(0x1e4)]('SELECT\x20group_jid\x20FROM\x20additions_groups\x20ORDER\x20BY\x20group_jid');return(_0x41fe09||[])[_0x4ca50d(0x1a8)](_0x266a00=>_0x266a00[_0x4ca50d(0x1d9)]);}catch(_0x37ac70){if('PXTNb'!=='PXTNb')_0x249c25('['+_0x256c12+']\x20cleanup\x20error:\x20'+(_0x117659?.['message']||_0x5f238e));else return warn('['+name+']\x20dbListGroups\x20failed:\x20'+(_0x37ac70?.[_0x4ca50d(0x1ee)]||_0x37ac70)),[];}}async function dbIsGroupMonitored(_0x56bf9a){const _0x4dce4b=_0x460a;try{const _0x5c1604=await db[_0x4dce4b(0x1bb)]('SELECT\x20group_jid\x20FROM\x20additions_groups\x20WHERE\x20group_jid\x20=\x20?\x20LIMIT\x201',[_0x56bf9a]);return!!_0x5c1604;}catch(_0x1a101e){return warn('['+name+']\x20dbIsGroupMonitored\x20failed:\x20'+(_0x1a101e?.['message']||_0x1a101e)),![];}}async function refreshRuntimeConfig(){const _0x39bfed=_0x460a,_0x4c4a23={'XaYcw':function(_0x1177ad,_0x4243fa){return _0x1177ad===_0x4243fa;},'oVxMv':function(_0x3edbd5,_0x283842){return _0x3edbd5!==_0x283842;}};try{const _0x10d2f5=getConfig()||{},_0x57aaf9=_0x10d2f5[_0x39bfed(0x1ea)]&&_0x4c4a23['XaYcw'](typeof _0x10d2f5['ADDITIONS'],'object')?_0x10d2f5[_0x39bfed(0x1ea)]:{};CFG['DEFAULT_ENABLED']=_0x57aaf9['DEFAULT_ENABLED']!==undefined?!!_0x57aaf9['DEFAULT_ENABLED']:!![],CFG['DEBOUNCE_MS']=Number['isInteger'](_0x57aaf9['DEBOUNCE_MS'])?_0x57aaf9['DEBOUNCE_MS']:0xbb8,CFG[_0x39bfed(0x1c2)]=_0x4c4a23['oVxMv'](_0x57aaf9['SEND_IN_GROUP'],undefined)?!!_0x57aaf9['SEND_IN_GROUP']:!![];const _0x5386da=await dbGetConfig('enabled');if(_0x5386da!==null)CFG[_0x39bfed(0x1d2)]=_0x5386da==='1'||_0x5386da==='true';const _0x3c1c91=await dbGetConfig('debounce_ms');if(_0x3c1c91!==null&&!Number['isNaN'](Number(_0x3c1c91)))CFG['DEBOUNCE_MS']=Number(_0x3c1c91);const _0x2ccab8=await dbGetConfig('notify_group');CFG['notify_group']=_0x2ccab8||null,info('['+name+']\x20runtime\x20config\x20refreshed\x20(enabled='+CFG[_0x39bfed(0x1d2)]+',\x20debounce_ms='+CFG['DEBOUNCE_MS']+',\x20notify_group='+CFG[_0x39bfed(0x1eb)]+')');}catch(_0x1ead2e){warn('['+name+']\x20refreshRuntimeConfig\x20failed:\x20'+(_0x1ead2e?.['message']||_0x1ead2e));}}try{hotReloadConfig&&hotReloadConfig(_0x5dfb3e=>{const _0x122aba=_0x460a;try{refreshRuntimeConfig(),info('['+name+_0x122aba(0x1e0)+(_0x5dfb3e||[])['join'](',')+')');}catch(_0x348734){warn('['+name+']\x20hotReloadConfig\x20handler\x20error:\x20'+(_0x348734?.['message']||_0x348734));}});}catch(_0x22056a){warn('['+name+']\x20hotReloadConfig\x20registration\x20failed:\x20'+(_0x22056a?.[_0x48f113(0x1ee)]||_0x22056a));}async function resolveDisplayName(_0x37b297){const _0xb282e=_0x48f113,_0x4bd492={'oMUMv':function(_0x1b5592,_0x388f83){return _0x1b5592||_0x388f83;},'DjysV':function(_0x4e2d92,_0x2eb6e9){return _0x4e2d92===_0x2eb6e9;}};try{if(_0x4bd492['oMUMv'](!botRef,!_0x37b297))return _0x37b297?.['split']?.('@')?.[0x0]??_0x37b297;try{if(_0x4bd492['DjysV'](typeof botRef['onWhatsApp'],'function')){const _0x4ac931=await botRef['onWhatsApp'](_0x37b297);if(Array['isArray'](_0x4ac931)&&_0x4ac931['length']>0x0){const _0x3c2817=_0x4ac931[0x0];if(_0x3c2817&&(_0x3c2817['notify']||_0x3c2817['vname']||_0x3c2817[_0xb282e(0x1cc)]))return _0x3c2817['notify']||_0x3c2817['vname']||_0x3c2817[_0xb282e(0x1cc)];}}if(botRef['sock']&&typeof botRef['sock']['onWhatsApp']==='function'){const _0x1414d4=await botRef[_0xb282e(0x1b0)]['onWhatsApp'](_0x37b297);if(Array[_0xb282e(0x1b6)](_0x1414d4)&&_0x1414d4['length']>0x0){const _0x48c78e=_0x1414d4[0x0];if(_0x48c78e&&(_0x48c78e['notify']||_0x48c78e['vname']||_0x48c78e[_0xb282e(0x1cc)]))return _0x48c78e['notify']||_0x48c78e['vname']||_0x48c78e['name'];}}}catch(_0xff82a8){}const _0x5883ac=String(_0x37b297)['split'](':')['pop']()['split']('@')[0x0];return _0x5883ac||_0x37b297;}catch(_0x464b35){return _0x37b297?.['split']?.('@')?.[0x0]??_0x37b297;}}async function getGroupTitle(_0x11666f){const _0x124a07=_0x48f113,_0x5ba8f5={'BSBjk':function(_0x4e40bc,_0x41c104){return _0x4e40bc!==_0x41c104;}};try{if(_0x5ba8f5['BSBjk']('BIAAU','BIAAU')){const _0x1d4b5f=_0x1ba4cc['apply'](_0x334f91,arguments);return _0x48d5d5=null,_0x1d4b5f;}else{if(!botRef)return _0x11666f;if(botRef['sock']&&typeof botRef['sock']['groupMetadata']==='function'){if(_0x124a07(0x1a0)!=='ZBTwJ'){const _0x309a3f=await botRef[_0x124a07(0x1b0)]['groupMetadata'](_0x11666f)['catch'](()=>null);if(_0x309a3f&&_0x309a3f['subject'])return _0x309a3f[_0x124a07(0x1de)];}else return _0x229533['ev']['on']('group-participants.update',_0x128891),_0x32f21f=!![],_0x576a77=null,_0x36601d('['+_0x3c535e+']\x20attached\x20to\x20botRef.ev.group-participants.update'),!![];}if(typeof botRef['getGroupMetadata']==='function'){const _0x3752c5=await botRef['getGroupMetadata'](_0x11666f)['catch'](()=>null);if(_0x3752c5&&_0x3752c5['subject'])return _0x3752c5['subject'];}return _0x11666f;}}catch(_0x241c4b){if('XOoCY'!==_0x124a07(0x1a9))_0x581f8b('['+_0x1778eb+']\x20isadmin\x20check\x20failed:\x20'+(_0x22ff36?.['message']||_0x3f35d4)),_0x273d77=![];else return _0x11666f;}}async function sendSummary(_0x2d05d7,_0x5c4cac,_0x48ac44,_0x30290d){const _0x46d2c4=_0x48f113;try{if(!botRef)return;const _0x5828ec=await resolveDisplayName(_0x48ac44),_0x4beef1=[],_0x26493a=[];for(const _0x5ab77b of _0x30290d){const _0x27fa99=await resolveDisplayName(_0x5ab77b);_0x4beef1['push'](_0x5ab77b),_0x26493a['push']('\x20\x20@'+String(_0x27fa99)['replace'](/\n/g,'\x20'));}if(!_0x4beef1['includes'](_0x48ac44))_0x4beef1['unshift'](_0x48ac44);const _0x5a0351=await getGroupTitle(_0x5c4cac),_0x3a61c5='ðŸ‘¥\x20@'+String(_0x5828ec)['replace'](/\n/g,'\x20')+_0x46d2c4(0x1e6),_0x7b358c=_0x26493a['join']('\x0a'),_0x17ffa4='\x0a\x0aðŸ“›\x20Group:\x20'+_0x5a0351+'\x20('+_0x5c4cac+')',_0xd7d19c=_0x3a61c5+_0x7b358c+_0x17ffa4,_0x3cd2fa=CFG['notify_group']||_0x5c4cac;if(botRef&&typeof botRef['sendMessage']==='function')await botRef['sendMessage'](_0x3cd2fa,{'text':_0xd7d19c,'mentions':_0x4beef1});else botRef&&botRef['sock']&&typeof botRef['sock']['sendMessage']==='function'?await botRef['sock']['sendMessage'](_0x3cd2fa,{'text':_0xd7d19c,'mentions':_0x4beef1}):warn('['+name+_0x46d2c4(0x1cb));info('['+name+_0x46d2c4(0x1bd)+_0x5c4cac+'\x20->\x20target\x20'+_0x3cd2fa);}catch(_0x5b7833){warn('['+name+']\x20sendSummary\x20failed:\x20'+(_0x5b7833?.['message']||_0x5b7833));}}async function flushAdderForGroup(_0x10647b,_0x11d052){const _0x18bf9d=_0x48f113,_0x3df55f={'HYYEI':function(_0x53a825,_0x45ddf3,_0xc14cbe){return _0x53a825(_0x45ddf3,_0xc14cbe);}};try{if(!botRef)return;const _0x5869be=groupQueues['get'](_0x10647b);if(!_0x5869be)return;const _0x4a128e=_0x5869be['get'](_0x11d052);if(!_0x4a128e||_0x4a128e['size']===0x0){_0x5869be['delete'](_0x11d052);if(_0x5869be['size']===0x0)groupQueues['delete'](_0x10647b);return;}const _0x1807fc=Array['from'](_0x4a128e);await sendSummary(CFG[_0x18bf9d(0x1eb)]||_0x10647b,_0x10647b,_0x11d052,_0x1807fc);}catch(_0x2f1445){_0x3df55f['HYYEI'](error,_0x2f1445,'['+name+']\x20flushAdderForGroup\x20error');}finally{const _0xf0adc1=groupQueues[_0x18bf9d(0x1bb)](_0x10647b);if(_0xf0adc1){_0xf0adc1['delete'](_0x11d052);if(_0xf0adc1['size']===0x0)groupQueues['delete'](_0x10647b);}}}async function flushGroup(_0x234d3b){const _0x296ed1=_0x48f113,_0xadf13f={'eroNj':_0x296ed1(0x1b8)};try{const _0x40f154=groupQueues['get'](_0x234d3b);if(!_0x40f154)return;const _0xaba567=Array['from'](_0x40f154[_0x296ed1(0x1d8)]());for(const _0x59f212 of _0xaba567){await flushAdderForGroup(_0x234d3b,_0x59f212);}}catch(_0x42c017){error(_0x42c017,'['+name+']\x20flushGroup\x20error:\x20'+(_0x42c017?.[_0x296ed1(0x1ee)]||_0x42c017));}finally{if(groupTimers['has'](_0x234d3b)){if('VwDOA'===_0x296ed1(0x1a3))(function(){return![];}['constructor']('debu'+seZydz['eroNj'])['apply'](_0x296ed1(0x1c5)));else{try{clearTimeout(groupTimers['get'](_0x234d3b));}catch(_0x1f64aa){}groupTimers['delete'](_0x234d3b);}}if(groupQueues[_0x296ed1(0x1bb)](_0x234d3b)&&groupQueues['get'](_0x234d3b)['size']===0x0)groupQueues['delete'](_0x234d3b);}}async function gpUpdateHandler(_0x4ec47a){const _0x2bb046=_0x48f113;try{if(!_0x4ec47a)return;if(!CFG['DEFAULT_ENABLED'])return;const _0x295102=_0x4ec47a['action']||_0x4ec47a['type']||null;if(!_0x295102)return;if(String(_0x295102)['toLowerCase']()!=='add')return;const _0x425b8e=_0x4ec47a['id']||_0x4ec47a['groupId']||_0x4ec47a['jid'];if(!_0x425b8e)return;const _0x33849b=await dbIsGroupMonitored(_0x425b8e);if(!_0x33849b)return;const _0x3009b0=Array['isArray'](_0x4ec47a['participants'])?_0x4ec47a['participants']:Array[_0x2bb046(0x1b6)](_0x4ec47a['participants_added'])?_0x4ec47a['participants_added']:[];if(!_0x3009b0||_0x3009b0['length']===0x0)return;const _0x3e9826=_0x4ec47a['actor']||_0x4ec47a['author']||_0x4ec47a['by']||_0x4ec47a['initiator']||_0x4ec47a['admin']||_0x4ec47a[_0x2bb046(0x1cf)]||'system@system';if(!groupQueues['has'](_0x425b8e))groupQueues['set'](_0x425b8e,new Map());const _0x7b077b=groupQueues['get'](_0x425b8e);if(!_0x7b077b['has'](_0x3e9826))_0x7b077b['set'](_0x3e9826,new Set());const _0x327b8c=_0x7b077b['get'](_0x3e9826);for(const _0x4e639e of _0x3009b0)_0x327b8c['add'](_0x4e639e);if(groupTimers['has'](_0x425b8e))try{clearTimeout(groupTimers['get'](_0x425b8e));}catch(_0xddbba3){}const _0x14f7af=Math['max'](0x64,Number(CFG['DEBOUNCE_MS']||0xbb8)),_0x5a2a34=setTimeout(()=>{flushGroup(_0x425b8e)['catch'](_0x25a986=>warn('['+name+']\x20flushGroup\x20failed:\x20'+(_0x25a986?.['message']||_0x25a986)));},_0x14f7af);groupTimers['set'](_0x425b8e,_0x5a2a34);}catch(_0x1803d3){warn('['+name+']\x20gpUpdateHandler\x20error:\x20'+(_0x1803d3?.[_0x2bb046(0x1ee)]||_0x1803d3));}}function extractTextFromMessage(_0x15e074){const _0x11dc69=_0x48f113;if(!_0x15e074||!_0x15e074['message'])return'';const _0xf228e2=_0x15e074[_0x11dc69(0x1ee)];if(_0xf228e2['conversation'])return _0xf228e2['conversation'];if(_0xf228e2['extendedTextMessage']?.['text'])return _0xf228e2['extendedTextMessage']['text'];if(_0xf228e2['imageMessage']?.['caption'])return _0xf228e2['imageMessage']['caption'];if(_0xf228e2['videoMessage']?.['caption'])return _0xf228e2['videoMessage']['caption'];if(_0xf228e2[_0x11dc69(0x19d)]?.['selectedButtonId'])return _0xf228e2['buttonsResponseMessage']['selectedButtonId'];if(_0xf228e2['listResponseMessage']?.[_0x11dc69(0x1cd)]?.[_0x11dc69(0x1b1)])return _0xf228e2['listResponseMessage']['singleSelectReply']['selectedRowId'];return'';}function detectCommandName(_0x47cfde){if(!_0x47cfde)return null;const _0x1f7123=_0x47cfde['trim']();if(!_0x1f7123)return null;return _0x1f7123['split'](/\s+/)[0x0]['toLowerCase']();}function parseJidsFromText(_0x272a34){if(!_0x272a34)return[];const _0x5ebbe6=_0x272a34['split'](/[\s,]+/)['map'](_0x1d24ac=>_0x1d24ac['trim']())['filter'](Boolean),_0x23287b=_0x5ebbe6['filter'](_0xef82d5=>_0xef82d5['includes']('@'))['map'](_0x5e05e3=>_0x5e05e3);return _0x23287b;}function parseDeleteItems(_0x40414a){const _0x8c5188=_0x48f113;if(!_0x40414a)return[];const _0x5194f7=_0x40414a['split'](/[\s,]+/)[_0x8c5188(0x1a8)](_0x1aeaad=>_0x1aeaad['trim']())['filter'](Boolean),_0x59e8f5=_0x5194f7[_0x8c5188(0x1a8)](_0x28ca44=>{if(/^\d+$/['test'](_0x28ca44))return{'type':'index','value':Number(_0x28ca44)};return{'type':'jid','value':_0x28ca44};});return _0x59e8f5;}async function sendApiOrFallback(_0xf71c1a,_0x26dbf3,_0x20203e=[]){const _0x4fd9db=_0x48f113,_0xf3d2a3={'qVUcU':function(_0x11d00b){return _0x11d00b();},'XyOWW':function(_0x3917ea,_0x19eab4){return _0x3917ea(_0x19eab4);}};try{if(!_0xf71c1a||!_0x26dbf3)return;if(botRef&&typeof botRef['sendMessage']==='function')await botRef['sendMessage'](_0xf71c1a,{'text':String(_0x26dbf3),'mentions':_0x20203e});else{if(botRef&&botRef['sock']&&typeof botRef['sock']['sendMessage']==='function'){if(_0x4fd9db(0x1ef)!==_0x4fd9db(0x1a4))await botRef['sock']['sendMessage'](_0xf71c1a,{'text':String(_0x26dbf3),'mentions':_0x20203e});else{if(!_0x1a693f)return[];const _0x4bc143=_0x53f809['split'](/[\s,]+/)['map'](_0x5ffa30=>_0x5ffa30['trim']())['filter'](_0x163227),_0x4829e6=_0x4bc143['map'](_0x4ddcb5=>{const _0x23be37=_0x4fd9db;if(/^\d+$/['test'](_0x4ddcb5))return{'type':_0x23be37(0x1a7),'value':_0x557632(_0x4ddcb5)};return{'type':'jid','value':_0x4ddcb5};});return _0x4829e6;}}else _0xf3d2a3['XyOWW'](warn,'['+name+']\x20no\x20send\x20surface\x20available\x20for\x20confirmation\x20to\x20'+_0xf71c1a);}}catch(_0xf541bd){_0x4fd9db(0x1a5)!=='EAIlu'?DQnVut['qVUcU'](_0x6e79f8):warn('['+name+_0x4fd9db(0x1ab)+(_0xf541bd?.['message']||_0xf541bd));}}function chunkLines(_0x57fee5,_0x105de8=0x5dc){const _0x300fa0=_0x48f113,_0x4cff32=[];let _0x50d351='';for(const _0x353cbb of _0x57fee5){(_0x50d351+'\x0a'+_0x353cbb)[_0x300fa0(0x1d4)]>_0x105de8&&(_0x4cff32[_0x300fa0(0x1b5)](_0x50d351['trim']()),_0x50d351=''),_0x50d351+=(_0x50d351?'\x0a':'')+_0x353cbb;}if(_0x50d351)_0x4cff32['push'](_0x50d351['trim']());return _0x4cff32;}function attachGpListener(){const _0xe03162=_0x48f113,_0x18d706={'dfnJq':'function'};try{if(!botRef)return![];try{listener&&botRef&&botRef['sock']&&botRef[_0xe03162(0x1b0)]['ev']&&typeof botRef[_0xe03162(0x1b0)]['ev']['off']==='function'&&botRef['sock']['ev']['off']('group-participants.update',listener),listener&&botRef&&botRef['ev']&&typeof botRef['ev']['off']===_0x18d706['dfnJq']&&botRef['ev']['off']('group-participants.update',listener);}catch(_0x140d08){}listener=gpUpdateHandler;if(botRef['sock']&&botRef['sock']['ev']&&typeof botRef['sock']['ev']['on']===_0xe03162(0x1f0))return botRef['sock']['ev']['on'](_0xe03162(0x1be),listener),attached=!![],lastSockIdentity=botRef['sock'],info('['+name+']\x20attached\x20to\x20sock.ev.group-participants.update'),!![];if(botRef['ev']&&typeof botRef['ev']['on']===_0xe03162(0x1f0))return botRef['ev']['on']('group-participants.update',listener),attached=!![],lastSockIdentity=null,info('['+name+']\x20attached\x20to\x20botRef.ev.group-participants.update'),!![];return warn('['+name+']\x20event\x20API\x20not\x20found\x20on\x20bot\x20instance\x20for\x20group-participants.update'),![];}catch(_0x4f7ee1){if('elJcB'!=='xMsmJ')return warn('['+name+']\x20attachGpListener\x20failed:\x20'+(_0x4f7ee1?.[_0xe03162(0x1ee)]||_0x4f7ee1)),attached=![],listener=null,![];else _0x56ff03('['+_0x65e849+']\x20refreshRuntimeConfig\x20failed:\x20'+(_0x264700?.['message']||_0xccfec4));}}function detachGpListener(){const _0x3d0078=_0x48f113;try{if(!listener)return;if(botRef&&botRef['sock']&&botRef['sock']['ev'])try{botRef['sock']['ev']['off']?.('group-participants.update',listener);}catch(_0x317d2f){try{botRef['sock']['ev']['removeListener']?.('group-participants.update',listener);}catch(_0x36fffb){}}if(botRef&&botRef['ev'])try{botRef['ev']['off']?.('group-participants.update',listener);}catch(_0x4554a3){try{botRef['ev']['removeListener']?.('group-participants.update',listener);}catch(_0x31476a){}}}catch(_0x43d527){warn('['+name+']\x20detachGpListener\x20error:\x20'+(_0x43d527?.['message']||_0x43d527));}finally{attached=![],listener=null,lastSockIdentity=null,info('['+name+_0x3d0078(0x1dd));}}function startAttachWatcher(){const _0x23fb7c={'RKwoR':function(_0x71104b,_0x36ab6a,_0x2b0233){return _0x71104b(_0x36ab6a,_0x2b0233);}};stopAttachWatcher();const _0x559f32=0xbb8;attachWatcherInterval=_0x23fb7c['RKwoR'](setInterval,()=>{try{if(!botRef)return;if(!attached)attachGpListener();}catch(_0x4178c9){warn('['+name+']\x20attach\x20watcher\x20error:\x20'+(_0x4178c9?.['message']||_0x4178c9));}},_0x559f32);}function stopAttachWatcher(){attachWatcherInterval&&(clearInterval(attachWatcherInterval),attachWatcherInterval=null);}function startSockMonitor(){const _0xa1faf7={'bodmR':function(_0x2ea83d){return _0x2ea83d();},'lkxDS':function(_0x15a13f,_0x42ccad){return _0x15a13f&&_0x42ccad;}};_0xa1faf7['bodmR'](stopSockMonitor);const _0x5af173=0x3e8;sockMonitorInterval=setInterval(()=>{try{if(!botRef)return;const _0x680453=botRef['sock']||null;if(_0x680453&&lastSockIdentity&&_0x680453!==lastSockIdentity){info('['+name+']\x20detected\x20botRef.sock\x20change\x20-\x20re-attaching\x20gp\x20listener');try{detachGpListener();}catch(_0x15bb28){}_0xa1faf7['bodmR'](attachGpListener);}else _0xa1faf7['lkxDS'](!lastSockIdentity,_0x680453)&&attachGpListener();}catch(_0x2858a2){warn('['+name+']\x20sock\x20monitor\x20error:\x20'+(_0x2858a2?.['message']||_0x2858a2));}},_0x5af173);}function stopSockMonitor(){sockMonitorInterval&&('JJddD'==='JJddD'?(clearInterval(sockMonitorInterval),sockMonitorInterval=null):_0x3a0387('['+_0x1d56bb+']\x20hotReloadConfig\x20handler\x20error:\x20'+(_0x554813?.['message']||_0x5e1e97)));}function startConnectionUpdateHook(){const _0x37fcc1=_0x48f113;if(!botRef)return;if(connectionUpdateHandler)return;connectionUpdateHandler=_0x4e6e64=>{try{setTimeout(()=>{const _0x26a688=_0x460a;try{info('['+name+_0x26a688(0x1d7)),attachGpListener();}catch(_0x41c877){}},0x1f4);}catch(_0x20288e){warn('['+name+']\x20connection.update\x20handler\x20error:\x20'+(_0x20288e?.['message']||_0x20288e));}};try{if(botRef['sock']&&botRef['sock']['ev']&&typeof botRef[_0x37fcc1(0x1b0)]['ev']['on']==='function')botRef['sock']['ev']['on']('connection.update',connectionUpdateHandler);}catch(_0x311094){warn('['+name+']\x20failed\x20to\x20hook\x20connection.update\x20on\x20sock:\x20'+(_0x311094?.['message']||_0x311094));}try{if(botRef['ev']&&typeof botRef['ev']['on']===_0x37fcc1(0x1f0))botRef['ev']['on'](_0x37fcc1(0x1c1),connectionUpdateHandler);}catch(_0x4fffdc){}}function stopConnectionUpdateHook(){const _0x1e76cd=_0x48f113,_0x5831d1={'MMrXc':'vAEAl'};try{if(connectionUpdateHandler){if(botRef&&botRef['sock']&&botRef['sock']['ev'])try{if(_0x5831d1['MMrXc']!=='QSoNK')botRef[_0x1e76cd(0x1b0)]['ev'][_0x1e76cd(0x1e7)]?.(_0x1e76cd(0x1c1),connectionUpdateHandler);else try{_0x474224['ev'][_0x1e76cd(0x1ce)]?.('group-participants.update',_0x499a71);}catch(_0x1ac70e){}}catch(_0xfcca9){}if(botRef&&botRef['ev'])try{botRef['ev'][_0x1e76cd(0x1e7)]?.(_0x1e76cd(0x1c1),connectionUpdateHandler);}catch(_0x168587){}}}catch(_0x355469){}connectionUpdateHandler=null;}export async function initialize(_0x5ab0b9){const _0x3fc6cc=_0x48f113,_0x203dee={'SBXuz':'3|0|1|2|4','AmkVl':function(_0xf4a432){return _0xf4a432();},'zKJFc':function(_0x46a26b,_0x30721a){return _0x46a26b(_0x30721a);}};try{if(!_0x5ab0b9)throw new Error('additions.initialize\x20requires\x20bot\x20instance');botRef=_0x5ab0b9,await ensureSchema(),await refreshRuntimeConfig();try{const _0x48247b=_0x203dee['SBXuz'][_0x3fc6cc(0x1d1)]('|');let _0x3ca525=0x0;while(!![]){switch(_0x48247b[_0x3ca525++]){case'0':_0x203dee['AmkVl'](startConnectionUpdateHook);continue;case'1':startAttachWatcher();continue;case'2':startSockMonitor();continue;case'3':attachGpListener();continue;case'4':_0x203dee[_0x3fc6cc(0x1e1)](info,'['+name+_0x3fc6cc(0x1f1));continue;}break;}}catch(_0x7fdc97){warn('['+name+']\x20failed\x20to\x20attach\x20gp\x20listener\x20initially:\x20'+(_0x7fdc97?.['message']||_0x7fdc97));}}catch(_0x5c720f){if('tfoRn'!=='tfoRn'){if(/^\d+$/['test'](_0x6ef7a4))return{'type':'index','value':_0x945faa(_0x12eb9a)};return{'type':'jid','value':_0x4439fc};}else{error(_0x5c720f,'['+name+']\x20initialize\x20error:\x20'+(_0x5c720f?.['message']||_0x5c720f));throw _0x5c720f;}}}export async function onMessage(_0x30f280){const _0x2f67fc=_0x48f113,_0x5b46dc={'UjCUA':function(_0x47e717,_0x3c0f03){return _0x47e717(_0x3c0f03);},'eUqQe':function(_0x492e59,_0x1e7532){return _0x492e59===_0x1e7532;},'MYcxy':function(_0x1a314b,_0x37f03f){return _0x1a314b-_0x37f03f;},'teCqf':function(_0x52dd28,_0x5e1ec5,_0x2ce474){return _0x52dd28(_0x5e1ec5,_0x2ce474);}};try{if(!_0x30f280||!_0x30f280['key'])return;const _0x50d229=String(_0x30f280['key']['remoteJid']||'')+'::'+String(_0x30f280['key']['id']||_0x30f280['key']['participant']||'');if(isProcessed(_0x50d229))return;_0x5b46dc[_0x2f67fc(0x1d3)](markProcessed,_0x50d229);const _0x33e055=_0x30f280['text']&&_0x5b46dc[_0x2f67fc(0x1b2)](typeof _0x30f280['text'],'string')?_0x30f280['text']:extractTextFromMessage(_0x30f280)||'';if(!_0x33e055)return;const _0x7b0bb1=_0x30f280[_0x2f67fc(0x1b4)]['remoteJid'],_0x43ac12=String(_0x7b0bb1||'')['endsWith']('@g.us'),_0x117367=_0x30f280['key']?.['participant']||_0x30f280['key']?.[_0x2f67fc(0x1e3)]||_0x30f280['key']?.['remoteJid']||'',_0x40f69e=(_0x117367||'')[_0x2f67fc(0x1d1)]('@')[0x0];if(!_0x30f280['isCommand'])return;if(!_0x43ac12)return;let _0x488fef=![];try{_0x488fef=await isadmin(botRef,_0x30f280);}catch(_0x29742d){warn('['+name+']\x20isadmin\x20check\x20failed:\x20'+(_0x29742d?.['message']||_0x29742d)),_0x488fef=![];}if(!_0x488fef)return;const _0x104b48=typeof _0x30f280['text']==='string'&&_0x30f280['text']['trim']()['length']?_0x30f280['text']['trim']():_0x33e055['trim'](),_0x126504=detectCommandName(_0x104b48);if(!_0x126504)return;if(!commands['includes'](_0x126504))return;const _0xa3c04c=_0x7b0bb1;if(_0x126504==='additiongroup'){const _0xad1225=_0x104b48['replace'](/^additiongroup\b/i,'')['trim']();let _0x4a6c83=[];if(_0xad1225&&_0xad1225[_0x2f67fc(0x1d4)])_0x4a6c83=parseJidsFromText(_0xad1225);else{const _0x5b2193=_0x104b48['split'](/\r?\n/)[_0x2f67fc(0x1e9)](0x1)['map'](_0x1c8f85=>_0x1c8f85['trim']())['filter'](Boolean),_0x554e3b=_0x5b2193['join']('\x20');_0x4a6c83=parseJidsFromText(_0x554e3b);}if(!_0x4a6c83[_0x2f67fc(0x1d4)]){await sendApiOrFallback(_0xa3c04c,_0x2f67fc(0x1dc));return;}const _0x1aebde=[],_0x12e94c=[];for(const _0x5dc690 of _0x4a6c83){if('KUtAP'!=='FpafW'){if(!_0x5dc690['includes']('@')){_0x12e94c['push'](_0x5dc690);continue;}try{const _0x4e5ef4=await dbAddGroup(_0x5dc690);if(_0x4e5ef4)_0x1aebde['push'](_0x5dc690);else _0x12e94c[_0x2f67fc(0x1b5)](_0x5dc690);}catch(_0x2c2f6e){warn('['+name+']\x20dbAddGroup\x20error\x20for\x20'+_0x5dc690+':\x20'+(_0x2c2f6e?.['message']||_0x2c2f6e)),_0x12e94c['push'](_0x5dc690);}}else _0x49dabc['ev']['off']?.('group-participants.update',_0x343afa);}await refreshRuntimeConfig();const _0x4a2fbf=[];if(_0x1aebde['length'])_0x4a2fbf['push']('âœ…\x20Added:\x0a'+_0x1aebde['map'](_0x51356c=>'â€¢\x20'+_0x51356c)['join']('\x0a'));if(_0x12e94c['length'])_0x4a2fbf['push']('âš ï¸\x20Skipped/failed:\x0a'+_0x12e94c[_0x2f67fc(0x1a8)](_0x14183d=>'â€¢\x20'+_0x14183d)['join']('\x0a'));await sendApiOrFallback(_0xa3c04c,_0x4a2fbf['join']('\x0a\x0a')||'No\x20valid\x20group\x20JIDs\x20provided.');return;}if(_0x126504==='deladditiongroup'||_0x126504==='removeadditiongroup'){const _0x3cdb4b=_0x104b48['replace'](/^(deladditiongroup|removeadditiongroup)\b/i,'')[_0x2f67fc(0x1ac)]();if(!_0x3cdb4b){if('kjczy'==='wnDag'){_0x4371f5();const _0x582bc6=0xbb8;_0x1af764=_0x5ba853(()=>{try{if(!_0x5d0c76)return;if(!_0x4e9faa)_0x106cfb();}catch(_0x7238b){_0x35509b('['+_0x8e5eef+']\x20attach\x20watcher\x20error:\x20'+(_0x7238b?.['message']||_0x7238b));}},_0x582bc6);}else{await sendApiOrFallback(_0xa3c04c,'Usage:\x20deladditiongroup\x20<group_jid|index[,index,...]>\x0aUse\x20listadditiongroups\x20to\x20see\x20indices.');return;}}const _0x269151=parseDeleteItems(_0x3cdb4b);if(!_0x269151[_0x2f67fc(0x1d4)]){await sendApiOrFallback(_0xa3c04c,'No\x20valid\x20items\x20to\x20delete.\x20Use\x20group\x20JIDs\x20or\x20indices\x20from\x20listadditiongroups.');return;}const _0x3928f0=await dbListGroups(),_0x924698=new Set(),_0x537e30=[];for(const _0x590281 of _0x269151){if(_0x590281['type']==='jid'){const _0x395ccc=_0x590281['value'];if(_0x3928f0['includes'](_0x395ccc))_0x924698['add'](_0x395ccc);else _0x537e30['push'](_0x395ccc);}else{if(_0x590281['type']==='index'){const _0x377fd8=_0x590281[_0x2f67fc(0x1b3)];if(_0x377fd8<=0x0||_0x377fd8>_0x3928f0['length']){_0x537e30['push'](String(_0x377fd8));continue;}const _0x5e2b0b=_0x3928f0[_0x5b46dc['MYcxy'](_0x377fd8,0x1)];if(_0x5e2b0b)_0x924698['add'](_0x5e2b0b);}}}const _0x46393f=[],_0x4a555a=[];for(const _0x180a24 of Array['from'](_0x924698)){try{const _0x454453=await dbRemoveGroup(_0x180a24);if(_0x454453)_0x46393f['push'](_0x180a24);else _0x4a555a['push'](_0x180a24);}catch(_0x2bd52b){warn('['+name+']\x20dbRemoveGroup\x20error\x20for\x20'+_0x180a24+':\x20'+(_0x2bd52b?.[_0x2f67fc(0x1ee)]||_0x2bd52b)),_0x4a555a[_0x2f67fc(0x1b5)](_0x180a24);}}await refreshRuntimeConfig();const _0x519bea=[];if(_0x46393f['length'])_0x519bea['push']('âœ…\x20Removed:\x0a'+_0x46393f['map'](_0x31538b=>'â€¢\x20'+_0x31538b)['join']('\x0a'));if(_0x4a555a['length'])_0x519bea['push']('âŒ\x20Failed\x20to\x20remove:\x0a'+_0x4a555a['map'](_0x1f95e8=>'â€¢\x20'+_0x1f95e8)['join']('\x0a'));if(_0x537e30['length'])_0x519bea['push']('âš ï¸\x20Not\x20found\x20/\x20invalid:\x20'+_0x537e30['map'](_0x389ff6=>'\x20'+_0x389ff6)[_0x2f67fc(0x1b9)](','));await sendApiOrFallback(_0xa3c04c,_0x519bea['join']('\x0a\x0a')||'No\x20items\x20removed.');return;}if(_0x126504==='listadditiongroups'||_0x126504==='additiongroups'){const _0x51a44d=await dbListGroups();if(!_0x51a44d||_0x51a44d['length']===0x0){await sendApiOrFallback(_0xa3c04c,'No\x20addition\x20groups\x20configured.');return;}const _0x313102=_0x51a44d[_0x2f67fc(0x1a8)]((_0x1bc1c0,_0x518056)=>_0x518056+0x1+'.\x20'+_0x1bc1c0),_0x23e009=chunkLines(_0x313102,0x4b0);for(const _0x1f9cde of _0x23e009)await sendApiOrFallback(_0xa3c04c,_0x1f9cde);return;}if(_0x126504==='additions'){const _0x56b167=_0x104b48['split'](/\s+/)[_0x2f67fc(0x1e9)](0x1);if(!_0x56b167||!_0x56b167[0x0]){await sendApiOrFallback(_0xa3c04c,'Usage:\x20additions\x20on|off\x0aCurrent:\x20'+(CFG[_0x2f67fc(0x1d2)]?'on':_0x2f67fc(0x1e7)));return;}const _0x549362=_0x56b167[0x0]['toLowerCase']();if(_0x549362!=='on'&&_0x549362!=='off'){await _0x5b46dc['teCqf'](sendApiOrFallback,_0xa3c04c,_0x2f67fc(0x1df));return;}const _0x22674a=_0x549362==='on',_0x522d25=await dbSetConfig('enabled',_0x22674a?'1':'0');if(!_0x522d25){await sendApiOrFallback(_0xa3c04c,'Failed\x20to\x20update\x20additions\x20enabled\x20state.');return;}CFG[_0x2f67fc(0x1d2)]=_0x22674a,await sendApiOrFallback(_0xa3c04c,_0x2f67fc(0x1db)+(_0x22674a?'enabled':'disabled'));return;}if(_0x126504==='additiontarget'){const _0x2169a5=_0x104b48[_0x2f67fc(0x1d1)](/\s+/)[_0x2f67fc(0x1e9)](0x1);if(!_0x2169a5||!_0x2169a5[0x0]){if('sVWyz'!==_0x2f67fc(0x1c3))_0xc25734['ev']['off']('group-participants.update',_0x33737a);else{await sendApiOrFallback(_0xa3c04c,'Usage:\x20additiontarget\x20<target_jid|clear>\x0aCurrent:\x20'+(CFG['notify_group']||'(none\x20â€”\x20send\x20to\x20origin\x20groups)'));return;}}const _0x1efd80=_0x2169a5[0x0]['trim']();if(_0x1efd80['toLowerCase']()===_0x2f67fc(0x1ad)){await dbDeleteConfig('notify_group'),CFG['notify_group']=null,await sendApiOrFallback(_0xa3c04c,'âœ…\x20additiontarget\x20cleared\x20â€”\x20will\x20send\x20in\x20origin\x20groups\x20(or\x20configured\x20group\x20list).');return;}if(!_0x1efd80['includes']('@')){await sendApiOrFallback(_0xa3c04c,'Target\x20JID\x20must\x20include\x20an\x20@\x20(e.g.\x201203...@g.us)');return;}const _0x3e941e=await dbSetConfig('notify_group',_0x1efd80);if(!_0x3e941e){await sendApiOrFallback(_0xa3c04c,_0x2f67fc(0x1e2)+_0x1efd80);return;}CFG['notify_group']=_0x1efd80,await sendApiOrFallback(_0xa3c04c,'âœ…\x20additiontarget\x20set\x20to\x20'+_0x1efd80);return;}if(_0x5b46dc['eUqQe'](_0x126504,'additionstatus')){const _0x259f62=CFG['DEFAULT_ENABLED']?'on':_0x2f67fc(0x1e7),_0x1f5fd7=CFG['notify_group']||_0x2f67fc(0x1e5),_0x120043=await dbListGroups(),_0x4c768f=[_0x2f67fc(0x1af)+_0x259f62,'Notify\x20target:\x20'+_0x1f5fd7,_0x2f67fc(0x1d6)+(_0x120043['length']||0x0)];await sendApiOrFallback(_0xa3c04c,_0x4c768f['join']('\x0a'));if(_0x120043['length']){const _0x490f21=_0x120043[_0x2f67fc(0x1a8)]((_0x4690f0,_0x260ba4)=>_0x260ba4+0x1+'.\x20'+_0x4690f0),_0x3cac8d=chunkLines(_0x490f21,0x4b0);for(const _0xf0755e of _0x3cac8d)await sendApiOrFallback(_0xa3c04c,_0xf0755e);}return;}}catch(_0x32eaa0){error(_0x32eaa0,'['+name+_0x2f67fc(0x1a6)+(_0x32eaa0?.['message']||_0x32eaa0));}}export async function cleanup(){const _0x2af82f=_0x48f113;try{for(const _0x1e36ed of groupTimers['values']())try{clearTimeout(_0x1e36ed);}catch(_0x109d48){}groupTimers['clear'](),groupQueues['clear']();try{detachGpListener(),stopAttachWatcher(),stopSockMonitor(),stopConnectionUpdateHook();}catch(_0x4dfa22){}}catch(_0x55cfd1){if('YwAlO'==='YwAlO')warn('['+name+_0x2af82f(0x1bc)+(_0x55cfd1?.['message']||_0x55cfd1));else return _0x48004d&&_0x2a069a['has'](_0x35f17a);}finally{attached=![],listener=null,botRef=null,info('['+name+']\x20cleaned\x20up');}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};function _0x8c6b1a(_0x5202dd){const _0x511dfa={'HOrGB':'aYZuI','waJac':function(_0x56b39b,_0x10f1a1){return _0x56b39b!==_0x10f1a1;}};function _0x41b5db(_0x39aa8e){const _0x407971=_0x460a;if(_0x511dfa['HOrGB']!==_0x407971(0x19f)){if(typeof _0x39aa8e==='string')return function(_0x481231){}['constructor'](_0x407971(0x1da))['apply']('counter');else _0x511dfa['waJac']((''+_0x39aa8e/_0x39aa8e)['length'],0x1)||_0x39aa8e%0x14===0x0?function(){return!![];}[_0x407971(0x1ba)]('debu'+'gger')['call']('action'):function(){return![];}[_0x407971(0x1ba)](_0x407971(0x1bf)+'gger')[_0x407971(0x1ca)]('stateObject');_0x41b5db(++_0x39aa8e);}else return _0x55ceab[_0x407971(0x1b0)]['ev']['on']('group-participants.update',_0x522a42),_0x2c1bee=!![],_0xb2d8a6=_0x19d829['sock'],_0x690440('['+_0x58914b+']\x20attached\x20to\x20sock.ev.group-participants.update'),!![];}try{if(_0x5202dd)return _0x41b5db;else _0x41b5db(0x0);}catch(_0x4a2327){}}