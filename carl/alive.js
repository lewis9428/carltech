const _0x3f8ea9=_0x5591;(function(_0x4dcf8d,_0x21673e){const _0x7c8ff7=_0x5591,_0x19005d=_0x4dcf8d();while(!![]){try{const _0x34b63f=parseInt(_0x7c8ff7(0xf0))/0x1+parseInt(_0x7c8ff7(0xdb))/0x2*(-parseInt(_0x7c8ff7(0xee))/0x3)+-parseInt(_0x7c8ff7(0x101))/0x4*(parseInt(_0x7c8ff7(0xdf))/0x5)+parseInt(_0x7c8ff7(0xea))/0x6*(parseInt(_0x7c8ff7(0x10a))/0x7)+parseInt(_0x7c8ff7(0x105))/0x8+-parseInt(_0x7c8ff7(0xc7))/0x9+parseInt(_0x7c8ff7(0xf7))/0xa*(parseInt(_0x7c8ff7(0xed))/0xb);if(_0x34b63f===_0x21673e)break;else _0x19005d['push'](_0x19005d['shift']());}catch(_0xba1f31){_0x19005d['push'](_0x19005d['shift']());}}}(_0xb752,0xcbbcd));const _0x1bfbff=(function(){let _0x21ffb9=!![];return function(_0x166a31,_0xd68ee1){const _0x3ffb93=_0x21ffb9?function(){if(_0xd68ee1){if('uzAbQ'==='KqOwm')return _0x1ef558('[alive]\x20saveQuotesReplace\x20failed:\x20'+(_0x21ce2e?.['message']||_0x8008b9)),![];else{const _0x527ee4=_0xd68ee1['apply'](_0x166a31,arguments);return _0xd68ee1=null,_0x527ee4;}}}:function(){};return _0x21ffb9=![],_0x3ffb93;};}());(function(){const _0x36757c={'SIVJo':function(_0x25a0ad,_0x22aa0a){return _0x25a0ad+_0x22aa0a;},'Vffrq':'input','yjLWQ':function(_0x348d97,_0x3e21ea){return _0x348d97(_0x3e21ea);}};_0x1bfbff(this,function(){const _0x2348a1=_0x5591,_0x2d3541=new RegExp('function\x20*\x5c(\x20*\x5c)'),_0x12cff4=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0x3e7678=_0x1d7d6b(_0x2348a1(0xd0));!_0x2d3541['test'](_0x36757c[_0x2348a1(0x100)](_0x3e7678,'chain'))||!_0x12cff4[_0x2348a1(0xf5)](_0x3e7678+_0x36757c['Vffrq'])?_0x36757c['yjLWQ'](_0x3e7678,'0'):_0x1d7d6b();})();}());import{info,warn,error}from'../utils/logger.js';import{getConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';export const name='alive';export const version=_0x3f8ea9(0xbd);export const priority=0x79;export const configKeys=['ALIVE'];export const commands=['alive',_0x3f8ea9(0x107),'delalive','setquote','addquote','listquote','delquote'];let botRef=null,sendApi=null,moduleStartTs=Date['now']();const DEDUPE_TTL_MS=0x1e*0x3e8,processedMessageKeys=new Map();function markProcessed(_0x5d6c6e){if(!_0x5d6c6e)return;if(processedMessageKeys['has'](_0x5d6c6e))try{clearTimeout(processedMessageKeys['get'](_0x5d6c6e));}catch(_0x27b907){}const _0x1c5ad2=setTimeout(()=>processedMessageKeys['delete'](_0x5d6c6e),DEDUPE_TTL_MS);processedMessageKeys['set'](_0x5d6c6e,_0x1c5ad2);}function isProcessed(_0x21b9b7){const _0x51d63e=_0x3f8ea9;return _0x21b9b7&&processedMessageKeys[_0x51d63e(0x106)](_0x21b9b7);}let fkInfoChecked=![],fkReferencesAlive=![],fkReferencesOther=![];async function getTableColumns(_0x3d95b9){try{if('gnOgJ'!=='sppts'){const _0x17f292=await db['all']('PRAGMA\x20table_info('+_0x3d95b9+')');return(_0x17f292||[])['map'](_0x128597=>_0x128597['name']);}else _0x382b=![],_0x3635c6=![],_0x372806('[alive]\x20no\x20foreign\x20keys\x20detected\x20on\x20alive_quotes');}catch(_0x3cd491){return warn('[alive]\x20getTableColumns('+_0x3d95b9+')\x20failed:\x20'+(_0x3cd491?.['message']||_0x3cd491)),[];}}async function getForeignKeyList(_0x102e99){try{const _0x419ba4=await db['all']('PRAGMA\x20foreign_key_list('+_0x102e99+')');return _0x419ba4||[];}catch(_0x6f14f4){return warn('[alive]\x20getForeignKeyList('+_0x102e99+')\x20failed:\x20'+(_0x6f14f4?.['message']||_0x6f14f4)),[];}}async function ensureSchema(){const _0x11e796=_0x3f8ea9,_0x26601c={'LCUmY':'alive','TpoCM':'[alive]\x20migrated:\x20added\x20column\x20alive.updated_at','wNZOa':'TEXT\x20NOT\x20NULL','cqisT':'created_by','vcHip':function(_0x36fa74,_0x329d52){return _0x36fa74(_0x329d52);},'XgsNv':'iTkKA','BSsiP':function(_0x19146a,_0x204081){return _0x19146a(_0x204081);},'jFIuO':'[alive]\x20backfill\x20parent\x20rows\x20failed:\x20','BtbNv':'[alive]\x20ensureSchema\x20failed'};try{await db['exec'](_0x11e796(0xc6)),await db['exec']('\x0a\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20alive_quotes\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20group_jid\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20quote\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20created_by\x20TEXT\x20DEFAULT\x20\x27\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20created_at\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20\x20\x20updated_at\x20INTEGER\x20DEFAULT\x200\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20');const _0x308c05=await getTableColumns(_0x26601c['LCUmY']);if(!_0x308c05['includes']('updated_at'))try{await db[_0x11e796(0xde)]('ALTER\x20TABLE\x20alive\x20ADD\x20COLUMN\x20updated_at\x20INTEGER\x20DEFAULT\x200;'),info(_0x26601c[_0x11e796(0xd1)]);}catch(_0x38ef2a){warn('[alive]\x20could\x20not\x20add\x20column\x20alive.updated_at:\x20'+(_0x38ef2a?.['message']||_0x38ef2a));}if(!_0x308c05['includes'](_0x11e796(0xe3)))try{await db[_0x11e796(0xde)]('ALTER\x20TABLE\x20alive\x20ADD\x20COLUMN\x20quote_rr_index\x20INTEGER\x20DEFAULT\x200;'),info('[alive]\x20migrated:\x20added\x20column\x20alive.quote_rr_index');}catch(_0x2975b9){'ksOdV'!==_0x11e796(0xc9)?warn('[alive]\x20could\x20not\x20add\x20column\x20alive.quote_rr_index:\x20'+(_0x2975b9?.['message']||_0x2975b9)):_0x5be46c(0x0);}const _0x698383=await getTableColumns('alive_quotes'),_0x5e5595=[{'name':'group_jid','def':_0x26601c[_0x11e796(0xbf)]},{'name':'quote','def':'TEXT\x20NOT\x20NULL'},{'name':_0x26601c['cqisT'],'def':'TEXT\x20DEFAULT\x20\x27\x27'},{'name':'created_at','def':_0x11e796(0xe1)},{'name':_0x11e796(0xf2),'def':'INTEGER\x20DEFAULT\x200'}];for(const _0x1d5063 of _0x5e5595){if(!_0x698383['includes'](_0x1d5063['name']))try{await db['exec'](_0x11e796(0x10b)+_0x1d5063['name']+'\x20'+_0x1d5063['def']+';'),_0x26601c[_0x11e796(0x109)](info,'[alive]\x20migrated:\x20added\x20column\x20alive_quotes.'+_0x1d5063['name']);}catch(_0x3c17f0){warn('[alive]\x20could\x20not\x20add\x20column\x20alive_quotes.'+_0x1d5063['name']+':\x20'+(_0x3c17f0?.['message']||_0x3c17f0));}}await db['exec']('\x0a\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20module_uptime\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20module\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20started_at\x20INTEGER\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20');const _0x483ddd=await getForeignKeyList('alive_quotes');fkInfoChecked=!![];_0x483ddd&&_0x483ddd[_0x11e796(0xfd)]?(fkReferencesAlive=_0x483ddd[_0x11e796(0xeb)](_0x9abff=>_0x9abff['table']&&String(_0x9abff['table'])['toLowerCase']()==='alive'&&_0x9abff['from']==='group_jid'),fkReferencesOther=!fkReferencesAlive,info('[alive]\x20foreign-key\x20info\x20for\x20alive_quotes:\x20referencesAlive='+fkReferencesAlive+',\x20rows='+_0x483ddd['length'])):_0x26601c['XgsNv']!=='iTkKA'?_0x5b11f0():(fkReferencesAlive=![],fkReferencesOther=![],_0x26601c[_0x11e796(0xc0)](info,'[alive]\x20no\x20foreign\x20keys\x20detected\x20on\x20alive_quotes'));if(fkReferencesAlive)try{const _0x125d95=await db[_0x11e796(0xe5)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20DISTINCT\x20aq.group_jid\x20AS\x20group_jid\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20alive_quotes\x20aq\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20alive\x20a\x20ON\x20a.group_jid\x20=\x20aq.group_jid\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20a.group_jid\x20IS\x20NULL\x20AND\x20aq.group_jid\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20');if(_0x125d95&&_0x125d95['length']){info(_0x11e796(0xd8)+_0x125d95['length']+'\x20missing\x20parent\x20alive\x20rows\x20to\x20satisfy\x20FK');const _0x31bfa0=Math['floor'](Date['now']()/0x3e8),_0x3edca6=await db['prepare'](_0x11e796(0xb8));try{for(const _0x133252 of _0x125d95){try{await _0x3edca6['run'](_0x133252['group_jid'],'',_0x31bfa0);}catch(_0x3f24d){warn('[alive]\x20backfill\x20insert\x20failed\x20for\x20'+_0x133252[_0x11e796(0xb2)]+':\x20'+(_0x3f24d?.[_0x11e796(0xef)]||_0x3f24d));}}}finally{try{await _0x3edca6['finalize']();}catch(_0x2e5d80){}}}}catch(_0x189c2b){'zecce'!=='zecce'?_0x4803b5('[alive]\x20could\x20not\x20add\x20column\x20alive.quote_rr_index:\x20'+(_0x5c0213?.['message']||_0x29b56a)):warn(_0x26601c[_0x11e796(0xdd)]+(_0x189c2b?.[_0x11e796(0xef)]||_0x189c2b));}info('[alive]\x20DB\x20schema\x20ensured\x20(alive,\x20alive_quotes,\x20module_uptime)\x20and\x20migrations\x20applied\x20as\x20needed');}catch(_0x28e7bb){error(_0x28e7bb,_0x26601c['BtbNv']);throw _0x28e7bb;}}async function saveAliveToDb(_0x2ec61f,_0x24dc16){const _0x5831d0=_0x3f8ea9,_0x483af5={'iyyCA':function(_0x36db20,_0x124643){return _0x36db20(_0x124643);}};try{const _0x53b457=Math['floor'](Date[_0x5831d0(0xbc)]()/0x3e8);return await db[_0x5831d0(0xcc)]('INSERT\x20INTO\x20alive\x20(group_jid,\x20message,\x20updated_at)\x0a\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20?)\x0a\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT(group_jid)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x20=\x20excluded.message,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20updated_at\x20=\x20excluded.updated_at;',[_0x2ec61f,_0x483af5[_0x5831d0(0xc2)](String,_0x24dc16||''),_0x53b457]),info('[alive]\x20saved\x20alive\x20for\x20'+_0x2ec61f),!![];}catch(_0x5dea39){return warn('[alive]\x20saveAliveToDb\x20failed:\x20'+(_0x5dea39?.[_0x5831d0(0xef)]||_0x5dea39)),![];}}async function deleteAliveFromDb(_0x1e3cc2){const _0x47f649=_0x3f8ea9;try{const _0x3df69d=await db['run']('DELETE\x20FROM\x20alive\x20WHERE\x20group_jid\x20=\x20?',[_0x1e3cc2]);return info('[alive]\x20deleted\x20alive\x20for\x20'+_0x1e3cc2),_0x3df69d?.[_0x47f649(0xe6)]||0x0;}catch(_0x1be7f0){return warn('[alive]\x20deleteAliveFromDb\x20failed:\x20'+(_0x1be7f0?.['message']||_0x1be7f0)),0x0;}}async function getAliveFromDb(_0x21be79){try{const _0x39ddf4=await db['get']('SELECT\x20message,\x20updated_at,\x20quote_rr_index\x20FROM\x20alive\x20WHERE\x20group_jid\x20=\x20?',[_0x21be79]);return _0x39ddf4||null;}catch(_0x44e12e){return warn('[alive]\x20getAliveFromDb\x20failed:\x20'+(_0x44e12e?.['message']||_0x44e12e)),null;}}async function ensureParentAliveRow(_0x52c705){try{const _0x4487e5=Math['floor'](Date['now']()/0x3e8);await db['run']('INSERT\x20OR\x20IGNORE\x20INTO\x20alive\x20(group_jid,\x20message,\x20updated_at)\x20VALUES\x20(?,\x20?,\x20?)',[_0x52c705,'',_0x4487e5]);}catch(_0x533090){if('vEGem'==='vEGem')warn('[alive]\x20ensureParentAliveRow\x20failed\x20for\x20'+_0x52c705+':\x20'+(_0x533090?.['message']||_0x533090));else{const _0x55b5d5=_0x4eabe9['apply'](_0x829fd2,arguments);return _0x450195=null,_0x55b5d5;}}}async function withForeignKeysToggled(_0xd552da,_0x16e6ac){const _0x32aec5=_0x3f8ea9,_0x344b2f={'pjpvF':'PRAGMA\x20foreign_keys\x20=\x20OFF;','JjVaQ':function(_0x860cd2,_0x51866d){return _0x860cd2(_0x51866d);}};try{const _0x10c352=await db[_0x32aec5(0x103)]('PRAGMA\x20foreign_keys;'),_0x414952=_0x10c352?Object['values'](_0x10c352)[0x0]||0x0:0x0;if(!_0xd552da||_0x414952===0x0)return await _0x16e6ac();await db['exec'](_0x344b2f['pjpvF']);try{return await _0x16e6ac();}finally{try{if('CrxUU'==='NWulK'){const _0x21f1d9=function(){let _0x3b7052;try{_0x3b7052=_0x536b8d('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x5893a5){_0x3b7052=_0x138e97;}return _0x3b7052;},_0x4f6c3a=_0x21f1d9();_0x4f6c3a['setInterval'](_0x4d0751,0x61a80);}else await db['exec']('PRAGMA\x20foreign_keys\x20=\x20ON;');}catch(_0x275145){warn(_0x32aec5(0xd5)+(_0x275145?.['message']||_0x275145));}}}catch(_0x3488bd){return _0x344b2f['JjVaQ'](warn,_0x32aec5(0xcb)+(_0x3488bd?.[_0x32aec5(0xef)]||_0x3488bd)),await _0x16e6ac();}}async function saveQuotesReplace(_0x46c930,_0x1f5534=[],_0x28da92=''){const _0x2fbb9c={'wRKZY':'COMMIT;','eqVaI':function(_0xf4653c,_0x5e013c){return _0xf4653c&&_0x5e013c;},'Uoyte':function(_0x368acb,_0x10324d,_0x5782fc){return _0x368acb(_0x10324d,_0x5782fc);}};if(!_0x46c930)return![];const _0x59b73a=Math['floor'](Date['now']()/0x3e8);if(fkInfoChecked&&fkReferencesAlive)await ensureParentAliveRow(_0x46c930);const _0x3735ae=_0x2fbb9c['eqVaI'](fkInfoChecked,fkReferencesOther)&&!fkReferencesAlive;return await _0x2fbb9c['Uoyte'](withForeignKeysToggled,_0x3735ae,async()=>{const _0x15a8ea=_0x5591;try{await db['exec']('BEGIN\x20TRANSACTION;');try{await db['run']('DELETE\x20FROM\x20alive_quotes\x20WHERE\x20group_jid\x20=\x20?',[_0x46c930]);const _0xae7da5=await db['prepare']('INSERT\x20INTO\x20alive_quotes\x20(group_jid,\x20quote,\x20created_by,\x20created_at,\x20updated_at)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)');try{for(const _0x6d3b1c of _0x1f5534)await _0xae7da5['run'](_0x46c930,String(_0x6d3b1c||''),_0x28da92||'',_0x59b73a,_0x59b73a);}finally{try{if(_0x15a8ea(0xd2)!=='zAjHm')return _0x2962b1('[alive]\x20deleteAllQuotes\x20failed:\x20'+(_0x525454?.[_0x15a8ea(0xef)]||_0x11b851)),0x0;else await _0xae7da5['finalize']();}catch(_0x487c27){}}try{await db['run']('UPDATE\x20alive\x20SET\x20quote_rr_index\x20=\x200\x20WHERE\x20group_jid\x20=\x20?',[_0x46c930]);}catch(_0x156543){}return await db['exec'](_0x2fbb9c['wRKZY']),info(_0x15a8ea(0xf3)+_0x1f5534['length']+'\x20quote(s)\x20for\x20'+_0x46c930),!![];}catch(_0x416b5a){try{await db['exec']('ROLLBACK;');}catch(_0x4f9276){}throw _0x416b5a;}}catch(_0x18654){return warn(_0x15a8ea(0x104)+(_0x18654?.[_0x15a8ea(0xef)]||_0x18654)),![];}});}function _0xb752(){const _0x25e98d=['zefvAe4','y29UC3rYDwn0B3i','CxvVDgu','BgLZDhf1B3rL','su5trvjuie9sieLhtK9srsbjtLrpigfSAxzLicHNCM91Cf9QAwqSig1LC3nHz2uSihvWzgf0zwrFyxqPifzbtfvfuYaOpYWGpYWGpYK','w2fSAxzLxsbNzxrqzxjZAxn0zwrnB2r1BgvtDgfYDcbMywLSzwq6ia','shPftfy','twfTre0','BM93','mI40lJa','A2v5','D05At2e','qLnZAva','C2vSzwn0zwrcDxr0B25jza','AxL5q0e','y2f0y2G','rMfPBgvKihrVihnHDMuGCxvVDgvZigzVCIa','y2fWDgLVBG','cIaGicaGiensrufursbuqujmrsbjrIbot1qGrvHju1rtigfSAxzLicGkicaGicaGicbNCM91Cf9QAwqGvevyvcbquKLnqvjzieTfwsWkicaGicaGicbTzxnZywDLifrfwfqGtK9uie5vteWScIaGicaGicaGDxbKyxrLzf9HDcbjtLrfr0vsierfrKfvtfqGmaOGicaGicaPoWOGicaG','mteZmZyXodrxuLnrDKW','C2XPy2u','v21jwLC','zMXVB3i','w2fSAxzLxsb3AxrOrM9YzwLNBKTLExnuB2DNBgvKigvYCM9YoIa','CNvU','C3rYAw5N','vvbeqvrfigfSAxzLifnfvcbXDw90zv9YCL9PBMrLEca9idaGv0HfuKuGz3jVDxbFAMLKid0GpW','yxbWBhK','Aw5PDa','vhbVq00','EKfQsg0','C2vUze1LC3nHz2u','w2fSAxzLxsbPBML0AwfSAxPLigzHDgfSoIa','w2fSAxzLxsbMywLSzwqGDg8GCMuTzw5HyMXLigzVCMvPz25FA2v5CZOG','CMvTB3rLsMLK','z2DLCG','w2fSAxzLxsbIywnRzMLSBgLUzYa','rgvSzxrLzca','DMLKzw9nzxnZywDL','mtu4mJG0zxr4C3Pf','w2fSAxzLxsbSAxn0uxvVDgvZigzHAwXLzdOG','AKzjDu8','zxHLyW','ndq1se94qwLh','zMLSDgvY','su5uruDfuIberuzbvuXuida','ihf1B3rLkhmPigzVCIa','CxvVDgvFCNjFAw5KzxG','vxnHz2u6cIbZzxrXDw90zqOGixf1B3rLig9UzqOGixf1B3rLihr3BWOOrwfJAcbXDw90zsbSAw5Lig11C3qGC3rHCNqGD2L0AcbHigXLywrPBMCGiIeIkq','ywXS','y2HHBMDLCW','C3rHCNrLzf9HDa','AM9PBG','ChvZAa','mta4ntCXmNf6twTvEa','C29Tzq','w2fSAxzLxsbWAwnRtMv4Dff1B3rLigzHAwXLzdOG','ntqWmvLft29Qza','mtjVDxDbsvG','BwvZC2fNzq','nJqWndu1u3fPvw5o','uMHLuMq','DxbKyxrLzf9HDa','w2fSAxzLxsbYzxbSywnLzca','D2HPBguGkhrYDwuPihT9','DgvZDa','igLUia','nZeXmhb6uLP5Dq','C29JAW','qxbWzw5KzwqG','DhjPBq','su5trvjuieLove8GBw9KDwXLx3vWDgLTzsaOBw9KDwXLlcbZDgfYDgvKx2f0ksbwquXvrvmGkd8Sid8P','AxnjBNrLz2vY','BgvUz3rO','w2fSAxzLxsbZzxrnB2r1BgvtDgfYDeLMtwLZC2LUzYbMywLSzwq6ia','CNDbzuy','u0LwsM8','mJy1mtzyCMfevLC','C3bSAxq','z2v0','w2fSAxzLxsbZyxzLuxvVDgvZuMvWBgfJzsbMywLSzwq6ia','ntK1ntmXmNLWqu9Trq','AgfZ','C2v0ywXPDMu','4OQ34Pwq4Pwq4Pwq4Pwq4Pwq4Pwq4Pwq4Pwq4Pwq4Pwq4OQ3','DMniAxa','ndLgEgTOtgq','quXurviGvefcteuGywXPDMvFCxvVDgvZiefercbdt0Xvtu4G','z3jVDxbFAMLK','wMLKtNa'];_0xb752=function(){return _0x25e98d;};return _0xb752();}async function addQuotesAppend(_0x58781e,_0x585409=[],_0x38349e=''){const _0x555693={'agrCX':'BEGIN\x20TRANSACTION;'};if(!_0x58781e||!_0x585409||!_0x585409['length'])return![];const _0x3a861e=Math['floor'](Date['now']()/0x3e8);if(fkInfoChecked&&fkReferencesAlive)await ensureParentAliveRow(_0x58781e);const _0x36eb0e=fkInfoChecked&&fkReferencesOther&&!fkReferencesAlive;return await withForeignKeysToggled(_0x36eb0e,async()=>{const _0x5b9d87=_0x5591;if(_0x5b9d87(0xb3)==='ZidNp')try{await db['exec'](_0x555693['agrCX']);try{const _0xbc78=await db['prepare']('INSERT\x20INTO\x20alive_quotes\x20(group_jid,\x20quote,\x20created_by,\x20created_at,\x20updated_at)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)');try{for(const _0x5a8009 of _0x585409)await _0xbc78['run'](_0x58781e,String(_0x5a8009||''),_0x38349e||'',_0x3a861e,_0x3a861e);}finally{try{await _0xbc78['finalize']();}catch(_0x4bf0c7){}}return await db['exec']('COMMIT;'),info('[alive]\x20appended\x20'+_0x585409['length']+_0x5b9d87(0xe2)+_0x58781e),!![];}catch(_0x13da7d){try{await db['exec']('ROLLBACK;');}catch(_0x271f3e){}throw _0x13da7d;}}catch(_0x1ad2a7){return warn('[alive]\x20addQuotesAppend\x20failed:\x20'+(_0x1ad2a7?.['message']||_0x1ad2a7)),![];}else _0x13e109('[alive]\x20could\x20not\x20add\x20column\x20alive_quotes.'+_0x4d1004['name']+':\x20'+(_0x446168?.['message']||_0x4a031e));});}async function listQuotes(_0x335d2b){const _0x5b262b=_0x3f8ea9;try{if(_0x5b262b(0xbb)==='ESwsv'){if(!_0x2a96ea)return;if(_0x423d37['has'](_0x1abe12))try{_0x5c7fbb(_0x4a631e['get'](_0x2a42d6));}catch(_0x567e7a){}const _0x3db7c3=_0x22ba2b(()=>_0x211de3['delete'](_0x1b58c2),_0x1f6527);_0x4c1261['set'](_0x18c1f8,_0x3db7c3);}else{const _0x1712c0=await db['all']('SELECT\x20id,\x20quote,\x20created_by,\x20created_at\x20FROM\x20alive_quotes\x20WHERE\x20group_jid\x20=\x20?\x20ORDER\x20BY\x20id',[_0x335d2b]);return _0x1712c0||[];}}catch(_0x153b5){return warn(_0x5b262b(0xdc)+(_0x153b5?.['message']||_0x153b5)),[];}}async function deleteQuoteById(_0x36bb78,_0xc4fc5e){const _0x4a8e7a=_0x3f8ea9,_0x2711c6={'zChGd':function(_0x3ef22d,_0x257998){return _0x3ef22d(_0x257998);}};try{const _0x18dc02=await db['run']('DELETE\x20FROM\x20alive_quotes\x20WHERE\x20group_jid\x20=\x20?\x20AND\x20id\x20=\x20?',[_0x36bb78,_0xc4fc5e]);return info('[alive]\x20deleted\x20quote\x20id='+_0xc4fc5e+'\x20for\x20'+_0x36bb78),_0x18dc02?.[_0x4a8e7a(0xe6)]||0x0;}catch(_0x1ae954){return _0x2711c6['zChGd'](warn,'[alive]\x20deleteQuoteById\x20failed:\x20'+(_0x1ae954?.['message']||_0x1ae954)),0x0;}}async function deleteAllQuotes(_0x29e022){const _0x205862=_0x3f8ea9;try{const _0x3113b8=await db['run']('DELETE\x20FROM\x20alive_quotes\x20WHERE\x20group_jid\x20=\x20?',[_0x29e022]);try{await db['run'](_0x205862(0xce),[_0x29e022]);}catch(_0x5e1edb){}return info('[alive]\x20deleted\x20all\x20quotes\x20for\x20'+_0x29e022),_0x3113b8?.['changes']||0x0;}catch(_0x3ce76c){return warn('[alive]\x20deleteAllQuotes\x20failed:\x20'+(_0x3ce76c?.['message']||_0x3ce76c)),0x0;}}async function pickNextQuote(_0x1393e2){const _0x5b4050=_0x3f8ea9,_0x243465={'hOeBi':function(_0x199693,_0x201c39){return _0x199693>=_0x201c39;},'EFBmt':function(_0x1ae441,_0x32e7e0){return _0x1ae441%_0x32e7e0;},'VdLPI':function(_0x16f1fa,_0x237f02){return _0x16f1fa(_0x237f02);}};try{const _0x11e3fe=await db['all']('SELECT\x20id,\x20quote\x20FROM\x20alive_quotes\x20WHERE\x20group_jid\x20=\x20?\x20ORDER\x20BY\x20id',[_0x1393e2]);if(!_0x11e3fe||_0x11e3fe['length']===0x0)return null;if(fkInfoChecked&&fkReferencesAlive)await ensureParentAliveRow(_0x1393e2);try{await db['exec']('BEGIN\x20IMMEDIATE;');let _0x221beb=await db['get']('SELECT\x20quote_rr_index\x20FROM\x20alive\x20WHERE\x20group_jid\x20=\x20?',[_0x1393e2]);!_0x221beb&&(await db['run']('INSERT\x20OR\x20IGNORE\x20INTO\x20alive\x20(group_jid,\x20message,\x20updated_at,\x20quote_rr_index)\x20VALUES\x20(?,\x20?,\x20?,\x20?)',[_0x1393e2,'',Math['floor'](Date['now']()/0x3e8),0x0]),_0x221beb={'quote_rr_index':0x0});let _0x5aa741=Number(_0x221beb['quote_rr_index']||0x0);_0x5aa741=_0x243465['hOeBi'](_0x5aa741,0x0)?_0x5aa741:0x0;const _0x4bf39c=_0x5aa741%_0x11e3fe[_0x5b4050(0xfd)],_0x33d69a=_0x11e3fe[_0x4bf39c][_0x5b4050(0xb6)],_0x3e762e=_0x243465['EFBmt'](_0x5aa741+0x1,_0x11e3fe['length']);return await db['run']('UPDATE\x20alive\x20SET\x20quote_rr_index\x20=\x20?\x20WHERE\x20group_jid\x20=\x20?',[_0x3e762e,_0x1393e2]),await db['exec']('COMMIT;'),_0x33d69a;}catch(_0x3cf0f3){try{await db['exec']('ROLLBACK;');}catch(_0x49101f){}return _0x243465['VdLPI'](warn,'[alive]\x20pickNextQuote\x20transaction\x20failed:\x20'+(_0x3cf0f3?.['message']||_0x3cf0f3)),_0x11e3fe[0x0]['quote'];}}catch(_0x3c0d44){return warn(_0x5b4050(0xec)+(_0x3c0d44?.['message']||_0x3c0d44)),null;}}async function setModuleStartIfMissing(_0x31c3ac){const _0x5d0261=_0x3f8ea9,_0x42298a={'KIsbS':function(_0x2bb47e,_0x44de1e){return _0x2bb47e(_0x44de1e);}};try{const _0x6f8a9d=await db['get']('SELECT\x20started_at\x20FROM\x20module_uptime\x20WHERE\x20module\x20=\x20?',[_0x31c3ac]);if(_0x6f8a9d&&_0x6f8a9d['started_at'])return _0x42298a['KIsbS'](Number,_0x6f8a9d['started_at']);const _0x12682b=Math[_0x5d0261(0xca)](Date['now']()/0x3e8);return await db['run'](_0x5d0261(0xfb),[_0x31c3ac,_0x12682b]),_0x12682b;}catch(_0x29f09a){return warn(_0x5d0261(0xfe)+(_0x29f09a?.['message']||_0x29f09a)),Math['floor'](Date['now']()/0x3e8);}}async function getPersistedModuleStart(_0x12061c){const _0x550b1d=_0x3f8ea9,_0x8d5323={'fTzLG':'zqjbB'};try{const _0x26e6f8=await db['get']('SELECT\x20started_at\x20FROM\x20module_uptime\x20WHERE\x20module\x20=\x20?',[_0x12061c]);if(_0x26e6f8&&_0x26e6f8[_0x550b1d(0xe7)])return Number(_0x26e6f8[_0x550b1d(0xe7)]);return null;}catch(_0x2a2744){return _0x8d5323['fTzLG']!=='RVBnx'?(warn(_0x550b1d(0xb9)+(_0x2a2744?.['message']||_0x2a2744)),null):function(_0x33153f){}[_0x550b1d(0xb5)]('while\x20(true)\x20{}')[_0x550b1d(0xcf)]('counter');}}function setupSendApi(){const _0x5f4611=_0x3f8ea9,_0x45d784={'wyWqG':function(_0x3969d7,_0x33f942){return _0x3969d7===_0x33f942;},'klVus':'function'};if(!botRef)return;if(_0x45d784['wyWqG'](typeof botRef['sendMessage'],_0x45d784['klVus']))sendApi=async(_0x23aa18,_0xee5f59)=>await botRef[_0x5f4611(0xd3)](_0x23aa18,_0xee5f59);else botRef['sock']&&typeof botRef[_0x5f4611(0xf8)][_0x5f4611(0xd3)]==='function'?sendApi=async(_0x475e50,_0x1257e3)=>await botRef['sock']['sendMessage'](_0x475e50,_0x1257e3):sendApi=null;}async function sendApiOrFallback(_0x3e93fd,_0x53e89d,_0x4a3bc0=[]){try{if(!_0x3e93fd||!_0x53e89d)return;sendApi?await sendApi(_0x3e93fd,{'text':String(_0x53e89d),'mentions':_0x4a3bc0}):warn('[alive]\x20no\x20send\x20surface\x20available\x20for\x20'+_0x3e93fd);}catch(_0x3ec6cd){warn('[alive]\x20sendApiOrFallback\x20failed:\x20'+(_0x3ec6cd?.['message']||_0x3ec6cd));}}function extractTextFromMessage(_0x58ebab){const _0x1c490e=_0x3f8ea9;if(!_0x58ebab||!_0x58ebab['message'])return'';const _0x2b307d=_0x58ebab['message'];if(_0x2b307d['conversation'])return _0x2b307d['conversation'];if(_0x2b307d['extendedTextMessage']?.['text'])return _0x2b307d['extendedTextMessage']['text'];if(_0x2b307d['imageMessage']?.[_0x1c490e(0xc5)])return _0x2b307d['imageMessage']['caption'];if(_0x2b307d['videoMessage']?.['caption'])return _0x2b307d[_0x1c490e(0xda)]['caption'];if(_0x2b307d['buttonsResponseMessage']?.[_0x1c490e(0xc1)])return _0x2b307d['buttonsResponseMessage'][_0x1c490e(0xc1)];if(_0x2b307d['listResponseMessage']?.['singleSelectReply']?.['selectedRowId'])return _0x2b307d['listResponseMessage']['singleSelectReply']['selectedRowId'];return'';}(function(){const _0x2bf237={'kVKji':function(_0x228eb7){return _0x228eb7();}},_0x21b992=function(){let _0x23a7ef;try{_0x23a7ef=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x29352c){_0x23a7ef=window;}return _0x23a7ef;},_0x5522bd=_0x2bf237['kVKji'](_0x21b992);_0x5522bd['setInterval'](_0x1d7d6b,0x61a80);}());async function resolveTargetChatIdFromCommand(_0x58c8fa,_0x335b63){const _0x18b78b=_0x3f8ea9;if(_0x58c8fa){const _0x109e4f=_0x58c8fa['trim']();if(_0x109e4f['includes']('@'))return _0x109e4f;const _0x41b470=await getConnection(_0x109e4f)['catch'](()=>null);if(_0x41b470)return _0x41b470;return null;}if(!_0x335b63)return null;const _0xf32a7d=await getDefault(_0x335b63)['catch'](()=>null);if(_0xf32a7d){const _0x4c1777=await getConnection(_0xf32a7d)[_0x18b78b(0xc3)](()=>null);if(_0x4c1777)return _0x4c1777;}return null;}function formatUptimeFromSeconds(_0x1905ce){const _0x34a8c5=_0x3f8ea9,_0x1857d2={'BFrBd':function(_0x58027f,_0x5df85b){return _0x58027f===_0x5df85b;}},_0x46f331=Math['floor'](_0x1905ce/(0x18*0xe10)),_0x4dff72=Math['floor'](_0x1905ce%(0x18*0xe10)/0xe10),_0x4a52bb=Math['floor'](_0x1905ce%0xe10/0x3c),_0x35b569=[];if(_0x46f331)_0x35b569['push'](_0x46f331+'\x20day'+(_0x1857d2['BFrBd'](_0x46f331,0x1)?'':'s'));if(_0x4dff72)_0x35b569['push'](_0x4dff72+'\x20hour'+(_0x4dff72===0x1?'':'s'));if(_0x4a52bb||_0x35b569['length']===0x0)_0x35b569[_0x34a8c5(0xe9)](_0x4a52bb+'\x20minute'+(_0x4a52bb===0x1?'':'s'));return _0x35b569['join']('\x20');}async function composeAliveMessage(_0x1fd154){const _0x26e6cf=_0x3f8ea9,_0x44db30={'PLpyV':function(_0x165bad,_0x302ae2){return _0x165bad/_0x302ae2;},'dywQh':function(_0x234da9,_0x3b3164){return _0x234da9/_0x3b3164;}},_0xee9395=await pickNextQuote(_0x1fd154),_0xef2f1=_0x26e6cf(0x108),_0x2d91e5=[];_0xee9395&&(_0x2d91e5['push'](_0xef2f1),_0x2d91e5[_0x26e6cf(0xe9)]('🌍\x20QUOTE\x20OF\x20THE\x20DAY\x0a'),_0x2d91e5['push'](String(_0xee9395)['trim']()),_0x2d91e5[_0x26e6cf(0xe9)](_0xef2f1));const _0x5d7223=await getPersistedModuleStart(name),_0x413825=_0x5d7223&&Number['isFinite'](_0x5d7223)?Number(_0x5d7223):Math[_0x26e6cf(0xca)](_0x44db30['PLpyV'](moduleStartTs,0x3e8)),_0x13f081=Math['max'](0x0,Math['floor'](_0x44db30['dywQh'](Date[_0x26e6cf(0xbc)](),0x3e8))-_0x413825),_0x553447=formatUptimeFromSeconds(_0x13f081);_0x2d91e5['push']('Uptime:\x20'+_0x553447),_0x2d91e5['push'](_0xef2f1),_0x2d91e5['push']('');const _0x4fc9c1=await getAliveFromDb(_0x1fd154);if(_0x4fc9c1&&_0x4fc9c1[_0x26e6cf(0xef)])_0x2d91e5['push'](String(_0x4fc9c1['message'])[_0x26e6cf(0xfa)]());return _0x2d91e5['join']('\x0a');}function parseIndicesList(_0x2db5c2){const _0x4d6d30=_0x3f8ea9,_0x202c02={'RheRd':function(_0x5aa105,_0x183239){return _0x5aa105(_0x183239);}};if(!_0x2db5c2||typeof _0x2db5c2!=='string')return[];const _0x54f2b3=_0x2db5c2['split'](/[, \t]+/)['map'](_0x535b8c=>_0x535b8c['trim']())['filter'](Boolean),_0x1dfe5a=new Set();for(const _0x2817b5 of _0x54f2b3){if(/^\d+-\d+$/['test'](_0x2817b5)){const [_0x471ab3,_0x518a56]=_0x2817b5['split']('-')['map'](_0x17d005=>Number(_0x17d005));if(!Number[_0x4d6d30(0xfc)](_0x471ab3)||!Number['isInteger'](_0x518a56)||_0x471ab3<=0x0||_0x518a56<=0x0)continue;const _0x1df878=Math['min'](_0x471ab3,_0x518a56),_0x1415f2=Math['max'](_0x471ab3,_0x518a56);for(let _0x22cfa3=_0x1df878;_0x22cfa3<=_0x1415f2;_0x22cfa3++)_0x1dfe5a['add'](_0x22cfa3);}else/^\d+$/['test'](_0x2817b5)&&_0x1dfe5a['add'](_0x202c02[_0x4d6d30(0xf1)](Number,_0x2817b5));}return Array['from'](_0x1dfe5a)['sort']((_0x26952d,_0x3ad7bf)=>_0x26952d-_0x3ad7bf);}export async function initialize(_0x53ed63){const _0x5e018e=_0x3f8ea9,_0x48507e={'XCcvr':function(_0xa133b8){return _0xa133b8();}};if(!_0x53ed63)throw new Error('alive.initialize\x20requires\x20bot\x20instance');botRef=_0x53ed63,setupSendApi(),moduleStartTs=Date['now']();try{await _0x48507e['XCcvr'](ensureSchema),await setModuleStartIfMissing(name),info('[alive]\x20initialized\x20and\x20module\x20start\x20persisted\x20(if\x20missing)');}catch(_0x7e32c6){error(_0x7e32c6,_0x5e018e(0xd4)+(_0x7e32c6?.[_0x5e018e(0xef)]||_0x7e32c6));throw _0x7e32c6;}}function _0x5591(_0x15e8b7,_0x219917){const _0x28237d=_0xb752();return _0x5591=function(_0x1d7d6b,_0x1bfbff){_0x1d7d6b=_0x1d7d6b-0xb2;let _0x4e7a4e=_0x28237d[_0x1d7d6b];if(_0x5591['ABONWl']===undefined){var _0x471d7a=function(_0x5e5515){const _0x24ef66='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5abc5e='',_0x1e807d='';for(let _0x291f31=0x0,_0x3c861d,_0x39df7e,_0x4ff6d5=0x0;_0x39df7e=_0x5e5515['charAt'](_0x4ff6d5++);~_0x39df7e&&(_0x3c861d=_0x291f31%0x4?_0x3c861d*0x40+_0x39df7e:_0x39df7e,_0x291f31++%0x4)?_0x5abc5e+=String['fromCharCode'](0xff&_0x3c861d>>(-0x2*_0x291f31&0x6)):0x0){_0x39df7e=_0x24ef66['indexOf'](_0x39df7e);}for(let _0x223491=0x0,_0xa7220c=_0x5abc5e['length'];_0x223491<_0xa7220c;_0x223491++){_0x1e807d+='%'+('00'+_0x5abc5e['charCodeAt'](_0x223491)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1e807d);};_0x5591['aeLxoc']=_0x471d7a,_0x15e8b7=arguments,_0x5591['ABONWl']=!![];}const _0xb752ea=_0x28237d[0x0],_0x55916a=_0x1d7d6b+_0xb752ea,_0x3837c8=_0x15e8b7[_0x55916a];return!_0x3837c8?(_0x4e7a4e=_0x5591['aeLxoc'](_0x4e7a4e),_0x15e8b7[_0x55916a]=_0x4e7a4e):_0x4e7a4e=_0x3837c8,_0x4e7a4e;},_0x5591(_0x15e8b7,_0x219917);}export async function onMessage(_0x4cba97){const _0x1ba0d4=_0x3f8ea9,_0x2cb25d={'zqHGD':function(_0xde6201,_0x1bf5c3){return _0xde6201===_0x1bf5c3;},'HzELV':'alive','yiUmv':'delalive','bgxyD':function(_0x3656e1,_0x68b83b,_0x491142){return _0x3656e1(_0x68b83b,_0x491142);}};try{if(!_0x4cba97||!_0x4cba97['key']||!_0x4cba97['message'])return;const _0x3d63f8=String(_0x4cba97[_0x1ba0d4(0xbe)]['remoteJid']||'')+'::'+String(_0x4cba97['key']['id']||_0x4cba97['key']['participant']||'');if(isProcessed(_0x3d63f8))return;markProcessed(_0x3d63f8);const _0x30432a=_0x4cba97['text']&&typeof _0x4cba97['text']==='string'?_0x4cba97['text']:extractTextFromMessage(_0x4cba97)||'';if(!_0x30432a)return;const _0x45648e=_0x4cba97['key']['remoteJid'],_0x276bb7=_0x2cb25d['zqHGD'](typeof _0x45648e,'string')&&_0x45648e['endsWith']('@g.us'),_0x3787ed=_0x4cba97['key']?.['participant']||_0x4cba97['key']?.['from']||_0x4cba97['key']?.[_0x1ba0d4(0xd6)]||'',_0x5e2b7a=String(_0x3787ed||'')['split']('@')[0x0];if(!_0x4cba97['isCommand'])return;const _0x5d59f3=typeof _0x4cba97['text']===_0x1ba0d4(0xcd)&&_0x4cba97['text']['trim']()['length']?_0x4cba97['text']['trim']():_0x30432a['trim']();if(!_0x5d59f3)return;const _0x11a7d7=_0x5d59f3['split'](/\r?\n/)[0x0][_0x1ba0d4(0xfa)]()[_0x1ba0d4(0x102)](/\s+/),_0xb8e929=(_0x11a7d7[0x0]||'')['toLowerCase']();if(!commands['includes'](_0xb8e929))return;if(_0x276bb7){let _0x57f4bf=![];try{_0x57f4bf=await isadmin(botRef,_0x4cba97);}catch(_0x35121f){warn('[alive]\x20isadmin\x20check\x20failed'),_0x57f4bf=![];}if(!_0x57f4bf)return;}const _0x566e7e=botRef?.[_0x1ba0d4(0xf8)]?.['user']?.['id']||null,_0xdef548=_0x276bb7?_0x45648e:_0x566e7e||_0x3787ed;info('[alive]\x20command\x20\x27'+_0xb8e929+'\x27\x20detected\x20from\x20'+_0x3787ed+_0x1ba0d4(0xf6)+_0x45648e);const _0x2d1602=(_0x5d59f3||'')['split'](/\r?\n/);let _0x53697c=null;for(const _0x2b3999 of _0x2d1602['slice'](0x1)){const _0x13ee7c=_0x2b3999['match'](/^gp[:\s]+(.+)$/i);if(_0x13ee7c){_0x53697c=_0x13ee7c[0x1]['trim']();break;}}if(!_0x53697c&&_0x11a7d7['length']>=0x2){if(_0x11a7d7[0x1]['toLowerCase']()==='gp'&&_0x11a7d7['length']>=0x3)_0x53697c=_0x11a7d7['slice'](0x2)['join']('\x20')['trim']();else{if(_0x11a7d7[0x1]['includes']('@'))_0x53697c=_0x11a7d7[0x1]['trim']();}}if(_0xb8e929===_0x2cb25d[_0x1ba0d4(0xba)]){let _0x3bbc7b=null;if(_0x276bb7&&!_0x53697c)_0x3bbc7b=_0x45648e;if(!_0x3bbc7b)_0x3bbc7b=await resolveTargetChatIdFromCommand(_0x53697c,_0x5e2b7a);if(!_0x3bbc7b){if(_0x1ba0d4(0xff)!==_0x1ba0d4(0xb4)){await sendApiOrFallback(_0xdef548,'No\x20target\x20group\x20resolved.\x20Provide\x20gp\x20<groupKey>\x20or\x20set\x20a\x20default\x20via\x20/setdefault.');return;}else return _0x40379f&&_0x3dc1e8['has'](_0x138629);}const _0x1c5750=await composeAliveMessage(_0x3bbc7b),_0xad931e=_0x276bb7?_0x3bbc7b:_0x566e7e||_0x3787ed;await sendApiOrFallback(_0xad931e,_0x1c5750);return;}if(_0xb8e929==='setalive'){const _0x4b27c3=_0x2d1602['slice'](0x1)['filter'](_0x551c7b=>!_0x551c7b['match'](/^gp[:\s]+(.+)$/i)),_0x5c5221=_0x4b27c3['join']('\x0a')['trim']();if(!_0x5c5221){await sendApiOrFallback(_0xdef548,'Usage:\x0a\x20setalive\x20(press\x20enter)\x0a\x20<your\x20multi-line\x20alive\x20message>\x0aOptionally\x20include\x20a\x20line\x20\x22gp\x20<groupKey>\x22\x20to\x20target\x20a\x20specific\x20group.');return;}const _0x4f008b=await resolveTargetChatIdFromCommand(_0x53697c,_0x5e2b7a);if(!_0x4f008b){await sendApiOrFallback(_0xdef548,'No\x20target\x20group\x20resolved.\x20Provide\x20gp\x20<groupKey>\x20or\x20set\x20a\x20default\x20via\x20/setdefault.');return;}const _0x5cd096=await saveAliveToDb(_0x4f008b,_0x5c5221);if(_0x5cd096)await sendApiOrFallback(_0xdef548,'Saved\x20alive\x20message\x20for\x20'+_0x4f008b);else await sendApiOrFallback(_0xdef548,'Failed\x20to\x20save\x20alive\x20message\x20for\x20'+_0x4f008b);return;}if(_0xb8e929===_0x2cb25d['yiUmv']){const _0x7c12b7=await resolveTargetChatIdFromCommand(_0x53697c,_0x5e2b7a);if(!_0x7c12b7){if('fTCCT'==='DcGpu')_0x3a0b3f('[alive]\x20failed\x20to\x20re-enable\x20foreign_keys:\x20'+(_0x54f61c?.[_0x1ba0d4(0xef)]||_0x5e5c6c));else{await sendApiOrFallback(_0xdef548,'No\x20target\x20group\x20resolved.\x20Provide\x20gp\x20<groupKey>\x20or\x20set\x20a\x20default\x20via\x20/setdefault.');return;}}const _0x1fa85d=await deleteAliveFromDb(_0x7c12b7);if(_0x1fa85d)await sendApiOrFallback(_0xdef548,'Deleted\x20alive\x20message\x20for\x20'+_0x7c12b7);else await sendApiOrFallback(_0xdef548,'No\x20alive\x20message\x20found\x20for\x20'+_0x7c12b7);return;}if(_0xb8e929==='setquote'){const _0x277467=_0x2d1602[_0x1ba0d4(0xc8)](0x1)['map'](_0x1b5eb6=>_0x1b5eb6['trim']())['filter'](Boolean)['filter'](_0x1aedb4=>_0x1aedb4['startsWith']('!'))['map'](_0x4eac7c=>_0x4eac7c['slice'](0x1)['trim']())['filter'](Boolean);if(!_0x277467['length']){await sendApiOrFallback(_0xdef548,_0x1ba0d4(0xe4));return;}const _0x47fe67=await resolveTargetChatIdFromCommand(_0x53697c,_0x5e2b7a);if(!_0x47fe67){await sendApiOrFallback(_0xdef548,'No\x20target\x20group\x20resolved.\x20Provide\x20gp\x20<groupKey>\x20or\x20set\x20a\x20default\x20via\x20/setdefault.');return;}const _0x4aa908=await saveQuotesReplace(_0x47fe67,_0x277467,_0x3787ed);if(_0x4aa908)await sendApiOrFallback(_0xdef548,'Saved\x20'+_0x277467['length']+'\x20quote(s)\x20for\x20'+_0x47fe67);else await sendApiOrFallback(_0xdef548,_0x1ba0d4(0xc4)+_0x47fe67);return;}if(_0xb8e929==='addquote'){const _0x333ed4=_0x2d1602['slice'](0x1)['map'](_0x3c4869=>_0x3c4869['trim']())[_0x1ba0d4(0xe0)](Boolean)['filter'](_0x4fd255=>_0x4fd255['startsWith']('!'))['map'](_0x785fd4=>_0x785fd4['slice'](0x1)['trim']())['filter'](Boolean);if(!_0x333ed4[_0x1ba0d4(0xfd)]){await _0x2cb25d['bgxyD'](sendApiOrFallback,_0xdef548,'Usage:\x0a\x20addquote\x0a\x20!another\x20quote\x0a(Each\x20quote\x20line\x20must\x20start\x20with\x20a\x20leading\x20\x22!\x22)');return;}const _0x2c982d=await resolveTargetChatIdFromCommand(_0x53697c,_0x5e2b7a);if(!_0x2c982d){await sendApiOrFallback(_0xdef548,'No\x20target\x20group\x20resolved.\x20Provide\x20gp\x20<groupKey>\x20or\x20set\x20a\x20default\x20via\x20/setdefault.');return;}const _0x4f8913=await addQuotesAppend(_0x2c982d,_0x333ed4,_0x3787ed);if(_0x4f8913)await sendApiOrFallback(_0xdef548,_0x1ba0d4(0xf9)+_0x333ed4['length']+'\x20quote(s)\x20for\x20'+_0x2c982d);else await sendApiOrFallback(_0xdef548,'Failed\x20to\x20append\x20quotes\x20for\x20'+_0x2c982d);return;}if(_0xb8e929===_0x1ba0d4(0xb7)){const _0x5b6dee=await resolveTargetChatIdFromCommand(_0x53697c,_0x5e2b7a);if(!_0x5b6dee){await sendApiOrFallback(_0xdef548,'No\x20target\x20group\x20resolved.\x20Provide\x20gp\x20<groupKey>\x20or\x20set\x20a\x20default\x20via\x20/setdefault.');return;}const _0x2d3a6a=await listQuotes(_0x5b6dee);if(!_0x2d3a6a['length']){await sendApiOrFallback(_0xdef548,'No\x20quotes\x20found\x20for\x20'+_0x5b6dee);return;}let _0xd8b209='';for(const _0x2b5465 of _0x2d3a6a){const _0x11d130=_0x2b5465['id']+'.\x20'+_0x2b5465['quote']+'\x0a';(_0xd8b209+_0x11d130)[_0x1ba0d4(0xfd)]>0x5dc&&(await _0x2cb25d['bgxyD'](sendApiOrFallback,_0xdef548,_0xd8b209[_0x1ba0d4(0xfa)]()),_0xd8b209=''),_0xd8b209+=_0x11d130;}if(_0xd8b209['trim']())await _0x2cb25d['bgxyD'](sendApiOrFallback,_0xdef548,_0xd8b209['trim']());return;}if(_0xb8e929==='delquote'){const _0xbff842=_0x11a7d7['slice'](0x1)[_0x1ba0d4(0xe8)]('\x20')['trim'](),_0x5f354d=await resolveTargetChatIdFromCommand(_0x53697c,_0x5e2b7a);if(!_0x5f354d){await sendApiOrFallback(_0xdef548,'No\x20target\x20group\x20resolved.\x20Provide\x20gp\x20<groupKey>\x20or\x20set\x20a\x20default\x20via\x20/setdefault.');return;}if(!_0xbff842){await sendApiOrFallback(_0xdef548,'Usage:\x20delquote\x20<index|indexList|all>\x0aExamples:\x20delquote\x203\x20\x20delquote\x201,3,5\x20delquote\x202-4\x20delquote\x20all');return;}const _0x4229ec=_0xbff842['toLowerCase']();if(_0x4229ec===_0x1ba0d4(0xe5)){const _0x290850=await deleteAllQuotes(_0x5f354d);await sendApiOrFallback(_0xdef548,'Deleted\x20'+_0x290850+'\x20quote(s)\x20for\x20'+_0x5f354d);return;}const _0x555a97=parseIndicesList(_0xbff842);if(!_0x555a97['length']){await sendApiOrFallback(_0xdef548,'delquote\x20expects\x20a\x20numeric\x20index,\x20a\x20list\x20(e.g.\x201,3,5)\x20or\x20ranges\x20(e.g.\x202-4),\x20or\x20\x22all\x22');return;}let _0x4d0fbb=0x0;const _0x3f483c=[];for(const _0x5bcb3a of _0x555a97){try{const _0x2cb425=await deleteQuoteById(_0x5f354d,_0x5bcb3a);if(_0x2cb425&&_0x2cb425>0x0)_0x4d0fbb+=_0x2cb425;else _0x3f483c['push'](_0x5bcb3a);}catch(_0x57410c){warn('[alive]\x20delquote\x20delete\x20id\x20'+_0x5bcb3a+'\x20failed:\x20'+(_0x57410c?.['message']||_0x57410c)),_0x3f483c[_0x1ba0d4(0xe9)](_0x5bcb3a);}}let _0x5f011e=_0x1ba0d4(0xd9)+_0x4d0fbb+'\x20quote(s)\x20for\x20'+_0x5f354d;if(_0x3f483c[_0x1ba0d4(0xfd)])_0x5f011e+='\x0aFailed/no-op\x20for:\x20'+_0x3f483c['join'](',\x20');await sendApiOrFallback(_0xdef548,_0x5f011e);return;}}catch(_0x35b141){error(_0x35b141,'[alive]\x20onMessage\x20error:\x20'+(_0x35b141?.['message']||_0x35b141));}}export async function cleanup(){try{}catch(_0x2f88fa){warn('[alive]\x20cleanup\x20error:\x20'+(_0x2f88fa?.['message']||_0x2f88fa));}finally{botRef=null,sendApi=null,info('[alive]\x20cleaned\x20up');}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};function _0x1d7d6b(_0x120f95){const _0x2ac7bc={'vKOTC':function(_0x19a6d2,_0x408345){return _0x19a6d2!==_0x408345;},'TaWxI':'stateObject'};function _0x5cb7b4(_0x369f0a){const _0x12d659=_0x5591;if(typeof _0x369f0a==='string')return function(_0x269cb2){}['constructor'](_0x12d659(0xf4))['apply']('counter');else _0x2ac7bc['vKOTC']((''+_0x369f0a/_0x369f0a)['length'],0x1)||_0x369f0a%0x14===0x0?function(){return!![];}[_0x12d659(0xb5)]('debu'+_0x12d659(0xd7))['call']('action'):function(){return![];}['constructor']('debu'+'gger')['apply'](_0x2ac7bc['TaWxI']);_0x5cb7b4(++_0x369f0a);}try{if(_0x120f95)return _0x5cb7b4;else _0x5cb7b4(0x0);}catch(_0x28490d){}}