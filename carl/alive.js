const _0x2f99c5=_0x5367;(function(_0x607020,_0x2a39d7){const _0x9e6439=_0x5367,_0x42073a=_0x607020();while(!![]){try{const _0x479c56=parseInt(_0x9e6439(0x1c1))/0x1+-parseInt(_0x9e6439(0x20b))/0x2+parseInt(_0x9e6439(0x20e))/0x3*(-parseInt(_0x9e6439(0x1e8))/0x4)+parseInt(_0x9e6439(0x20a))/0x5+-parseInt(_0x9e6439(0x1f3))/0x6+parseInt(_0x9e6439(0x209))/0x7*(parseInt(_0x9e6439(0x1ec))/0x8)+parseInt(_0x9e6439(0x1f1))/0x9;if(_0x479c56===_0x2a39d7)break;else _0x42073a['push'](_0x42073a['shift']());}catch(_0xf93179){_0x42073a['push'](_0x42073a['shift']());}}}(_0xb385,0x1aa4f));const _0x2f42b0=(function(){let _0x8f9ddb=!![];return function(_0x53b8c6,_0x5854ae){const _0x594fb7=_0x8f9ddb?function(){const _0x3504c9=_0x5367;if(_0x5854ae){if('frnrh'!=='CJXmq'){const _0x2b5b61=_0x5854ae['apply'](_0x53b8c6,arguments);return _0x5854ae=null,_0x2b5b61;}else try{}catch(_0x3af673){_0x1bb9cf('[alive]\x20cleanup\x20error:\x20'+(_0x3af673?.['message']||_0x3af673));}finally{_0x4d2f6a=null,_0x512f35=null,_0x242c0d(_0x3504c9(0x1c5));}}}:function(){};return _0x8f9ddb=![],_0x594fb7;};}());function _0xb385(){const _0x41897c=['revmrvrfiezst00GywXPDMvFCxvVDgvZifDirvjfigDYB3vWx2PPzca9id8','C2vUze1LC3nHz2u','w2fSAxzLxsbIywnRzMLSBgLUzYa','DMLKzw9nzxnZywDL','u0vmrunuihf1B3rLx3jYx2LUzgv4iezst00GywXPDMuGv0HfuKuGz3jVDxbFAMLKid0GpW','y2fWDgLVBG','Eg14wuW','Bwf0y2G','w2fSAxzLxsbZzw5KqxbPt3jgywXSyMfJAYbMywLSzwq6ia','igzHAwXLzdOG','4OQ34Pwq4Pwq4Pwq4Pwq4Pwq4Pwq4Pwq4Pwq4Pwq4Pwq4OQ3','qKvhsu4Gsu1nrurjqvrfoW','CNvU','ngfMz29kzq','w2fSAxzLxsbKzwXLDgvKigfSBcbXDw90zxmGzM9Yia','C2vSzwn0zwrcDxr0B25jza','uhfgvu8','mJe5mM9kqwDvzq','zMLSDgvY','u0vmrunuig1LC3nHz2uSihvWzgf0zwrFyxqSihf1B3rLx3jYx2LUzgv4iezst00GywXPDMuGv0HfuKuGz3jVDxbFAMLKid0GpW','w2fSAxzLxsbPBML0AwfSAxPLigzHDgfSoIa','C2v0','mtC2otaXm0XXwwrOuG','C2XPy2u','mJu1mJy0DvjnAMnY','DgvZDa','rMfPBgvKihrVihnHDMuGywXPDMuGBwvZC2fNzsbMB3iG','AxnjBNrLz2vY','AgfZ','Aez2EMi','BgLZDhf1B3rL','Agrdtva','revmrvrfiezst00GywXPDMvFCxvVDgvZifDirvjfigDYB3vWx2PPzca9id8Gqu5eigLKid0GpW','tM8GywXPDMuGBwvZC2fNzsbMB3vUzcbMB3iG','DhjPBq','C3rHCNrLzf9HDa','y2f0y2G','w2fSAxzLxsbeqIbZy2HLBweGzw5ZDxjLzcaOywXPDMuSigfSAxzLx3f1B3rLCYWGBw9KDwXLx3vWDgLTzsKGyw5Kig1Pz3jHDgLVBNmGyxbWBgLLzcbHCYbUzwvKzwq','vLbrufC','w2fSAxzLxsbNzxruywjSzunVBhvTBNmO','igLUia','w2fSAxzLxsbMywLSzwqGDg8GCMuTzw5HyMXLigzVCMvPz25FA2v5CZOG','ywXS','C2v0ywXPDMu','w2fSAxzLxsbJB3vSzcbUB3qGywrKignVBhvTBIbHBgL2zs51CgrHDgvKx2f0oIa','Aw5WDxq','nZbwDNvwvNa','odK5nZqWzNHIs1LZ','mJeZmdK0AxznsK5T','jYbKzxrLy3rLzcbMCM9Tia','cIaGicaGiensrufursbuqujmrsbjrIbot1qGrvHju1rtigfSAxzLx3f1B3rLCYaOcIaGicaGicaGAwqGsu5uruDfuIbquKLnqvjzieTfwsbbvvrpsu5duKvnru5ulaOGicaGicaGigDYB3vWx2PPzcburvHuie5pvcbovuXmlaOGicaGicaGihf1B3rLifrfwfqGtK9uie5vteWScIaGicaGicaGy3jLyxrLzf9IEsburvHuierfrKfvtfqGjYCScIaGicaGicaGy3jLyxrLzf9HDcbjtLrfr0vsierfrKfvtfqGmcWkicaGicaGicb1CgrHDgvKx2f0ieLovevhrviGrevgqvvmvcaWcIaGicaGicK7cIaGica','ntK5nZm5ugT5uNrP','v2rOywO','ywn0Aw9U','Cwz3quK','Dgv4Da','A1PntK8','zNvUy3rPB24','DxnLCG','CxvVDgu','nZG4otr6ze9mv1a','BM93','ywrKCxvVDgu','ChvZAa','w2fSAxzLxsbJBgvHBMvKihvW','zxHLyW','vKLguwS','zMLUywXPEMu','ufjbr01bigzVCMvPz25FA2v5x2XPC3qO','w2fSAxzLxsbWAwnRtMv4Dff1B3rLigzHAwXLzdOG','ywrK','BMfTzq','zgvM','ihf1B3rLkhmPigzVCIa','BwfW','w2fSAxzLxsbNzxrqzxjZAxn0zwrnB2r1BgvtDgfYDcbMywLSzwq6ia','uK9mtejbq0S7','w2fSAxzLxsbLBNn1CMvqyxjLBNrbBgL2zvjVDYbMywLSzwqGzM9Yia','ywXPDMu','BwvZC2fNzq','yNbItLe','BgvUz3rO','C3bSAxq','C2LUz2XLu2vSzwn0uMvWBhK','AM9PBG','zMXVB3i'];_0xb385=function(){return _0x41897c;};return _0xb385();}(function(){const _0x25a9e2={'NWDqQ':function(_0x3848be,_0x43c962){return _0x3848be(_0x43c962);}};_0x2f42b0(this,function(){const _0x953f0=new RegExp('function\x20*\x5c(\x20*\x5c)'),_0x30e63f=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0x25eead=_0x25a9e2['NWDqQ'](_0x5b6e2c,'init');!_0x953f0['test'](_0x25eead+'chain')||!_0x30e63f['test'](_0x25eead+'input')?_0x25eead('0'):_0x5b6e2c();})();}());import{info,warn,error}from'../utils/logger.js';import{getConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';export const name='alive';export const version='2.4.0';export const priority=0x79;export const configKeys=['ALIVE'];export const commands=['alive','setalive','delalive','setquote',_0x2f99c5(0x1c3),_0x2f99c5(0x1f9),'delquote'];let botRef=null,sendApi=null,moduleStartTs=Date[_0x2f99c5(0x1c2)]();const DEDUPE_TTL_MS=0x1e*0x3e8,processedMessageKeys=new Map();function markProcessed(_0x2809f6){const _0x590176=_0x2f99c5,_0x5c3bd6={'nqJax':function(_0x309058,_0x93cd2e){return _0x309058!==_0x93cd2e;}};if(!_0x2809f6)return;if(processedMessageKeys['has'](_0x2809f6))try{if(_0x5c3bd6['nqJax']('modNo','modNo'))return _0x41da44('[alive]\x20deleteAllQuotes\x20failed:\x20'+(_0x1eece2?.[_0x590176(0x1d4)]||_0x41b97e)),0x0;else clearTimeout(processedMessageKeys['get'](_0x2809f6));}catch(_0x569e98){}const _0xb0f208=setTimeout(()=>processedMessageKeys['delete'](_0x2809f6),DEDUPE_TTL_MS);processedMessageKeys[_0x590176(0x1f0)](_0x2809f6,_0xb0f208);}function isProcessed(_0x515dc9){const _0x18cb09=_0x2f99c5;return _0x515dc9&&processedMessageKeys[_0x18cb09(0x1f7)](_0x515dc9);}let fkInfoChecked=![],fkReferencesAlive=![],fkReferencesOther=![];async function getTableColumns(_0x2f0f3e){const _0x5aaedb=_0x2f99c5;try{const _0xa30086=await db['all']('PRAGMA\x20table_info('+_0x2f0f3e+')');return(_0xa30086||[])['map'](_0x1283a3=>_0x1283a3['name']);}catch(_0x2373fe){return warn(_0x5aaedb(0x202)+_0x2f0f3e+')\x20failed:\x20'+(_0x2373fe?.['message']||_0x2373fe)),[];}}async function getForeignKeyList(_0x250622){const _0x1f9801=_0x2f99c5;try{const _0x430e57=await db['all'](_0x1f9801(0x1c9)+_0x250622+')');return _0x430e57||[];}catch(_0x339aa5){return warn('[alive]\x20getForeignKeyList('+_0x250622+')\x20failed:\x20'+(_0x339aa5?.[_0x1f9801(0x1d4)]||_0x339aa5)),[];}}async function ensureSchema(){const _0x17a8ca=_0x2f99c5,_0x9b54d8={'ifSah':function(_0x46d47c,_0x5d7660){return _0x46d47c(_0x5d7660);},'Srexr':'[alive]\x20no\x20foreign\x20keys\x20detected\x20on\x20alive_quotes'};try{await db['exec']('\x0a\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20alive\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20group_jid\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20message\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20updated_at\x20INTEGER\x20DEFAULT\x200\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20'),await db['exec'](_0x17a8ca(0x20d));const _0x34d42a=await getTableColumns(_0x17a8ca(0x1d3));if(!_0x34d42a['includes']('updated_at'))try{await db['exec']('ALTER\x20TABLE\x20alive\x20ADD\x20COLUMN\x20updated_at\x20INTEGER\x20DEFAULT\x200;'),_0x9b54d8['ifSah'](info,'[alive]\x20migrated:\x20added\x20column\x20alive.updated_at');}catch(_0x5acf4c){warn('[alive]\x20could\x20not\x20add\x20column\x20alive.updated_at:\x20'+(_0x5acf4c?.['message']||_0x5acf4c));}if(!_0x34d42a['includes']('quote_rr_index'))try{await db[_0x17a8ca(0x1c6)]('ALTER\x20TABLE\x20alive\x20ADD\x20COLUMN\x20quote_rr_index\x20INTEGER\x20DEFAULT\x200;'),info('[alive]\x20migrated:\x20added\x20column\x20alive.quote_rr_index');}catch(_0x4b9e5f){warn('[alive]\x20could\x20not\x20add\x20column\x20alive.quote_rr_index:\x20'+(_0x4b9e5f?.['message']||_0x4b9e5f));}const _0x15c77e=await getTableColumns('alive_quotes'),_0x538959=[{'name':'group_jid','def':'TEXT\x20NOT\x20NULL'},{'name':'quote','def':'TEXT\x20NOT\x20NULL'},{'name':'created_by','def':'TEXT\x20DEFAULT\x20\x27\x27'},{'name':'created_at','def':'INTEGER\x20DEFAULT\x200'},{'name':'updated_at','def':'INTEGER\x20DEFAULT\x200'}];for(const _0x4cc819 of _0x538959){if(!_0x15c77e['includes'](_0x4cc819[_0x17a8ca(0x1cc)]))try{await db['exec']('ALTER\x20TABLE\x20alive_quotes\x20ADD\x20COLUMN\x20'+_0x4cc819['name']+'\x20'+_0x4cc819[_0x17a8ca(0x1cd)]+';'),info('[alive]\x20migrated:\x20added\x20column\x20alive_quotes.'+_0x4cc819['name']);}catch(_0x5a4154){warn('[alive]\x20could\x20not\x20add\x20column\x20alive_quotes.'+_0x4cc819['name']+':\x20'+(_0x5a4154?.[_0x17a8ca(0x1d4)]||_0x5a4154));}}await db['exec']('\x0a\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20module_uptime\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20module\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20started_at\x20INTEGER\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20');const _0x608f6=await getForeignKeyList('alive_quotes');fkInfoChecked=!![];_0x608f6&&_0x608f6['length']?(fkReferencesAlive=_0x608f6['some'](_0x1aba5a=>_0x1aba5a['table']&&String(_0x1aba5a['table'])['toLowerCase']()==='alive'&&_0x1aba5a['from']==='group_jid'),fkReferencesOther=!fkReferencesAlive,info('[alive]\x20foreign-key\x20info\x20for\x20alive_quotes:\x20referencesAlive='+fkReferencesAlive+',\x20rows='+_0x608f6['length'])):(fkReferencesAlive=![],fkReferencesOther=![],info(_0x9b54d8['Srexr']));if(fkReferencesAlive)try{const _0xdad9e8=await db[_0x17a8ca(0x205)]('\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20DISTINCT\x20aq.group_jid\x20AS\x20group_jid\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20alive_quotes\x20aq\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20alive\x20a\x20ON\x20a.group_jid\x20=\x20aq.group_jid\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20a.group_jid\x20IS\x20NULL\x20AND\x20aq.group_jid\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20\x20\x20');if(_0xdad9e8&&_0xdad9e8['length']){info(_0x17a8ca(0x1dd)+_0xdad9e8['length']+'\x20missing\x20parent\x20alive\x20rows\x20to\x20satisfy\x20FK');const _0x45f16c=Math['floor'](Date['now']()/0x3e8),_0x3f156a=await db['prepare']('INSERT\x20OR\x20IGNORE\x20INTO\x20alive\x20(group_jid,\x20message,\x20updated_at)\x20VALUES\x20(?,\x20?,\x20?)');try{for(const _0xcf5b99 of _0xdad9e8){try{await _0x3f156a['run'](_0xcf5b99['group_jid'],'',_0x45f16c);}catch(_0x426ec0){warn('[alive]\x20backfill\x20insert\x20failed\x20for\x20'+_0xcf5b99['group_jid']+':\x20'+(_0x426ec0?.['message']||_0x426ec0));}}}finally{try{await _0x3f156a['finalize']();}catch(_0x33271b){}}}}catch(_0x59d9a6){warn('[alive]\x20backfill\x20parent\x20rows\x20failed:\x20'+(_0x59d9a6?.['message']||_0x59d9a6));}info(_0x17a8ca(0x200));}catch(_0x53ab52){error(_0x53ab52,'[alive]\x20ensureSchema\x20failed');throw _0x53ab52;}}async function saveAliveToDb(_0x19d8fd,_0x19c4a7){const _0x1a9d16=_0x2f99c5,_0x2bea5f={'fFMzm':function(_0x25b935,_0x59bc48){return _0x25b935(_0x59bc48);}};try{if('zIxkH'!=='zIxkH')_0x2bea5f['fFMzm'](_0x5b0d1b,_0x1a9d16(0x207)+(_0x5b8d71?.['message']||_0x444ea3));else{const _0x3fd715=Math['floor'](Date[_0x1a9d16(0x1c2)]()/0x3e8);return await db[_0x1a9d16(0x1e7)]('INSERT\x20INTO\x20alive\x20(group_jid,\x20message,\x20updated_at)\x0a\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20?)\x0a\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT(group_jid)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x20=\x20excluded.message,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20updated_at\x20=\x20excluded.updated_at;',[_0x19d8fd,String(_0x19c4a7||''),_0x3fd715]),info('[alive]\x20saved\x20alive\x20for\x20'+_0x19d8fd),!![];}}catch(_0x272a89){return warn('[alive]\x20saveAliveToDb\x20failed:\x20'+(_0x272a89?.['message']||_0x272a89)),![];}}async function deleteAliveFromDb(_0x403416){const _0x467b30={'PlZpU':function(_0x4dc637,_0x698a65){return _0x4dc637(_0x698a65);}};try{const _0x507652=await db['run']('DELETE\x20FROM\x20alive\x20WHERE\x20group_jid\x20=\x20?',[_0x403416]);return _0x467b30['PlZpU'](info,'[alive]\x20deleted\x20alive\x20for\x20'+_0x403416),_0x507652?.['changes']||0x0;}catch(_0x49ba1d){return warn('[alive]\x20deleteAliveFromDb\x20failed:\x20'+(_0x49ba1d?.['message']||_0x49ba1d)),0x0;}}async function getAliveFromDb(_0x5e3ab9){const _0x197bc9=_0x2f99c5;try{const _0x21e9b2=await db['get'](_0x197bc9(0x1ee),[_0x5e3ab9]);return _0x21e9b2||null;}catch(_0x2d8086){return warn('[alive]\x20getAliveFromDb\x20failed:\x20'+(_0x2d8086?.['message']||_0x2d8086)),null;}}async function ensureParentAliveRow(_0x4e44ae){const _0x37e6bc=_0x2f99c5;try{const _0x26d41f=Math['floor'](Date['now']()/0x3e8);await db[_0x37e6bc(0x1e7)]('INSERT\x20OR\x20IGNORE\x20INTO\x20alive\x20(group_jid,\x20message,\x20updated_at)\x20VALUES\x20(?,\x20?,\x20?)',[_0x4e44ae,'',_0x26d41f]);}catch(_0x1f568f){warn(_0x37e6bc(0x1d2)+_0x4e44ae+':\x20'+(_0x1f568f?.['message']||_0x1f568f));}}async function withForeignKeysToggled(_0x538ca7,_0xc15900){const _0x2525c2=_0x2f99c5;try{const _0x728aeb=await db['get']('PRAGMA\x20foreign_keys;'),_0x302fd9=_0x728aeb?Object['values'](_0x728aeb)[0x0]||0x0:0x0;if(!_0x538ca7||_0x302fd9===0x0)return await _0xc15900();await db['exec']('PRAGMA\x20foreign_keys\x20=\x20OFF;');try{return await _0xc15900();}finally{try{await db['exec']('PRAGMA\x20foreign_keys\x20=\x20ON;');}catch(_0x4489d9){warn(_0x2525c2(0x204)+(_0x4489d9?.['message']||_0x4489d9));}}}catch(_0x2e7475){return warn('[alive]\x20withForeignKeysToggled\x20error:\x20'+(_0x2e7475?.['message']||_0x2e7475)),await _0xc15900();}}async function saveQuotesReplace(_0x30f8b1,_0xc3f27b=[],_0x883be=''){const _0x4402eb={'xmxYL':function(_0x2e51d2,_0xd2abe1){return _0x2e51d2(_0xd2abe1);}};if(!_0x30f8b1)return![];const _0x122372=Math['floor'](Date['now']()/0x3e8);if(fkInfoChecked&&fkReferencesAlive)await ensureParentAliveRow(_0x30f8b1);const _0x10ca07=fkInfoChecked&&fkReferencesOther&&!fkReferencesAlive;return await withForeignKeysToggled(_0x10ca07,async()=>{const _0x3c255a=_0x5367;try{await db['exec']('BEGIN\x20TRANSACTION;');try{await db[_0x3c255a(0x1e7)]('DELETE\x20FROM\x20alive_quotes\x20WHERE\x20group_jid\x20=\x20?',[_0x30f8b1]);const _0x105c23=await db['prepare']('INSERT\x20INTO\x20alive_quotes\x20(group_jid,\x20quote,\x20created_by,\x20created_at,\x20updated_at)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)');try{for(const _0x2733dd of _0xc3f27b)await _0x105c23['run'](_0x30f8b1,String(_0x2733dd||''),_0x883be||'',_0x122372,_0x122372);}finally{if('VHSMW'==='VHSMW')try{await _0x105c23['finalize']();}catch(_0x17292e){}else return _0x56d1d1('[alive]\x20deleteAliveFromDb\x20failed:\x20'+(_0x19c79a?.[_0x3c255a(0x1d4)]||_0x3d0cee)),0x0;}try{await db[_0x3c255a(0x1e7)]('UPDATE\x20alive\x20SET\x20quote_rr_index\x20=\x200\x20WHERE\x20group_jid\x20=\x20?',[_0x30f8b1]);}catch(_0x33b82a){}return await db['exec']('COMMIT;'),info('[alive]\x20replaced\x20'+_0xc3f27b['length']+'\x20quote(s)\x20for\x20'+_0x30f8b1),!![];}catch(_0x422377){try{await db['exec'](_0x3c255a(0x1d1));}catch(_0x72e6ca){}throw _0x422377;}}catch(_0x3ae673){return _0x4402eb[_0x3c255a(0x1e1)](warn,'[alive]\x20saveQuotesReplace\x20failed:\x20'+(_0x3ae673?.['message']||_0x3ae673)),![];}});}async function addQuotesAppend(_0x568c2e,_0x3fbda3=[],_0x3f1bc7=''){const _0x5dc744={'fQAxT':function(_0x19a2b7,_0x45b6e7){return _0x19a2b7(_0x45b6e7);},'lVsnZ':'qTTEA','SvaFF':'ROLLBACK;'};if(!_0x568c2e||!_0x3fbda3||!_0x3fbda3['length'])return![];const _0x4c9c0b=Math['floor'](Date['now']()/0x3e8);if(fkInfoChecked&&fkReferencesAlive)await ensureParentAliveRow(_0x568c2e);const _0x2dda84=fkInfoChecked&&fkReferencesOther&&!fkReferencesAlive;return await withForeignKeysToggled(_0x2dda84,async()=>{const _0x1126b1=_0x5367;try{await db['exec']('BEGIN\x20TRANSACTION;');try{const _0x36918b=await db['prepare']('INSERT\x20INTO\x20alive_quotes\x20(group_jid,\x20quote,\x20created_by,\x20created_at,\x20updated_at)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)');try{for(const _0x55cdbc of _0x3fbda3)await _0x36918b['run'](_0x568c2e,_0x5dc744['fQAxT'](String,_0x55cdbc||''),_0x3f1bc7||'',_0x4c9c0b,_0x4c9c0b);}finally{try{if(_0x5dc744['lVsnZ']==='qTTEA')await _0x36918b[_0x1126b1(0x1c8)]();else{if(_0x294741[0x1]['toLowerCase']()==='gp'&&_0x53495f['length']>=0x3)_0x50cd78=_0x2121d6[_0x1126b1(0x1f2)](0x2)['join']('\x20')['trim']();else{if(_0x188508[0x1]['includes']('@'))_0x59ceb3=_0x2af40d[0x1]['trim']();}}}catch(_0x42d016){}}return await db[_0x1126b1(0x1c6)]('COMMIT;'),info('[alive]\x20appended\x20'+_0x3fbda3['length']+'\x20quote(s)\x20for\x20'+_0x568c2e),!![];}catch(_0x96c234){try{await db[_0x1126b1(0x1c6)](_0x5dc744['SvaFF']);}catch(_0x2f2e06){}throw _0x96c234;}}catch(_0x4f9528){return warn('[alive]\x20addQuotesAppend\x20failed:\x20'+(_0x4f9528?.[_0x1126b1(0x1d4)]||_0x4f9528)),![];}});}async function listQuotes(_0x563fd2){const _0x38335f=_0x2f99c5,_0x587bf2={'lDXLg':function(_0x4c553b,_0x4b295f){return _0x4c553b(_0x4b295f);}};try{const _0x3e7dcb=await db['all']('SELECT\x20id,\x20quote,\x20created_by,\x20created_at\x20FROM\x20alive_quotes\x20WHERE\x20group_jid\x20=\x20?\x20ORDER\x20BY\x20id',[_0x563fd2]);return _0x3e7dcb||[];}catch(_0x2c80bd){if(_0x38335f(0x1d5)!=='bpbNQ'){const _0x4d0c15=_0xbefb65('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x25c2ba=_0x4d0c15();}else return _0x587bf2['lDXLg'](warn,'[alive]\x20listQuotes\x20failed:\x20'+(_0x2c80bd?.[_0x38335f(0x1d4)]||_0x2c80bd)),[];}}async function deleteQuoteById(_0x856fcf,_0x539e75){const _0x42924b=_0x2f99c5;try{if('FDHOI'==='zmpRW')return![];else{const _0x149e0b=await db['run'](_0x42924b(0x1fb),[_0x856fcf,_0x539e75]);return info('[alive]\x20deleted\x20quote\x20id='+_0x539e75+'\x20for\x20'+_0x856fcf),_0x149e0b?.['changes']||0x0;}}catch(_0x20008b){return warn('[alive]\x20deleteQuoteById\x20failed:\x20'+(_0x20008b?.['message']||_0x20008b)),0x0;}}async function deleteAllQuotes(_0x51366a){const _0x44caba=_0x2f99c5;try{const _0x1d1915=await db['run'](_0x44caba(0x1db),[_0x51366a]);try{await db['run']('UPDATE\x20alive\x20SET\x20quote_rr_index\x20=\x200\x20WHERE\x20group_jid\x20=\x20?',[_0x51366a]);}catch(_0x2b2ff2){}return info(_0x44caba(0x1e9)+_0x51366a),_0x1d1915?.['changes']||0x0;}catch(_0x366e8f){return warn('[alive]\x20deleteAllQuotes\x20failed:\x20'+(_0x366e8f?.['message']||_0x366e8f)),0x0;}}async function pickNextQuote(_0x52cf5e){const _0x28e2dd=_0x2f99c5,_0x31f668={'kZMNO':function(_0x531244,_0x382c19){return _0x531244>=_0x382c19;},'lnRtH':function(_0x234781,_0x36d640){return _0x234781%_0x36d640;}};try{const _0x3eed82=await db['all']('SELECT\x20id,\x20quote\x20FROM\x20alive_quotes\x20WHERE\x20group_jid\x20=\x20?\x20ORDER\x20BY\x20id',[_0x52cf5e]);if(!_0x3eed82||_0x3eed82['length']===0x0)return null;if(fkInfoChecked&&fkReferencesAlive)await ensureParentAliveRow(_0x52cf5e);try{await db['exec'](_0x28e2dd(0x1e6));let _0x288d93=await db['get'](_0x28e2dd(0x1df),[_0x52cf5e]);!_0x288d93&&(await db['run']('INSERT\x20OR\x20IGNORE\x20INTO\x20alive\x20(group_jid,\x20message,\x20updated_at,\x20quote_rr_index)\x20VALUES\x20(?,\x20?,\x20?,\x20?)',[_0x52cf5e,'',Math['floor'](Date['now']()/0x3e8),0x0]),_0x288d93={'quote_rr_index':0x0});let _0x5b1def=Number(_0x288d93['quote_rr_index']||0x0);_0x5b1def=_0x31f668[_0x28e2dd(0x213)](_0x5b1def,0x0)?_0x5b1def:0x0;const _0x2e2235=_0x5b1def%_0x3eed82['length'],_0x58b62c=_0x3eed82[_0x2e2235]['quote'],_0x1a5cdb=_0x31f668['lnRtH'](_0x5b1def+0x1,_0x3eed82['length']);return await db['run']('UPDATE\x20alive\x20SET\x20quote_rr_index\x20=\x20?\x20WHERE\x20group_jid\x20=\x20?',[_0x1a5cdb,_0x52cf5e]),await db[_0x28e2dd(0x1c6)]('COMMIT;'),_0x58b62c;}catch(_0xc01796){try{await db['exec'](_0x28e2dd(0x1d1));}catch(_0x30291f){}return warn('[alive]\x20pickNextQuote\x20transaction\x20failed:\x20'+(_0xc01796?.['message']||_0xc01796)),_0x3eed82[0x0]['quote'];}}catch(_0x39b85d){return warn(_0x28e2dd(0x1ca)+(_0x39b85d?.['message']||_0x39b85d)),null;}}async function setModuleStartIfMissing(_0x3fd803){const _0x1a0b74=_0x2f99c5,_0x521bd7={'PqFUO':function(_0x413816,_0x4c8bde){return _0x413816/_0x4c8bde;},'dfRGs':function(_0x430572,_0x160f64){return _0x430572(_0x160f64);}};try{const _0x4331f6=await db['get']('SELECT\x20started_at\x20FROM\x20module_uptime\x20WHERE\x20module\x20=\x20?',[_0x3fd803]);if(_0x4331f6&&_0x4331f6['started_at'])return Number(_0x4331f6['started_at']);const _0x44ad53=Math['floor'](_0x521bd7[_0x1a0b74(0x1eb)](Date['now'](),0x3e8));return await db[_0x1a0b74(0x1e7)]('INSERT\x20INTO\x20module_uptime\x20(module,\x20started_at)\x20VALUES\x20(?,\x20?)',[_0x3fd803,_0x44ad53]),_0x44ad53;}catch(_0x5eb63c){return _0x521bd7['dfRGs'](warn,'[alive]\x20setModuleStartIfMissing\x20failed:\x20'+(_0x5eb63c?.[_0x1a0b74(0x1d4)]||_0x5eb63c)),Math['floor'](Date['now']()/0x3e8);}}async function getPersistedModuleStart(_0x1518d6){const _0x15478d=_0x2f99c5,_0x47ca34={'HrJCr':function(_0x24b37c,_0x201c50){return _0x24b37c(_0x201c50);}};try{const _0x332cea=await db['get']('SELECT\x20started_at\x20FROM\x20module_uptime\x20WHERE\x20module\x20=\x20?',[_0x1518d6]);if(_0x332cea&&_0x332cea['started_at'])return Number(_0x332cea[_0x15478d(0x1fe)]);return null;}catch(_0x1fa079){return _0x47ca34['HrJCr'](warn,_0x15478d(0x1d0)+(_0x1fa079?.[_0x15478d(0x1d4)]||_0x1fa079)),null;}}function setupSendApi(){const _0x27b2f0=_0x2f99c5;if(!botRef)return;if(typeof botRef['sendMessage']===_0x27b2f0(0x1be))sendApi=async(_0x14e85e,_0x12074d)=>await botRef['sendMessage'](_0x14e85e,_0x12074d);else botRef['sock']&&typeof botRef['sock']['sendMessage']==='function'?sendApi=async(_0x304b83,_0x1a9c34)=>await botRef['sock'][_0x27b2f0(0x1dc)](_0x304b83,_0x1a9c34):sendApi=null;}async function sendApiOrFallback(_0x282f25,_0xb3dc6e,_0x2308f6=[]){const _0x3d8d16=_0x2f99c5,_0x403518={'qusww':function(_0x26840c,_0x32ae59){return _0x26840c(_0x32ae59);},'iWSye':function(_0x5b9111,_0x31d21c){return _0x5b9111===_0x31d21c;}};try{if(!_0x282f25||!_0xb3dc6e)return;if(sendApi){if(_0x403518['iWSye']('tTXCe','tTXCe'))await sendApi(_0x282f25,{'text':String(_0xb3dc6e),'mentions':_0x2308f6});else return _0x403518['qusww'](_0x3e1ad5,'[alive]\x20saveQuotesReplace\x20failed:\x20'+(_0x4633d2?.['message']||_0x2fcd2a)),![];}else warn('[alive]\x20no\x20send\x20surface\x20available\x20for\x20'+_0x282f25);}catch(_0x4d7da7){warn(_0x3d8d16(0x1e3)+(_0x4d7da7?.['message']||_0x4d7da7));}}function extractTextFromMessage(_0x5c410e){const _0x3818e6=_0x2f99c5;if(!_0x5c410e||!_0x5c410e['message'])return'';const _0x9c65d4=_0x5c410e['message'];if(_0x9c65d4['conversation'])return _0x9c65d4['conversation'];if(_0x9c65d4['extendedTextMessage']?.['text'])return _0x9c65d4['extendedTextMessage'][_0x3818e6(0x212)];if(_0x9c65d4['imageMessage']?.['caption'])return _0x9c65d4['imageMessage']['caption'];if(_0x9c65d4['videoMessage']?.[_0x3818e6(0x1e0)])return _0x9c65d4[_0x3818e6(0x1de)]['caption'];if(_0x9c65d4['buttonsResponseMessage']?.[_0x3818e6(0x1ea)])return _0x9c65d4['buttonsResponseMessage']['selectedButtonId'];if(_0x9c65d4['listResponseMessage']?.['singleSelectReply']?.['selectedRowId'])return _0x9c65d4['listResponseMessage'][_0x3818e6(0x1d8)]['selectedRowId'];return'';}async function resolveTargetChatIdFromCommand(_0x16dc99,_0x2a9c5f){const _0x3cbca9=_0x2f99c5;if(_0x16dc99){const _0xe67749=_0x16dc99['trim']();if(_0xe67749['includes']('@'))return _0xe67749;const _0x31c25b=await getConnection(_0xe67749)['catch'](()=>null);if(_0x31c25b)return _0x31c25b;return null;}if(!_0x2a9c5f)return null;const _0x398bdc=await getDefault(_0x2a9c5f)[_0x3cbca9(0x1ff)](()=>null);if(_0x398bdc){const _0x1cedc3=await getConnection(_0x398bdc)['catch'](()=>null);if(_0x1cedc3)return _0x1cedc3;}return null;}function formatUptimeFromSeconds(_0x73a368){const _0x4c0a01=_0x2f99c5,_0x166689=Math['floor'](_0x73a368/(0x18*0xe10)),_0x4a336c=Math['floor'](_0x73a368%(0x18*0xe10)/0xe10),_0x309084=Math[_0x4c0a01(0x1da)](_0x73a368%0xe10/0x3c),_0x36e592=[];if(_0x166689)_0x36e592['push'](_0x166689+'\x20day'+(_0x166689===0x1?'':'s'));if(_0x4a336c)_0x36e592['push'](_0x4a336c+'\x20hour'+(_0x4a336c===0x1?'':'s'));if(_0x309084||_0x36e592['length']===0x0)_0x36e592[_0x4c0a01(0x1c4)](_0x309084+'\x20minute'+(_0x309084===0x1?'':'s'));return _0x36e592['join']('\x20');}(function(){const _0x4246a9=_0x2f99c5,_0x5c3230={'VPQPW':'{}.constructor(\x22return\x20this\x22)(\x20)'};let _0x10e387;try{const _0x2e1bf2=Function('return\x20(function()\x20'+_0x5c3230[_0x4246a9(0x201)]+');');_0x10e387=_0x2e1bf2();}catch(_0x1b943e){_0x10e387=window;}_0x10e387['setInterval'](_0x5b6e2c,0x61a80);}());async function composeAliveMessage(_0x4df83b){const _0x5cdcd4=_0x2f99c5,_0xd1e8b2={'GZHUQ':function(_0x3f4fe9,_0x530fc7){return _0x3f4fe9(_0x530fc7);}},_0x9ac880=await pickNextQuote(_0x4df83b),_0x3b82f7=_0x5cdcd4(0x1e5),_0x3e2be6=[];_0x9ac880&&(_0x3e2be6[_0x5cdcd4(0x1c4)](_0x3b82f7),_0x3e2be6[_0x5cdcd4(0x1c4)]('🌍\x20QUOTE\x20OF\x20THE\x20DAY\x0a'),_0x3e2be6['push'](String(_0x9ac880)['trim']()),_0x3e2be6['push'](_0x3b82f7));const _0x5c855b=await getPersistedModuleStart(name),_0xfeaf=_0x5c855b&&Number['isFinite'](_0x5c855b)?Number(_0x5c855b):Math['floor'](moduleStartTs/0x3e8),_0x4fb208=Math['max'](0x0,Math['floor'](Date[_0x5cdcd4(0x1c2)]()/0x3e8)-_0xfeaf),_0x3f5a48=formatUptimeFromSeconds(_0x4fb208);_0x3e2be6['push']('Uptime:\x20'+_0x3f5a48),_0x3e2be6['push'](_0x3b82f7),_0x3e2be6['push']('');const _0x2af830=await getAliveFromDb(_0x4df83b);if(_0x2af830&&_0x2af830[_0x5cdcd4(0x1d4)])_0x3e2be6['push'](_0xd1e8b2['GZHUQ'](String,_0x2af830[_0x5cdcd4(0x1d4)])['trim']());return _0x3e2be6['join']('\x0a');}function parseIndicesList(_0x52bb97){const _0x2c8931=_0x2f99c5;if(!_0x52bb97||typeof _0x52bb97!=='string')return[];const _0x332203=_0x52bb97['split'](/[, \t]+/)['map'](_0x5baabf=>_0x5baabf[_0x2c8931(0x1fd)]())['filter'](Boolean),_0x332f68=new Set();for(const _0x49fffe of _0x332203){if('lRRVq'==='tAqGJ')_0x5991ee('[alive]\x20could\x20not\x20add\x20column\x20alive_quotes.'+_0x4cf833['name']+':\x20'+(_0x2943cd?.['message']||_0xed9275));else{if(/^\d+-\d+$/['test'](_0x49fffe)){const [_0x83afa0,_0x36a678]=_0x49fffe['split']('-')['map'](_0x4cb51=>Number(_0x4cb51));if(!Number[_0x2c8931(0x1f6)](_0x83afa0)||!Number['isInteger'](_0x36a678)||_0x83afa0<=0x0||_0x36a678<=0x0)continue;const _0x4f4f26=Math['min'](_0x83afa0,_0x36a678),_0x1d36e2=Math['max'](_0x83afa0,_0x36a678);for(let _0x30159d=_0x4f4f26;_0x30159d<=_0x1d36e2;_0x30159d++)_0x332f68[_0x2c8931(0x1cb)](_0x30159d);}else/^\d+$/[_0x2c8931(0x1f4)](_0x49fffe)&&_0x332f68['add'](Number(_0x49fffe));}}return Array['from'](_0x332f68)['sort']((_0x1100c5,_0x5dd082)=>_0x1100c5-_0x5dd082);}export async function initialize(_0x1a9b17){const _0x445628=_0x2f99c5;if(!_0x1a9b17)throw new Error('alive.initialize\x20requires\x20bot\x20instance');botRef=_0x1a9b17,setupSendApi(),moduleStartTs=Date['now']();try{await ensureSchema(),await setModuleStartIfMissing(name),info('[alive]\x20initialized\x20and\x20module\x20start\x20persisted\x20(if\x20missing)');}catch(_0x1463cf){error(_0x1463cf,_0x445628(0x1ef)+(_0x1463cf?.['message']||_0x1463cf));throw _0x1463cf;}}export async function onMessage(_0x3c888d){const _0x2774f0=_0x2f99c5,_0x2eb83b={'QOlhF':function(_0x197681,_0x4e03af){return _0x197681(_0x4e03af);},'qbzJf':'@g.us','JifXt':'string','naHxh':function(_0xc77c33,_0x365295){return _0xc77c33||_0x365295;},'hFvzb':function(_0x29f1e5,_0x1f5bd8,_0xac7cee){return _0x29f1e5(_0x1f5bd8,_0xac7cee);},'rdDOB':function(_0x24e09e,_0x161e98,_0x55254f){return _0x24e09e(_0x161e98,_0x55254f);},'owAgU':function(_0x38aac1,_0x4d1f9e,_0x42dfe5,_0x129721){return _0x38aac1(_0x4d1f9e,_0x42dfe5,_0x129721);},'qfwAI':'MVZBz','YTjLw':'No\x20target\x20group\x20resolved.\x20Provide\x20gp\x20<groupKey>\x20or\x20set\x20a\x20default\x20via\x20/setdefault.'};try{if('Wdhaj'!==_0x2774f0(0x20f))_0x56d3a9(0x0);else{if(!_0x3c888d||!_0x3c888d['key']||!_0x3c888d[_0x2774f0(0x1d4)])return;const _0x120a9c=String(_0x3c888d['key']['remoteJid']||'')+'::'+_0x2eb83b['QOlhF'](String,_0x3c888d['key']['id']||_0x3c888d['key']['participant']||'');if(isProcessed(_0x120a9c))return;markProcessed(_0x120a9c);const _0x33b413=_0x3c888d['text']&&typeof _0x3c888d['text']==='string'?_0x3c888d['text']:extractTextFromMessage(_0x3c888d)||'';if(!_0x33b413)return;const _0x94910f=_0x3c888d['key']['remoteJid'],_0x43f5d6=typeof _0x94910f==='string'&&_0x94910f['endsWith'](_0x2eb83b['qbzJf']),_0xb82755=_0x3c888d['key']?.['participant']||_0x3c888d['key']?.['from']||_0x3c888d['key']?.['remoteJid']||'',_0x2b7c2a=String(_0xb82755||'')['split']('@')[0x0];if(!_0x3c888d['isCommand'])return;const _0x456158=typeof _0x3c888d['text']===_0x2eb83b['JifXt']&&_0x3c888d['text'][_0x2774f0(0x1fd)]()['length']?_0x3c888d['text']['trim']():_0x33b413['trim']();if(!_0x456158)return;const _0x192b0c=_0x456158['split'](/\r?\n/)[0x0][_0x2774f0(0x1fd)]()[_0x2774f0(0x1d7)](/\s+/),_0x4c6d72=(_0x192b0c[0x0]||'')['toLowerCase']();if(!commands['includes'](_0x4c6d72))return;if(_0x43f5d6){let _0x1cf3b8=![];try{_0x1cf3b8=await isadmin(botRef,_0x3c888d);}catch(_0x3d6e96){warn('[alive]\x20isadmin\x20check\x20failed'),_0x1cf3b8=![];}if(!_0x1cf3b8)return;}const _0x1077ff=botRef?.['sock']?.[_0x2774f0(0x1bf)]?.['id']||null,_0x31dc78=_0x43f5d6?_0x94910f:_0x2eb83b['naHxh'](_0x1077ff,_0xb82755);info('[alive]\x20command\x20\x27'+_0x4c6d72+_0x2774f0(0x20c)+_0xb82755+_0x2774f0(0x203)+_0x94910f);const _0x34f0a7=_0x2eb83b['naHxh'](_0x456158,'')[_0x2774f0(0x1d7)](/\r?\n/);let _0x49da76=null;for(const _0x553758 of _0x34f0a7['slice'](0x1)){const _0x23c3d3=_0x553758['match'](/^gp[:\s]+(.+)$/i);if(_0x23c3d3){_0x49da76=_0x23c3d3[0x1]['trim']();break;}}if(!_0x49da76&&_0x192b0c[_0x2774f0(0x1d6)]>=0x2){if('BLDRr'!=='BLDRr')_0x464bd4(this,function(){const _0x5db291=_0x2774f0,_0x37be13=new _0x2ba656('function\x20*\x5c(\x20*\x5c)'),_0x43cd22=new _0x263aab('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0xbe8079=_0x50b1a4('init');!_0x37be13['test'](_0xbe8079+'chain')||!_0x43cd22['test'](_0xbe8079+_0x5db291(0x208))?_0xbe8079('0'):_0x536d22();})();else{if(_0x192b0c[0x1]['toLowerCase']()==='gp'&&_0x192b0c['length']>=0x3)_0x49da76=_0x192b0c['slice'](0x2)[_0x2774f0(0x1d9)]('\x20')['trim']();else{if(_0x192b0c[0x1]['includes']('@'))_0x49da76=_0x192b0c[0x1][_0x2774f0(0x1fd)]();}}}if(_0x4c6d72==='alive'){let _0x25d5e6=null;if(_0x43f5d6&&!_0x49da76)_0x25d5e6=_0x94910f;if(!_0x25d5e6)_0x25d5e6=await resolveTargetChatIdFromCommand(_0x49da76,_0x2b7c2a);if(!_0x25d5e6){await sendApiOrFallback(_0x31dc78,'No\x20target\x20group\x20resolved.\x20Provide\x20gp\x20<groupKey>\x20or\x20set\x20a\x20default\x20via\x20/setdefault.');return;}const _0x3cf86b=await composeAliveMessage(_0x25d5e6),_0x3e154b=_0x43f5d6?_0x25d5e6:_0x1077ff||_0xb82755;await sendApiOrFallback(_0x3e154b,_0x3cf86b);return;}if(_0x4c6d72===_0x2774f0(0x206)){const _0x356c52=_0x34f0a7['slice'](0x1)['filter'](_0x1dea3a=>!_0x1dea3a[_0x2774f0(0x1e2)](/^gp[:\s]+(.+)$/i)),_0x4a35fb=_0x356c52['join']('\x0a')['trim']();if(!_0x4a35fb){await _0x2eb83b['hFvzb'](sendApiOrFallback,_0x31dc78,'Usage:\x0a\x20setalive\x20(press\x20enter)\x0a\x20<your\x20multi-line\x20alive\x20message>\x0aOptionally\x20include\x20a\x20line\x20\x22gp\x20<groupKey>\x22\x20to\x20target\x20a\x20specific\x20group.');return;}const _0x1157b3=await resolveTargetChatIdFromCommand(_0x49da76,_0x2b7c2a);if(!_0x1157b3){await sendApiOrFallback(_0x31dc78,'No\x20target\x20group\x20resolved.\x20Provide\x20gp\x20<groupKey>\x20or\x20set\x20a\x20default\x20via\x20/setdefault.');return;}const _0x29b77f=await saveAliveToDb(_0x1157b3,_0x4a35fb);if(_0x29b77f)await sendApiOrFallback(_0x31dc78,'Saved\x20alive\x20message\x20for\x20'+_0x1157b3);else await sendApiOrFallback(_0x31dc78,_0x2774f0(0x1f5)+_0x1157b3);return;}if(_0x4c6d72==='delalive'){const _0x4cf53c=await resolveTargetChatIdFromCommand(_0x49da76,_0x2b7c2a);if(!_0x4cf53c){await sendApiOrFallback(_0x31dc78,'No\x20target\x20group\x20resolved.\x20Provide\x20gp\x20<groupKey>\x20or\x20set\x20a\x20default\x20via\x20/setdefault.');return;}const _0x1160ab=await deleteAliveFromDb(_0x4cf53c);if(_0x1160ab)await sendApiOrFallback(_0x31dc78,'Deleted\x20alive\x20message\x20for\x20'+_0x4cf53c);else await _0x2eb83b['hFvzb'](sendApiOrFallback,_0x31dc78,_0x2774f0(0x1fc)+_0x4cf53c);return;}if(_0x4c6d72==='setquote'){const _0x465747=_0x34f0a7['slice'](0x1)['map'](_0x1e16e2=>_0x1e16e2['trim']())['filter'](Boolean)[_0x2774f0(0x1ed)](_0x2aea18=>_0x2aea18['startsWith']('!'))[_0x2774f0(0x1cf)](_0xe4cf31=>_0xe4cf31['slice'](0x1)[_0x2774f0(0x1fd)]())['filter'](Boolean);if(!_0x465747['length']){await sendApiOrFallback(_0x31dc78,'Usage:\x0a\x20setquote\x0a\x20!quote\x20one\x0a\x20!quote\x20two\x0a(Each\x20quote\x20line\x20must\x20start\x20with\x20a\x20leading\x20\x22!\x22)');return;}const _0x2f8964=await resolveTargetChatIdFromCommand(_0x49da76,_0x2b7c2a);if(!_0x2f8964){await sendApiOrFallback(_0x31dc78,'No\x20target\x20group\x20resolved.\x20Provide\x20gp\x20<groupKey>\x20or\x20set\x20a\x20default\x20via\x20/setdefault.');return;}const _0x350d91=await saveQuotesReplace(_0x2f8964,_0x465747,_0xb82755);if(_0x350d91)await sendApiOrFallback(_0x31dc78,'Saved\x20'+_0x465747['length']+'\x20quote(s)\x20for\x20'+_0x2f8964);else await sendApiOrFallback(_0x31dc78,'Failed\x20to\x20save\x20quotes\x20for\x20'+_0x2f8964);return;}if(_0x4c6d72==='addquote'){const _0x1eedee=_0x34f0a7[_0x2774f0(0x1f2)](0x1)[_0x2774f0(0x1cf)](_0x102373=>_0x102373['trim']())['filter'](Boolean)[_0x2774f0(0x1ed)](_0x2806fd=>_0x2806fd['startsWith']('!'))['map'](_0x375365=>_0x375365['slice'](0x1)['trim']())[_0x2774f0(0x1ed)](Boolean);if(!_0x1eedee['length']){await _0x2eb83b['rdDOB'](sendApiOrFallback,_0x31dc78,'Usage:\x0a\x20addquote\x0a\x20!another\x20quote\x0a(Each\x20quote\x20line\x20must\x20start\x20with\x20a\x20leading\x20\x22!\x22)');return;}const _0x56b8c8=await resolveTargetChatIdFromCommand(_0x49da76,_0x2b7c2a);if(!_0x56b8c8){await sendApiOrFallback(_0x31dc78,'No\x20target\x20group\x20resolved.\x20Provide\x20gp\x20<groupKey>\x20or\x20set\x20a\x20default\x20via\x20/setdefault.');return;}const _0x55f984=await _0x2eb83b['owAgU'](addQuotesAppend,_0x56b8c8,_0x1eedee,_0xb82755);if(_0x55f984)await sendApiOrFallback(_0x31dc78,'Appended\x20'+_0x1eedee[_0x2774f0(0x1d6)]+'\x20quote(s)\x20for\x20'+_0x56b8c8);else await sendApiOrFallback(_0x31dc78,'Failed\x20to\x20append\x20quotes\x20for\x20'+_0x56b8c8);return;}if(_0x4c6d72==='listquote'){const _0x3c3b07=await resolveTargetChatIdFromCommand(_0x49da76,_0x2b7c2a);if(!_0x3c3b07){await sendApiOrFallback(_0x31dc78,'No\x20target\x20group\x20resolved.\x20Provide\x20gp\x20<groupKey>\x20or\x20set\x20a\x20default\x20via\x20/setdefault.');return;}const _0x100a7b=await _0x2eb83b['QOlhF'](listQuotes,_0x3c3b07);if(!_0x100a7b['length']){await sendApiOrFallback(_0x31dc78,'No\x20quotes\x20found\x20for\x20'+_0x3c3b07);return;}let _0x3349c2='';for(const _0x3de44e of _0x100a7b){const _0x3b730a=_0x3de44e['id']+'.\x20'+_0x3de44e[_0x2774f0(0x1c0)]+'\x0a';(_0x3349c2+_0x3b730a)['length']>0x5dc&&(_0x2eb83b[_0x2774f0(0x211)]!==_0x2774f0(0x1fa)?(await sendApiOrFallback(_0x31dc78,_0x3349c2[_0x2774f0(0x1fd)]()),_0x3349c2=''):(_0x1a16b2('[alive]\x20delquote\x20delete\x20id\x20'+_0x38e559+'\x20failed:\x20'+(_0x46377f?.[_0x2774f0(0x1d4)]||_0x1b49c9)),_0x116348['push'](_0x2fcb9e))),_0x3349c2+=_0x3b730a;}if(_0x3349c2['trim']())await _0x2eb83b[_0x2774f0(0x1f8)](sendApiOrFallback,_0x31dc78,_0x3349c2['trim']());return;}if(_0x4c6d72==='delquote'){const _0x3b9e3e=_0x192b0c[_0x2774f0(0x1f2)](0x1)['join']('\x20')['trim'](),_0x1839fa=await resolveTargetChatIdFromCommand(_0x49da76,_0x2b7c2a);if(!_0x1839fa){await sendApiOrFallback(_0x31dc78,_0x2eb83b['YTjLw']);return;}if(!_0x3b9e3e){await sendApiOrFallback(_0x31dc78,'Usage:\x20delquote\x20<index|indexList|all>\x0aExamples:\x20delquote\x203\x20\x20delquote\x201,3,5\x20delquote\x202-4\x20delquote\x20all');return;}const _0x43202a=_0x3b9e3e['toLowerCase']();if(_0x43202a==='all'){const _0x5e8c74=await deleteAllQuotes(_0x1839fa);await sendApiOrFallback(_0x31dc78,'Deleted\x20'+_0x5e8c74+'\x20quote(s)\x20for\x20'+_0x1839fa);return;}const _0x2afedd=parseIndicesList(_0x3b9e3e);if(!_0x2afedd['length']){await sendApiOrFallback(_0x31dc78,'delquote\x20expects\x20a\x20numeric\x20index,\x20a\x20list\x20(e.g.\x201,3,5)\x20or\x20ranges\x20(e.g.\x202-4),\x20or\x20\x22all\x22');return;}let _0x463914=0x0;const _0x3bc9ae=[];for(const _0x115c1c of _0x2afedd){try{const _0x178101=await deleteQuoteById(_0x1839fa,_0x115c1c);if(_0x178101&&_0x178101>0x0)_0x463914+=_0x178101;else _0x3bc9ae['push'](_0x115c1c);}catch(_0x37d014){warn('[alive]\x20delquote\x20delete\x20id\x20'+_0x115c1c+_0x2774f0(0x1e4)+(_0x37d014?.[_0x2774f0(0x1d4)]||_0x37d014)),_0x3bc9ae['push'](_0x115c1c);}}let _0x188871='Deleted\x20'+_0x463914+_0x2774f0(0x1ce)+_0x1839fa;if(_0x3bc9ae['length'])_0x188871+='\x0aFailed/no-op\x20for:\x20'+_0x3bc9ae['join'](',\x20');await sendApiOrFallback(_0x31dc78,_0x188871);return;}}}catch(_0x53fb81){error(_0x53fb81,'[alive]\x20onMessage\x20error:\x20'+(_0x53fb81?.['message']||_0x53fb81));}}export async function cleanup(){try{}catch(_0x312649){warn('[alive]\x20cleanup\x20error:\x20'+(_0x312649?.['message']||_0x312649));}finally{botRef=null,sendApi=null,info('[alive]\x20cleaned\x20up');}}function _0x5367(_0x52b5e8,_0x415d51){const _0x2cb634=_0xb385();return _0x5367=function(_0x5b6e2c,_0x2f42b0){_0x5b6e2c=_0x5b6e2c-0x1be;let _0x5126ac=_0x2cb634[_0x5b6e2c];if(_0x5367['CaaqkG']===undefined){var _0x68c79e=function(_0x40fffd){const _0x1bc691='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5ed46b='',_0x145abb='';for(let _0x4834ab=0x0,_0x46fbec,_0x44c372,_0xd8334b=0x0;_0x44c372=_0x40fffd['charAt'](_0xd8334b++);~_0x44c372&&(_0x46fbec=_0x4834ab%0x4?_0x46fbec*0x40+_0x44c372:_0x44c372,_0x4834ab++%0x4)?_0x5ed46b+=String['fromCharCode'](0xff&_0x46fbec>>(-0x2*_0x4834ab&0x6)):0x0){_0x44c372=_0x1bc691['indexOf'](_0x44c372);}for(let _0x37b42d=0x0,_0x231d2b=_0x5ed46b['length'];_0x37b42d<_0x231d2b;_0x37b42d++){_0x145abb+='%'+('00'+_0x5ed46b['charCodeAt'](_0x37b42d)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x145abb);};_0x5367['vPPJNW']=_0x68c79e,_0x52b5e8=arguments,_0x5367['CaaqkG']=!![];}const _0xb385bf=_0x2cb634[0x0],_0x536728=_0x5b6e2c+_0xb385bf,_0x53135d=_0x52b5e8[_0x536728];return!_0x53135d?(_0x5126ac=_0x5367['vPPJNW'](_0x5126ac),_0x52b5e8[_0x536728]=_0x5126ac):_0x5126ac=_0x53135d,_0x5126ac;},_0x5367(_0x52b5e8,_0x415d51);}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};function _0x5b6e2c(_0x313fa1){const _0x122307={'TfDtD':function(_0x12bf6c,_0x5ef389){return _0x12bf6c===_0x5ef389;},'aHorT':function(_0x273f2a,_0x1ff086){return _0x273f2a(_0x1ff086);}};function _0x20bf29(_0x35e99e){const _0x38394e=_0x5367;if(typeof _0x35e99e==='string')return function(_0x357876){}['constructor']('while\x20(true)\x20{}')['apply']('counter');else(''+_0x35e99e/_0x35e99e)['length']!==0x1||_0x122307['TfDtD'](_0x35e99e%0x14,0x0)?function(){return!![];}['constructor']('debu'+'gger')['call'](_0x38394e(0x210)):function(){const _0x421f86=_0x38394e;if(_0x421f86(0x1c7)===_0x421f86(0x1c7))return![];else _0xe5f62('[alive]\x20isadmin\x20check\x20failed'),_0x2091e9=![];}['constructor']('debu'+'gger')['apply']('stateObject');_0x122307['aHorT'](_0x20bf29,++_0x35e99e);}try{if(_0x313fa1)return _0x20bf29;else{if('VUbBA'==='HsMss')return _0x24bca0('[alive]\x20getPersistedModuleStart\x20failed:\x20'+(_0x292a84?.['message']||_0x172fd2)),null;else _0x20bf29(0x0);}}catch(_0x107bab){}}