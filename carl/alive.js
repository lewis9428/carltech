const _0x572c94=_0x48ea;(function(_0xf042c,_0x3c1a05){const _0x616442=_0x48ea,_0x469640=_0xf042c();while(!![]){try{const _0x317ea1=parseInt(_0x616442(0x1c5))/0x1+parseInt(_0x616442(0x1d5))/0x2+parseInt(_0x616442(0x1fc))/0x3*(parseInt(_0x616442(0x1ff))/0x4)+parseInt(_0x616442(0x1b3))/0x5*(parseInt(_0x616442(0x1a3))/0x6)+-parseInt(_0x616442(0x1c1))/0x7*(-parseInt(_0x616442(0x1a8))/0x8)+parseInt(_0x616442(0x1fe))/0x9+parseInt(_0x616442(0x1f3))/0xa*(-parseInt(_0x616442(0x1c6))/0xb);if(_0x317ea1===_0x3c1a05)break;else _0x469640['push'](_0x469640['shift']());}catch(_0x4d5da4){_0x469640['push'](_0x469640['shift']());}}}(_0x5ecb,0xdb4f2));function _0x5ecb(){const _0x262f8c=['AM9PBG','w2fSAxzLxsbHzgrrDw90zxnbChbLBMqGzMfPBgvKoIa','w2fSAxzLxsbPBML0AwfSAxPLzcbHBMqGBw9KDwXLihn0yxj0ihbLCNnPC3rLzcaOAwyGBwLZC2LUzYK','CeLNy1q','zgvIDq','ihf1B3rLkhmPigzVCIa','DhjPBq','AxnjBNrLz2vY','w2fSAxzLxsbVBK1LC3nHz2uGzxjYB3i6ia','odmYmJq2qMTHrhzV','u0vmrunuihn0yxj0zwrFyxqGrLjptsbTB2r1BgvFDxb0Aw1LifDirvjfig1VzhvSzsa9id8','qKvhsu4GvfjbtLnbq1rjt047','Dgv4Da','w2fSAxzLxsbKzwXLDgvKigfSBcbXDw90zxmGzM9Yia','w2fSAxzLxsbJB3vSzcbUB3qGywrKignVBhvTBIbHBgL2zv9XDw90zxmU','y2HHAw4','revmrvrfiezst00GywXPDMvFCxvVDgvZifDirvjfigDYB3vWx2PPzca9id8','zMLSDgvY','C3rYAw5N','BwfW','C3rHCNrLzf9HDa','EfDJr2G','cIaGicaGicaGicbtruXfq1qGreLtveLoq1qGyxeUz3jVDxbFAMLKieftigDYB3vWx2PPzaOGicaGicaGicaGrLjptsbHBgL2zv9XDw90zxmGyxekicaGicaGicaGieXfrLqGsK9jtIbHBgL2zsbHie9oigeUz3jVDxbFAMLKid0GyxeUz3jVDxbFAMLKcIaGicaGicaGicbxsevsrsbHlMDYB3vWx2PPzcbjuYbovuXmieforcbHCs5NCM91Cf9QAwqGsvmGtK9uie5vteWkicaGicaGica','D2HPBguGkhrYDwuPihT9','C2vUze1LC3nHz2u','zMXVB3i','tM8GCxvVDgvZigzVDw5KigzVCIa','yxbWBhK','ksbMywLSzwq6ia','zNvUy3rPB24GkLWOicPCkq','C29JAW','w2fSAxzLxsbKzwXLDgvbBgXrDw90zxmGzMfPBgvKoIa','w2fSAxzLxsbIywnRzMLSBcbPBNnLCNqGzMfPBgvKigzVCIa','C2XPy2u','y291BNrLCG','w2fSAxzLxsbYzxbSywnLzca','ywn0Aw9U','Aw5JBhvKzxm','4OQ34Pwq4Pwq4Pwq4Pwq4Pwq4Pwq4Pwq4Pwq4Pwq4Pwq4OQ3','mtbwD0f1sve','CNvU','zxHLyW','w2fSAxzLxsbPBML0AwfSAxPLigzHDgfSoIa','BwvZC2fNzq','z2v0','CxvVDgvFCNjFAw5KzxG','z3jVDxbFAMLK','ufjbr01bigzVCMvPz25FA2v5CYa9ie9ooW','mJy4otyXmxr6AxzxEq','w2fSAxzLxsbIywnRzMLSBcbWyxjLBNqGCM93CYbMywLSzwq6ia','mJy1nJe5n2jgyKPYsW','ogvlwfnwCq','w2fSAxzLxsbKzwXXDw90zsbKzwXLDguGAwqG','w2fSAxzLxsbWAwnRtMv4Dff1B3rLigzHAwXLzdOG','odmZnZmWnLjbuvH4qq','q09ntuLuoW','DfbTrKe','BgvUz3rO','ChvZAa','ofPqzgDMta','zNvUy3rPB24','z2DLCG','CMv0DxjUicHMDw5JDgLVBIGPia','ywXPDMu','w2fSAxzLxsbJB3vSzcbUB3qGywrKignVBhvTBIbHBgL2zs5XDw90zv9YCL9PBMrLEdOG','Aw5WDxq','w2fSAxzLxsbMywLSzwqGDg8GCMuTzw5HyMXLigzVCMvPz25FA2v5CZOG','vwPoAg8','vxnHz2u6igrLBhf1B3rLidXPBMrLEhXPBMrLEeXPC3r8ywXSpGPfEgfTCgXLCZOGzgvSCxvVDguGmYaGzgvSCxvVDguGmsWZlduGzgvSCxvVDguGmI00igrLBhf1B3rLigfSBa','ufjbr01bigzVCMvPz25FA2v5x2XPC3qO','nuDgExjnDW','zKzrBhG','igHVDxi','ywXPDMvFCxvVDgvZ','ALndze0','A2v5','quXjvKu','rgvSzxrLzca','zgvSywXPDMu','igrHEq','C2v0sw50zxj2ywW','ig1PC3nPBMCGCgfYzw50igfSAxzLihjVD3mGDg8GC2f0AxnMEsbgsW','DeH6tw4','tM8GDgfYz2v0igDYB3vWihjLC29SDMvKlIbqCM92AwrLigDWidXNCM91CeTLEt4GB3iGC2v0igeGzgvMyxvSDcb2AweGl3nLDgrLzMf1BhqU','ndu5ndq3muLbtw9RuW','rgvSzxrLzcbHBgL2zsbTzxnZywDLigzVCIa','C2v0ywXPDMu','CMvTB3rLsMLK','mtiZnda2ohjZq1Hiza','ntm3ndyXmZjHveT2wg8','y2fWDgLVBG','Aw1Hz2vnzxnZywDL','wgnYwxK','BwLU','su5trvjuie9sieLhtK9srsbjtLrpigfSAxzLicHNCM91Cf9QAwqSig1LC3nHz2uSihvWzgf0zwrFyxqPifzbtfvfuYaOpYWGpYWGpYK'];_0x5ecb=function(){return _0x262f8c;};return _0x5ecb();}const _0x35ba9c=(function(){let _0x1964eb=!![];return function(_0x5a2456,_0x266daf){const _0x39035c=_0x1964eb?function(){const _0x74e68a=_0x48ea;if('wgppV'!==_0x74e68a(0x1c9)){if(_0x266daf){if('WViHb'==='xEaDe')return _0x2a98ac;else{const _0x56ac69=_0x266daf[_0x74e68a(0x1e7)](_0x5a2456,arguments);return _0x266daf=null,_0x56ac69;}}}else _0x344288('0');}:function(){};return _0x1964eb=![],_0x39035c;};}());(function(){_0x35ba9c(this,function(){const _0x301d50=_0x48ea,_0x2a6fc4=new RegExp(_0x301d50(0x1e9)),_0x5d6eac=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0x2873ee=_0x3f904c('init');!_0x2a6fc4['test'](_0x2873ee+_0x301d50(0x1db))||!_0x5d6eac['test'](_0x2873ee+'input')?_0x2873ee('0'):_0x3f904c();})();}());import{info,warn,error}from'../utils/logger.js';import{getConfig}from'../utils/config.js';import{db}from'../utils/database.js';import{isadmin}from'../utils/isadmin.js';import{getDefault,getConnection}from'../utils/connection.js';export const name='alive';export const version='2.4.0';export const priority=0x79;export const configKeys=[_0x572c94(0x1b9)];export const commands=['alive',_0x572c94(0x1c3),'delalive','setquote','addquote','listquote','delquote'];let botRef=null,sendApi=null,moduleStartTs=Date['now']();const DEDUPE_TTL_MS=0x1e*0x3e8,processedMessageKeys=new Map();function markProcessed(_0x5763b2){if(!_0x5763b2)return;if(processedMessageKeys['has'](_0x5763b2))try{clearTimeout(processedMessageKeys['get'](_0x5763b2));}catch(_0x535946){}const _0x4fbfe4=setTimeout(()=>processedMessageKeys['delete'](_0x5763b2),DEDUPE_TTL_MS);processedMessageKeys['set'](_0x5763b2,_0x4fbfe4);}function isProcessed(_0x4fe911){return _0x4fe911&&processedMessageKeys['has'](_0x4fe911);}let fkInfoChecked=![],fkReferencesAlive=![],fkReferencesOther=![];function _0x48ea(_0x505442,_0x26579c){const _0x4a24b9=_0x5ecb();return _0x48ea=function(_0x3f904c,_0x35ba9c){_0x3f904c=_0x3f904c-0x1a3;let _0x506467=_0x4a24b9[_0x3f904c];if(_0x48ea['FdYCBF']===undefined){var _0x14fc8c=function(_0x38240a){const _0x2160ff='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x656da5='',_0x6797a='';for(let _0x537070=0x0,_0x4bc923,_0x52bcfe,_0x59d590=0x0;_0x52bcfe=_0x38240a['charAt'](_0x59d590++);~_0x52bcfe&&(_0x4bc923=_0x537070%0x4?_0x4bc923*0x40+_0x52bcfe:_0x52bcfe,_0x537070++%0x4)?_0x656da5+=String['fromCharCode'](0xff&_0x4bc923>>(-0x2*_0x537070&0x6)):0x0){_0x52bcfe=_0x2160ff['indexOf'](_0x52bcfe);}for(let _0xe91898=0x0,_0x288f7b=_0x656da5['length'];_0xe91898<_0x288f7b;_0xe91898++){_0x6797a+='%'+('00'+_0x656da5['charCodeAt'](_0xe91898)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x6797a);};_0x48ea['quuDRl']=_0x14fc8c,_0x505442=arguments,_0x48ea['FdYCBF']=!![];}const _0x5ecb53=_0x4a24b9[0x0],_0x48ea77=_0x3f904c+_0x5ecb53,_0x4c9efe=_0x505442[_0x48ea77];return!_0x4c9efe?(_0x506467=_0x48ea['quuDRl'](_0x506467),_0x505442[_0x48ea77]=_0x506467):_0x506467=_0x4c9efe,_0x506467;},_0x48ea(_0x505442,_0x26579c);}async function getTableColumns(_0x342da4){const _0xa3bb1f=_0x572c94;try{const _0xbd986e=await db['all']('PRAGMA\x20table_info('+_0x342da4+')');return(_0xbd986e||[])[_0xa3bb1f(0x1df)](_0xd48f15=>_0xd48f15['name']);}catch(_0x5eb5af){return warn('[alive]\x20getTableColumns('+_0x342da4+')\x20failed:\x20'+(_0x5eb5af?.[_0xa3bb1f(0x1f7)]||_0x5eb5af)),[];}}async function getForeignKeyList(_0x26117d){const _0x10c186=_0x572c94;try{const _0x33652b=await db['all'](_0x10c186(0x1b2)+_0x26117d+')');return _0x33652b||[];}catch(_0x3486dc){return warn('[alive]\x20getForeignKeyList('+_0x26117d+')\x20failed:\x20'+(_0x3486dc?.['message']||_0x3486dc)),[];}}async function ensureSchema(){const _0x165a5b=_0x572c94,_0x426cea={'WlCjy':'[alive]\x20could\x20not\x20add\x20column\x20alive.updated_at:\x20','xWget':function(_0x27a788,_0x36668e){return _0x27a788(_0x36668e);},'UlvzJ':function(_0x1cf90c,_0x3562c3){return _0x1cf90c!==_0x3562c3;},'xWcGh':function(_0x219e12,_0x5b3362){return _0x219e12+_0x5b3362;},'rVmpR':function(_0x451504,_0x5d719d){return _0x451504(_0x5d719d);}};try{if('tzAML'==='IJUpo')return function(_0xf34167){}['constructor'](_0x165a5b(0x1e3))['apply']('counter');else{await db['exec']('\x0a\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20alive\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20group_jid\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20message\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20updated_at\x20INTEGER\x20DEFAULT\x200\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20'),await db['exec']('\x0a\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20alive_quotes\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20group_jid\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20quote\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20created_by\x20TEXT\x20DEFAULT\x20\x27\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20created_at\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20\x20\x20updated_at\x20INTEGER\x20DEFAULT\x200\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20');const _0x59c9e7=await getTableColumns('alive');if(!_0x59c9e7['includes']('updated_at'))try{await db['exec']('ALTER\x20TABLE\x20alive\x20ADD\x20COLUMN\x20updated_at\x20INTEGER\x20DEFAULT\x200;'),info('[alive]\x20migrated:\x20added\x20column\x20alive.updated_at');}catch(_0x359c83){warn(_0x426cea['WlCjy']+(_0x359c83?.[_0x165a5b(0x1f7)]||_0x359c83));}if(!_0x59c9e7[_0x165a5b(0x1f1)](_0x165a5b(0x1f9)))try{await db['exec']('ALTER\x20TABLE\x20alive\x20ADD\x20COLUMN\x20quote_rr_index\x20INTEGER\x20DEFAULT\x200;'),info('[alive]\x20migrated:\x20added\x20column\x20alive.quote_rr_index');}catch(_0x279373){_0x426cea['xWget'](warn,_0x165a5b(0x1ad)+(_0x279373?.['message']||_0x279373));}const _0x2dfeed=await getTableColumns(_0x165a5b(0x1b6)),_0x25c178=[{'name':'group_jid','def':'TEXT\x20NOT\x20NULL'},{'name':'quote','def':'TEXT\x20NOT\x20NULL'},{'name':'created_by','def':'TEXT\x20DEFAULT\x20\x27\x27'},{'name':'created_at','def':'INTEGER\x20DEFAULT\x200'},{'name':'updated_at','def':'INTEGER\x20DEFAULT\x200'}];for(const _0x23dd49 of _0x25c178){if(!_0x2dfeed['includes'](_0x23dd49['name'])){if(_0x426cea['UlvzJ']('CqXTV','zjHpW'))try{await db[_0x165a5b(0x1f5)]('ALTER\x20TABLE\x20alive_quotes\x20ADD\x20COLUMN\x20'+_0x23dd49['name']+'\x20'+_0x23dd49['def']+';'),info('[alive]\x20migrated:\x20added\x20column\x20alive_quotes.'+_0x23dd49['name']);}catch(_0x338e50){warn(_0x165a5b(0x1da)+_0x23dd49['name']+':\x20'+(_0x338e50?.['message']||_0x338e50));}else{if(_0x1333e7){const _0x4b5147=_0x2f8ddb['apply'](_0x2dc6d8,arguments);return _0x421756=null,_0x4b5147;}}}}await db['exec']('\x0a\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20module_uptime\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20module\x20TEXT\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20started_at\x20INTEGER\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20');const _0x7a30a6=await getForeignKeyList('alive_quotes');fkInfoChecked=!![];if(_0x7a30a6&&_0x7a30a6['length']){if('Gjpln'!=='yHuzB')fkReferencesAlive=_0x7a30a6['some'](_0x3bf181=>_0x3bf181['table']&&String(_0x3bf181['table'])['toLowerCase']()===_0x165a5b(0x1ac)&&_0x3bf181['from']==='group_jid'),fkReferencesOther=!fkReferencesAlive,info('[alive]\x20foreign-key\x20info\x20for\x20alive_quotes:\x20referencesAlive='+fkReferencesAlive+',\x20rows='+_0x7a30a6[_0x165a5b(0x1a6)]);else return _0x17d059('[alive]\x20getForeignKeyList('+_0x72fd6e+_0x165a5b(0x1e8)+(_0x2ca4d6?.['message']||_0x43878b)),[];}else fkReferencesAlive=![],fkReferencesOther=![],info('[alive]\x20no\x20foreign\x20keys\x20detected\x20on\x20alive_quotes');if(fkReferencesAlive)try{const _0xade971=await db['all'](_0x165a5b(0x1e2));if(_0xade971&&_0xade971[_0x165a5b(0x1a6)]){info('[alive]\x20backfilling\x20'+_0xade971['length']+_0x165a5b(0x1be));const _0x4fe443=Math['floor'](Date['now']()/0x3e8),_0x44db01=await db['prepare'](_0x165a5b(0x1cb));try{for(const _0x12e978 of _0xade971){try{await _0x44db01['run'](_0x12e978['group_jid'],'',_0x4fe443);}catch(_0x184138){warn(_0x165a5b(0x1ec)+_0x12e978['group_jid']+':\x20'+(_0x184138?.[_0x165a5b(0x1f7)]||_0x184138));}}}finally{try{await _0x44db01['finalize']();}catch(_0x1fc073){}}}}catch(_0x2e5a79){warn(_0x426cea[_0x165a5b(0x1e1)](_0x165a5b(0x1fd),_0x2e5a79?.['message']||_0x2e5a79));}_0x426cea['rVmpR'](info,'[alive]\x20DB\x20schema\x20ensured\x20(alive,\x20alive_quotes,\x20module_uptime)\x20and\x20migrations\x20applied\x20as\x20needed');}}catch(_0x174b26){error(_0x174b26,'[alive]\x20ensureSchema\x20failed');throw _0x174b26;}}async function saveAliveToDb(_0x4918f4,_0x4b06fd){const _0x590173=_0x572c94;try{const _0x185007=Math['floor'](Date['now']()/0x3e8);return await db[_0x590173(0x1f4)]('INSERT\x20INTO\x20alive\x20(group_jid,\x20message,\x20updated_at)\x0a\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20?)\x0a\x20\x20\x20\x20\x20\x20\x20ON\x20CONFLICT(group_jid)\x20DO\x20UPDATE\x20SET\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20message\x20=\x20excluded.message,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20updated_at\x20=\x20excluded.updated_at;',[_0x4918f4,String(_0x4b06fd||''),_0x185007]),info('[alive]\x20saved\x20alive\x20for\x20'+_0x4918f4),!![];}catch(_0x7e75aa){return warn('[alive]\x20saveAliveToDb\x20failed:\x20'+(_0x7e75aa?.['message']||_0x7e75aa)),![];}}async function deleteAliveFromDb(_0x37420a){const _0x5825c6={'FSKqR':function(_0x28e22c,_0x487aed){return _0x28e22c(_0x487aed);}};try{const _0x38d9ea=await db['run']('DELETE\x20FROM\x20alive\x20WHERE\x20group_jid\x20=\x20?',[_0x37420a]);return _0x5825c6['FSKqR'](info,'[alive]\x20deleted\x20alive\x20for\x20'+_0x37420a),_0x38d9ea?.['changes']||0x0;}catch(_0x533e9c){return warn('[alive]\x20deleteAliveFromDb\x20failed:\x20'+(_0x533e9c?.['message']||_0x533e9c)),0x0;}}async function getAliveFromDb(_0x27c517){const _0x3757dd=_0x572c94;try{const _0xd491e1=await db[_0x3757dd(0x1f8)]('SELECT\x20message,\x20updated_at,\x20quote_rr_index\x20FROM\x20alive\x20WHERE\x20group_jid\x20=\x20?',[_0x27c517]);return _0xd491e1||null;}catch(_0x5be77a){return warn('[alive]\x20getAliveFromDb\x20failed:\x20'+(_0x5be77a?.['message']||_0x5be77a)),null;}}async function ensureParentAliveRow(_0x3db12a){const _0x2a3a23=_0x572c94;try{const _0x4e24ee=Math['floor'](Date['now']()/0x3e8);await db['run']('INSERT\x20OR\x20IGNORE\x20INTO\x20alive\x20(group_jid,\x20message,\x20updated_at)\x20VALUES\x20(?,\x20?,\x20?)',[_0x3db12a,'',_0x4e24ee]);}catch(_0xecac3e){warn('[alive]\x20ensureParentAliveRow\x20failed\x20for\x20'+_0x3db12a+':\x20'+(_0xecac3e?.[_0x2a3a23(0x1f7)]||_0xecac3e));}}async function withForeignKeysToggled(_0x47e80f,_0x3d278f){const _0x4ba990=_0x572c94,_0x90b1a7={'UjNho':function(_0x41ac9f){return _0x41ac9f();}};try{const _0x5bbd97=await db['get']('PRAGMA\x20foreign_keys;'),_0x46ed6f=_0x5bbd97?Object['values'](_0x5bbd97)[0x0]||0x0:0x0;if(!_0x47e80f||_0x46ed6f===0x0)return await _0x90b1a7['UjNho'](_0x3d278f);await db['exec']('PRAGMA\x20foreign_keys\x20=\x20OFF;');try{return await _0x90b1a7[_0x4ba990(0x1b0)](_0x3d278f);}finally{try{await db[_0x4ba990(0x1f5)](_0x4ba990(0x1fb));}catch(_0xfdcfee){warn('[alive]\x20failed\x20to\x20re-enable\x20foreign_keys:\x20'+(_0xfdcfee?.['message']||_0xfdcfee));}}}catch(_0xa1499f){return warn('[alive]\x20withForeignKeysToggled\x20error:\x20'+(_0xa1499f?.['message']||_0xa1499f)),await _0x3d278f();}}async function saveQuotesReplace(_0x5bc17b,_0x555548=[],_0xda3ef4=''){const _0xae719e=_0x572c94,_0x22ea73={'BsRwO':function(_0x15246b,_0x312284){return _0x15246b*_0x312284;},'xUnFw':'YKgWz','eUiOG':_0xae719e(0x1cf)};if(!_0x5bc17b)return![];const _0x26ba87=Math['floor'](Date['now']()/0x3e8);if(fkInfoChecked&&fkReferencesAlive)await ensureParentAliveRow(_0x5bc17b);const _0x4604ba=fkInfoChecked&&fkReferencesOther&&!fkReferencesAlive;return await withForeignKeysToggled(_0x4604ba,async()=>{const _0x1619de=_0xae719e,_0x3f9e06={'jSCdM':function(_0x1150b6,_0x1a8ade){return _0x22ea73['BsRwO'](_0x1150b6,_0x1a8ade);},'HoaUC':function(_0x1ca457,_0x4a4ec9){return _0x1ca457/_0x4a4ec9;},'ibCBR':function(_0x29ac12,_0xc98edb){return _0x29ac12/_0xc98edb;}};try{await db['exec'](_0x1619de(0x1d7));try{await db[_0x1619de(0x1f4)](_0x1619de(0x1dc),[_0x5bc17b]);const _0x3937af=await db['prepare']('INSERT\x20INTO\x20alive_quotes\x20(group_jid,\x20quote,\x20created_by,\x20created_at,\x20updated_at)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)');try{if(_0x22ea73['xUnFw']===_0x22ea73['eUiOG']){const _0x1c7e0f=_0x42f3d1['floor'](_0x3b3edf/_0x3f9e06[_0x1619de(0x1b7)](0x18,0xe10)),_0x30afd7=_0x3c2258[_0x1619de(0x1e5)](_0x3f9e06['HoaUC'](_0x40883b%(0x18*0xe10),0xe10)),_0x525cb6=_0x422d08[_0x1619de(0x1e5)](_0x3f9e06['ibCBR'](_0x45242d%0xe10,0x3c)),_0x357dd1=[];if(_0x1c7e0f)_0x357dd1['push'](_0x1c7e0f+'\x20day'+(_0x1c7e0f===0x1?'':'s'));if(_0x30afd7)_0x357dd1['push'](_0x30afd7+_0x1619de(0x1b5)+(_0x30afd7===0x1?'':'s'));if(_0x525cb6||_0x357dd1['length']===0x0)_0x357dd1['push'](_0x525cb6+'\x20minute'+(_0x525cb6===0x1?'':'s'));return _0x357dd1[_0x1619de(0x1cc)]('\x20');}else{for(const _0xe49cbb of _0x555548)await _0x3937af['run'](_0x5bc17b,String(_0xe49cbb||''),_0xda3ef4||'',_0x26ba87,_0x26ba87);}}finally{try{await _0x3937af['finalize']();}catch(_0x46eda5){}}try{await db['run']('UPDATE\x20alive\x20SET\x20quote_rr_index\x20=\x200\x20WHERE\x20group_jid\x20=\x20?',[_0x5bc17b]);}catch(_0x437554){}return await db['exec']('COMMIT;'),info(_0x1619de(0x1ef)+_0x555548['length']+_0x1619de(0x1d1)+_0x5bc17b),!![];}catch(_0x2ec8a2){try{await db['exec']('ROLLBACK;');}catch(_0x49d347){}throw _0x2ec8a2;}}catch(_0x5a9d4b){return warn('[alive]\x20saveQuotesReplace\x20failed:\x20'+(_0x5a9d4b?.['message']||_0x5a9d4b)),![];}});}async function addQuotesAppend(_0x506038,_0x2d376c=[],_0x376107=''){const _0x497c48={'lmyCV':'COMMIT;','abvRs':'ROLLBACK;','yaUTE':function(_0xe3c0bc,_0x1fcc22){return _0xe3c0bc||_0x1fcc22;}};if(_0x497c48['yaUTE'](!_0x506038,!_0x2d376c)||!_0x2d376c['length'])return![];const _0x2a0970=Math['floor'](Date['now']()/0x3e8);if(fkInfoChecked&&fkReferencesAlive)await ensureParentAliveRow(_0x506038);const _0x4ce612=fkInfoChecked&&fkReferencesOther&&!fkReferencesAlive;return await withForeignKeysToggled(_0x4ce612,async()=>{const _0x195198=_0x48ea;try{await db['exec']('BEGIN\x20TRANSACTION;');try{const _0x1741bd=await db['prepare']('INSERT\x20INTO\x20alive_quotes\x20(group_jid,\x20quote,\x20created_by,\x20created_at,\x20updated_at)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)');try{for(const _0x59befe of _0x2d376c)await _0x1741bd['run'](_0x506038,String(_0x59befe||''),_0x376107||'',_0x2a0970,_0x2a0970);}finally{if('MXLFT'==='JpKTO')return _0x4f58c5&&_0x3d3ff4['has'](_0x146f31);else try{await _0x1741bd['finalize']();}catch(_0x29622c){}}return await db['exec'](_0x497c48['lmyCV']),info('[alive]\x20appended\x20'+_0x2d376c['length']+'\x20quote(s)\x20for\x20'+_0x506038),!![];}catch(_0x47fb07){if('lhSih'!=='lhSih')_0x5b7279('[alive]\x20could\x20not\x20add\x20column\x20alive.quote_rr_index:\x20'+(_0x1e0aac?.['message']||_0x1fe3c8));else{try{await db['exec'](_0x497c48['abvRs']);}catch(_0x14f1bd){}throw _0x47fb07;}}}catch(_0x5ddaa6){return warn(_0x195198(0x1cd)+(_0x5ddaa6?.['message']||_0x5ddaa6)),![];}});}async function listQuotes(_0x5a49d0){try{const _0x2110f9=await db['all']('SELECT\x20id,\x20quote,\x20created_by,\x20created_at\x20FROM\x20alive_quotes\x20WHERE\x20group_jid\x20=\x20?\x20ORDER\x20BY\x20id',[_0x5a49d0]);return _0x2110f9||[];}catch(_0x397523){return warn('[alive]\x20listQuotes\x20failed:\x20'+(_0x397523?.['message']||_0x397523)),[];}}async function deleteQuoteById(_0x3ce857,_0x54b39a){const _0x27e1d9=_0x572c94,_0x1f88c0={'aIavz':function(_0x483a1b,_0x46d940){return _0x483a1b(_0x46d940);}};try{const _0x5869a6=await db[_0x27e1d9(0x1f4)]('DELETE\x20FROM\x20alive_quotes\x20WHERE\x20group_jid\x20=\x20?\x20AND\x20id\x20=\x20?',[_0x3ce857,_0x54b39a]);return info('[alive]\x20deleted\x20quote\x20id='+_0x54b39a+'\x20for\x20'+_0x3ce857),_0x5869a6?.['changes']||0x0;}catch(_0x3774f3){return _0x1f88c0['aIavz'](warn,'[alive]\x20deleteQuoteById\x20failed:\x20'+(_0x3774f3?.['message']||_0x3774f3)),0x0;}}async function deleteAllQuotes(_0x479347){const _0x1e6717=_0x572c94;try{const _0x274bcb=await db['run'](_0x1e6717(0x1dc),[_0x479347]);try{'OAaMN'==='OAaMN'?await db[_0x1e6717(0x1f4)]('UPDATE\x20alive\x20SET\x20quote_rr_index\x20=\x200\x20WHERE\x20group_jid\x20=\x20?',[_0x479347]):_0x57b598();}catch(_0x1989a7){}return info(_0x1e6717(0x1d9)+_0x479347),_0x274bcb?.['changes']||0x0;}catch(_0x5c9610){return warn('[alive]\x20deleteAllQuotes\x20failed:\x20'+(_0x5c9610?.['message']||_0x5c9610)),0x0;}}async function pickNextQuote(_0x49339b){const _0x21f354=_0x572c94,_0x31b547={'ysBYC':function(_0xc1dcc3,_0x4df2b7){return _0xc1dcc3%_0x4df2b7;},'veVzz':function(_0x1f8659,_0x1279ab){return _0x1f8659+_0x1279ab;}};try{const _0x5964dc=await db['all']('SELECT\x20id,\x20quote\x20FROM\x20alive_quotes\x20WHERE\x20group_jid\x20=\x20?\x20ORDER\x20BY\x20id',[_0x49339b]);if(!_0x5964dc||_0x5964dc['length']===0x0)return null;if(fkInfoChecked&&fkReferencesAlive)await ensureParentAliveRow(_0x49339b);try{await db['exec']('BEGIN\x20IMMEDIATE;');let _0x12f653=await db['get']('SELECT\x20quote_rr_index\x20FROM\x20alive\x20WHERE\x20group_jid\x20=\x20?',[_0x49339b]);!_0x12f653&&(await db['run']('INSERT\x20OR\x20IGNORE\x20INTO\x20alive\x20(group_jid,\x20message,\x20updated_at,\x20quote_rr_index)\x20VALUES\x20(?,\x20?,\x20?,\x20?)',[_0x49339b,'',Math['floor'](Date['now']()/0x3e8),0x0]),_0x12f653={'quote_rr_index':0x0});let _0x44ae7c=Number(_0x12f653['quote_rr_index']||0x0);_0x44ae7c=_0x44ae7c>=0x0?_0x44ae7c:0x0;const _0x44a607=_0x44ae7c%_0x5964dc['length'],_0x108398=_0x5964dc[_0x44a607]['quote'],_0x5407b0=_0x31b547['ysBYC'](_0x31b547['veVzz'](_0x44ae7c,0x1),_0x5964dc['length']);return await db['run']('UPDATE\x20alive\x20SET\x20quote_rr_index\x20=\x20?\x20WHERE\x20group_jid\x20=\x20?',[_0x5407b0,_0x49339b]),await db['exec'](_0x21f354(0x1a4)),_0x108398;}catch(_0x27ac87){try{await db['exec']('ROLLBACK;');}catch(_0x468a9f){}return warn('[alive]\x20pickNextQuote\x20transaction\x20failed:\x20'+(_0x27ac87?.['message']||_0x27ac87)),_0x5964dc[0x0]['quote'];}}catch(_0x3f06c3){return warn(_0x21f354(0x201)+(_0x3f06c3?.['message']||_0x3f06c3)),null;}}async function setModuleStartIfMissing(_0x21c9eb){const _0x2f6fa5=_0x572c94;try{const _0x6a4fe4=await db['get'](_0x2f6fa5(0x1d6),[_0x21c9eb]);if(_0x6a4fe4&&_0x6a4fe4[_0x2f6fa5(0x1e0)])return Number(_0x6a4fe4['started_at']);const _0x748717=Math['floor'](Date['now']()/0x3e8);return await db['run']('INSERT\x20INTO\x20module_uptime\x20(module,\x20started_at)\x20VALUES\x20(?,\x20?)',[_0x21c9eb,_0x748717]),_0x748717;}catch(_0x527a41){return'mBBYi'==='vmrLN'?(_0x568562('[alive]\x20deleteAliveFromDb\x20failed:\x20'+(_0x1a3fd6?.['message']||_0x3142f2)),0x0):(warn('[alive]\x20setModuleStartIfMissing\x20failed:\x20'+(_0x527a41?.['message']||_0x527a41)),Math['floor'](Date['now']()/0x3e8));}}async function getPersistedModuleStart(_0x4d3a71){const _0x4eeb9a=_0x572c94;try{const _0x5a11e9=await db['get']('SELECT\x20started_at\x20FROM\x20module_uptime\x20WHERE\x20module\x20=\x20?',[_0x4d3a71]);if(_0x5a11e9&&_0x5a11e9['started_at'])return Number(_0x5a11e9[_0x4eeb9a(0x1e0)]);return null;}catch(_0xe167d1){if('ENWHU'!=='hrFJV')return warn('[alive]\x20getPersistedModuleStart\x20failed:\x20'+(_0xe167d1?.[_0x4eeb9a(0x1f7)]||_0xe167d1)),null;else(function(){return![];}['constructor']('debu'+'gger')['apply']('stateObject'));}}function setupSendApi(){const _0xc71572=_0x572c94;if(!botRef)return;if(typeof botRef['sendMessage']===_0xc71572(0x1a9))sendApi=async(_0x500eac,_0x245c25)=>await botRef['sendMessage'](_0x500eac,_0x245c25);else botRef[_0xc71572(0x1ea)]&&typeof botRef['sock'][_0xc71572(0x1e4)]==='function'?sendApi=async(_0x39568d,_0x5500aa)=>await botRef['sock']['sendMessage'](_0x39568d,_0x5500aa):sendApi=null;}async function sendApiOrFallback(_0x2c4da9,_0x27ae33,_0x337fbb=[]){const _0x2a4336=_0x572c94,_0x5dfaca={'EIhdq':function(_0x5c231b,_0x29406b,_0x52e04d){return _0x5c231b(_0x29406b,_0x52e04d);}};try{if(!_0x2c4da9||!_0x27ae33)return;sendApi?await _0x5dfaca['EIhdq'](sendApi,_0x2c4da9,{'text':String(_0x27ae33),'mentions':_0x337fbb}):warn('[alive]\x20no\x20send\x20surface\x20available\x20for\x20'+_0x2c4da9);}catch(_0x42bf52){warn('[alive]\x20sendApiOrFallback\x20failed:\x20'+(_0x42bf52?.[_0x2a4336(0x1f7)]||_0x42bf52));}}function extractTextFromMessage(_0x4f9181){const _0xdbd909=_0x572c94;if(!_0x4f9181||!_0x4f9181['message'])return'';const _0x578372=_0x4f9181['message'];if(_0x578372['conversation'])return _0x578372['conversation'];if(_0x578372['extendedTextMessage']?.['text'])return _0x578372['extendedTextMessage']['text'];if(_0x578372[_0xdbd909(0x1c8)]?.['caption'])return _0x578372['imageMessage'][_0xdbd909(0x1c7)];if(_0x578372['videoMessage']?.['caption'])return _0x578372['videoMessage']['caption'];if(_0x578372['buttonsResponseMessage']?.['selectedButtonId'])return _0x578372['buttonsResponseMessage']['selectedButtonId'];if(_0x578372['listResponseMessage']?.['singleSelectReply']?.['selectedRowId'])return _0x578372['listResponseMessage']['singleSelectReply']['selectedRowId'];return'';}async function resolveTargetChatIdFromCommand(_0x375627,_0x5593c6){const _0x4b39bf=_0x572c94;if(_0x375627){const _0x3be961=_0x375627['trim']();if(_0x3be961[_0x4b39bf(0x1f1)]('@'))return _0x3be961;const _0x1bbeb9=await getConnection(_0x3be961)['catch'](()=>null);if(_0x1bbeb9)return _0x1bbeb9;return null;}if(!_0x5593c6)return null;const _0x367596=await getDefault(_0x5593c6)['catch'](()=>null);if(_0x367596){const _0x5d9dc1=await getConnection(_0x367596)['catch'](()=>null);if(_0x5d9dc1)return _0x5d9dc1;}return null;}(function(){const _0x268d85=_0x572c94,_0x2845a7={'CxyhM':'{}.constructor(\x22return\x20this\x22)(\x20)','tDUfM':function(_0x325ef5){return _0x325ef5();}};let _0x555ac8;try{const _0x44f420=Function(_0x268d85(0x1ab)+_0x2845a7['CxyhM']+');');_0x555ac8=_0x2845a7['tDUfM'](_0x44f420);}catch(_0x49723a){_0x555ac8=window;}_0x555ac8[_0x268d85(0x1bd)](_0x3f904c,0x61a80);}());function formatUptimeFromSeconds(_0x4f0396){const _0x520e5f=_0x572c94,_0x3c290e={'vuJAc':function(_0x5cb107,_0x418d5b){return _0x5cb107*_0x418d5b;},'tPmFA':function(_0x41381d,_0x143cfd){return _0x41381d===_0x143cfd;}},_0x2aadf7=Math[_0x520e5f(0x1e5)](_0x4f0396/_0x3c290e['vuJAc'](0x18,0xe10)),_0x1cb1c9=Math[_0x520e5f(0x1e5)](_0x4f0396%(0x18*0xe10)/0xe10),_0x37f024=Math['floor'](_0x4f0396%0xe10/0x3c),_0x2bf9ea=[];if(_0x2aadf7)_0x2bf9ea['push'](_0x2aadf7+_0x520e5f(0x1bc)+(_0x2aadf7===0x1?'':'s'));if(_0x1cb1c9)_0x2bf9ea['push'](_0x1cb1c9+'\x20hour'+(_0x1cb1c9===0x1?'':'s'));if(_0x37f024||_0x2bf9ea['length']===0x0)_0x2bf9ea[_0x520e5f(0x1a7)](_0x37f024+'\x20minute'+(_0x3c290e[_0x520e5f(0x1a5)](_0x37f024,0x1)?'':'s'));return _0x2bf9ea['join']('\x20');}async function composeAliveMessage(_0x5edd13){const _0x70920e=_0x572c94,_0x4d507f={'YEkWM':function(_0x3b4649,_0x344367){return _0x3b4649(_0x344367);}},_0x45d391=await pickNextQuote(_0x5edd13),_0x366ed2=_0x70920e(0x1f2),_0x4123b0=[];_0x45d391&&(_0x4123b0['push'](_0x366ed2),_0x4123b0['push']('ðŸŒ\x20QUOTE\x20OF\x20THE\x20DAY\x0a'),_0x4123b0[_0x70920e(0x1a7)](String(_0x45d391)['trim']()),_0x4123b0['push'](_0x366ed2));const _0x2ed338=await _0x4d507f['YEkWM'](getPersistedModuleStart,name),_0x17897a=_0x2ed338&&Number['isFinite'](_0x2ed338)?Number(_0x2ed338):Math[_0x70920e(0x1e5)](moduleStartTs/0x3e8),_0x5a5e5a=Math['max'](0x0,Math['floor'](Date['now']()/0x3e8)-_0x17897a),_0x399ea6=formatUptimeFromSeconds(_0x5a5e5a);_0x4123b0['push']('Uptime:\x20'+_0x399ea6),_0x4123b0['push'](_0x366ed2),_0x4123b0[_0x70920e(0x1a7)]('');const _0x194225=await getAliveFromDb(_0x5edd13);if(_0x194225&&_0x194225['message'])_0x4123b0['push'](String(_0x194225['message'])['trim']());return _0x4123b0['join']('\x0a');}function parseIndicesList(_0x32a716){const _0x21e667=_0x572c94;if(!_0x32a716||typeof _0x32a716!=='string')return[];const _0x285119=_0x32a716['split'](/[, \t]+/)[_0x21e667(0x1df)](_0x488328=>_0x488328['trim']())['filter'](Boolean),_0x3e8c6b=new Set();for(const _0x188c62 of _0x285119){if(/^\d+-\d+$/['test'](_0x188c62)){const [_0x44d827,_0x3dbbdf]=_0x188c62['split']('-')['map'](_0x20399d=>Number(_0x20399d));if(!Number['isInteger'](_0x44d827)||!Number[_0x21e667(0x1d3)](_0x3dbbdf)||_0x44d827<=0x0||_0x3dbbdf<=0x0)continue;const _0x23a125=Math[_0x21e667(0x1ca)](_0x44d827,_0x3dbbdf),_0x337f02=Math['max'](_0x44d827,_0x3dbbdf);for(let _0x110264=_0x23a125;_0x110264<=_0x337f02;_0x110264++)_0x3e8c6b['add'](_0x110264);}else/^\d+$/['test'](_0x188c62)&&_0x3e8c6b['add'](Number(_0x188c62));}return Array['from'](_0x3e8c6b)['sort']((_0x1d64cc,_0x3d603a)=>_0x1d64cc-_0x3d603a);}export async function initialize(_0x20a3a3){const _0x52a62d=_0x572c94,_0x10e4ff={'GcCPs':_0x52a62d(0x1ce)};if(!_0x20a3a3)throw new Error('alive.initialize\x20requires\x20bot\x20instance');botRef=_0x20a3a3,setupSendApi(),moduleStartTs=Date['now']();try{await ensureSchema(),await setModuleStartIfMissing(name),info(_0x10e4ff['GcCPs']);}catch(_0x5270e7){error(_0x5270e7,_0x52a62d(0x1f6)+(_0x5270e7?.['message']||_0x5270e7));throw _0x5270e7;}}export async function onMessage(_0x7009c){const _0x259b0b=_0x572c94,_0x44008f={'pzdiQ':function(_0x138ffa,_0x102e39){return _0x138ffa===_0x102e39;},'qVbiT':'setalive','TBnef':_0x259b0b(0x1b4),'GmanK':function(_0xfd847b,_0x515f3a,_0x534efc){return _0xfd847b(_0x515f3a,_0x534efc);},'NNVCf':function(_0x3559bd,_0x3a1ff4,_0x511ab4,_0x1b30cd){return _0x3559bd(_0x3a1ff4,_0x511ab4,_0x1b30cd);},'LRghF':function(_0x2c4c80,_0x1b46c9,_0x58176f){return _0x2c4c80(_0x1b46c9,_0x58176f);}};try{if(!_0x7009c||!_0x7009c['key']||!_0x7009c['message'])return;const _0x17c2e2=String(_0x7009c['key']['remoteJid']||'')+'::'+String(_0x7009c['key']['id']||_0x7009c['key']['participant']||'');if(isProcessed(_0x17c2e2))return;markProcessed(_0x17c2e2);const _0x4eac57=_0x7009c['text']&&_0x44008f['pzdiQ'](typeof _0x7009c['text'],'string')?_0x7009c['text']:extractTextFromMessage(_0x7009c)||'';if(!_0x4eac57)return;const _0x3972be=_0x7009c[_0x259b0b(0x1b8)]['remoteJid'],_0x2c17a4=typeof _0x3972be==='string'&&_0x3972be['endsWith']('@g.us'),_0x473653=_0x7009c['key']?.['participant']||_0x7009c[_0x259b0b(0x1b8)]?.['from']||_0x7009c['key']?.[_0x259b0b(0x1c4)]||'',_0x237a3b=String(_0x473653||'')['split']('@')[0x0];if(!_0x7009c['isCommand'])return;const _0x5d60f4=typeof _0x7009c[_0x259b0b(0x1d8)]==='string'&&_0x7009c[_0x259b0b(0x1d8)]['trim']()['length']?_0x7009c[_0x259b0b(0x1d8)][_0x259b0b(0x1d2)]():_0x4eac57['trim']();if(!_0x5d60f4)return;const _0x3766b6=_0x5d60f4['split'](/\r?\n/)[0x0]['trim']()['split'](/\s+/),_0x54f10c=(_0x3766b6[0x0]||'')['toLowerCase']();if(!commands['includes'](_0x54f10c))return;if(_0x2c17a4){if('SLAdr'!=='SLAdr'){const _0xa3aad1=_0x1eee05?function(){if(_0x3e04ff){const _0x3f45da=_0x3ae9e6['apply'](_0x17586e,arguments);return _0x5b1e85=null,_0x3f45da;}}:function(){};return _0x200fbd=![],_0xa3aad1;}else{let _0x2f4adb=![];try{_0x2f4adb=await isadmin(botRef,_0x7009c);}catch(_0xa4001c){warn('[alive]\x20isadmin\x20check\x20failed'),_0x2f4adb=![];}if(!_0x2f4adb)return;}}const _0x455252=botRef?.[_0x259b0b(0x1ea)]?.['user']?.['id']||null,_0x491470=_0x2c17a4?_0x3972be:_0x455252||_0x473653;info('[alive]\x20command\x20\x27'+_0x54f10c+'\x27\x20detected\x20from\x20'+_0x473653+'\x20in\x20'+_0x3972be);const _0x3a82b8=(_0x5d60f4||'')['split'](/\r?\n/);let _0x1481f5=null;for(const _0x2711a5 of _0x3a82b8['slice'](0x1)){const _0x125b7f=_0x2711a5['match'](/^gp[:\s]+(.+)$/i);if(_0x125b7f){_0x1481f5=_0x125b7f[0x1]['trim']();break;}}if(!_0x1481f5&&_0x3766b6['length']>=0x2){if(_0x3766b6[0x1]['toLowerCase']()==='gp'&&_0x3766b6['length']>=0x3)_0x1481f5=_0x3766b6['slice'](0x2)['join']('\x20')['trim']();else{if(_0x3766b6[0x1]['includes']('@'))_0x1481f5=_0x3766b6[0x1]['trim']();}}if(_0x54f10c==='alive'){let _0x12e47f=null;if(_0x2c17a4&&!_0x1481f5)_0x12e47f=_0x3972be;if(!_0x12e47f)_0x12e47f=await resolveTargetChatIdFromCommand(_0x1481f5,_0x237a3b);if(!_0x12e47f){await sendApiOrFallback(_0x491470,_0x259b0b(0x1c0));return;}const _0x528729=await composeAliveMessage(_0x12e47f),_0x280b63=_0x2c17a4?_0x12e47f:_0x455252||_0x473653;await sendApiOrFallback(_0x280b63,_0x528729);return;}if(_0x54f10c===_0x44008f['qVbiT']){const _0x1cf01f=_0x3a82b8[_0x259b0b(0x1ed)](0x1)[_0x259b0b(0x1dd)](_0x10e310=>!_0x10e310['match'](/^gp[:\s]+(.+)$/i)),_0x17b58d=_0x1cf01f['join']('\x0a')['trim']();if(!_0x17b58d){await sendApiOrFallback(_0x491470,'Usage:\x0a\x20setalive\x20(press\x20enter)\x0a\x20<your\x20multi-line\x20alive\x20message>\x0aOptionally\x20include\x20a\x20line\x20\x22gp\x20<groupKey>\x22\x20to\x20target\x20a\x20specific\x20group.');return;}const _0x32d432=await resolveTargetChatIdFromCommand(_0x1481f5,_0x237a3b);if(!_0x32d432){await sendApiOrFallback(_0x491470,'No\x20target\x20group\x20resolved.\x20Provide\x20gp\x20<groupKey>\x20or\x20set\x20a\x20default\x20via\x20/setdefault.');return;}const _0x1a7255=await saveAliveToDb(_0x32d432,_0x17b58d);if(_0x1a7255)await sendApiOrFallback(_0x491470,'Saved\x20alive\x20message\x20for\x20'+_0x32d432);else await sendApiOrFallback(_0x491470,'Failed\x20to\x20save\x20alive\x20message\x20for\x20'+_0x32d432);return;}if(_0x54f10c===_0x259b0b(0x1bb)){if(_0x44008f['TBnef']!=='xIyHT'){const _0x5efd04=await resolveTargetChatIdFromCommand(_0x1481f5,_0x237a3b);if(!_0x5efd04){await sendApiOrFallback(_0x491470,'No\x20target\x20group\x20resolved.\x20Provide\x20gp\x20<groupKey>\x20or\x20set\x20a\x20default\x20via\x20/setdefault.');return;}const _0x2368ef=await deleteAliveFromDb(_0x5efd04);if(_0x2368ef)await sendApiOrFallback(_0x491470,_0x259b0b(0x1c2)+_0x5efd04);else await _0x44008f['GmanK'](sendApiOrFallback,_0x491470,'No\x20alive\x20message\x20found\x20for\x20'+_0x5efd04);return;}else _0x4d8f3c('[alive]\x20could\x20not\x20add\x20column\x20alive.updated_at:\x20'+(_0x1ca8b9?.[_0x259b0b(0x1f7)]||_0x4e7f8f));}if(_0x54f10c==='setquote'){const _0x34de9c=_0x3a82b8['slice'](0x1)['map'](_0x2e8be1=>_0x2e8be1['trim']())[_0x259b0b(0x1dd)](Boolean)['filter'](_0x4e1831=>_0x4e1831['startsWith']('!'))['map'](_0x490a30=>_0x490a30['slice'](0x1)['trim']())['filter'](Boolean);if(!_0x34de9c['length']){await sendApiOrFallback(_0x491470,'Usage:\x0a\x20setquote\x0a\x20!quote\x20one\x0a\x20!quote\x20two\x0a(Each\x20quote\x20line\x20must\x20start\x20with\x20a\x20leading\x20\x22!\x22)');return;}const _0x4d528f=await resolveTargetChatIdFromCommand(_0x1481f5,_0x237a3b);if(!_0x4d528f){await sendApiOrFallback(_0x491470,'No\x20target\x20group\x20resolved.\x20Provide\x20gp\x20<groupKey>\x20or\x20set\x20a\x20default\x20via\x20/setdefault.');return;}const _0x183f5f=await _0x44008f['NNVCf'](saveQuotesReplace,_0x4d528f,_0x34de9c,_0x473653);if(_0x183f5f)await sendApiOrFallback(_0x491470,'Saved\x20'+_0x34de9c['length']+_0x259b0b(0x1d1)+_0x4d528f);else await sendApiOrFallback(_0x491470,'Failed\x20to\x20save\x20quotes\x20for\x20'+_0x4d528f);return;}if(_0x54f10c==='addquote'){const _0x477a19=_0x3a82b8['slice'](0x1)['map'](_0x2c9959=>_0x2c9959['trim']())['filter'](Boolean)['filter'](_0x114d8d=>_0x114d8d['startsWith']('!'))[_0x259b0b(0x1df)](_0xf05288=>_0xf05288[_0x259b0b(0x1ed)](0x1)[_0x259b0b(0x1d2)]())['filter'](Boolean);if(!_0x477a19[_0x259b0b(0x1a6)]){await sendApiOrFallback(_0x491470,'Usage:\x0a\x20addquote\x0a\x20!another\x20quote\x0a(Each\x20quote\x20line\x20must\x20start\x20with\x20a\x20leading\x20\x22!\x22)');return;}const _0x49cdf9=await resolveTargetChatIdFromCommand(_0x1481f5,_0x237a3b);if(!_0x49cdf9){await sendApiOrFallback(_0x491470,'No\x20target\x20group\x20resolved.\x20Provide\x20gp\x20<groupKey>\x20or\x20set\x20a\x20default\x20via\x20/setdefault.');return;}const _0x38d511=await addQuotesAppend(_0x49cdf9,_0x477a19,_0x473653);if(_0x38d511)await sendApiOrFallback(_0x491470,'Appended\x20'+_0x477a19[_0x259b0b(0x1a6)]+'\x20quote(s)\x20for\x20'+_0x49cdf9);else await sendApiOrFallback(_0x491470,'Failed\x20to\x20append\x20quotes\x20for\x20'+_0x49cdf9);return;}if(_0x54f10c==='listquote'){const _0x5d8942=await resolveTargetChatIdFromCommand(_0x1481f5,_0x237a3b);if(!_0x5d8942){await sendApiOrFallback(_0x491470,'No\x20target\x20group\x20resolved.\x20Provide\x20gp\x20<groupKey>\x20or\x20set\x20a\x20default\x20via\x20/setdefault.');return;}const _0x50bdbe=await listQuotes(_0x5d8942);if(!_0x50bdbe['length']){await sendApiOrFallback(_0x491470,_0x259b0b(0x1e6)+_0x5d8942);return;}let _0x14a7b1='';for(const _0x208a2a of _0x50bdbe){const _0x2b208d=_0x208a2a['id']+'.\x20'+_0x208a2a['quote']+'\x0a';(_0x14a7b1+_0x2b208d)['length']>0x5dc&&(await sendApiOrFallback(_0x491470,_0x14a7b1['trim']()),_0x14a7b1=''),_0x14a7b1+=_0x2b208d;}if(_0x14a7b1['trim']())await sendApiOrFallback(_0x491470,_0x14a7b1['trim']());return;}if(_0x54f10c==='delquote'){const _0x44b7f9=_0x3766b6['slice'](0x1)['join']('\x20')[_0x259b0b(0x1d2)](),_0x2efe8c=await resolveTargetChatIdFromCommand(_0x1481f5,_0x237a3b);if(!_0x2efe8c){await sendApiOrFallback(_0x491470,_0x259b0b(0x1c0));return;}if(!_0x44b7f9){await _0x44008f['LRghF'](sendApiOrFallback,_0x491470,_0x259b0b(0x1b1));return;}const _0x11520a=_0x44b7f9['toLowerCase']();if(_0x11520a==='all'){const _0x33588d=await deleteAllQuotes(_0x2efe8c);await sendApiOrFallback(_0x491470,_0x259b0b(0x1ba)+_0x33588d+'\x20quote(s)\x20for\x20'+_0x2efe8c);return;}const _0xbe65c7=parseIndicesList(_0x44b7f9);if(!_0xbe65c7['length']){await sendApiOrFallback(_0x491470,'delquote\x20expects\x20a\x20numeric\x20index,\x20a\x20list\x20(e.g.\x201,3,5)\x20or\x20ranges\x20(e.g.\x202-4),\x20or\x20\x22all\x22');return;}let _0x57e59d=0x0;const _0xf96c26=[];for(const _0x17db0a of _0xbe65c7){try{const _0x4ade05=await deleteQuoteById(_0x2efe8c,_0x17db0a);if(_0x4ade05&&_0x4ade05>0x0)_0x57e59d+=_0x4ade05;else _0xf96c26['push'](_0x17db0a);}catch(_0x2101d7){warn(_0x259b0b(0x200)+_0x17db0a+'\x20failed:\x20'+(_0x2101d7?.[_0x259b0b(0x1f7)]||_0x2101d7)),_0xf96c26['push'](_0x17db0a);}}let _0x5e80b2='Deleted\x20'+_0x57e59d+'\x20quote(s)\x20for\x20'+_0x2efe8c;if(_0xf96c26['length'])_0x5e80b2+='\x0aFailed/no-op\x20for:\x20'+_0xf96c26[_0x259b0b(0x1cc)](',\x20');await sendApiOrFallback(_0x491470,_0x5e80b2);return;}}catch(_0x5076fe){'NiwEl'!=='NiwEl'?_0x1bebc8(_0x259b0b(0x1af)+(_0x8f38cf?.['message']||_0x4e571c)):error(_0x5076fe,_0x259b0b(0x1d4)+(_0x5076fe?.['message']||_0x5076fe));}}export async function cleanup(){const _0x239c67=_0x572c94,_0x7eba0f={'OUrIS':'iJQln'};try{}catch(_0x338c29){if(_0x7eba0f['OUrIS']==='iJQln')warn('[alive]\x20cleanup\x20error:\x20'+(_0x338c29?.['message']||_0x338c29));else return _0x437e8b(_0x239c67(0x1eb)+(_0x5aa69f?.['message']||_0x5d7336)),0x0;}finally{'CBOQJ'!=='hKJvQ'?(botRef=null,sendApi=null,info('[alive]\x20cleaned\x20up')):_0x3e653b('[alive]\x20backfill\x20insert\x20failed\x20for\x20'+_0x175505[_0x239c67(0x1fa)]+':\x20'+(_0x5cba73?.['message']||_0xa5a348));}}export default{'name':name,'version':version,'priority':priority,'configKeys':configKeys,'commands':commands,'initialize':initialize,'onMessage':onMessage,'cleanup':cleanup};function _0x3f904c(_0x1cb247){const _0x450602={'qNZKU':function(_0x22c5ee,_0x4e5525){return _0x22c5ee+_0x4e5525;},'lvPSx':function(_0x5377fb,_0x374819){return _0x5377fb===_0x374819;},'qGOaS':function(_0x48f742,_0x2c6317){return _0x48f742(_0x2c6317);}};function _0x36cd7f(_0xd5f377){const _0x483152=_0x48ea,_0x625886={'wteEY':function(_0x3bcd1c,_0x2415c5){return _0x450602['qNZKU'](_0x3bcd1c,_0x2415c5);}};if('IStMl'===_0x483152(0x1bf)){const _0x4e4f9e=new _0x1aa0f3('function\x20*\x5c(\x20*\x5c)'),_0x32f668=new _0x6cafb('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0x3cd789=_0x5b8f50('init');!_0x4e4f9e['test'](_0x3cd789+'chain')||!_0x32f668['test'](_0x625886['wteEY'](_0x3cd789,_0x483152(0x1ae)))?_0x3cd789('0'):_0x12a389();}else{if(typeof _0xd5f377===_0x483152(0x1de))return function(_0x361d97){}['constructor']('while\x20(true)\x20{}')[_0x483152(0x1e7)](_0x483152(0x1ee));else(''+_0xd5f377/_0xd5f377)['length']!==0x1||_0x450602['lvPSx'](_0xd5f377%0x14,0x0)?function(){return!![];}['constructor']('debu'+'gger')['call'](_0x483152(0x1f0)):function(){return![];}['constructor'](_0x450602['qNZKU'](_0x483152(0x1d0),_0x483152(0x1aa)))['apply']('stateObject');_0x450602['qGOaS'](_0x36cd7f,++_0xd5f377);}}try{if(_0x1cb247)return _0x36cd7f;else _0x36cd7f(0x0);}catch(_0x2e6dbc){}}