function _0x166b(_0x1f612e,_0x163064){const _0x4963e5=_0x3278();return _0x166b=function(_0xcaa2c3,_0x471e11){_0xcaa2c3=_0xcaa2c3-0xb1;let _0xc6493c=_0x4963e5[_0xcaa2c3];if(_0x166b['UXMqLJ']===undefined){var _0x4d72bd=function(_0x190f06){const _0x3bcd35='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x33f9b1='',_0x3dfa4d='';for(let _0x392ce8=0x0,_0x5993fc,_0x38ba18,_0x47f5b4=0x0;_0x38ba18=_0x190f06['charAt'](_0x47f5b4++);~_0x38ba18&&(_0x5993fc=_0x392ce8%0x4?_0x5993fc*0x40+_0x38ba18:_0x38ba18,_0x392ce8++%0x4)?_0x33f9b1+=String['fromCharCode'](0xff&_0x5993fc>>(-0x2*_0x392ce8&0x6)):0x0){_0x38ba18=_0x3bcd35['indexOf'](_0x38ba18);}for(let _0x297e09=0x0,_0xe10b37=_0x33f9b1['length'];_0x297e09<_0xe10b37;_0x297e09++){_0x3dfa4d+='%'+('00'+_0x33f9b1['charCodeAt'](_0x297e09)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3dfa4d);};_0x166b['fPHgSK']=_0x4d72bd,_0x1f612e=arguments,_0x166b['UXMqLJ']=!![];}const _0x32789f=_0x4963e5[0x0],_0x166b42=_0xcaa2c3+_0x32789f,_0x257726=_0x1f612e[_0x166b42];return!_0x257726?(_0xc6493c=_0x166b['fPHgSK'](_0xc6493c),_0x1f612e[_0x166b42]=_0xc6493c):_0xc6493c=_0x257726,_0xc6493c;},_0x166b(_0x1f612e,_0x163064);}const _0x29d57d=_0x166b;(function(_0x2e0f29,_0x23f456){const _0xac3729=_0x166b,_0x4bffec=_0x2e0f29();while(!![]){try{const _0x3c6e7d=-parseInt(_0xac3729(0xeb))/0x1*(-parseInt(_0xac3729(0xcd))/0x2)+-parseInt(_0xac3729(0xdc))/0x3+-parseInt(_0xac3729(0xc8))/0x4+-parseInt(_0xac3729(0xec))/0x5*(parseInt(_0xac3729(0xd6))/0x6)+parseInt(_0xac3729(0xc2))/0x7+-parseInt(_0xac3729(0xce))/0x8+parseInt(_0xac3729(0xbc))/0x9*(parseInt(_0xac3729(0xb3))/0xa);if(_0x3c6e7d===_0x23f456)break;else _0x4bffec['push'](_0x4bffec['shift']());}catch(_0x31f5a3){_0x4bffec['push'](_0x4bffec['shift']());}}}(_0x3278,0xe3eaa));import _0x124b5d from'dotenv';import _0x5bb409 from'fs';import _0x43213b from'path';function _0x3278(){const _0x787e09=['8j+AQYbsDwXLCYbHCMuGAw1WB3j0yw50lIb7DxnLCN0GAgfZigjLzw4Gyxv0B21HDgLJywXSEsbYzw1VDMvKigzVCIb7y291BNr9igXPBMSGDMLVBgf0Aw9UCY4','D2fYBG','BgvUz3rO','qK9ux1rps0vo','mKHbseTkra','nJKXmZK4ngzyC1LPua','C3rHDgvpyMPLy3q','CMvJB3jK','B3b0Aw9UywW','lNLHBwW','DgLLzgS','zw51Bq','BwvKAwe','ody3odmXnKv1rKXgsG','AM9PBG','Bwf4','zxjYB3i','rezgqMi','zgvIDwC','mZa3ndm4nwjhuuzvyW','CgfYC2u','qM9VA2LLBg9NCW','BwvZC2fNzq','CM91BMrYB2jPBG','yM9VA2LLCW','vKfmsurbveLptL9trunsrvq','zgvIDq','zgvMyxvSDa','u0nirurFq0Hfq0TFsu5urvjwquXFtvm','yxjYyxK','BwLU','s1Hiv0m','CMvZB2X2zq','DNzcqLq','ody3nJq5DwndzvbN','nw1XC2rosa','qurnsu5Fve9lru4','zw52','zgLYBMfTzq','mti2odi5mhP4tgjTqW','Avzltvi','zxH0BMfTzq','qwzYAwnHl05HAxjVyMK','y3DK','rxjYB3iGD2HPBguGCMvSB2fKAw5NignVBMzPzZOG','zxHPC3rZu3LUyW','BNvTyMvY','u0nirurFsu5jveLbtf9cqunlt0zgx01t','mZe1D3zZAeDA','C3rYAw5N','xcTCkYaQkd86w2eTEKeTwL8KxvSWltLHlxPblvPFjf0Qkq','DhvWBgu','4PQG77IpifDbuK4Gtuvtu0fhrsdIMQdVUi8kcLvtrvi6ihT1C2vYFqPnqvGGv0fstKLor1m6ihTTyxH3yxjUC30kuKvnquLosu5hifDbuK5jtKDtoIb7CMvTywLUAw5Nx3DHCM5ZFqPsruftt046ihTYzwfZB259','yM9VBgvHBG','ntqYoti4nevnsw1Vyq','y29UC3rYDwn0B3i','C3rYAw5NAwz5','yKLnvxu','DxrMoa','D3jPDgvgAwXLu3LUyW','nZi1mZiWnhLnEfPYyq'];_0x3278=function(){return _0x787e09;};return _0x3278();}(function(){const _0x51e6c3={'qESOQ':'{}.constructor(\x22return\x20this\x22)(\x20)'},_0x48013a=function(){let _0x36911b;try{_0x36911b=Function('return\x20(function()\x20'+_0x51e6c3['qESOQ']+');')();}catch(_0x17cbb5){_0x36911b=window;}return _0x36911b;},_0x2c76af=_0x48013a();_0x2c76af['setInterval'](_0xcaa2c3,0x61a80);}());import{fileURLToPath}from'url';import _0x30c8c1 from'chokidar';import{z}from'zod';import{load as _0xdbd5d4}from'js-yaml';import{info,error,warn}from'./logger.js';function findProjectRoot(){const _0x8d3150=_0x166b,_0x45411d={'ZbCFO':'package.json'};let _0xe97fdf=_0x43213b[_0x8d3150(0xb2)](fileURLToPath(import.meta['url']));while(!![]){if(_0x5bb409[_0x8d3150(0xb9)](_0x43213b['join'](_0xe97fdf,_0x45411d['ZbCFO'])))return info('Project\x20root\x20found\x20at:\x20'+_0xe97fdf),_0xe97fdf;const _0x2579af=_0x43213b[_0x8d3150(0xb2)](_0xe97fdf);if(_0x2579af===_0xe97fdf)throw new Error('Could\x20not\x20find\x20project\x20root.\x20Make\x20sure\x20a\x20package.json\x20file\x20exists.');_0xe97fdf=_0x2579af;}}export const PROJECT_ROOT=findProjectRoot();const envPath=_0x43213b['resolve'](PROJECT_ROOT,'.env');_0x5bb409[_0x29d57d(0xb9)](envPath)?(_0x124b5d['config']({'path':envPath}),info('Loaded\x20.env\x20from\x20'+envPath)):info('.env\x20not\x20found\x20at\x20'+envPath+'\x20â€”\x20continuing\x20without\x20it.');function findConfigFile(){const _0x2a2380=_0x29d57d,_0x55bef8=['config.yml','config.yaml','config.json'];for(const _0x26dec0 of _0x55bef8){const _0x1ecfce=_0x43213b[_0x2a2380(0xe9)](PROJECT_ROOT,_0x26dec0);if(_0x5bb409['existsSync'](_0x1ecfce))return info('Using\x20config\x20file:\x20'+_0x1ecfce),_0x1ecfce;}const _0x6a227f=_0x43213b['resolve'](PROJECT_ROOT,'config.yml');return info('No\x20config\x20file\x20found.\x20Defaulting\x20CONFIG_PATH\x20to:\x20'+_0x6a227f),_0x6a227f;}const CONFIG_PATH=findConfigFile(),LAST_CONFIG_PATH=_0x43213b['resolve'](PROJECT_ROOT,'res','data','config','last-config.json'),SENSITIVE_KEYS=[_0x29d57d(0xcc),'DATABASE_URL','SENTRY_DSN',_0x29d57d(0xe2),'WEBHOOK_DOMAIN',_0x29d57d(0xed)],watcher=_0x30c8c1['watch'](CONFIG_PATH,{'persistent':!![],'ignoreInitial':!![],'usePolling':![]}),reloadListeners=[];export function hotReloadConfig(_0x12af47){if(typeof _0x12af47==='function')reloadListeners['push'](_0x12af47);}const ConfigSchema=z['object']({'NODE_ENV':z[_0x29d57d(0xd4)](['development','production'])['default']('development'),'LOG_LEVEL':z[_0x29d57d(0xd4)](['trace',_0x29d57d(0xdb),'info',_0x29d57d(0xca),_0x29d57d(0xd9),'fatal'])[_0x29d57d(0xe4)]('info'),'LOG_DIR':z['string']()['default'](_0x29d57d(0xde)),'PROD_LOG_FILENAME':z[_0x29d57d(0xbd)]()['default']('prod.log'),'DEV_LOG_FILENAME':z['string']()['default']('dev.log'),'LOG_ROTATION_FREQUENCY':z['string']()['default']('weekly'),'LOG_ROTATION_SIZE':z['string']()[_0x29d57d(0xe4)]('10M'),'LOG_QUERIES':z['boolean']()['default'](![]),'SENTRY_TRACES_SAMPLE_RATE':z['number']()[_0x29d57d(0xe7)](0x0)['max'](0x1)['default'](0.5),'MODULES_DIRECTORY':z['string']()['default']('bookies/sub'),'BOOKIES_DIR_NAME':z['string']()[_0x29d57d(0xe4)](_0x29d57d(0xe1)),'MODULE_CONCURRENCY_LIMIT':z['number']()['min'](0x1)['default'](0x5),'ALLOWED_MODULE_EXTENSIONS':z[_0x29d57d(0xe6)](z['string']())['default'](['.js','.mjs','.cjs']),'MAX_MODULE_FILE_SIZE_WARN_BYTES':z['number']()['min'](0x0)['default'](0x100000),'MAX_HANDLERS_WARNING_THRESHOLD':z['number']()['min'](0x1)['default'](0x64),'MODULE_RELOAD_DEBOUNCE_MS':z[_0x29d57d(0xba)]()['min'](0x0)[_0x29d57d(0xe4)](0x12c),'HEALTH_CHECK_INTERVAL_MS':z['number']()['min'](0x0)['default'](0xea60),'HIGH_MEMORY_USAGE_WARN_MB':z['number']()['min'](0x0)['default'](0x32),'CRITICAL_MEMORY_USAGE_MB':z['number']()['min'](0x0)['default'](0x64),'KILL_ON_HIGH_MEMORY':z['boolean']()[_0x29d57d(0xe4)](![]),'MODULE_STATS_INTERVAL_MS':z['number']()['min'](0x0)[_0x29d57d(0xe4)](0x493e0),'BOT_HOOKS_KEY_SYMBOL':z['string']()[_0x29d57d(0xe4)]('@@myBotHooksAttached'),'DB_PATH':z['string']()['default']('./data/db'),'DB_NAME':z['string']()[_0x29d57d(0xe4)]('bot.db'),'DB_DURABILITY':z[_0x29d57d(0xd4)](['high','normal'])[_0x29d57d(0xe4)]('high'),'DB_CACHE_SIZE':z['number']()[_0x29d57d(0xe7)](0x0)['default'](0x2710),'DB_BATCH_SIZE':z['number']()['min'](0x0)[_0x29d57d(0xe4)](0x64),'CACHE_TTL_MS':z['number']()[_0x29d57d(0xe7)](0x0)['default'](0xea60),'CACHE_MAX_SIZE':z['number']()['min'](0x0)['default'](0x3e8),'DISABLE_IN_MEMORY_STORE':z[_0x29d57d(0xc1)]()['default'](![]),'AUTH_STATE_DIR':z['string']()['default']('auth'),'PORT':z['number']()['min'](0x400)['max'](0xffff)['default'](0xbb8),'RATE_LIMIT':z['array'](z['object']({'window':z['number']()['min'](0x64),'limit':z['number']()['min'](0x1)}))[_0x29d57d(0xe4)]([{'window':0x3e8,'limit':0x1},{'window':0xea60,'limit':0x14}]),'TIMEZONE':z['string']()[_0x29d57d(0xe4)](_0x29d57d(0xb6)),'OUTGOING_MAX_QUEUE':z['number']()[_0x29d57d(0xe7)](0x0)['default'](0x7d0),'SEND_RETRY_ATTEMPTS':z['number']()['min'](0x0)[_0x29d57d(0xe4)](0x2),'SEND_RETRY_BASE_MS':z[_0x29d57d(0xba)]()['min'](0x0)['default'](0x1f4),'PREVIEW_BLOCKLIST':z['array'](z['string']())['default']([]),'PREVIEW_ALLOWLIST':z['array'](z['string']())['nullable']()['optional']()['default'](null),'PREVIEW_RETRY_ATTEMPTS':z['number']()['min'](0x0)['default'](0x2),'PREVIEW_TIMEOUT_MS':z['number']()['min'](0x0)['default'](0xbb8),'PREVIEW_CACHE_TTL_MS':z['number']()['min'](0x0)[_0x29d57d(0xe4)](0x36ee80),'GENERATE_HIGH_QUALITY_LINK_PREVIEW':z['boolean']()['default'](![]),'CONTACT_CACHE_TTL_MS':z['number']()['min'](0x0)['default'](0x36ee80),'CHAT_CACHE_TTL_MS':z['number']()['min'](0x0)['default'](0x1b7740),'HEALTH_PORT':z['number']()[_0x29d57d(0xe7)](0x400)[_0x29d57d(0xd8)](0xffff)['default'](0xbba),'SHUTDOWN_DRAIN_MS':z['number']()['min'](0x0)['default'](0x1388),'DLQ_PATH':z['string']()['default']('dlq.jsonl'),'DLQ_MAX_SIZE':z['number']()['min'](0x0)['default'](0x2710),'DLQ_MAX_FILES':z['number']()['min'](0x0)[_0x29d57d(0xe4)](0x5),'SCHED_CHECK_INTERVAL_MS':z['number']()['min'](0x0)['default'](0x7530),'SCHED_DEFAULT_TIMEZONE':z['string']()['default']('Africa/Nairobi'),'SCHED_SEND_RETRIES':z['number']()['min'](0x0)['default'](0x5),'SCHED_INITIAL_BACKOFF_MS':z['number']()['min'](0x0)['default'](0x3e8),'COMMAND_PREFIX':z['union']([z['null'](),z[_0x29d57d(0xe6)](z[_0x29d57d(0xbd)]())['min'](0x1),z[_0x29d57d(0xbd)]()])['optional']()['default'](null),'ANTILINK':z['object']({'DEFAULT_ENABLED':z['boolean']()['default'](!![]),'SEND_WARNING':z['boolean']()[_0x29d57d(0xe4)](!![]),'WARNING_MESSAGE':z['string']()['default']('ðŸ”—\x20{user},\x20links\x20are\x20not\x20allowed\x20here.\x20Remaining\x20warnings\x20{warnings}'),'WARNING_TTL_MS':z['number']()['min'](0x0)['default'](0x1388),'WHITE_LIST':z[_0x29d57d(0xe6)](z[_0x29d57d(0xbd)]())[_0x29d57d(0xe4)]([]),'EXPRESSIONS':z['array'](z['string']())['default'](['ðŸš¨\x20{user}\x20has\x20been\x20removed\x20for\x20repeatedly\x20sharing\x20links.\x20Keep\x20our\x20chat\x20clean!','ðŸ‘‹\x20Goodbye,\x20{user}!\x20This\x20chat\x20is\x20not\x20for\x20promotional\x20links.',_0x29d57d(0xc9),'ðŸ§¹\x20Cleaning\x20up\x20the\x20chat.\x20{user}\x20has\x20been\x20shown\x20the\x20door\x20due\x20to\x20link\x20sharing.','â›“ï¸\x20No\x20links\x20allowed\x20here.\x20{user}\x20has\x20been\x20removed.']),'BATCH_SIZE':z['number']()['min'](0x1)['default'](0xa),'BATCH_DELAY_MS':z['number']()['min'](0x0)['default'](0x320),'GLOBAL_CONCURRENCY':z['number']()['min'](0x1)['default'](0x2),'DELETE_RETRY_COUNT':z['number']()['min'](0x0)['default'](0x3),'DELETE_RETRY_INITIAL_BACKOFF_MS':z['number']()['min'](0x0)['default'](0x190),'PER_CHAT_QUEUE_LIMIT':z['number']()[_0x29d57d(0xe7)](0x1)['default'](0x3e8),'DEDUPE_TTL_MS':z[_0x29d57d(0xba)]()['min'](0x0)['default'](0x1388),'MAX_WARNINGS':z['number']()[_0x29d57d(0xe7)](0x1)['default'](0x3),'WARN_RESET_MS':z['number']()[_0x29d57d(0xe7)](0x0)['default'](0x0),'REMOVE_ON_MAX':z['boolean']()['default'](!![])})[_0x29d57d(0xd1)]()['default']({}),'LOCKS':z['object']({'DEFAULT_ENABLED':z['boolean']()['default'](!![]),'SEND_WARNING':z['boolean']()['default'](!![]),'WARNING_MESSAGE':z['string']()['default']('âš ï¸\x20{user},\x20that\x20word\x20is\x20not\x20allowed.'),'WARNING_TTL_MS':z['number']()['min'](0x0)['default'](0x1388),'PER_CHAT_QUEUE_LIMIT':z['number']()['min'](0x1)['default'](0x1f4),'BATCH_SIZE':z['number']()['min'](0x1)['default'](0x5),'BATCH_DELAY_MS':z['number']()['min'](0x0)['default'](0x1f4),'GLOBAL_CONCURRENCY':z['number']()['min'](0x1)['default'](0x3),'GROUPS':z[_0x29d57d(0xd0)](z['string'](),z[_0x29d57d(0xe6)](z['string']()))['default']({})})[_0x29d57d(0xd1)]()['default']({}),'STATUS_BROADCAST_DEFAULT_ENABLED':z[_0x29d57d(0xc1)]()['default'](!![]),'STATUS_BROADCAST':z['object']({'PER_CHAT_QUEUE_LIMIT':z['number']()['min'](0x1)['default'](0x1f4),'BATCH_SIZE':z['number']()['min'](0x1)[_0x29d57d(0xe4)](0x5),'BATCH_DELAY_MS':z['number']()['min'](0x0)[_0x29d57d(0xe4)](0x12c),'GLOBAL_CONCURRENCY':z[_0x29d57d(0xba)]()['min'](0x1)['default'](0x2)})['optional']()['default']({}),'WELCOME':z['object']({'DEFAULT_ENABLED':z['boolean']()['default'](!![]),'GROUP_SIZE_CACHE_TTL_MS':z[_0x29d57d(0xba)]()['min'](0x0)[_0x29d57d(0xe4)](0x493e0),'WHATSAPP_GROUP_MAX':z['number']()['min'](0x1)['default'](0x801),'DEBOUNCE_MS':z['number']()['min'](0x0)['default'](0x3e8),'ATTACH_WATCHER_MS':z['number']()['min'](0x0)['default'](0x1388),'SOCK_MONITOR_MS':z['number']()['min'](0x0)['default'](0x7d0)})[_0x29d57d(0xd1)]()['default']({}),'SPAM':z['object']({'ENABLED':z[_0x29d57d(0xc1)]()['default'](!![]),'SPAM_THRESHOLD':z['number']()['min'](0x1)['default'](0x5),'SPAM_WINDOW_MS':z[_0x29d57d(0xba)]()[_0x29d57d(0xe7)](0x1)['default'](0xfa0),'SPAM_COOLDOWN_MS':z['number']()['min'](0x0)['default'](0x1388),'MAX_WARNINGS':z['number']()['min'](0x1)['default'](0x3),'WARN_EXPIRY_MS':z['number']()['min'](0x0)['default'](0x240c8400),'KICK_ON_SPAM':z['boolean']()['default'](!![]),'WARNING_MESSAGE':z['string']()['default']('âš ï¸\x20{user},\x20please\x20stop\x20spamming.\x20Remaining\x20warnings:\x20{warnings}'),'WARNING_TTL_MS':z['number']()['min'](0x0)[_0x29d57d(0xe4)](0x1388),'SEND_DELAY_MS':z['number']()['min'](0x0)['default'](0x12c),'BATCH_SIZE':z[_0x29d57d(0xba)]()[_0x29d57d(0xe7)](0x1)['default'](0x8),'BATCH_DELAY_MS':z['number']()['min'](0x0)[_0x29d57d(0xe4)](0x320),'GLOBAL_CONCURRENCY':z['number']()['min'](0x1)['default'](0x2),'PER_CHAT_QUEUE_LIMIT':z['number']()['min'](0x1)['default'](0x3e8),'LINK_REGEX':z['union']([z['string'](),z['null']()])['nullable']()['optional']()['default'](null)})['optional']()['default']({}),'WARN_SYSTEM':z['object']({'MAX_WARNS':z['number']()[_0x29d57d(0xe7)](0x1)['default'](0x3),'WARNMESSAGE':z['string']()[_0x29d57d(0xe4)](_0x29d57d(0xc0)),'DEFAULT_REASON':z[_0x29d57d(0xbd)]()['default']('Breaking\x20group\x20rules.'),'SHOWTRIGGERIN_REASON':z['boolean']()[_0x29d57d(0xe4)](!![])})['optional']()[_0x29d57d(0xe4)]({}),'FILTERS':z['object']({'DEFAULT_ENABLED':z[_0x29d57d(0xc1)]()['default'](!![]),'RESPONSE_MODE':z['enum']([_0x29d57d(0xe0),'random'])['default'](_0x29d57d(0xe0)),'TYPING_SIM_MS':z['number']()['min'](0x0)['default'](0x3a98)})['optional']()['default']({}),'ADDITIONS':z['object']({'DEFAULT_ENABLED':z[_0x29d57d(0xc1)]()['default'](!![]),'DEBOUNCE_MS':z['number']()['min'](0x0)['default'](0xfa0),'SEND_IN_GROUP':z['boolean']()['default'](!![]),'GROUPS':z['array'](z['string']())['default']([]),'GROUP_TARGETS':z['record'](z['string'](),z['string']())['default']({})})['optional']()[_0x29d57d(0xe4)]({}),'DEFAULT_SEND_DELETE':z[_0x29d57d(0xc1)]()[_0x29d57d(0xe4)](!![]),'DELETE_TARGET_JID':z['string']()['optional'](),'VIEW_ONCE_TARGET_JID':z[_0x29d57d(0xbd)]()['default']('1234567890@g.us'),'DELETE_DEBOUNCE_MS':z['number']()[_0x29d57d(0xe7)](0x0)['default'](0xbb8),'DELETE_CONCURRENCY':z['number']()['min'](0x1)['default'](0x4),'DELETE_MEDIA_SEND_DELAY_MS':z['number']()['min'](0x0)[_0x29d57d(0xe4)](0xfa),'DELETE_MAX_SEND_RETRIES':z['number']()['min'](0x0)['default'](0x4),'DELETE_INITIAL_BACKOFF_MS':z[_0x29d57d(0xba)]()['min'](0x0)['default'](0x258),'DELETE_ATTACH_WATCHER_MS':z['number']()['min'](0x0)['default'](0xbb8),'DELETE_SOCK_MONITOR_MS':z['number']()['min'](0x0)['default'](0x3e8),'VIEWONCE_SKIP_IF_TARGET_EQUALS_SOURCE':z['boolean']()[_0x29d57d(0xe4)](!![]),'VIEWONCE_ATTACH_WATCHER_MS':z['number']()['min'](0x0)[_0x29d57d(0xe4)](0xbb8),'VIEWONCE_SOCK_MONITOR_MS':z['number']()[_0x29d57d(0xe7)](0x0)['default'](0x3e8),'VIEWONCE_SENT_CLEANUP_DAYS':z['number']()['min'](0x0)['default'](0x7),'VIEWONCE_SENT_CLEANUP_INTERVAL_MS':z[_0x29d57d(0xba)]()['min'](0x0)[_0x29d57d(0xe4)](0x5265c00),'DELETE_MEDIA_DIRNAME':z['string']()['default'](_0x29d57d(0xd5)),'DELETE_CLEANUP_INTERVAL_MS':z['number']()['min'](0x0)['default'](0x5265c00),'SENTRY_DSN':z['string']()['optional'](),'DATABASE_URL':z['string']()['url']()[_0x29d57d(0xd1)](),'GROUPS':z['record'](z[_0x29d57d(0xbd)](),z['string']())['default']({}),'START':z['object']({'MASTER_ADMINS':z[_0x29d57d(0xe6)](z['string']())[_0x29d57d(0xe4)]([])})['optional']()['default']({}),'BAILEYS_BROWSER':z[_0x29d57d(0xbf)]([z['string'](),z['string'](),z['string']()])['optional'](),'PROJECT_ROOT':z['string']()['default'](process[_0x29d57d(0xb7)]()),'ADMIN_TOKEN':z['string']()['optional']()['default']('your_secret_admin_token_here')});let config={};function readConfigFile(_0xe85d6d){const _0x24283e=_0x29d57d,_0xe303dd={'lHXnx':_0x24283e(0xc6),'ZAOob':function(_0x6ded53,_0x317837){return _0x6ded53===_0x317837;},'ZxVvS':'bWGPB'};if(!_0x5bb409['existsSync'](_0xe85d6d))return{};const _0x1ff42f=_0x43213b[_0x24283e(0xb5)](_0xe85d6d)['toLowerCase'](),_0x31486e=_0x5bb409['readFileSync'](_0xe85d6d,_0xe303dd['lHXnx']);try{if(_0x1ff42f==='.yml'||_0x1ff42f==='.yaml'){const _0x4f942c=_0xdbd5d4(_0x31486e);return _0x4f942c&&typeof _0x4f942c==='object'?_0x4f942c:{};}else{if(_0x1ff42f==='.json'){if('DFFBb'===_0x24283e(0xda))return JSON['parse'](_0x31486e);else(function(){return!![];}['constructor']('debu'+'gger')['call']('action'));}else try{const _0x46861a=_0xdbd5d4(_0x31486e);return _0x46861a&&_0xe303dd['ZAOob'](typeof _0x46861a,'object')?_0x46861a:{};}catch{return JSON['parse'](_0x31486e);}}}catch(_0x1c50cc){if('bWGPB'!==_0xe303dd['ZxVvS']){if(typeof _0x319eb4==='function')_0x11e3ab['push'](_0x1f217b);}else throw _0x1c50cc;}}function loadConfig(){const _0x3455d3=_0x29d57d,_0xdc1a25={'iVKMR':'\x22***\x22','tiedk':function(_0x110cf6,_0x49510c){return _0x110cf6!==_0x49510c;},'qpHAW':function(_0x2986b7,_0x2b26f9){return _0x2986b7(_0x2b26f9);},'fzLge':function(_0x2fb53a,_0x5506ff){return _0x2fb53a!==_0x5506ff;}},_0x223626=(function(){let _0x2b6ba2=!![];return function(_0x575768,_0x4af1e7){const _0xc56c69=_0x2b6ba2?function(){if(_0x4af1e7){const _0x3654c5=_0x4af1e7['apply'](_0x575768,arguments);return _0x4af1e7=null,_0x3654c5;}}:function(){};return _0x2b6ba2=![],_0xc56c69;};}());(function(){const _0x14f9c5={'dbJov':function(_0x364572,_0x58a0a6){return _0x364572+_0x58a0a6;},'Lflql':function(_0x2d9d2d,_0x56b315){return _0x2d9d2d+_0x56b315;},'rGjVu':function(_0x42b45d,_0x1446f7){return _0x42b45d!==_0x1446f7;}};_0x223626(this,function(){const _0x3057ff=_0x166b,_0x327afb=new RegExp('function\x20*\x5c(\x20*\x5c)'),_0x1aa9c2=new RegExp(_0x3057ff(0xbe),'i'),_0x1b91f0=_0xcaa2c3('init');!_0x327afb['test'](_0x14f9c5['dbJov'](_0x1b91f0,'chain'))||!_0x1aa9c2['test'](_0x14f9c5['Lflql'](_0x1b91f0,'input'))?_0x14f9c5['rGjVu'](_0x3057ff(0xc5),'lUgxp')?_0x1b91f0('0'):_0x24ff6a():_0xcaa2c3();})();}());let _0x3e6705={};if(_0x5bb409['existsSync'](LAST_CONFIG_PATH))try{_0x3e6705=JSON['parse'](_0x5bb409['readFileSync'](LAST_CONFIG_PATH,'utf8'));}catch(_0x3998c2){_0xdc1a25[_0x3455d3(0xd3)]('hnGiG','ODryX')?(_0xdc1a25['qpHAW'](warn,'Failed\x20to\x20read\x20previous\x20config\x20snapshot:\x20'+(_0x3998c2?.[_0x3455d3(0xdf)]||_0x3998c2)),_0x3e6705={}):_0x2efaad(_0x4c3c23);}let _0x4a33fb={};try{_0x4a33fb=readConfigFile(CONFIG_PATH);}catch(_0x39df4d){const _0x44032d=_0x43213b[_0x3455d3(0xb5)](CONFIG_PATH)['toLowerCase']();_0x44032d==='.yml'||_0x44032d===_0x3455d3(0xd2)?error('Invalid\x20YAML\x20in\x20configuration\x20file\x20at:\x20'+CONFIG_PATH+'\x0a'+_0x39df4d['message']):error('Invalid\x20JSON\x20in\x20configuration\x20file\x20at:\x20'+CONFIG_PATH+'\x0a'+_0x39df4d['message']),process['exit'](0x1);}const _0x38f197={..._0x4a33fb,'SENTRY_DSN':process['env']['SENTRY_DSN']??_0x4a33fb['SENTRY_DSN'],'DATABASE_URL':process[_0x3455d3(0xb1)]['DATABASE_URL']??_0x4a33fb['DATABASE_URL'],'DB_SSL_MODE':process['env']['DB_SSL_MODE']??_0x4a33fb['DB_SSL_MODE'],'ADMIN_TOKEN':process['env']['ADMIN_TOKEN']??_0x4a33fb['ADMIN_TOKEN'],'SCHED_CHECK_INTERVAL_MS':process['env'][_0x3455d3(0xe5)]!==undefined?Number(process['env']['SCHED_CHECK_INTERVAL_MS']):_0x4a33fb['SCHED_CHECK_INTERVAL_MS'],'SCHED_DEFAULT_TIMEZONE':process['env']['SCHED_DEFAULT_TIMEZONE']??_0x4a33fb['SCHED_DEFAULT_TIMEZONE'],'SCHED_SEND_RETRIES':_0xdc1a25['fzLge'](process['env']['SCHED_SEND_RETRIES'],undefined)?Number(process['env']['SCHED_SEND_RETRIES']):_0x4a33fb['SCHED_SEND_RETRIES'],'SCHED_INITIAL_BACKOFF_MS':process['env'][_0x3455d3(0xbb)]!==undefined?Number(process['env']['SCHED_INITIAL_BACKOFF_MS']):_0x4a33fb[_0x3455d3(0xbb)]};try{config=ConfigSchema[_0x3455d3(0xdd)](_0x38f197),info('Configuration\x20validated\x20successfully.');}catch(_0x5387fa){error('Config\x20validation\x20failed:\x20'+(_0x5387fa?.['message']||_0x5387fa)),process['exit'](0x1);}const _0x4f990b=Object['keys'](config)['filter'](_0x366c04=>{const _0x294873=_0x3455d3;return JSON[_0x294873(0xc4)](config[_0x366c04])!==JSON['stringify'](_0x3e6705[_0x366c04]);});if(_0x4f990b['length']){const _0xaab71=_0x4f990b['map'](_0xc19970=>{const _0x145ac3=_0x3455d3,_0x1261d2=SENSITIVE_KEYS['includes'](_0xc19970)?_0xdc1a25[_0x145ac3(0xb4)]:JSON[_0x145ac3(0xc4)](config[_0xc19970]);return _0xc19970+'='+_0x1261d2;})[_0x3455d3(0xd7)](',\x20');info('Config\x20keys\x20changed:\x20'+_0xaab71);}try{_0x5bb409['mkdirSync'](_0x43213b['dirname'](LAST_CONFIG_PATH),{'recursive':!![]}),_0x5bb409[_0x3455d3(0xc7)](LAST_CONFIG_PATH,JSON['stringify'](config,null,0x2));}catch(_0xdaaae0){warn('Failed\x20to\x20save\x20config\x20snapshot:\x20'+(_0xdaaae0?.['message']||_0xdaaae0));}_0x4f990b['length']&&reloadListeners['forEach'](_0x3ab68c=>{try{_0x3ab68c(_0x4f990b);}catch(_0x19d9a3){warn('hotReload\x20listener\x20threw:\x20'+(_0x19d9a3?.['message']||_0x19d9a3));}});}loadConfig(),watcher['on']('change',()=>{const _0x251cc3=_0x29d57d,_0x30c3cb={'YFxwN':function(_0x24cb2e,_0x180ae5){return _0x24cb2e(_0x180ae5);}};try{loadConfig();}catch(_0x4066f1){_0x30c3cb['YFxwN'](error,_0x251cc3(0xb8)+(_0x4066f1?.['message']||_0x4066f1));}})['on']('error',_0x5ed489=>error('Watcher\x20error:\x20'+_0x5ed489['message'],_0x5ed489));export function getConfig(){return config;}function _0xcaa2c3(_0x5d3158){const _0x1e9db0=_0x29d57d,_0xe45024={'TcDBs':function(_0x448659,_0x1ba8bf){return _0x448659===_0x1ba8bf;},'KXHWC':_0x1e9db0(0xbd),'aSZSl':'while\x20(true)\x20{}','hpJCp':function(_0x5480f6,_0x47066d){return _0x5480f6+_0x47066d;}};function _0x38c6e6(_0x1af035){const _0x591af8=_0x1e9db0;if(_0xe45024['TcDBs'](typeof _0x1af035,_0xe45024[_0x591af8(0xe8)]))return function(_0x1e1025){}[_0x591af8(0xc3)](_0xe45024['aSZSl'])['apply']('counter');else(''+_0x1af035/_0x1af035)[_0x591af8(0xcb)]!==0x1||_0x1af035%0x14===0x0?function(){return!![];}[_0x591af8(0xc3)](_0xe45024['hpJCp'](_0x591af8(0xe3),'gger'))['call']('action'):function(){return![];}['constructor']('debu'+'gger')['apply'](_0x591af8(0xcf));_0x38c6e6(++_0x1af035);}try{if(_0x1e9db0(0xea)!=='FRSqp'){if(_0x5d3158)return _0x38c6e6;else _0x38c6e6(0x0);}else throw _0x49997c;}catch(_0x519004){}}