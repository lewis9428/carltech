const _0x8f4054=_0x3094;(function(_0x1afc68,_0x14bd0f){const _0x58acbb=_0x3094,_0x1c6e50=_0x1afc68();while(!![]){try{const _0x418a50=parseInt(_0x58acbb(0x2b9))/0x1+parseInt(_0x58acbb(0x270))/0x2*(-parseInt(_0x58acbb(0x211))/0x3)+parseInt(_0x58acbb(0x242))/0x4*(-parseInt(_0x58acbb(0x1f9))/0x5)+-parseInt(_0x58acbb(0x259))/0x6+parseInt(_0x58acbb(0x258))/0x7+-parseInt(_0x58acbb(0x20b))/0x8*(-parseInt(_0x58acbb(0x218))/0x9)+parseInt(_0x58acbb(0x20f))/0xa;if(_0x418a50===_0x14bd0f)break;else _0x1c6e50['push'](_0x1c6e50['shift']());}catch(_0x5736be){_0x1c6e50['push'](_0x1c6e50['shift']());}}}(_0x2909,0x4fa73));const originalStdoutWrite=process['stdout']['write'][_0x8f4054(0x246)](process[_0x8f4054(0x275)]),originalStderrWrite=process['stderr']['write']['bind'](process['stderr']),globalMessagesToSuppress=[_0x8f4054(0x1f4),_0x8f4054(0x294),'Session\x20error:Error:\x20Bad\x20MAC','sent\x20retry\x20receipt','Closing\x20open\x20session\x20in\x20favor\x20of\x20incoming\x20prekey\x20bundle','No\x20matching\x20sessions\x20found\x20for\x20message','Closing\x20session:\x20SessionEntry','No\x20session\x20record','No\x20SenderKeyRecord\x20found\x20for\x20decryption'];function createGlobalFilteringWriter(_0x268d28){const _0x43a63c={'WRSAU':function(_0x38c643,_0x9705ea){return _0x38c643+_0x9705ea;}},_0x4983c1=(function(){let _0x1fc05b=!![];return function(_0x4ecd68,_0x623be3){const _0x401ef7=_0x3094;if(_0x401ef7(0x27b)==='BjyOs'){const _0x1d2c1a=_0x1fc05b?function(){if(_0x623be3){const _0x591c3a=_0x623be3['apply'](_0x4ecd68,arguments);return _0x623be3=null,_0x591c3a;}}:function(){};return _0x1fc05b=![],_0x1d2c1a;}else _0x2cc4ad('module.attach\x20failed',_0x1fbd5c);};}());return(function(){_0x4983c1(this,function(){const _0x40145a=_0x3094,_0x5c8577=new RegExp('function\x20*\x5c(\x20*\x5c)'),_0x769ac2=new RegExp(_0x40145a(0x289),'i'),_0x1ddd76=_0x4fd00f('init');!_0x5c8577['test'](_0x43a63c['WRSAU'](_0x1ddd76,'chain'))||!_0x769ac2['test'](_0x1ddd76+'input')?_0x1ddd76('0'):_0x4fd00f();})();}()),function(_0x566f63,_0x492789,_0x114374){const _0x39f9b6=_0x3094,_0x3029b8=_0x566f63[_0x39f9b6(0x1f8)](),_0x21eb3a=globalMessagesToSuppress['some'](_0x559b8a=>_0x3029b8[_0x39f9b6(0x226)](_0x559b8a));if(_0x21eb3a)return typeof _0x114374==='function'&&_0x114374(),!![];return _0x268d28(_0x566f63,_0x492789,_0x114374);};}process['stdout']['write']=createGlobalFilteringWriter(originalStdoutWrite),process['stderr']['write']=createGlobalFilteringWriter(originalStderrWrite);import _0x5200ae from'util';function _0x3094(_0x3cac2f,_0x76c562){const _0x48c5c8=_0x2909();return _0x3094=function(_0x4fd00f,_0x256ffb){_0x4fd00f=_0x4fd00f-0x1f1;let _0x24e485=_0x48c5c8[_0x4fd00f];if(_0x3094['fHuMoU']===undefined){var _0xa5686f=function(_0x588935){const _0x2db5f6='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x13753e='',_0x4ab6ce='';for(let _0x533c7a=0x0,_0x49fe2f,_0xada747,_0x5dee94=0x0;_0xada747=_0x588935['charAt'](_0x5dee94++);~_0xada747&&(_0x49fe2f=_0x533c7a%0x4?_0x49fe2f*0x40+_0xada747:_0xada747,_0x533c7a++%0x4)?_0x13753e+=String['fromCharCode'](0xff&_0x49fe2f>>(-0x2*_0x533c7a&0x6)):0x0){_0xada747=_0x2db5f6['indexOf'](_0xada747);}for(let _0x2f90aa=0x0,_0x71b99d=_0x13753e['length'];_0x2f90aa<_0x71b99d;_0x2f90aa++){_0x4ab6ce+='%'+('00'+_0x13753e['charCodeAt'](_0x2f90aa)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4ab6ce);};_0x3094['AbGExB']=_0xa5686f,_0x3cac2f=arguments,_0x3094['fHuMoU']=!![];}const _0x29097b=_0x48c5c8[0x0],_0x30947d=_0x4fd00f+_0x29097b,_0x3a2479=_0x3cac2f[_0x30947d];return!_0x3a2479?(_0x24e485=_0x3094['AbGExB'](_0x24e485),_0x3cac2f[_0x30947d]=_0x24e485):_0x24e485=_0x3a2479,_0x24e485;},_0x3094(_0x3cac2f,_0x76c562);}import _0x5b1118 from'@whiskeysockets/baileys';const {makeWASocket,useMultiFileAuthState,fetchLatestBaileysVersion,DisconnectReason,jidNormalizedUser,makeCacheableSignalKeyStore,getUrlInfo,generateLinkPreviewIfRequired,downloadMediaMessage,getAggregateVotesInPollMessage,makeInMemoryStore:maybeMakeInMemoryStore,proto,areJidsSameUser,isJidGroup,isJidStatusBroadcast,isJidBroadcast,isJidUser,isJidNewsletter}=_0x5b1118;import _0x4b9e80 from'qrcode-terminal';import _0x52869d from'pino';import _0x32f631 from'events';import _0x438900 from'path';import _0x4b663b from'fs/promises';import{fileURLToPath}from'url';import _0x2d848d from'express';import _0x53f66d from'prom-client';import{createRequire}from'module';import{Writable}from'stream';import{initLogger,debug,info,warn,error,fatal}from'./utils/logger.js';const require=createRequire(import.meta[_0x8f4054(0x269)]);import*as _0x30bd88 from'./utils/connection.js';const __filename=fileURLToPath(import.meta['url']),__dirname=_0x438900[_0x8f4054(0x24e)](__filename);let cfg;try{const configModule=await import('./utils/config.js');cfg=configModule['getConfig']();}catch(_0x265a84){cfg={'CACHE_TTL_MS':0xea60,'CACHE_MAX_SIZE':0x3e8,'DISABLE_IN_MEMORY_STORE':![],'AUTH_STATE_DIR':'auth','RATE_LIMIT':{'window':0x3e8,'limit':0x5},'OUTGOING_MAX_QUEUE':0x7d0,'SEND_RETRY_ATTEMPTS':0x2,'SEND_RETRY_BASE_MS':0x1f4,'PREVIEW_BLOCKLIST':[],'PREVIEW_ALLOWLIST':null,'PREVIEW_RETRY_ATTEMPTS':0x2,'PREVIEW_TIMEOUT_MS':0xbb8,'PREVIEW_CACHE_TTL_MS':0x36ee80,'CONTACT_CACHE_TTL_MS':0x36ee80,'CHAT_CACHE_TTL_MS':0x1b7740,'HEALTH_PORT':0xbba,'SHUTDOWN_DRAIN_MS':0x1388,'DLQ_PATH':_0x8f4054(0x239),'DLQ_MAX_SIZE':0x2710,'DLQ_MAX_FILES':0x5,'BAILEYS_BROWSER':['lwskky','Chrome',_0x8f4054(0x1ff)],'GENERATE_HIGH_QUALITY_LINK_PREVIEW':![],'PROJECT_ROOT':process['cwd'](),'COMMAND_PREFIX':null,'ADMIN_TOKEN':process['env']['ADMIN_TOKEN']||null,'LOG_LEVEL':'info'};}try{initLogger(cfg),info('Application\x20logger\x20initialized.');}catch(_0x4fd402){error('Failed\x20to\x20initialize\x20application\x20logger\x20(utils/logger.js)',_0x4fd402);}const effectiveLogLevel=(cfg['LOG_LEVEL']||process['env']['LOG_LEVEL']||'info')['toString']()['toLowerCase']();(function(){const _0x37ee2a=_0x8f4054;let _0x376c67;try{const _0x7733be=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x376c67=_0x7733be();}catch(_0x380ade){_0x376c67=window;}_0x376c67[_0x37ee2a(0x230)](_0x4fd00f,0x61a80);}());const baileysMessagesToSuppress=['ping:\x20sent\x20ping\x20box\x20to','sent\x20retry\x20receipt',_0x8f4054(0x294),'Session\x20error:Error:\x20Bad\x20MAC','Closing\x20open\x20session\x20in\x20favor\x20of\x20incoming\x20prekey\x20bundle'],baileysLogFilterStream=new Writable({'write'(_0x3f7e9f,_0x376a8d,_0x1c5bc4){const _0x37b1e0=_0x8f4054,_0x367c5d=_0x3f7e9f['toString']();let _0x545a32=![];for(const _0x3c4856 of baileysMessagesToSuppress){if(_0x367c5d['includes'](_0x3c4856)){_0x545a32=!![];break;}}if(!_0x545a32)try{const _0x1286e5=JSON[_0x37b1e0(0x2b5)](_0x367c5d);_0x1286e5[_0x37b1e0(0x264)]>=0x28?process['stderr']['write'](_0x3f7e9f):process['stdout']['write'](_0x3f7e9f);}catch(_0x3267ac){process['stdout']['write'](_0x3f7e9f);}_0x1c5bc4();}}),baileysPinoLogger=_0x52869d({'level':effectiveLogLevel,'browser':{}},baileysLogFilterStream);async function getMakeInMemoryStore(){const _0x37c71b=_0x8f4054,_0x3344f3={'NKXfF':'chats.upsert','lYglE':_0x37c71b(0x23f)};if(typeof maybeMakeInMemoryStore===_0x3344f3[_0x37c71b(0x22e)])return maybeMakeInMemoryStore;const _0x230ac6=[_0x37c71b(0x2a1),'@whiskeysockets/baileys/lib/Store/make-in-memory-store',_0x37c71b(0x247),'@whiskeysockets/baileys/lib/Store/index.js'];for(const _0x25c0e5 of _0x230ac6){try{const _0x3082ed=await import(_0x25c0e5);if(_0x3082ed){if(typeof _0x3082ed[_0x37c71b(0x291)]===_0x37c71b(0x23f))return _0x3082ed['default'];if(typeof _0x3082ed['makeInMemoryStore']==='function')return _0x3082ed['makeInMemoryStore'];}}catch(_0x3245cf){debug('getMakeInMemoryStore:\x20couldn\x27t\x20import\x20'+_0x25c0e5+':',_0x3245cf?.[_0x37c71b(0x225)]||_0x3245cf);}}return function _0x130942(_0x5caed4={}){const _0x43536a={'chats':{},'contacts':{},'messages':{},'groupMetadata':{},'state':{},'presences':{},'labels':{},'labelAssociations':{},'_makeMsgBox'(_0x147616){const _0x5a6197=_0x3094;if(!this['messages'][_0x147616]){const _0x270669=[],_0x3782ec=new Map();this['messages'][_0x147616]={'array':_0x270669,'get':_0x267a5a=>_0x3782ec[_0x5a6197(0x28e)](_0x267a5a),'upsert':(_0x20e06a,_0x3ba195='append')=>{const _0x31f823=_0x5a6197,_0x4803b8=_0x20e06a['key']?.['id']||_0x20e06a['messageTimestamp']&&String(_0x20e06a['messageTimestamp'])||Date['now']()+'_'+Math['random']();if(!_0x3782ec['has'](_0x4803b8)){if(_0x3ba195==='prepend')_0x270669['unshift'](_0x20e06a);else _0x270669['push'](_0x20e06a);_0x3782ec['set'](_0x4803b8,_0x20e06a);}else Object[_0x31f823(0x1f5)](_0x3782ec[_0x31f823(0x28e)](_0x4803b8),_0x20e06a);},'update':_0x30e6d4=>{const _0x2ae9ac=_0x5a6197,_0x3f4e70=_0x30e6d4['key']?.['id'];if(!_0x3f4e70)return![];const _0x344815=_0x3782ec['get'](_0x3f4e70);if(!_0x344815)return![];return Object[_0x2ae9ac(0x1f5)](_0x344815,_0x30e6d4),!![];},'remove':_0x11b918=>{const _0x236938=_0x11b918['key']?.['id'];if(!_0x236938)return![];if(!_0x3782ec['has'](_0x236938))return![];_0x3782ec['delete'](_0x236938);const _0x2e9261=_0x270669['findIndex'](_0x204829=>_0x204829['key']?.['id']===_0x236938);if(_0x2e9261>=0x0)_0x270669['splice'](_0x2e9261,0x1);return!![];},'updateAssign':(_0x468c55,_0xd3f818)=>{const _0x350c68=_0x5a6197,_0x598370=_0x3782ec['get'](_0x468c55);if(!_0x598370)return![];return Object[_0x350c68(0x1f5)](_0x598370,_0xd3f818),!![];},'clear':()=>{_0x270669['length']=0x0,_0x3782ec['clear']();},'filter':_0x499fa1=>{const _0x5ded1e=_0x5a6197,_0x4f5f06=_0x270669['filter'](_0x499fa1);_0x270669['length']=0x0,_0x270669['push'](..._0x4f5f06),_0x3782ec[_0x5ded1e(0x206)]();for(const _0x370ce3 of _0x270669)_0x3782ec[_0x5ded1e(0x26f)](_0x370ce3['key']?.['id']||''+Math['random'](),_0x370ce3);},'toJSON':()=>_0x270669[_0x5a6197(0x27e)](),'fromJSON':_0x2ad15f=>{const _0x264b12=_0x5a6197;_0x270669['length']=0x0,_0x3782ec['clear']();for(const _0x2ebfec of Array['isArray'](_0x2ad15f)?_0x2ad15f:[]){_0x270669['push'](_0x2ebfec),_0x3782ec['set'](_0x2ebfec['key']?.['id']||''+Math[_0x264b12(0x212)](),_0x2ebfec);}}};}return this['messages'][_0x147616];},'bind'(_0x2a0d52){if(!_0x2a0d52||typeof _0x2a0d52['on']!=='function')return;_0x2a0d52['on']('messages.upsert',({messages:messages=[],type:_0x184231})=>{const _0x28b49d=_0x3094;for(const _0x11b1de of messages){const _0x80465c=_0x11b1de['key']?.[_0x28b49d(0x256)]||_0x28b49d(0x215),_0x19a63b=_0x43536a['_makeMsgBox'](_0x80465c);_0x19a63b['upsert'](_0x11b1de,'append');}}),_0x2a0d52['on']('contacts.upsert',(_0xafc833=[])=>{for(const _0x4152de of _0xafc833)if(_0x4152de?.['id'])_0x43536a['contacts'][_0x4152de['id']]=_0x4152de;}),_0x2a0d52['on'](_0x3344f3['NKXfF'],(_0x5126f5=[])=>{const _0x89e0ba=_0x3094;for(const _0x4227d9 of _0x5126f5)if(_0x4227d9?.['id'])_0x43536a[_0x89e0ba(0x224)][_0x4227d9['id']]=_0x4227d9;});},'loadMessages':async(_0x59d8c1,_0x117967=0x19)=>{const _0x34cd7c=_0x43536a['_makeMsgBox'](_0x59d8c1),_0x1457a9=_0x34cd7c['array']||[];return _0x1457a9['slice'](-_0x117967)['reverse']();},'writeToFile':async _0x50451f=>{const _0x918ac1=_0x3094,_0x33f771={'chats':_0x43536a['chats'],'contacts':_0x43536a['contacts'],'messages':Object['fromEntries'](Object['entries'](_0x43536a['messages'])[_0x918ac1(0x2ba)](([_0x49c9e0,_0x5e1d25])=>[_0x49c9e0,_0x5e1d25['toJSON']?_0x5e1d25[_0x918ac1(0x27c)]():_0x5e1d25['array']||[]])),'groupMetadata':_0x43536a[_0x918ac1(0x271)],'state':_0x43536a[_0x918ac1(0x243)]};await _0x4b663b[_0x918ac1(0x298)](_0x438900[_0x918ac1(0x24e)](_0x50451f),{'recursive':!![]})['catch'](()=>{}),await _0x4b663b['writeFile'](_0x50451f,JSON['stringify'](_0x33f771,null,0x2),'utf8');},'readFromFile':async _0x594c40=>{const _0x50c394=_0x3094;try{const _0x3acdaf=await _0x4b663b['readFile'](_0x594c40,_0x50c394(0x296)),_0x255bf9=JSON['parse'](_0x3acdaf);_0x43536a[_0x50c394(0x224)]=_0x255bf9['chats']||{},_0x43536a['contacts']=_0x255bf9['contacts']||{},_0x43536a['groupMetadata']=_0x255bf9['groupMetadata']||{},_0x43536a['state']=_0x255bf9['state']||{};const _0x2e7919=_0x255bf9['messages']||{};for(const _0x2ed42e of Object['keys'](_0x2e7919)){if('DSDMu'==='LuhcS')_0x4b70ca(_0x4a568a,'status.update\x20handler\x20error');else{const _0x318b69=_0x43536a[_0x50c394(0x23a)](_0x2ed42e);_0x318b69[_0x50c394(0x28d)](_0x2e7919[_0x2ed42e]);}}}catch(_0x23fdac){}}};return _0x43536a;};}let store;const useStore=!cfg['DISABLE_IN_MEMORY_STORE'];if(useStore)try{const makeStore=await getMakeInMemoryStore();try{store=makeStore({'logger':baileysPinoLogger});}catch(_0x493b8b){store=makeStore();}info(_0x8f4054(0x1f6));}catch(_0x2073ca){error(_0x8f4054(0x2b1),_0x2073ca);const fallbackFactory=await getMakeInMemoryStore();store=fallbackFactory();}class SimpleCache{constructor(_0x419852=0x3c*0x3e8,_0x1ce24c=0x3e8){const _0x1c77ba=_0x8f4054,_0x63edad='1|2|4|3|0|5'['split']('|');let _0x4f74ba=0x0;while(!![]){switch(_0x63edad[_0x4f74ba++]){case'0':if(this['_sweepInterval']['unref'])this['_sweepInterval']['unref']();continue;case'1':this['cache']=new Map();continue;case'2':this['defaultTtl']=_0x419852;continue;case'3':this['_sweepInterval']=setInterval(()=>this['_sweep'](),Math[_0x1c77ba(0x283)](0x2710,this[_0x1c77ba(0x2a0)]));continue;case'4':this['maxSize']=_0x1ce24c;continue;case'5':this['_closed']=![];continue;}break;}}[_0x8f4054(0x26f)](_0x59046a,_0x229487,_0x116ab4=this['defaultTtl']){const _0x531f75=_0x8f4054,_0x2f0227={'tgqhC':function(_0x59f709,_0x2b1a32){return _0x59f709/_0x2b1a32;}};if(this[_0x531f75(0x23d)])return;if(this['cache']['size']>=this['maxSize']){const _0x2bb6d9=this['cache'][_0x531f75(0x2b0)]()[_0x531f75(0x248)]()['value'];if(_0x2bb6d9){if('YBUxe'==='YBUxe')this[_0x531f75(0x24f)]['delete'](_0x2bb6d9),debug('[CACHE]\x20Evicted\x20key\x20due\x20to\x20size\x20limit:\x20'+_0x2bb6d9);else{if(_0x2e7fe3){for(const _0x3cde1b of _0xc59902)if(_0x3cde1b&&_0x3cde1b['id'])_0x57678a['chats'][_0x3cde1b['id']]=_0x3cde1b;}if(_0x395e00['isArray'](_0x376bc7)){for(const _0x843835 of _0x53f6f2)if(_0x843835?.['id'])_0x21206d['cache']['set']('chat:'+_0x843835['id'],_0x843835,_0x5cadf6['CHAT_CACHE_TTL_MS']||0x1e*0x3c*0x3e8);}_0x420405['emit']('chats.upsert',_0x3e4ad3);}}}const _0x1aa706=Date['now']()+_0x116ab4;this['cache']['set'](_0x59046a,{'value':_0x229487,'expiry':_0x1aa706}),debug('[CACHE]\x20Set\x20key:\x20'+_0x59046a+'\x20TTL='+_0x2f0227['tgqhC'](_0x116ab4,0x3e8)+'s,\x20Size='+this[_0x531f75(0x24f)]['size']+'/'+this['maxSize']);}['get'](_0x1fb1e7){const _0x157c2d=_0x8f4054,_0x3ba7be={'ecJUZ':function(_0x17990e,_0x159adc,_0x1e8e9b){return _0x17990e(_0x159adc,_0x1e8e9b);},'auZBd':_0x157c2d(0x261)};if(this['_closed'])return null;const _0x65a5aa=this[_0x157c2d(0x24f)]['get'](_0x1fb1e7);if(!_0x65a5aa)return null;if(Date['now']()>_0x65a5aa[_0x157c2d(0x213)]){if('JyFnC'==='JyFnC')return this['cache']['delete'](_0x1fb1e7),debug(_0x157c2d(0x282)+_0x1fb1e7),null;else _0x39e5d4('Failed\x20to\x20parse\x20RATE_LIMIT\x20config;\x20using\x20defaults\x205/sec'),_0x3ba7be[_0x157c2d(0x293)](_0x43684c,_0x3ba7be['auZBd'],_0x2872e5);}return _0x65a5aa[_0x157c2d(0x299)];}['del'](_0x411531){this['cache']['delete'](_0x411531),debug('[CACHE]\x20Deleted\x20key:\x20'+_0x411531);}['_sweep'](){const _0x13daf2=_0x8f4054,_0x2c5eb1={'dhhnT':function(_0x59e008,_0x4af780){return _0x59e008>_0x4af780;},'DDhHz':function(_0x11de63,_0x924d6b){return _0x11de63(_0x924d6b);}},_0x15fc10=Date['now']();let _0x3371bd=0x0;for(const [_0x32166e,_0x3773c4]of this['cache']){if(_0x15fc10>_0x3773c4['expiry']){if('xFDFo'!==_0x13daf2(0x22f))return this[_0x13daf2(0x24f)][_0x13daf2(0x29e)](_0x432638),_0x2cd8c2('[CACHE]\x20Key\x20expired:\x20'+_0xbfee2e),null;else this['cache'][_0x13daf2(0x29e)](_0x32166e),_0x3371bd++;}}if(_0x2c5eb1[_0x13daf2(0x2a8)](_0x3371bd,0x0))_0x2c5eb1['DDhHz'](debug,'[CACHE]\x20Swept\x20'+_0x3371bd+_0x13daf2(0x251));}['close'](){const _0x2a734b=_0x8f4054;if(this['_closed'])return;clearInterval(this[_0x2a734b(0x27d)]),this[_0x2a734b(0x24f)]['clear'](),this['_closed']=!![],debug(_0x2a734b(0x2a7));}}class SlidingWindowRateLimiter{constructor(_0x3da951=0x3e8,_0xf51711=0x5){const _0x8b3222=_0x8f4054;this[_0x8b3222(0x23e)]=_0x3da951,this['limit']=_0xf51711,this[_0x8b3222(0x1fa)]=[];}['_cleanup'](_0x50c66c){const _0x3f1503=_0x8f4054,_0x5cbde9=_0x50c66c-this['windowMs'];while(this['timestamps'][_0x3f1503(0x21e)]&&this['timestamps'][0x0]<_0x5cbde9)this[_0x3f1503(0x1fa)]['shift']();}[_0x8f4054(0x240)](_0x475860=Date['now']()){return this['_cleanup'](_0x475860),this['timestamps']['length'];}['canSend'](_0xc57902=Date['now']()){return this['_cleanup'](_0xc57902),this['timestamps']['length']<this['limit'];}['recordSend'](_0x27a17f=Date['now']()){this['_cleanup'](_0x27a17f),this['timestamps']['push'](_0x27a17f);}['timeUntilNextAvailable'](_0x65f51d=Date['now']()){const _0x1c9fdf=_0x8f4054;this['_cleanup'](_0x65f51d);if(this['timestamps']['length']<this['limit'])return 0x0;const _0x211756=this[_0x1c9fdf(0x1fa)][0x0];return Math['max'](0x0,_0x211756+this['windowMs']-_0x65f51d);}}const DLQ_PATH=_0x438900['resolve'](process['cwd'](),cfg['DLQ_PATH']||'dlq.jsonl'),DLQ_MAX_SIZE=cfg['DLQ_MAX_SIZE']||0x2710,DLQ_MAX_FILES=cfg[_0x8f4054(0x278)]||0x5;async function dlqWrite(_0xa9433){const _0x23c4c7=_0x8f4054;try{try{if(_0x23c4c7(0x28c)==='jZxuK'){const _0x30cf51=await _0x4b663b['stat'](DLQ_PATH)['catch'](()=>null);_0x30cf51&&_0x30cf51['size']>DLQ_MAX_SIZE*0x64&&await rotateDLQ();}else _0xf089b7('QR\x20Code\x20received,\x20scan\x20with\x20your\x20phone:'),_0x555ab4['generate'](_0x97a576,{'small':!![]});}catch(_0x4eaea5){debug('Error\x20during\x20DLQ\x20file\x20check/rotation\x20attempt:',_0x4eaea5);}await _0x4b663b['appendFile'](DLQ_PATH,JSON['stringify'](_0xa9433)+'\x0a',{'encoding':_0x23c4c7(0x296)}),debug('[DLQ]\x20Wrote\x20item\x20to\x20DLQ');}catch(_0x365487){warn('Failed\x20to\x20write\x20DLQ',_0x365487);}}async function rotateDLQ(){const _0x338f51=_0x8f4054;try{for(let _0x475ef3=DLQ_MAX_FILES-0x1;_0x475ef3>=0x0;_0x475ef3--){const _0xcd3ed8=_0x475ef3===0x0?DLQ_PATH:DLQ_PATH+'.'+_0x475ef3,_0x2d6b90=DLQ_PATH+'.'+(_0x475ef3+0x1);try{await _0x4b663b['access'](_0xcd3ed8),await _0x4b663b['rename'](_0xcd3ed8,_0x2d6b90);}catch(_0x407a49){debug('Could\x20not\x20rotate\x20DLQ\x20file\x20from\x20'+_0xcd3ed8+'\x20to\x20'+_0x2d6b90+',\x20possibly\x20due\x20to\x20non-existence\x20or\x20permission:\x20'+_0x407a49['message']);}}await _0x4b663b['writeFile'](DLQ_PATH,'','utf8'),debug('[DLQ]\x20Rotated\x20DLQ\x20files');}catch(_0x3cedc1){warn(_0x338f51(0x22d),_0x3cedc1);}}async function attemptSendWithRetry(_0x13866f,_0x58ee4f=0x2,_0x2f059f=0x1f4,_0x3a67f1={}){const _0x1d4257=_0x8f4054,_0x4b3027={'XCLxu':function(_0x461493,_0x1717dd,_0x1551ab){return _0x461493(_0x1717dd,_0x1551ab);},'FlNpF':function(_0x2b1b9b){return _0x2b1b9b();},'yAFKd':function(_0x15f271,_0x374db1){return _0x15f271(_0x374db1);}};let _0x10a425=null;for(let _0x195a50=0x0;_0x195a50<=_0x58ee4f;_0x195a50++){try{return await _0x4b3027['FlNpF'](_0x13866f);}catch(_0x3cab0f){_0x10a425=_0x3cab0f;if(_0x195a50===_0x58ee4f){try{if('LhpRj'==='LhpRj')await _0x4b3027['yAFKd'](dlqWrite,{'error':String(_0x3cab0f),'time':new Date()['toISOString'](),'attempts':_0x58ee4f,'hint':_0x3a67f1});else try{_0x986ee2['ev']['off'](_0x3550f4,_0x1942da);}catch(_0x539f49){_0x4b3027[_0x1d4257(0x1fc)](_0x3f8401,'Error\x20detaching\x20handler\x20for\x20event\x20'+_0x47b365+':',_0x539f49['message']);}}catch(_0x43fba1){warn(_0x1d4257(0x222),_0x43fba1);}throw _0x3cab0f;}await new Promise(_0x2573de=>setTimeout(_0x2573de,_0x2f059f*Math[_0x1d4257(0x2ae)](0x2,_0x195a50)));}}throw _0x10a425;}class OutgoingSendQueue{constructor(_0x240b26,_0x3be463={}){const _0x406a36=_0x8f4054;this['queue']=[],this['rateLimiter']=_0x240b26,this['processing']=![],this['nextTimer']=null,this['maxQueue']=_0x3be463['maxQueue']||0x7d0,this['warnThreshold']=_0x3be463[_0x406a36(0x272)]||Math['floor'](this['maxQueue']*0.75);}['enqueue'](_0x40ba0e,_0x24fa81={}){const _0x1219ec={'LNyVi':function(_0x10646f,_0x55d640){return _0x10646f===_0x55d640;},'nuoNe':function(_0x232ddb,_0x374469){return _0x232ddb<_0x374469;},'EcvNi':'Failed\x20to\x20reject\x20dropped\x20item:','bGhCw':function(_0x4ffde5,_0x3ddc39){return _0x4ffde5(_0x3ddc39);},'oPGYX':'number'},_0x5bf919=typeof _0x24fa81['priority']===_0x1219ec['oPGYX']?_0x24fa81['priority']:0x0;return new Promise((_0xd014f5,_0x5dd05a)=>{const _0x237d7d=_0x3094;if(this['queue']['length']>=this[_0x237d7d(0x2bc)]){if(_0x237d7d(0x203)==='DyaUR')this['cache'][_0x237d7d(0x29e)](_0x40eb7c),_0x5a5ce7('[CACHE]\x20Deleted\x20key:\x20'+_0x23f1e2);else{let _0x387443=-0x1;for(let _0x57cf4d=0x0;_0x57cf4d<this['queue'][_0x237d7d(0x21e)];_0x57cf4d++){if(_0x1219ec[_0x237d7d(0x1f7)](this['queue'][_0x57cf4d][_0x237d7d(0x23b)]||0x0,_0x5bf919)){_0x387443=_0x57cf4d;break;}}if(_0x1219ec[_0x237d7d(0x277)](_0x387443,-0x1))_0x387443=0x0;const _0xcb1758=this['queue']['splice'](_0x387443,0x1)[0x0];try{_0xcb1758[_0x237d7d(0x26a)](new Error('Dropped\x20from\x20outgoing\x20queue\x20due\x20to\x20capacity/prioritization'));}catch(_0x1ac4f8){if('efciN'==='efciN')debug(_0x1219ec[_0x237d7d(0x22a)],_0x1ac4f8[_0x237d7d(0x225)]);else{if(_0x1219ec['LNyVi'](typeof _0x54dac8[_0x237d7d(0x291)],'function'))return _0x5a44e0[_0x237d7d(0x291)];if(typeof _0x4e7216[_0x237d7d(0x241)]==='function')return _0x3797a7['makeInMemoryStore'];}}_0x1219ec['bGhCw'](warn,_0x237d7d(0x221)+(_0xcb1758['priority']||0x0)+')\x20to\x20make\x20room\x20(incoming\x20priority='+_0x5bf919+')');}}this['queue']['push']({'fn':_0x40ba0e,'resolve':_0xd014f5,'reject':_0x5dd05a,'priority':_0x5bf919});if(this['queue']['length']>=this['warnThreshold'])_0x1219ec['bGhCw'](warn,'OutgoingSendQueue\x20length\x20high:\x20'+this['queue'][_0x237d7d(0x21e)]+'/'+this['maxQueue']);this[_0x237d7d(0x295)]();});}[_0x8f4054(0x295)](){const _0x171696=_0x8f4054,_0x3ca196={'ysudj':function(_0x425c85,_0x2bc9c8){return _0x425c85>_0x2bc9c8;},'syALB':function(_0x5120de,_0x100199){return _0x5120de>_0x100199;}};if(this[_0x171696(0x22b)])return;this['processing']=!![];const _0x16bb16=async()=>{const _0x3ed115=_0x171696;this['nextTimer']&&(clearTimeout(this['nextTimer']),this['nextTimer']=null);const _0x22a412=Date[_0x3ed115(0x2ac)]();let _0x326112=Math['max'](0x0,this[_0x3ed115(0x21b)]['limit']-this['rateLimiter']['count'](_0x22a412));if(_0x326112<=0x0||this['queue'][_0x3ed115(0x21e)]===0x0){const _0x3cc77b=this['rateLimiter']['timeUntilNextAvailable'](_0x22a412);if(_0x3ca196['ysudj'](this[_0x3ed115(0x228)]['length'],0x0))this['nextTimer']=setTimeout(()=>{const _0xb04b39=_0x3ed115;this[_0xb04b39(0x22b)]=![],this[_0xb04b39(0x295)]();},_0x3cc77b+0x1);else this[_0x3ed115(0x22b)]=![];return;}const _0x4a470e=[];for(let _0x5e4e5d=0x0;_0x5e4e5d<_0x326112&&this['queue']['length']>0x0;_0x5e4e5d++){if(_0x3ed115(0x223)==='fhQuY')_0x216e85={..._0x5e80d9,'linkPreview':_0x22dc40},_0x38342d['inc']();else{let _0x329027=0x0,_0x15c83e=this['queue'][0x0]['priority']||0x0;for(let _0x3f711=0x1;_0x3f711<this['queue']['length'];_0x3f711++){const _0x3b3294=this['queue'][_0x3f711][_0x3ed115(0x23b)]||0x0;_0x3b3294>_0x15c83e&&(_0x15c83e=_0x3b3294,_0x329027=_0x3f711);}const _0x18e66e=this['queue']['splice'](_0x329027,0x1)[0x0];_0x4a470e[_0x3ed115(0x233)](_0x18e66e);}}if(_0x4a470e[_0x3ed115(0x21e)]>0x0)for(const _0x36550a of _0x4a470e){this[_0x3ed115(0x21b)]['recordSend'](_0x22a412);const _0xd438ce={'priority':_0x36550a['priority']||0x0,'fnSnippet':String(_0x36550a['fn'])['slice'](0x0,0xc8)};try{const _0x3002ce=attemptSendWithRetry(_0x36550a['fn'],cfg['SEND_RETRY_ATTEMPTS']||0x2,cfg['SEND_RETRY_BASE_MS']||0x1f4,_0xd438ce);_0x3002ce['then'](_0x25802f=>_0x36550a['resolve'](_0x25802f))['catch'](_0x425fd5=>_0x36550a['reject'](_0x425fd5));}catch(_0x3766ca){_0x36550a['reject'](_0x3766ca);}}if(_0x3ca196[_0x3ed115(0x27f)](this['queue']['length'],0x0)){if('Dumpf'!==_0x3ed115(0x2a9)){this['_cleanup'](_0x1b1b19);if(this[_0x3ed115(0x1fa)]['length']<this['limit'])return 0x0;const _0x2cb02d=this['timestamps'][0x0];return _0x426e0c['max'](0x0,_0x2cb02d+this['windowMs']-_0x2f67e6);}else{const _0x209f7f=this['rateLimiter'][_0x3ed115(0x2b3)](Date['now']());this['nextTimer']=setTimeout(()=>{const _0x231979=_0x3ed115;if('MyKoS'==='EwtXG')try{_0x1527f5['set'](_0x5be874[_0x231979(0x228)]['length']||0x0);}catch(_0x448c10){_0x185d47('Error\x20setting\x20queue\x20length\x20gauge:',_0x448c10['message']);}else this['processing']=![],this['_tryProcess']();},_0x209f7f+0x1);}}else this[_0x3ed115(0x22b)]=![];};try{_0x16bb16();}catch(_0x12e5d3){this['processing']=![],error(_0x12e5d3,'OutgoingSendQueue\x20processing\x20failed');}}}class BotAPI extends _0x32f631{constructor(){const _0x44babe=_0x8f4054;super(),this['cache']=new SimpleCache(cfg['CACHE_TTL_MS']||0x3c*0x3e8,cfg[_0x44babe(0x20c)]||0x3e8),this['store']=store,this['proto']=proto;}async['downloadMedia'](_0x30802,_0x2eb75f={}){const _0x2491d0=_0x8f4054,_0x4d621f={'hsViC':'buffer'};try{return await downloadMediaMessage(_0x30802,_0x4d621f['hsViC'],{},{'logger':baileysPinoLogger,..._0x2eb75f});}catch(_0x5513d6){error(_0x5513d6,_0x2491d0(0x235));throw _0x5513d6;}}['isGroup'](_0x6eaa2a){return isJidGroup(_0x6eaa2a);}['isUser'](_0x217019){return isJidUser(_0x217019);}['isBroadcast'](_0x5def8a){return isJidBroadcast(_0x5def8a);}[_0x8f4054(0x216)](_0x338773,_0x8d9446){const _0x1daf2d={'UVjSf':function(_0x4d6fd1,_0x3b4f8a,_0x421794){return _0x4d6fd1(_0x3b4f8a,_0x421794);}};return _0x1daf2d['UVjSf'](areJidsSameUser,_0x338773,_0x8d9446);}[_0x8f4054(0x292)](_0x267e6e){try{return isJidStatusBroadcast(_0x267e6e);}catch(_0x2b9cd3){return debug('isStatusBroadcast\x20check\x20failed:',_0x2b9cd3['message']),![];}}['isNewsletterJid'](_0x209bb6){const _0x30493d=_0x8f4054;try{return isJidNewsletter(_0x209bb6);}catch(_0x2cde02){return debug(_0x30493d(0x263),_0x2cde02['message']),![];}}['makeStatusWebMessage']({id:_0x1bfdce,participant:_0x52d095,body:_0x20263b,timestamp:_0x1dd0ee}){return{'key':{'id':_0x1bfdce,'remoteJid':'status@broadcast','participant':_0x52d095,'fromMe':![]},'message':{'conversation':_0x20263b},'messageTimestamp':Math['floor']((_0x1dd0ee||Date['now']())/0x3e8)};}async[_0x8f4054(0x2b4)](_0x4bb500){try{if(_0x4bb500['message']?.['pollCreationMessage'])return getAggregateVotesInPollMessage({'message':_0x4bb500['message'],'pollCreationMessage':_0x4bb500['message']['pollCreationMessage']});return null;}catch(_0x2ff49c){return error(_0x2ff49c,'Failed\x20to\x20get\x20poll\x20results'),null;}}}const bot=new BotAPI();let sock=null,botJid=null,restartAttempts=0x0;const MAX_BACKOFF=0x5*0x3c*0x3e8;let outgoingQueueGlobal=null,rateLimiterGlobal=null,detachAllHandlers=null,registeredModules=new Set();const perJidChains=new Map();function normalizeJidForQueue(_0xf59931){const _0x1ea957=_0x8f4054,_0x323059={'xYDit':function(_0x1d90b0,_0x3d35fc){return _0x1d90b0(_0x3d35fc);}};try{return _0x323059['xYDit'](jidNormalizedUser,_0xf59931||'');}catch(_0x44e006){return error(_0x1ea957(0x22c),_0x44e006),String(_0xf59931||'');}}function enqueuePerJid(_0x54637f,_0x16587f){const _0x601b7d=_0x8f4054,_0x4f5ca2=normalizeJidForQueue(_0x54637f),_0x29f7a5=perJidChains['get'](_0x4f5ca2)||Promise[_0x601b7d(0x1f3)](),_0x56af9b=_0x29f7a5['catch'](()=>{})['then'](()=>_0x16587f());return perJidChains[_0x601b7d(0x26f)](_0x4f5ca2,_0x56af9b['finally'](()=>{if(perJidChains['get'](_0x4f5ca2)===_0x56af9b)perJidChains['delete'](_0x4f5ca2);})),_0x56af9b;}bot['registerModule']=_0x4eb0c5=>{registeredModules['add'](_0x4eb0c5);if(_0x4eb0c5['attach'])try{_0x4eb0c5['attach'](bot);}catch(_0x2cbb22){warn('module.attach\x20failed',_0x2cbb22);}},bot['unregisterModule']=_0xb2efcd=>{const _0x5a491e=_0x8f4054,_0x409483={'uQlgQ':function(_0x497dbc,_0x4e15ca){return _0x497dbc!==_0x4e15ca;}};if(registeredModules['has'](_0xb2efcd)){if(_0x409483['uQlgQ']('sbfum','sbfum')){_0x11a1fb('Ignoring\x20\x22Bad\x20MAC\x22\x20error\x20and\x20attempting\x20to\x20restart\x20without\x20deleting\x20auth\x20files...'),_0x4c66e0('Bad\x20MAC');return;}else{if(_0xb2efcd[_0x5a491e(0x2a2)])try{_0xb2efcd[_0x5a491e(0x2a2)](bot);}catch(_0x1e2ee1){warn('module.detach\x20failed',_0x1e2ee1);}registeredModules[_0x5a491e(0x29e)](_0xb2efcd);}}};async function chooseBaileysVersion(){const _0xce5938=_0x8f4054,_0x51fd3c={'rLBre':'string','tOCJC':'uSqOf'};if(cfg['BAILEYS_VERSION']){if(Array['isArray'](cfg['BAILEYS_VERSION']))return{'version':cfg[_0xce5938(0x21f)],'isLatest':![]};if(typeof cfg['BAILEYS_VERSION']===_0x51fd3c['rLBre']){const _0x431f2f=cfg['BAILEYS_VERSION']['split']('.')['map'](_0x2d71f1=>parseInt(_0x2d71f1,0xa)||0x0);return{'version':_0x431f2f,'isLatest':![]};}}try{if('uSqOf'!==_0x51fd3c['tOCJC'])try{_0x450a93(_0xce5938(0x1fd)),_0x22a458['emit']('message-receipt.update',_0x29f379);}catch(_0x292a65){_0x3a5343(_0x292a65,'message-receipt.update\x20handler');}else return await fetchLatestBaileysVersion();}catch(_0x3be799){return debug('Failed\x20to\x20fetch\x20latest\x20Baileys\x20version,\x20falling\x20back\x20to\x20default\x20[2,0,0]',_0x3be799?.['message']||_0x3be799),{'version':[0x2,0x0,0x0],'isLatest':![]};}}function scheduleRestart(_0x57bad9){const _0x2e3b4e=_0x8f4054,_0x53e780={'feRwo':function(_0x4ef418,_0x5562eb){return _0x4ef418!==_0x5562eb;},'FbnUX':function(_0x62b8d8,_0x4d63ee,_0x300790){return _0x62b8d8(_0x4d63ee,_0x300790);},'KSVmG':function(_0x36c8cb,_0x4939dd){return _0x36c8cb*_0x4939dd;},'AnsmW':function(_0x43b4bf,_0x2e1af3,_0x56603d){return _0x43b4bf(_0x2e1af3,_0x56603d);}};restartAttempts++;const _0x1fbbb1=Math['min'](MAX_BACKOFF,_0x53e780['KSVmG'](0x1388,Math['pow'](0x2,Math[_0x2e3b4e(0x283)](0x0,restartAttempts-0x1))));info('Scheduling\x20restart\x20attempt\x20#'+restartAttempts+'\x20in\x20'+_0x1fbbb1/0x3e8+'s\x20due\x20to:\x20'+_0x57bad9),_0x53e780['AnsmW'](setTimeout,async()=>{const _0x1f923b=_0x2e3b4e;info('Attempting\x20restart\x20now...');try{if(detachAllHandlers){try{detachAllHandlers();}catch(_0x122fe8){debug('Error\x20during\x20detachAllHandlers\x20on\x20restart:',_0x122fe8['message']);}detachAllHandlers=null;}if(sock){try{if(_0x53e780['feRwo']('sUeXu','lxrwI'))sock['end'](new Error('Restarting\x20bot'));else{const _0x5e1dd7=_0x5575a2[_0x1f923b(0x23c)]?.['remoteJid']||'unknown',_0x1b0120=_0x28a83a['_makeMsgBox'](_0x5e1dd7);_0x1b0120['upsert'](_0x53beb9,_0x1f923b(0x27a));}}catch(_0xa0ef48){info('Previous\x20socket\x20close\x20failed\x20(non-fatal).');}try{sock['ev'][_0x1f923b(0x262)]?.();}catch(_0xda3f){_0x53e780['FbnUX'](debug,'Error\x20removing\x20socket\x20event\x20listeners:',_0xda3f['message']);}sock=null;}if(outgoingQueueGlobal){try{outgoingQueueGlobal[_0x1f923b(0x231)]&&clearTimeout(outgoingQueueGlobal['nextTimer']);}catch(_0x166f3f){debug('Error\x20clearing\x20outgoingQueueGlobal\x20timer:',_0x166f3f['message']);}outgoingQueueGlobal=null;}await startBot(),restartAttempts=0x0;}catch(_0x5dde6f){error(_0x5dde6f,'Restart\x20attempt\x20failed,\x20will\x20schedule\x20another\x20attempt'),scheduleRestart(_0x57bad9);}},_0x1fbbb1);}async function startBot(){const _0x2c43a7=_0x8f4054,_0x52d403={'zmuWy':function(_0x46b025,_0x560856){return _0x46b025*_0x560856;},'TiWIt':function(_0x3a7331,_0x24af28){return _0x3a7331(_0x24af28);},'kOvjw':function(_0x674f42,_0xa82df9){return _0x674f42(_0xa82df9);},'uVLoP':function(_0x1cf18a,_0x4e4542){return _0x1cf18a(_0x4e4542);},'VDEpO':function(_0xf6a982,_0x2adc35){return _0xf6a982||_0x2adc35;},'JTtSS':function(_0x138f63){return _0x138f63();},'McISY':'notify','CIVkr':'string','imFFm':'KNseF','WaYrT':function(_0x37fe8f,_0x1464b6,_0x503b9f){return _0x37fe8f(_0x1464b6,_0x503b9f);},'HYYbX':_0x2c43a7(0x2aa),'oJDca':'status.update\x20handler\x20error','DmlBc':function(_0x2e8f83,_0x4176f0){return _0x2e8f83!==_0x4176f0;},'lTnhE':'xOKCo','nJeaK':'contacts.upsert','JRyhV':'message-receipt.update\x20event\x20forwarded','JgyGe':'message-receipt.update','FMGbc':_0x2c43a7(0x244),'xDSRj':'rOIbm','bCwqM':function(_0x297cd2,_0x1f150b){return _0x297cd2(_0x1f150b);},'Fjbwj':function(_0x372d07,_0x110f78){return _0x372d07===_0x110f78;},'tIivw':function(_0x415233,_0x2bb2d9){return _0x415233===_0x2bb2d9;},'OurpE':function(_0x2e6fcd,_0x462c46){return _0x2e6fcd(_0x462c46);},'FjFOP':function(_0x4820dc,_0x23b136){return _0x4820dc+_0x23b136;},'sIvpw':'messages.upsert','myfXp':'messages.reaction','MZnYJ':'messages.media-update','kyOFk':_0x2c43a7(0x25a),'YvrxR':function(_0x452f17){return _0x452f17();},'uJegL':function(_0xe4c4f8,_0x2d5fea,_0x5a04c9){return _0xe4c4f8(_0x2d5fea,_0x5a04c9);}};try{try{const _0x2b61d5=await import('./utils/database.js');_0x2b61d5['initializeDatabase']&&(await _0x2b61d5[_0x2c43a7(0x2a4)](),info('Database\x20initialized\x20successfully.'));}catch(_0x5449fd){_0x52d403['xDSRj']==='rOIbm'?_0x52d403['bCwqM'](info,'Database\x20initialization\x20skipped\x20or\x20failed;\x20continuing\x20without\x20DB'):(_0x2004ea(_0x2b0e2c),_0x508024('Application\x20logger\x20initialized.'));}}catch(_0x1e4b89){info('Database\x20initialization\x20skipped;\x20continuing\x20without\x20DB');}const _0x4cc8c2=new Set(cfg[_0x2c43a7(0x2b6)]||[]),_0x217ab1=cfg['PREVIEW_ALLOWLIST']?new Set(cfg['PREVIEW_ALLOWLIST']):null;async function _0x1ca9df(_0x1f27c6,_0x301d27){return new Promise((_0x1a7b49,_0x155550)=>{const _0x4cf7df={'naskE':function(_0x2fb8c4,_0x142741){return _0x2fb8c4(_0x142741);}},_0x196cb0=setTimeout(()=>_0x155550(new Error('timeout')),_0x301d27);_0x1f27c6['then'](_0x292165=>{const _0x450304=_0x3094;clearTimeout(_0x196cb0),_0x4cf7df[_0x450304(0x2bd)](_0x1a7b49,_0x292165);})['catch'](_0xc87a0c=>{clearTimeout(_0x196cb0),_0x155550(_0xc87a0c);});});}function _0x2edda7(_0x5416cb){if(!_0x5416cb||typeof _0x5416cb!=='string')return null;const _0x17c150=_0x5416cb['match'](/https?:\/\/[^\s]+/i);return _0x17c150?_0x17c150[0x0]:null;}async function _0x539ece(_0x4a293d,_0x29f8c1=0x2,_0x594995=0xbb8){const _0x6d2c61=_0x2c43a7,_0x6ed854=_0x2edda7(_0x4a293d);if(!_0x6ed854)return null;try{const _0x591408=new URL(_0x6ed854);if(_0x217ab1&&!_0x217ab1['has'](_0x591408['hostname']))return null;if(_0x4cc8c2['has'](_0x591408[_0x6d2c61(0x280)]))return null;}catch(_0x48ad1a){return debug(_0x6d2c61(0x255),_0x48ad1a['message']),null;}const _0x111ffb='preview:'+_0x6ed854,_0x5dfff1=bot['cache']['get'](_0x111ffb);if(_0x5dfff1)return debug(_0x6d2c61(0x29c)+_0x6ed854),_0x5dfff1;let _0x4ae86d=0xfa;for(let _0x2c1bf1=0x0;_0x2c1bf1<=_0x29f8c1;_0x2c1bf1++){try{if('DHlHN'==='DHlHN'){const _0x180157=await _0x1ca9df(generateLinkPreviewIfRequired(_0x4a293d,getUrlInfo,baileysPinoLogger),_0x594995);return _0x180157&&(bot[_0x6d2c61(0x24f)][_0x6d2c61(0x26f)](_0x111ffb,_0x180157,cfg['PREVIEW_CACHE_TTL_MS']||_0x52d403['zmuWy'](0x3e8*0x3c,0x3c)),debug(_0x6d2c61(0x26b)+_0x6ed854)),_0x180157;}else return _0x46a6c4('Failed\x20to\x20fetch\x20latest\x20Baileys\x20version,\x20falling\x20back\x20to\x20default\x20[2,0,0]',_0x58e69f?.['message']||_0x4f0945),{'version':[0x2,0x0,0x0],'isLatest':![]};}catch(_0x8abe92){if(_0x2c1bf1===_0x29f8c1)return warn('Preview\x20fetch\x20final\x20failure',_0x8abe92),null;debug(_0x6d2c61(0x217)+(_0x2c1bf1+0x1)+_0x6d2c61(0x274),_0x8abe92[_0x6d2c61(0x225)]),await new Promise(_0x144fb7=>setTimeout(_0x144fb7,_0x4ae86d)),_0x4ae86d*=0x2;}}return null;}let _0x79e4c3=0x3e8,_0x28101e=0x5;try{const _0x2ccb60=cfg['RATE_LIMIT'];if(_0x52d403[_0x2c43a7(0x257)](typeof _0x2ccb60,'number'))_0x79e4c3=0x3e8,_0x28101e=Math['max'](0x1,Math['floor'](_0x2ccb60));else{if(Array['isArray'](_0x2ccb60)&&_0x2ccb60[_0x2c43a7(0x21e)]>0x0&&typeof _0x2ccb60[0x0]==='object'){if(_0x2c43a7(0x253)===_0x2c43a7(0x2b8))_0x6c4545('Failed\x20to\x20initialize\x20application\x20logger\x20(utils/logger.js)',_0x240921);else{const _0x3c7718=_0x2ccb60[0x0];_0x79e4c3=_0x3c7718['window']&&Number(_0x3c7718[_0x2c43a7(0x2ad)])||0x2710,_0x28101e=_0x3c7718['limit']&&Number(_0x3c7718[_0x2c43a7(0x25b)])||0x5;}}else _0x2ccb60&&_0x52d403['tIivw'](typeof _0x2ccb60,'object')&&(_0x79e4c3=_0x2ccb60[_0x2c43a7(0x2ad)]&&Number(_0x2ccb60['window'])||0x3e8,_0x28101e=_0x2ccb60['limit']&&Number(_0x2ccb60['limit'])||0x5);}}catch(_0x1534dd){info('Failed\x20to\x20parse\x20RATE_LIMIT\x20config;\x20using\x20defaults\x205/sec'),_0x52d403['WaYrT'](debug,'RATE_LIMIT\x20parsing\x20error:',_0x1534dd);}_0x52d403['OurpE'](info,'Rate\x20limiter\x20configured:\x20window='+_0x79e4c3+'ms,\x20limit='+_0x28101e);const _0x909b27=new SlidingWindowRateLimiter(_0x79e4c3,_0x28101e),_0xcfcf00=new OutgoingSendQueue(_0x909b27,{'maxQueue':cfg['OUTGOING_MAX_QUEUE']||0x7d0,'warnThreshold':Math['floor']((cfg['OUTGOING_MAX_QUEUE']||0x7d0)*0.75)});outgoingQueueGlobal=_0xcfcf00,rateLimiterGlobal=_0x909b27;const _0x1b9911=_0x53f66d['register'];_0x1b9911['clear'](),_0x53f66d['collectDefaultMetrics']({'register':_0x1b9911});const _0x2a458a=new _0x53f66d[(_0x2c43a7(0x2b2))]({'name':_0x2c43a7(0x2bb),'help':_0x2c43a7(0x25d)}),_0x3d7bc0=new _0x53f66d['Counter']({'name':'bot_preview_success_total','help':_0x2c43a7(0x24b)}),_0x262828=new _0x53f66d[(_0x2c43a7(0x285))]({'name':'bot_preview_fail_total','help':'Preview\x20fail\x20count'});setInterval(()=>{const _0x5b6268=_0x2c43a7;try{_0x2a458a[_0x5b6268(0x26f)](_0xcfcf00['queue']['length']||0x0);}catch(_0x43d585){if('MSczt'==='qAoME'){const _0x3c4d2d=_0x24b9a4['apply'](_0x42c9d5,arguments);return _0x3e719f=null,_0x3c4d2d;}else debug(_0x5b6268(0x2ab),_0x43d585['message']);}},0x1388);const {version:_0x3236dc,isLatest:_0x4db636}=await chooseBaileysVersion();info('Using\x20Baileys\x20version\x20'+_0x3236dc['join']('.')+',\x20isLatest:\x20'+_0x4db636);const _0x11cfd0=cfg['BAILEYS_BROWSER']&&Array[_0x2c43a7(0x25f)](cfg['BAILEYS_BROWSER'])?cfg['BAILEYS_BROWSER']:['lwskky','Chrome','19.1.0'],_0x16964e=!!cfg['GENERATE_HIGH_QUALITY_LINK_PREVIEW'],_0x5af07b=cfg['AUTH_STATE_DIR']||'auth',_0x4ff0a2=_0x438900['resolve'](cfg['PROJECT_ROOT']||process['cwd'](),_0x5af07b),_0x148843=_0x438900['dirname'](_0x4ff0a2),_0x5ed22e=_0x438900['basename'](_0x4ff0a2),_0x540cec=_0x5ed22e['startsWith']('.')?_0x5ed22e:_0x52d403['FjFOP']('.',_0x5ed22e),_0x299e49=_0x438900['join'](_0x148843,_0x540cec),{state:_0x5acfa2,saveCreds:_0x4516d6}=await useMultiFileAuthState(_0x299e49);sock=makeWASocket({'version':_0x3236dc,'auth':{'creds':_0x5acfa2['creds'],'keys':makeCacheableSignalKeyStore(_0x5acfa2[_0x2c43a7(0x2b0)],baileysPinoLogger)},'logger':baileysPinoLogger,'browser':_0x11cfd0,'shouldIgnoreJid':_0x5ce321=>typeof _0x5ce321==='string'&&_0x5ce321['includes']('@broadcast')&&!isJidStatusBroadcast(_0x5ce321),'generateHighQualityLinkPreview':_0x16964e});if(store)store['bind']?.(sock['ev']);const _0x2dfffc=sock['sendMessage']['bind'](sock);async function _0x58130d(_0x4e49f3,_0x93f9e,_0x1ec24e={},_0x5709af=0x2){const _0xdbb6c6=()=>_0x2dfffc(_0x4e49f3,_0x93f9e,_0x1ec24e),_0x21b72a={'logger':baileysPinoLogger,..._0x1ec24e};return attemptSendWithRetry(_0xdbb6c6,_0x5709af,cfg['SEND_RETRY_BASE_MS']||0x1f4,{'media':!![],'jid':_0x4e49f3});}sock[_0x2c43a7(0x267)]=async(_0x1bdf5e,_0x452bad={},_0x208ae4={})=>{const _0xb67102=_0x2c43a7;let _0x144f52=_0x452bad;try{if('eIXGi'!==_0xb67102(0x207)){if(_0x144f52&&typeof _0x144f52==='object'&&typeof _0x144f52['text']==='string'&&!_0x144f52['linkPreview'])try{const _0x1f6d48=await _0x539ece(_0x144f52['text'],cfg['PREVIEW_RETRY_ATTEMPTS']||0x2,cfg[_0xb67102(0x29b)]||0xbb8);if(_0x1f6d48)_0x144f52={..._0x144f52,'linkPreview':_0x1f6d48},_0x3d7bc0['inc']();else _0x262828['inc']();}catch(_0xb3c332){warn(_0xb67102(0x288),_0xb3c332),_0x262828['inc']();}}else{try{_0x1afe6a['nextTimer']&&_0x5d6dea(_0x2af114[_0xb67102(0x231)]);}catch(_0x57c606){_0x39710d('Error\x20clearing\x20outgoingQueueGlobal\x20timer:',_0x57c606['message']);}_0x135a3f=null;}}catch(_0x2c3190){warn('Link-preview\x20wrapper\x20internal\x20error',_0x2c3190);}const _0x1d54e1=()=>_0xcfcf00['enqueue'](()=>_0x2dfffc(_0x1bdf5e,_0x144f52,_0x208ae4),{'priority':_0x208ae4&&typeof _0x208ae4['priority']===_0xb67102(0x26c)?_0x208ae4['priority']:0x0});return enqueuePerJid(_0x1bdf5e,_0x1d54e1);},sock['sendWithPriority']=(_0x4cd755,..._0x74d666)=>{const [_0x2e7b33,_0x5c36b1={},_0x15517f={}]=_0x74d666,_0x24e4b5=()=>_0xcfcf00['enqueue'](()=>_0x2dfffc(_0x2e7b33,_0x5c36b1,_0x15517f),{'priority':_0x4cd755});return enqueuePerJid(_0x2e7b33,_0x24e4b5);};const _0x5046d9=[],_0x521c24=(_0x5bf98d,_0x321d1d)=>{sock['ev']['on'](_0x5bf98d,_0x321d1d),_0x5046d9['push']({'event':_0x5bf98d,'handler':_0x321d1d});};detachAllHandlers=()=>{const _0x11aaed=_0x2c43a7;for(const {event:_0x2c6370,handler:_0x39ff30}of _0x5046d9){try{sock['ev']['off'](_0x2c6370,_0x39ff30);}catch(_0x30fe76){debug(_0x11aaed(0x202)+_0x2c6370+':',_0x30fe76['message']);}}_0x5046d9['length']=0x0;};const _0x1d359d=async _0x22af2a=>{const _0x2a3c5f=_0x2c43a7,{connection:_0x49955c,lastDisconnect:_0x88f526,qr:_0x1dc7bd}=_0x22af2a;_0x1dc7bd&&('ezsxq'==='ezsxq'?(_0x52d403['kOvjw'](info,'QR\x20Code\x20received,\x20scan\x20with\x20your\x20phone:'),_0x4b9e80[_0x2a3c5f(0x25e)](_0x1dc7bd,{'small':!![]})):(_0x345252=!![],_0x16b64c=_0x5b5251['trim']()));if(_0x49955c==='close'){const _0x30c067=_0x88f526?.['error'],_0x4c55fc=_0x30c067?.['output']?.['statusCode'];if(_0x30c067?.['message']?.['includes']('Bad\x20MAC')){info(_0x2a3c5f(0x29a)),scheduleRestart('Bad\x20MAC');return;}const _0x6abdf8=[DisconnectReason['loggedOut'],DisconnectReason['connectionReplaced'],DisconnectReason[_0x2a3c5f(0x204)]]['includes'](_0x4c55fc);_0x6abdf8?(error('Unrecoverable\x20error\x20(will\x20attempt\x20automated\x20restart):\x20'+(DisconnectReason[_0x4c55fc]||'Unknown')+'\x20('+_0x4c55fc+').'),scheduleRestart(DisconnectReason[_0x4c55fc]||_0x2a3c5f(0x1fb)+_0x4c55fc)):(info('Connection\x20closed\x20due\x20to:\x20'+_0x30c067+'.\x20Scheduling\x20restart.'),scheduleRestart(_0x52d403['uVLoP'](String,_0x52d403['VDEpO'](_0x30c067,'unknown'))));}else{if(_0x49955c==='open'){restartAttempts=0x0,botJid=sock['user']['id'],info('✅\x20Connection\x20opened\x20for\x20'+jidNormalizedUser(botJid)),bot[_0x2a3c5f(0x267)]=async(_0x304bde,_0x3d1ea7,_0x415a51={})=>{const _0x2c9d0f=_0x2a3c5f;try{return await sock[_0x2c9d0f(0x267)](_0x304bde,_0x3d1ea7,_0x415a51);}catch(_0x12b6d6){error(_0x12b6d6,'Failed\x20to\x20send\x20message\x20to\x20'+_0x304bde);throw _0x12b6d6;}},bot['sock']=sock,bot['generatePreview']=async _0xffa127=>{const _0x174c01=_0x2a3c5f;try{return await _0x52d403['TiWIt'](_0x539ece,_0xffa127);}catch(_0x2beb58){return warn(_0x174c01(0x281),_0x2beb58),null;}},bot['getContact']=async _0x32a9f7=>bot['cache']['get']('contact:'+_0x32a9f7)||null;try{const _0x4c6171=await import('./utils/loader.js');if(_0x4c6171['initializeModules'])await _0x4c6171['initializeModules'](bot);}catch(_0x100d72){error(_0x100d72,'initializeModules\x20failed\x20after\x20socket\x20open');}}}};_0x521c24('connection.update',_0x1d359d),_0x521c24('creds.update',_0x4516d6);function _0x563d12(_0x3ab32f){if(!_0x3ab32f)return null;return String(_0x3ab32f)['split']('@')[0x0];}const _0x4f489a=async({messages:_0x1595b2,type:_0x5f1675})=>{const _0x4ee506=_0x2c43a7,_0x58a6ad={'TrlSs':function(_0x41e8e5,_0x2a7938,_0x74d50d){return _0x41e8e5(_0x2a7938,_0x74d50d);},'zmloS':function(_0x338ee4){return _0x52d403['JTtSS'](_0x338ee4);}};if(!_0x1595b2||_0x1595b2['length']===0x0)return;if(store&&_0x5f1675===_0x52d403['McISY']){for(const _0x24a69c of _0x1595b2)store['processMessage']?.(_0x24a69c);}let _0x1a3fc4=cfg[_0x4ee506(0x290)],_0x20add3=null;if(_0x1a3fc4===null||typeof _0x1a3fc4==='undefined')_0x20add3=null;else{if(Array['isArray'](_0x1a3fc4))_0x20add3=_0x1a3fc4['filter'](_0x366565=>typeof _0x366565==='string'&&_0x366565['length']>0x0);else{if(typeof _0x1a3fc4===_0x52d403['CIVkr']&&_0x1a3fc4['length']>0x0)_0x20add3=[_0x1a3fc4];}}const _0x1142d9=_0x20add3?_0x20add3[_0x4ee506(0x27e)]()['sort']((_0x276143,_0x260c8a)=>_0x260c8a[_0x4ee506(0x21e)]-_0x276143['length']):null;let _0x5bf03d=new Set();try{const _0xe3b35b=await import('./utils/loader.js');if(_0xe3b35b['getCommandNames']){const _0x41178d=_0xe3b35b[_0x4ee506(0x236)]();_0x5bf03d=_0x41178d instanceof Set?_0x41178d:new Set(Array[_0x4ee506(0x25f)](_0x41178d)?_0x41178d:[]);}}catch(_0x358cbb){debug('Error\x20getting\x20command\x20names\x20from\x20loader:',_0x358cbb['message']);}function _0x540ad3(_0x5b0654){const _0x15b3f6=_0x4ee506;if(!_0x5b0654)return'';if(_0x5b0654['conversation'])return _0x5b0654[_0x15b3f6(0x279)];if(_0x5b0654['extendedTextMessage']?.['text'])return _0x5b0654['extendedTextMessage']['text'];if(_0x5b0654['imageMessage']?.['caption'])return _0x5b0654['imageMessage']['caption'];if(_0x5b0654['videoMessage']?.[_0x15b3f6(0x237)])return _0x5b0654['videoMessage']['caption'];if(_0x5b0654['statusTextMessage']?.['text'])return _0x5b0654['statusTextMessage']['text'];if(_0x5b0654['buttonsResponseMessage']?.['selectedDisplayText'])return _0x5b0654['buttonsResponseMessage']['selectedDisplayText'];if(_0x5b0654['listResponseMessage']?.['singleSelectReply']?.['selectedDisplayText'])return _0x5b0654['listResponseMessage']['singleSelectReply'][_0x15b3f6(0x25c)];return'';}for(const _0x340480 of _0x1595b2){bot['emit']('raw.message',_0x340480);if(!_0x340480['message'])continue;const _0x5cdce4=_0x340480['key']?.['remoteJid'],_0x3466c4=!!(_0x5cdce4&&isJidStatusBroadcast(_0x5cdce4));if(_0x3466c4){const _0x360e8f=_0x52d403[_0x4ee506(0x2a5)](_0x540ad3,_0x340480['message']);let _0x5e1dae=_0x360e8f,_0x5032a5=![];const _0xc27420=_0x360e8f['replace'](/^\s+/,'');if(_0x20add3===null){if('lAJBf'==='ENPpz')_0x5d036a('getMakeInMemoryStore:\x20couldn\x27t\x20import\x20'+_0x4c176a+':',_0x20266a?.['message']||_0x17b7e3);else{const _0x2424aa=_0xc27420['trim']()['split'](/ +/)['shift']()?.['toLowerCase']();_0x2424aa&&_0x5bf03d['has'](_0x2424aa)&&(_0x5032a5=!![],_0x5e1dae=_0xc27420[_0x4ee506(0x214)]());}}else{const _0x456eb6=_0x1142d9?_0x1142d9['find'](_0x2918b4=>_0xc27420[_0x4ee506(0x26d)](_0x2918b4)):null;if(_0x456eb6){const _0x5f1e27=_0xc27420['slice'](_0x456eb6['length'])['trim']();_0x5f1e27&&(_0x5032a5=!![],_0x5e1dae=_0x5f1e27);}}const _0x4cfff8=_0x340480['key']['participant']||null,_0x48ec53={'message':_0x340480['message'],'key':_0x340480[_0x4ee506(0x23c)],'pushName':_0x340480['pushName'],'remoteJid':_0x4cfff8||_0x340480['key']['remoteJid'],'sender':_0x4cfff8||_0x340480['key']['remoteJid'],'fromMe':_0x340480[_0x4ee506(0x23c)]['fromMe'],'messageTimestamp':_0x340480['messageTimestamp'],'rawText':_0x360e8f,'text':_0x5e1dae,'isCommand':_0x5032a5,'isStatus':!![],'proto':proto,'reply':async _0x26d4b7=>{const _0x578401=_0x4ee506;try{const _0x787517=_0x4cfff8||null;if(!_0x787517)throw new Error('No\x20participant\x20to\x20reply\x20to\x20for\x20status');return await sock['sendMessage'](_0x787517,_0x26d4b7);}catch(_0x355b74){error(_0x355b74,_0x578401(0x1fe));throw _0x355b74;}}};try{bot['emit']('status',_0x48ec53);}catch(_0x594205){error(_0x594205,_0x4ee506(0x1f2));}try{bot['emit']('message',_0x48ec53);}catch(_0x41ec3f){error(_0x41ec3f,'message\x20handler\x20error\x20for\x20status');}continue;}const _0x36dcb0=_0x540ad3(_0x340480['message']);let _0x2702e1=_0x36dcb0,_0x1a932d=![];const _0x1abf9e=_0x36dcb0['replace'](/^\s+/,'');if(_0x20add3===null){const _0x1bdda1=_0x1abf9e['trim']()['split'](/ +/)['shift']()?.['toLowerCase']();_0x1bdda1&&_0x5bf03d['has'](_0x1bdda1)&&(_0x1a932d=!![],_0x2702e1=_0x1abf9e['trim']());}else{if('TVzsg'==='TVzsg'){const _0x46d82d=_0x1142d9?_0x1142d9['find'](_0x68d6e6=>_0x1abf9e['startsWith'](_0x68d6e6)):null;if(_0x46d82d){if('YHqok'==='zLOzo')try{if(_0x360b44['message']?.['pollCreationMessage'])return _0x28257c({'message':_0xe70859['message'],'pollCreationMessage':_0x2eade5['message'][_0x4ee506(0x20a)]});return null;}catch(_0x260233){return _0x58a6ad['TrlSs'](_0x29cb3a,_0x260233,'Failed\x20to\x20get\x20poll\x20results'),null;}else{const _0x10e758=_0x1abf9e['slice'](_0x46d82d['length'])[_0x4ee506(0x214)]();_0x10e758&&(_0x1a932d=!![],_0x2702e1=_0x10e758);}}}else this[_0x4ee506(0x24f)]['delete'](_0x3754f6),_0x1c30a9(_0x4ee506(0x2af)+_0x5bf31c);}const _0x770242={'message':_0x340480['message'],'key':_0x340480[_0x4ee506(0x23c)],'pushName':_0x340480['pushName'],'remoteJid':_0x340480['key']['remoteJid'],'sender':_0x340480['key'][_0x4ee506(0x26e)]||_0x340480[_0x4ee506(0x23c)]['remoteJid'],'fromMe':_0x340480[_0x4ee506(0x23c)][_0x4ee506(0x24c)],'messageTimestamp':_0x340480['messageTimestamp'],'rawText':_0x36dcb0,'text':_0x2702e1,'isCommand':_0x1a932d,'proto':proto,'reply':async _0x7e2808=>{try{return await sock['sendMessage'](_0x770242['remoteJid'],_0x7e2808,{'quoted':_0x340480});}catch(_0x1e43d3){error(_0x1e43d3,'reply\x20failed');throw _0x1e43d3;}}};try{const _0x2cac20=String(_0x770242['remoteJid']||''),_0x3d5990=_0x2cac20['endsWith']('@g.us');if(_0x3d5990){const _0x165ac3=_0x770242[_0x4ee506(0x252)]||null,_0x262df2=_0x563d12(_0x165ac3);if(_0x262df2)try{_0x30bd88['setActiveGroupForUser'](_0x262df2,_0x2cac20);}catch(_0x21eb86){if('NUgqi'!=='NUgqi'){_0x3b8e84('uncaughtException',_0x4f24d9);try{_0x2b479c({'uncaughtException':_0x245874(_0x24cce1),'time':new _0x131e6a()[_0x4ee506(0x29f)]()});}catch(_0xfe030f){_0x45bfca(_0x4ee506(0x227),_0xfe030f);}}else debug('setActiveGroupForUser\x20failed:',_0x21eb86?.['message']||_0x21eb86);}}}catch(_0x116e31){debug('setActiveGroupForUser\x20integration\x20failed',_0x116e31?.['message']||_0x116e31);}try{bot['emit']('message',_0x770242);}catch(_0x4d9bfb){_0x52d403['imFFm']!=='IlqOO'?_0x52d403['WaYrT'](error,_0x4d9bfb,'Error\x20emitting\x20message\x20to\x20loader'):_0x22bd4f=_0x58a6ad['zmloS'](_0x4af7ef);}}};_0x521c24(_0x52d403['sIvpw'],_0x4f489a);const _0x192204=_0x5ddf96=>{const _0x2234d5=_0x2c43a7;try{debug('status.update\x20received\x20with\x20'+(Array['isArray'](_0x5ddf96)?_0x5ddf96['length']:'unknown')+'\x20updates'),bot['emit'](_0x2234d5(0x276),_0x5ddf96);if(Array['isArray'](_0x5ddf96))for(const _0x2105d2 of _0x5ddf96){const _0x317393=bot['makeStatusWebMessage']({'id':_0x2105d2['id']||_0x2105d2[_0x2234d5(0x23c)]?.['id']||null,'participant':_0x2105d2[_0x2234d5(0x26e)]||null,'body':_0x2105d2['body']||null,'timestamp':_0x2105d2['t']||Date['now']()});bot['emit']('status.single',_0x317393);}bot['emit'](_0x52d403['HYYbX'],_0x5ddf96);}catch(_0x5e585d){error(_0x5e585d,_0x52d403['oJDca']);}};_0x52d403['WaYrT'](_0x521c24,'status.update',_0x192204);const _0x23ab69=_0x258fa3=>_0x521c24(_0x258fa3,_0x5de0cf=>{const _0x327e6f=_0x2c43a7;try{_0x52d403['DmlBc'](_0x327e6f(0x254),_0x52d403['lTnhE'])?_0x34ceb4('persistQueueToDLQ\x20item\x20failed',_0x455be):(debug(_0x258fa3+_0x327e6f(0x287)),bot['emit'](_0x258fa3,_0x5de0cf));}catch(_0x4736c2){error(_0x4736c2,_0x258fa3+'\x20handler');}}),_0xd23e87=['messages.update','messages.delete',_0x52d403['myfXp'],'message-receipt.update',_0x52d403['MZnYJ'],'presence.update','contacts.upsert',_0x2c43a7(0x250),'chats.upsert','chats.update','chats.delete',_0x2c43a7(0x24d),'groups.update','groups.upsert','group.join-request','call','blocklist.set','blocklist.update','labels.edit','labels.association',_0x2c43a7(0x20d),'newsletter.join-request','messages.edit'];for(const _0x20dab1 of _0xd23e87)_0x23ab69(_0x20dab1);_0x521c24('contacts.upsert',_0x9ae2bc=>{const _0x32de94=_0x2c43a7;try{if(store){for(const _0x55ae2e of _0x9ae2bc)if(_0x55ae2e&&_0x55ae2e['id'])store['contacts'][_0x55ae2e['id']]=_0x55ae2e;}if(Array['isArray'](_0x9ae2bc))for(const _0x35de30 of _0x9ae2bc){if(_0x35de30?.['id'])bot[_0x32de94(0x24f)]['set']('contact:'+_0x35de30['id'],_0x35de30,cfg['CONTACT_CACHE_TTL_MS']||0x3c*0x3c*0x3e8);if(_0x35de30?.['id']&&bot[_0x32de94(0x208)](_0x35de30['id']))try{if(_0x32de94(0x24a)!==_0x32de94(0x24a)){if(this['_closed'])return;if(this['cache']['size']>=this['maxSize']){const _0x52d989=this['cache']['keys']()['next']()['value'];_0x52d989&&(this['cache']['delete'](_0x52d989),_0x10c82b('[CACHE]\x20Evicted\x20key\x20due\x20to\x20size\x20limit:\x20'+_0x52d989));}const _0x3abcc6=_0x50cfab[_0x32de94(0x2ac)]()+_0x48518c;this['cache']['set'](_0x11dfe4,{'value':_0x31c5ad,'expiry':_0x3abcc6}),_0x3719af('[CACHE]\x20Set\x20key:\x20'+_0x506fd5+'\x20TTL='+_0x2b7fd1/0x3e8+'s,\x20Size='+this['cache']['size']+'/'+this['maxSize']);}else bot['emit'](_0x32de94(0x229),_0x35de30);}catch(_0x168471){warn('newsletter.contact.upsert\x20handler\x20error',_0x168471);}}bot['emit'](_0x52d403['nJeaK'],_0x9ae2bc);}catch(_0x5ecc99){error(_0x5ecc99,'contacts.upsert\x20handler');}}),_0x521c24(_0x52d403['kyOFk'],_0x24ced9=>{const _0x5017dc=_0x2c43a7;try{if(store){for(const _0xa23dac of _0x24ced9)if(_0xa23dac&&_0xa23dac['id'])store['chats'][_0xa23dac['id']]=_0xa23dac;}if(Array['isArray'](_0x24ced9)){for(const _0x3eea80 of _0x24ced9)if(_0x3eea80?.['id'])bot['cache']['set']('chat:'+_0x3eea80['id'],_0x3eea80,cfg['CHAT_CACHE_TTL_MS']||0x1e*0x3c*0x3e8);}bot['emit']('chats.upsert',_0x24ced9);}catch(_0x4cd58c){error(_0x4cd58c,_0x5017dc(0x1f1));}}),_0x521c24('message-receipt.update',_0x1fb871=>{try{debug(_0x52d403['JRyhV']),bot['emit'](_0x52d403['JgyGe'],_0x1fb871);}catch(_0x343202){error(_0x343202,'message-receipt.update\x20handler');}});function _0x544db4(){const _0x5989eb=_0x2c43a7;for(const _0xe86a39 of registeredModules){try{if(_0xe86a39['detach'])_0xe86a39[_0x5989eb(0x2a2)](bot);}catch(_0x5ea3aa){warn('module.detach\x20error',_0x5ea3aa);}}}const _0x110b51=detachAllHandlers;detachAllHandlers=()=>{const _0x4eba47=_0x2c43a7;try{_0x110b51&&_0x110b51();}catch(_0x42550b){debug('Error\x20during\x20oldDetach\x20call:',_0x42550b[_0x4eba47(0x225)]);}try{_0x544db4();}catch(_0x56899d){debug('Error\x20during\x20detachModules\x20call:',_0x56899d['message']);}};try{const _0x3d429e=_0x52d403['YvrxR'](_0x2d848d);_0x3d429e[_0x2c43a7(0x28e)]('/healthz',(_0x7b2cc7,_0x252df8)=>_0x252df8['json']({'ok':!!sock&&!!sock[_0x2c43a7(0x29d)],'botJid':sock?.['user']?.['id']||null})),_0x3d429e[_0x2c43a7(0x28e)]('/ready',(_0x265d24,_0x457926)=>_0x457926[_0x2c43a7(0x232)]({'ready':!!sock&&!!sock[_0x2c43a7(0x29d)]})),_0x3d429e['get']('/metrics',async(_0x260c65,_0x444ac0)=>{const _0x316caa=_0x2c43a7;try{_0x444ac0['set']('Content-Type',_0x1b9911['contentType']),_0x444ac0[_0x316caa(0x249)](await _0x1b9911['metrics']());}catch(_0x57c29e){_0x444ac0['status'](0x1f4)['send']('metrics\x20error');}}),_0x3d429e[_0x2c43a7(0x284)]('/admin/restart',_0x2d848d['json'](),(_0x82972f,_0x3f1f5a)=>{const _0x429c60=_0x2c43a7,_0x28aa7a=_0x82972f['headers']['x-admin-token']||_0x82972f['body']?.['token'],_0x2c06f4=cfg['ADMIN_TOKEN']||process['env']['ADMIN_TOKEN'];if(!_0x2c06f4||_0x28aa7a!==_0x2c06f4)return _0x3f1f5a['status'](0x191)['send'](_0x52d403[_0x429c60(0x209)]);scheduleRestart('admin_requested'),_0x3f1f5a['send']({'ok':!![]});});const _0x28673e=Number(cfg['HEALTH_PORT']||0xbba);_0x3d429e['listen'](_0x28673e,()=>info(_0x2c43a7(0x273)+_0x28673e));}catch(_0x9cd482){if(_0x9cd482['code']==='EADDRINUSE')warn(_0x2c43a7(0x219)+(cfg['HEALTH_PORT']||0xbba)+'\x20is\x20busy,\x20skipping\x20health\x20server\x20startup.');else _0x52d403[_0x2c43a7(0x268)](warn,_0x2c43a7(0x260),_0x9cd482);}}let shuttingDown=![];async function persistQueueToDLQ(_0x113e58){const _0x540068=_0x8f4054;try{if('btkoG'!=='btkoG')_0x1eb1f4('Error\x20during\x20detachAllHandlers\x20on\x20restart:',_0x2a5147['message']);else for(const _0x436c8c of _0x113e58){try{await dlqWrite({'queuedAt':Date['now'](),'hint':String(_0x436c8c['fn'])['slice'](0x0,0xc8),'priority':_0x436c8c['priority']||0x0});}catch(_0x5e462f){warn(_0x540068(0x201),_0x5e462f);}}}catch(_0xc01dd8){warn(_0x540068(0x220),_0xc01dd8);}}async function shutdown(_0x3413f9){const _0xd998ec=_0x8f4054,_0x52cad1={'WvqhT':'function\x20*\x5c(\x20*\x5c)','UNdPq':function(_0x195f87,_0x3cee7c){return _0x195f87(_0x3cee7c);},'OYZrI':_0xd998ec(0x266),'qavlW':'Error\x20preventing\x20new\x20outgoing\x20queue\x20items\x20during\x20shutdown:'};if(shuttingDown)return;shuttingDown=!![],info('Shutting\x20down\x20(signal='+_0x3413f9+')...');try{if(store)try{const _0xe1fa6a=_0x438900[_0xd998ec(0x210)](cfg['AUTH_STATE_DIR']||'auth','store.json');if(store[_0xd998ec(0x265)])await store['writeToFile'](_0xe1fa6a),info('Store\x20saved\x20to\x20file');else try{const _0x2ae562={'chats':store[_0xd998ec(0x224)]||{},'contacts':store['contacts']||{}};await _0x4b663b['writeFile'](_0x438900['join'](cfg['AUTH_STATE_DIR']||'auth','store_dump.json'),JSON[_0xd998ec(0x20e)](_0x2ae562,null,0x2),'utf8'),info('Store\x20dumped\x20to\x20file\x20(fallback)');}catch(_0x3ef1c7){warn('Failed\x20to\x20persist\x20store\x20fallback',_0x3ef1c7);}}catch(_0x338634){_0xd998ec(0x28a)==='jZsMN'?warn('Error\x20saving\x20store',_0x338634):_0x33eae5('setActiveGroupForUser\x20failed:',_0xdd05f4?.['message']||_0x14cb64);}if(detachAllHandlers){if(_0x52cad1['OYZrI']!==_0xd998ec(0x266)){const _0x550b3d=new _0x97d35e(vcKJFz['WvqhT']),_0x5e3970=new _0x40ad4b('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0x15d766=_0x54fac5(_0xd998ec(0x2a6));!_0x550b3d['test'](_0x15d766+'chain')||!_0x5e3970['test'](_0x15d766+'input')?vcKJFz['UNdPq'](_0x15d766,'0'):_0x221230();}else{try{detachAllHandlers();}catch(_0x55940a){debug(_0xd998ec(0x205),_0x55940a['message']);}detachAllHandlers=null;}}if(outgoingQueueGlobal)try{outgoingQueueGlobal['enqueue']=()=>Promise['reject'](new Error(_0xd998ec(0x21c)));}catch(_0x2058d4){debug(_0x52cad1[_0xd998ec(0x28b)],_0x2058d4['message']);}const _0xa8f1a3=Number(cfg[_0xd998ec(0x245)]||0x1388);await new Promise(_0x96ca4e=>setTimeout(_0x96ca4e,_0xa8f1a3));if(outgoingQueueGlobal&&outgoingQueueGlobal['queue']&&outgoingQueueGlobal[_0xd998ec(0x228)]['length'])await persistQueueToDLQ(outgoingQueueGlobal['queue']);if(sock){try{sock['end'](new Error('Graceful\x20shutdown\x20on\x20'+_0x3413f9)),info('Socket\x20connection\x20ended.');}catch(_0x476761){info(_0xd998ec(0x200));}sock=null;}if(outgoingQueueGlobal){try{outgoingQueueGlobal['nextTimer']&&clearTimeout(outgoingQueueGlobal['nextTimer']);}catch(_0x1b26af){debug('Error\x20clearing\x20outgoingQueueGlobal\x20timer\x20on\x20shutdown:',_0x1b26af[_0xd998ec(0x225)]);}outgoingQueueGlobal=null;}bot['cache']?.['close']?.();}catch(_0x1a45f4){error(_0x1a45f4,'Error\x20during\x20shutdown');}finally{info(_0xd998ec(0x2b7)),process['exit'](0x0);}}process['on'](_0x8f4054(0x2a3),()=>shutdown(_0x8f4054(0x2a3))),process['on']('SIGTERM',()=>shutdown('SIGTERM')),process['on']('uncaughtException',_0x4e2e8c=>{const _0x53027d=_0x8f4054,_0x11a029={'VUDnB':function(_0x3206ae,_0x5a82f5,_0x141a0a){return _0x3206ae(_0x5a82f5,_0x141a0a);}};_0x11a029[_0x53027d(0x234)](fatal,_0x53027d(0x238),_0x4e2e8c);try{dlqWrite({'uncaughtException':String(_0x4e2e8c),'time':new Date()['toISOString']()});}catch(_0x19d82a){warn('DLQ\x20write\x20failed\x20for\x20uncaughtException',_0x19d82a);}}),process['on']('unhandledRejection',_0x4be557=>{const _0xe85164=_0x8f4054,_0xbbcc0c={'mdXUp':_0xe85164(0x21d)};fatal(_0xbbcc0c['mdXUp'],_0x4be557);try{dlqWrite({'unhandledRejection':String(_0x4be557),'time':new Date()['toISOString']()});}catch(_0x32919c){warn('DLQ\x20write\x20failed\x20for\x20unhandledRejection',_0x32919c);}}),startBot()[_0x8f4054(0x21a)](_0x3f7ea1=>{const _0x572ee5=_0x8f4054;error(_0x3f7ea1,'Failed\x20to\x20start\x20bot'),scheduleRestart(_0x572ee5(0x297));});export default bot;function _0x2909(){const _0x58c5f1=['DxnLCG','zgvSzxrL','Dg9ju09tDhjPBMC','zgvMyxvSDfr0Ba','qhDOAxnRzxLZB2nRzxrZl2jHAwXLExmVBgLIl1n0B3jLl21HA2uTAw4TBwvTB3j5lxn0B3jLlMPZ','zgv0ywnO','u0Lhsu5u','Aw5PDgLHBgL6zurHDgfIyxnL','vgLxsxq','Aw5PDa','w0nbq0HfxsbdBg9ZzwqGy2fJAgu','zgHOBLq','rhvTCgy','C3rHDhvZlNjHDW','rxjYB3iGC2v0DgLUzYbXDwv1zsbSzw5NDgGGz2f1z2u6','BM93','D2LUzg93','Cg93','w0nbq0HfxsbfDMLJDgvKigTLEsbKDwuGDg8GC2L6zsbSAw1PDdOG','A2v5CW','rMfPBgvKihrVignYzwf0zsbPBI1Tzw1VCNKGC3rVCMu7ignYzwf0Aw5NigzHBgXIywnR','r2f1z2u','DgLTzvvUDgLStMv4Def2ywLSywjSzq','z2v0ug9SBfjLC3vSDhm','CgfYC2u','ufjfvKLfv19cte9ds0Xju1q','u2H1DgrVD24Gy29TCgXLDguU','rwHSCee','ndK5oda3tLnztNbk','BwfW','yM90x291DgDVAw5Nx3f1zxvLx2XLBMD0Aa','Bwf4uxvLDwu','BMfZA0u','y2HHDhmUDxbZzxj0igHHBMrSzxi','C3rHDhvZigHHBMrSzxiGzxjYB3i','CMvZB2X2zq','uMvTB3zPBMCGB2XKignSB3nLzcbZzxnZAw9UoIbtzxnZAw9Urw50CNK','yxnZAwDU','vxnPBMCGAw4TBwvTB3j5ihn0B3jLigzVCIbJAgf0CYbHBMqGy29UDgfJDhm','BNvVtMu','Dg9tDhjPBMC','mty4nJC0nvn4BKzMtq','DgLTzxn0yw1WCW','C3rHDhvZoG','wenmEhu','BwvZC2fNzs1YzwnLAxb0lNvWzgf0zsbLDMvUDcbMB3j3yxjKzwq','C3rHDhvZihjLCgX5igzHAwXLza','mtKUms4W','rxjYB3iGzw5KAw5NihnVy2TLDcbJB25Uzwn0Aw9UicHPz25VCMvKkq','CgvYC2LZDff1zxvLvg9etfeGAxrLBsbMywLSzwq','rxjYB3iGzgv0ywnOAw5NigHHBMrSzxiGzM9Yigv2zw50ia','u3Dwt2u','yMfKu2vZC2LVBG','rxjYB3iGzhvYAw5NigrLDgfJAefSBeHHBMrSzxjZig9UihnODxrKB3DUoG','y2XLyxi','y0rOC2C','AxnozxDZBgv0DgvYsMLK','rK1hyMm','Cg9SBenYzwf0Aw9UtwvZC2fNzq','mJm4mJe2zKDpsurY','q0fdsevFtufyx1njwKu','BwvZC2fNAw5NlwHPC3rVCNKUC2v0','C3rYAw5NAwz5','mtm0nZeXmg1NtgHMvq','AM9PBG','mJu3mvrvq29Yva','CMfUzg9T','zxHWAxj5','DhjPBq','Dw5RBM93BG','yxjLsMLKC1nHBwvvC2vY','uhjLDMLLDYbMzxrJAcbHDhrLBxb0ia','ndv2shneq2S','sgvHBhrOihnLCNzLCIbWB3j0ia','y2f0y2G','CMf0zuXPBwL0zxi','u2H1DhrPBMCGzg93BG','Dw5Oyw5KBgvKuMvQzwn0Aw9U','BgvUz3rO','qKfjtevzu19wrvjtsu9o','CgvYC2LZDff1zxvLvg9etfeGzMfPBgvK','t3v0z29PBMDtzw5KuxvLDwu6igrYB3bWzwqGCxvLDwvKigL0zw0GkhbYAw9YAxr5pq','reXrihDYAxrLigzHAwXLza','yKP1sfO','y2HHDhm','BwvZC2fNzq','Aw5JBhvKzxm','reXrihDYAxrLigzHAwXLzcbMB3iGDw5JyxvNAhrfEgnLChrPB24','CxvLDwu','BMv3C2XLDhrLCI5JB250ywn0lNvWC2vYDa','rwn2tMK','ChjVy2vZC2LUzW','rMfPBgvKihrVig5VCM1HBgL6zsbksuqGzM9Yihf1zxvLoG','rMfPBgvKihrVihjVDgf0zsbetfe','BfLNBeu','EezerM8','C2v0sw50zxj2ywW','BMv4DfrPBwvY','ANnVBG','ChvZAa','vLveBKi','rMfPBgvKihrVigrVD25SB2fKig1LzgLH','z2v0q29TBwfUze5HBwvZ','y2fWDgLVBG','Dw5JyxvNAhrfEgnLChrPB24','zgXXlMPZB25S','x21HA2vnC2DcB3G','ChjPB3jPDhK','A2v5','x2nSB3nLza','D2LUzg93txm','zNvUy3rPB24','y291BNq','BwfRzuLUtwvTB3j5u3rVCMu','nhjeCgjWtG','C3rHDgu','Dw5HDxrOB3jPEMvK','u0Hvverpv05Frfjbsu5Ftvm','yMLUza','qhDOAxnRzxLZB2nRzxrZl2jHAwXLExmVBgLIl1n0B3jLl21HA2uTAw4TBwvTB3j5lxn0B3jLl2LUzgv4lMPZ','BMv4Da','zw5K','te1NqKm','uhjLDMLLDYbZDwnJzxnZignVDw50','zNjVBu1L','z3jVDxaTCgfYDgLJAxbHBNrZlNvWzgf0zq','zgLYBMfTzq','y2fJAgu','y29UDgfJDhmUDxbKyxrL','igv4CgLYzwqGA2v5CW','C2vUzgvY','sKTzzMW','Ee9lq28','vvjmihbHCNnPBMCGzM9YihbYzxzPzxCGzMfPBgvKoG','CMvTB3rLsMLK','rMPID2O','mJG1mti0n0rUu0TPua','mtCXmJy1mKfcANPIua','y2HHDhmUDxbZzxj0','BgLTAxq','C2vSzwn0zwreAxnWBgf5vgv4Da','t3v0z29PBMCGCxvLDwuGBgvUz3rO','z2vUzxjHDgu','AxnbCNjHEq','rMfPBgvKihrVihn0yxj0igHLywX0AcbZzxj2zxi','uKfurv9msu1jvcbWyxjZAw5NigvYCM9YoG','CMvTB3zLqwXStgLZDgvUzxjZ','AxnozxDZBgv0DgvYsMLKignOzwnRigzHAwXLzdO','Bgv2zwW','D3jPDgvuB0zPBgu','DMXKBhG','C2vUze1LC3nHz2u','DuPLz0W','DxjS','CMvQzwn0','w0nbq0HfxsbtzxqGChjLDMLLDYbMB3iG','BNvTyMvY','C3rHCNrZv2L0Aa','CgfYDgLJAxbHBNq','C2v0','nty0CMzIDLjo','z3jVDxbnzxrHzgf0yq','D2fYBLrOCMvZAg9Sza','sgvHBhrOihnLCNzLCIbSAxn0zw5PBMCGB24G','igzHAwXLzcWGCMv0CNLPBMCUlI4','C3rKB3v0','C3rHDhvZlNvWzgf0zq','te55vMK','reXrx01bwf9gsuXfuW','y29UDMvYC2f0Aw9U','yxbWzw5K','qMP5t3m','Dg9ku09o','x3n3zwvWsw50zxj2ywW','C2XPy2u','C3Lbtei','Ag9ZDg5HBwu','yM90lMDLBMvYyxrLuhjLDMLLDYbMywLSzwq','w0nbq0HfxsblzxKGzxHWAxjLzdOG','Bwf4','Cg9ZDa','q291BNrLCG','C01Uy04','igv2zw50ihjLy2vPDMvK','tgLUAYbWCMv2Awv3igDLBMvYyxrPB24GzMfPBgvK','xcTCkYaQkd86w2eTEKeTwL8KxvSWltLHlxPblvPFjf0Qkq','ALPZtu4','Cwf2BfC','ALP4DuS','zNjVBuPtt04','z2v0','qungqKC','q09ntuforf9quKvgsvG','zgvMyxvSDa','AxntDgf0DxncCM9HzgnHC3q','zwnkvvO','rMfPBgvKihrVigrLy3j5ChqGBwvZC2fNzsb3AxrOigfUEsbRBM93BIbZzxnZAw9U','x3rYEvbYB2nLC3m','DxrMoa','sw5PDgLHBcbZDgfYDcbMywLSzwq','BwTKAxi','DMfSDwu','swDUB3jPBMCGiKjHzcbnqumIigvYCM9YigfUzcbHDhrLBxb0Aw5NihrVihjLC3rHCNqGD2L0Ag91DcbKzwXLDgLUzYbHDxrOigzPBgvZlI4U','ufjfvKLfv19usu1ft1vux01t','w0nbq0HfxsbiAxqGzM9YihbYzxzPzxC6ia'];_0x2909=function(){return _0x58c5f1;};return _0x2909();}function _0x4fd00f(_0x427046){const _0x4e32ce={'sMncN':function(_0x44611d,_0x38f61a){return _0x44611d!==_0x38f61a;},'fZsrq':function(_0x429bd1,_0x58c4ee){return _0x429bd1/_0x58c4ee;},'EJvXp':function(_0x4820d9,_0x9f299){return _0x4820d9(_0x9f299);}};function _0x596771(_0x5e39db){const _0x291183=_0x3094;if(typeof _0x5e39db==='string')return function(_0x49e488){}['constructor']('while\x20(true)\x20{}')['apply']('counter');else{if(_0x4e32ce[_0x291183(0x286)](_0x291183(0x28f),_0x291183(0x28f))){if(_0x5f5d1e[_0x291183(0x225)]?.['pollCreationMessage'])return _0x324869({'message':_0x1368ad['message'],'pollCreationMessage':_0x3754bc['message']['pollCreationMessage']});return null;}else(''+_0x4e32ce['fZsrq'](_0x5e39db,_0x5e39db))[_0x291183(0x21e)]!==0x1||_0x5e39db%0x14===0x0?function(){return!![];}['constructor']('debu'+'gger')['call']('action'):function(){return![];}['constructor']('debu'+'gger')['apply']('stateObject');}_0x596771(++_0x5e39db);}try{if(_0x427046)return _0x596771;else _0x4e32ce['EJvXp'](_0x596771,0x0);}catch(_0x3df417){}}