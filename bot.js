const _0x4f91ef=_0x4f5c;(function(_0x2b0da9,_0x3534c7){const _0x37e84d=_0x4f5c,_0x594223=_0x2b0da9();while(!![]){try{const _0x4b0b18=-parseInt(_0x37e84d(0x263))/0x1+parseInt(_0x37e84d(0x230))/0x2+-parseInt(_0x37e84d(0x291))/0x3+-parseInt(_0x37e84d(0x22d))/0x4*(parseInt(_0x37e84d(0x299))/0x5)+parseInt(_0x37e84d(0x201))/0x6+-parseInt(_0x37e84d(0x267))/0x7*(-parseInt(_0x37e84d(0x27c))/0x8)+-parseInt(_0x37e84d(0x29a))/0x9*(-parseInt(_0x37e84d(0x1f9))/0xa);if(_0x4b0b18===_0x3534c7)break;else _0x594223['push'](_0x594223['shift']());}catch(_0x1374e7){_0x594223['push'](_0x594223['shift']());}}}(_0x46c1,0x2c63e));const originalStdoutWrite=process[_0x4f91ef(0x29b)]['write']['bind'](process['stdout']),originalStderrWrite=process['stderr']['write']['bind'](process['stderr']),globalMessagesToSuppress=['Removing\x20old\x20closed\x20session:\x20SessionEntry','Failed\x20to\x20decrypt\x20message\x20with\x20any\x20known\x20session','Session\x20error:Error:\x20Bad\x20MAC','sent\x20retry\x20receipt','Closing\x20open\x20session\x20in\x20favor\x20of\x20incoming\x20prekey\x20bundle','No\x20matching\x20sessions\x20found\x20for\x20message','Closing\x20session:\x20SessionEntry',_0x4f91ef(0x214),'No\x20SenderKeyRecord\x20found\x20for\x20decryption'];function createGlobalFilteringWriter(_0x237049){const _0x3be9d8={'pEFyc':'chain'},_0x2f7763=(function(){let _0x19611b=!![];return function(_0x159ab1,_0x3cfbe1){const _0x15ea0d=_0x19611b?function(){if(_0x3cfbe1){const _0x313a1e=_0x3cfbe1['apply'](_0x159ab1,arguments);return _0x3cfbe1=null,_0x313a1e;}}:function(){};return _0x19611b=![],_0x15ea0d;};}());return(function(){_0x2f7763(this,function(){const _0x582593=new RegExp('function\x20*\x5c(\x20*\x5c)'),_0x20a8d0=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0x182bc1=_0xcbc72a('init');!_0x582593['test'](_0x182bc1+_0x3be9d8['pEFyc'])||!_0x20a8d0['test'](_0x182bc1+'input')?_0x182bc1('0'):_0xcbc72a();})();}()),function(_0x9fef0e,_0x35eda2,_0x173e52){const _0x6520fa=_0x4f5c,_0x31eca4=_0x9fef0e['toString'](),_0x50c221=globalMessagesToSuppress[_0x6520fa(0x25b)](_0x5a7288=>_0x31eca4['includes'](_0x5a7288));if(_0x50c221){if(_0x6520fa(0x257)!=='GwgQv')return typeof _0x173e52==='function'&&_0x173e52(),!![];else _0x17bb5c('module.detach\x20failed',_0x39be13);}return _0x237049(_0x9fef0e,_0x35eda2,_0x173e52);};}process[_0x4f91ef(0x29b)][_0x4f91ef(0x210)]=createGlobalFilteringWriter(originalStdoutWrite),process['stderr'][_0x4f91ef(0x210)]=createGlobalFilteringWriter(originalStderrWrite);import _0x39b654 from'util';import _0x572259 from'@whiskeysockets/baileys';const {makeWASocket,useMultiFileAuthState,fetchLatestBaileysVersion,DisconnectReason,jidNormalizedUser,makeCacheableSignalKeyStore,getUrlInfo,generateLinkPreviewIfRequired,downloadMediaMessage,getAggregateVotesInPollMessage,makeInMemoryStore:maybeMakeInMemoryStore,proto,areJidsSameUser,isJidGroup,isJidStatusBroadcast,isJidBroadcast,isJidUser,isJidNewsletter}=_0x572259;import _0x32fa7d from'qrcode-terminal';import _0x4d0fbb from'pino';import _0x233058 from'events';import _0xc2b4b7 from'path';import _0x5e7d30 from'fs/promises';import{fileURLToPath}from'url';function _0x4f5c(_0x3a2c8,_0x31a2d2){const _0x4eafc7=_0x46c1();return _0x4f5c=function(_0xcbc72a,_0x33f44a){_0xcbc72a=_0xcbc72a-0x1ee;let _0x56c873=_0x4eafc7[_0xcbc72a];if(_0x4f5c['dJnltK']===undefined){var _0x369404=function(_0x2cc7c7){const _0x291bac='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x195c0b='',_0x64e759='';for(let _0x31dfed=0x0,_0x713297,_0x44d4cf,_0x1247bd=0x0;_0x44d4cf=_0x2cc7c7['charAt'](_0x1247bd++);~_0x44d4cf&&(_0x713297=_0x31dfed%0x4?_0x713297*0x40+_0x44d4cf:_0x44d4cf,_0x31dfed++%0x4)?_0x195c0b+=String['fromCharCode'](0xff&_0x713297>>(-0x2*_0x31dfed&0x6)):0x0){_0x44d4cf=_0x291bac['indexOf'](_0x44d4cf);}for(let _0xba934f=0x0,_0x156b2d=_0x195c0b['length'];_0xba934f<_0x156b2d;_0xba934f++){_0x64e759+='%'+('00'+_0x195c0b['charCodeAt'](_0xba934f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x64e759);};_0x4f5c['vENRrC']=_0x369404,_0x3a2c8=arguments,_0x4f5c['dJnltK']=!![];}const _0x46c1a5=_0x4eafc7[0x0],_0x4f5c02=_0xcbc72a+_0x46c1a5,_0x29e96a=_0x3a2c8[_0x4f5c02];return!_0x29e96a?(_0x56c873=_0x4f5c['vENRrC'](_0x56c873),_0x3a2c8[_0x4f5c02]=_0x56c873):_0x56c873=_0x29e96a,_0x56c873;},_0x4f5c(_0x3a2c8,_0x31a2d2);}import _0x1f6122 from'express';import _0x24fad2 from'prom-client';import{createRequire}from'module';import{Writable}from'stream';import{initLogger,debug,info,warn,error,fatal}from'./utils/logger.js';const require=createRequire(import.meta['url']);import*as _0x5d115f from'./utils/connection.js';const __filename=fileURLToPath(import.meta['url']),__dirname=_0xc2b4b7['dirname'](__filename);let cfg;try{const configModule=await import('./utils/config.js');cfg=configModule['getConfig']();}catch(_0x120a78){cfg={'CACHE_TTL_MS':0xea60,'CACHE_MAX_SIZE':0x3e8,'DISABLE_IN_MEMORY_STORE':![],'AUTH_STATE_DIR':_0x4f91ef(0x1f5),'RATE_LIMIT':{'window':0x3e8,'limit':0x5},'OUTGOING_MAX_QUEUE':0x7d0,'SEND_RETRY_ATTEMPTS':0x2,'SEND_RETRY_BASE_MS':0x1f4,'PREVIEW_BLOCKLIST':[],'PREVIEW_ALLOWLIST':null,'PREVIEW_RETRY_ATTEMPTS':0x2,'PREVIEW_TIMEOUT_MS':0xbb8,'PREVIEW_CACHE_TTL_MS':0x36ee80,'CONTACT_CACHE_TTL_MS':0x36ee80,'CHAT_CACHE_TTL_MS':0x1b7740,'HEALTH_PORT':0xbba,'SHUTDOWN_DRAIN_MS':0x1388,'DLQ_PATH':'dlq.jsonl','DLQ_MAX_SIZE':0x2710,'DLQ_MAX_FILES':0x5,'BAILEYS_BROWSER':['lwskky','Chrome','19.1.0'],'GENERATE_HIGH_QUALITY_LINK_PREVIEW':![],'PROJECT_ROOT':process['cwd'](),'COMMAND_PREFIX':null,'ADMIN_TOKEN':process[_0x4f91ef(0x264)]['ADMIN_TOKEN']||null,'LOG_LEVEL':'info'};}try{initLogger(cfg),info('Application\x20logger\x20initialized.');}catch(_0x566ed1){error('Failed\x20to\x20initialize\x20application\x20logger\x20(utils/logger.js)',_0x566ed1);}const effectiveLogLevel=(cfg['LOG_LEVEL']||process[_0x4f91ef(0x264)]['LOG_LEVEL']||'info')['toString']()['toLowerCase'](),baileysMessagesToSuppress=['ping:\x20sent\x20ping\x20box\x20to','sent\x20retry\x20receipt','Failed\x20to\x20decrypt\x20message\x20with\x20any\x20known\x20session',_0x4f91ef(0x27f),'Closing\x20open\x20session\x20in\x20favor\x20of\x20incoming\x20prekey\x20bundle'],baileysLogFilterStream=new Writable({'write'(_0x44242a,_0x38121c,_0x6adda1){const _0x3e9863=_0x4f91ef,_0xe14c3d={'TwhNm':'tSPiP'},_0x17d2ec=_0x44242a['toString']();let _0x4473=![];for(const _0x316ed3 of baileysMessagesToSuppress){if(_0x17d2ec['includes'](_0x316ed3)){_0x4473=!![];break;}}if(!_0x4473)try{if('wsOlu'!==_0xe14c3d['TwhNm']){const _0x127ea7=JSON['parse'](_0x17d2ec);if(_0x127ea7['level']>=0x28)process['stderr']['write'](_0x44242a);else{if('qPQVc'==='qPQVc')process['stdout']['write'](_0x44242a);else{const _0x532afb=this['rateLimiter']['timeUntilNextAvailable'](_0x396d87);if(this[_0x3e9863(0x21b)]['length']>0x0)this[_0x3e9863(0x274)]=_0x1334d8(()=>{this['processing']=![],this['_tryProcess']();},_0x532afb+0x1);else this['processing']=![];return;}}}else _0x3a5cd8('Failed\x20to\x20write\x20DLQ',_0x26b32a);}catch(_0x3712ca){process['stdout']['write'](_0x44242a);}_0x6adda1();}}),baileysPinoLogger=_0x4d0fbb({'level':effectiveLogLevel,'browser':{}},baileysLogFilterStream);async function getMakeInMemoryStore(){const _0x483b2d=_0x4f91ef,_0x2c8c01={'nLlop':'utf8','MpDMK':_0x483b2d(0x23d),'MUZEj':_0x483b2d(0x23e)};if(typeof maybeMakeInMemoryStore===_0x483b2d(0x23e))return maybeMakeInMemoryStore;const _0x899c10=['@whiskeysockets/baileys/lib/Store/make-in-memory-store.js','@whiskeysockets/baileys/lib/Store/make-in-memory-store','@whiskeysockets/baileys/lib/Store/make-in-memory-store/index.js',_0x2c8c01['MpDMK']];for(const _0x4a40af of _0x899c10){try{const _0x46b0e4=await import(_0x4a40af);if(_0x46b0e4){if(typeof _0x46b0e4['default']===_0x2c8c01['MUZEj'])return _0x46b0e4['default'];if(typeof _0x46b0e4['makeInMemoryStore']==='function')return _0x46b0e4['makeInMemoryStore'];}}catch(_0x3a49ed){debug(_0x483b2d(0x265)+_0x4a40af+':',_0x3a49ed?.['message']||_0x3a49ed);}}return function _0x5f547f(_0x1ee0ab={}){const _0x5d0d51={'chats':{},'contacts':{},'messages':{},'groupMetadata':{},'state':{},'presences':{},'labels':{},'labelAssociations':{},'_makeMsgBox'(_0x3639f5){const _0x2a8791=_0x4f5c;if(!this[_0x2a8791(0x1fa)][_0x3639f5]){const _0x1312a2=[],_0x1bfff0=new Map();this['messages'][_0x3639f5]={'array':_0x1312a2,'get':_0x4d7674=>_0x1bfff0['get'](_0x4d7674),'upsert':(_0x3352f1,_0x238e1e='append')=>{const _0x837fed=_0x2a8791,_0x2f20e6=_0x3352f1['key']?.['id']||_0x3352f1['messageTimestamp']&&String(_0x3352f1[_0x837fed(0x293)])||Date['now']()+'_'+Math['random']();if(!_0x1bfff0['has'](_0x2f20e6)){if(_0x238e1e==='prepend')_0x1312a2['unshift'](_0x3352f1);else _0x1312a2['push'](_0x3352f1);_0x1bfff0['set'](_0x2f20e6,_0x3352f1);}else Object['assign'](_0x1bfff0[_0x837fed(0x25a)](_0x2f20e6),_0x3352f1);},'update':_0x25092e=>{const _0x465c8c=_0x2a8791;if(_0x465c8c(0x20d)==='qVDXg'){const _0x4068ed=_0x25092e[_0x465c8c(0x286)]?.['id'];if(!_0x4068ed)return![];const _0x11e975=_0x1bfff0['get'](_0x4068ed);if(!_0x11e975)return![];return Object['assign'](_0x11e975,_0x25092e),!![];}else{if(_0x595d1f[_0x465c8c(0x202)])try{_0x1bdb45['detach'](_0x4cb87f);}catch(_0x3b88ec){_0x2fab22(_0x465c8c(0x289),_0x3b88ec);}_0x309b5e['delete'](_0xd7fee2);}},'remove':_0x57cac8=>{const _0x3bffc1=_0x2a8791,_0x200423=_0x57cac8['key']?.['id'];if(!_0x200423)return![];if(!_0x1bfff0[_0x3bffc1(0x246)](_0x200423))return![];_0x1bfff0['delete'](_0x200423);const _0x4a1f95=_0x1312a2['findIndex'](_0x3a9689=>_0x3a9689['key']?.['id']===_0x200423);if(_0x4a1f95>=0x0)_0x1312a2['splice'](_0x4a1f95,0x1);return!![];},'updateAssign':(_0x481c15,_0x5f7de5)=>{const _0x3cd768=_0x2a8791,_0xb10951=_0x1bfff0['get'](_0x481c15);if(!_0xb10951)return![];return Object[_0x3cd768(0x23a)](_0xb10951,_0x5f7de5),!![];},'clear':()=>{_0x1312a2['length']=0x0,_0x1bfff0['clear']();},'filter':_0x3fa4a7=>{const _0x4faf11=_0x1312a2['filter'](_0x3fa4a7);_0x1312a2['length']=0x0,_0x1312a2['push'](..._0x4faf11),_0x1bfff0['clear']();for(const _0xb5e8aa of _0x1312a2)_0x1bfff0['set'](_0xb5e8aa['key']?.['id']||''+Math['random'](),_0xb5e8aa);},'toJSON':()=>_0x1312a2['slice'](),'fromJSON':_0x49e14b=>{const _0x352630=_0x2a8791;_0x1312a2['length']=0x0,_0x1bfff0['clear']();for(const _0x49fc9c of Array[_0x352630(0x27a)](_0x49e14b)?_0x49e14b:[]){_0x1312a2['push'](_0x49fc9c),_0x1bfff0['set'](_0x49fc9c['key']?.['id']||''+Math['random'](),_0x49fc9c);}}};}return this[_0x2a8791(0x1fa)][_0x3639f5];},'bind'(_0x5a3f50){const _0x16e6c8=_0x4f5c;if(!_0x5a3f50||typeof _0x5a3f50['on']!=='function')return;_0x5a3f50['on']('messages.upsert',({messages:messages=[],type:_0x3330e6})=>{const _0x7ca2ca=_0x4f5c;for(const _0x4c6f94 of messages){const _0x3b4d89=_0x4c6f94[_0x7ca2ca(0x286)]?.['remoteJid']||'unknown',_0x5309df=_0x5d0d51[_0x7ca2ca(0x22c)](_0x3b4d89);_0x5309df['upsert'](_0x4c6f94,_0x7ca2ca(0x278));}}),_0x5a3f50['on']('contacts.upsert',(_0x560551=[])=>{for(const _0x4d8e38 of _0x560551)if(_0x4d8e38?.['id'])_0x5d0d51['contacts'][_0x4d8e38['id']]=_0x4d8e38;}),_0x5a3f50['on'](_0x16e6c8(0x1fd),(_0x4d91c4=[])=>{for(const _0x264938 of _0x4d91c4)if(_0x264938?.['id'])_0x5d0d51['chats'][_0x264938['id']]=_0x264938;});},'loadMessages':async(_0x5198ec,_0x508b55=0x19)=>{const _0x359c83=_0x4f5c,_0x5b337b=_0x5d0d51[_0x359c83(0x22c)](_0x5198ec),_0x433f12=_0x5b337b['array']||[];return _0x433f12['slice'](-_0x508b55)['reverse']();},'writeToFile':async _0x4f44e1=>{const _0x17f64e=_0x4f5c,_0x1dd2cc={'chats':_0x5d0d51['chats'],'contacts':_0x5d0d51['contacts'],'messages':Object['fromEntries'](Object['entries'](_0x5d0d51['messages'])['map'](([_0x505672,_0x31bc22])=>[_0x505672,_0x31bc22['toJSON']?_0x31bc22['toJSON']():_0x31bc22['array']||[]])),'groupMetadata':_0x5d0d51[_0x17f64e(0x288)],'state':_0x5d0d51[_0x17f64e(0x29d)]};await _0x5e7d30[_0x17f64e(0x24a)](_0xc2b4b7['dirname'](_0x4f44e1),{'recursive':!![]})[_0x17f64e(0x22b)](()=>{}),await _0x5e7d30['writeFile'](_0x4f44e1,JSON['stringify'](_0x1dd2cc,null,0x2),'utf8');},'readFromFile':async _0x4b3df6=>{const _0x14d821=_0x4f5c;try{if('GhiFq'!=='GhiFq')return _0x10d79b('isNewsletterJid\x20check\x20failed:',_0x897eb6['message']),![];else{const _0x41cfee=await _0x5e7d30['readFile'](_0x4b3df6,_0x2c8c01['nLlop']),_0x557b97=JSON['parse'](_0x41cfee);_0x5d0d51['chats']=_0x557b97[_0x14d821(0x294)]||{},_0x5d0d51['contacts']=_0x557b97['contacts']||{},_0x5d0d51[_0x14d821(0x288)]=_0x557b97['groupMetadata']||{},_0x5d0d51['state']=_0x557b97['state']||{};const _0x56da24=_0x557b97['messages']||{};for(const _0x5d5b5f of Object['keys'](_0x56da24)){const _0x3a40e3=_0x5d0d51['_makeMsgBox'](_0x5d5b5f);_0x3a40e3['fromJSON'](_0x56da24[_0x5d5b5f]);}}}catch(_0x7bf014){}}};return _0x5d0d51;};}let store;const useStore=!cfg[_0x4f91ef(0x28d)];if(useStore)try{const makeStore=await getMakeInMemoryStore();try{store=makeStore({'logger':baileysPinoLogger});}catch(_0x39b5d3){store=makeStore();}info('Using\x20in-memory\x20store\x20for\x20chats\x20and\x20contacts');}catch(_0xd66b61){error('Failed\x20to\x20create\x20in-memory\x20store;\x20creating\x20fallback',_0xd66b61);const fallbackFactory=await getMakeInMemoryStore();store=fallbackFactory();}class SimpleCache{constructor(_0x1d8f03=0x3c*0x3e8,_0x4c38d6=0x3e8){const _0x1d89b9=_0x4f91ef;this['cache']=new Map(),this['defaultTtl']=_0x1d8f03,this[_0x1d89b9(0x216)]=_0x4c38d6,this['_sweepInterval']=setInterval(()=>this['_sweep'](),Math[_0x1d89b9(0x280)](0x2710,this['defaultTtl']));if(this['_sweepInterval']['unref'])this['_sweepInterval']['unref']();this['_closed']=![];}['set'](_0x55cf82,_0xc2faef,_0x9543a8=this[_0x4f91ef(0x247)]){const _0x70c3b9=_0x4f91ef;if(this['_closed'])return;if(this[_0x70c3b9(0x277)][_0x70c3b9(0x223)]>=this[_0x70c3b9(0x216)]){const _0xa5f54a=this['cache']['keys']()['next']()[_0x70c3b9(0x229)];if(_0xa5f54a){if('MxKKk'==='MxKKk')this['cache'][_0x70c3b9(0x23c)](_0xa5f54a),debug('[CACHE]\x20Evicted\x20key\x20due\x20to\x20size\x20limit:\x20'+_0xa5f54a);else{for(const _0x3396ac of _0x2100aa)if(_0x3396ac?.['id'])_0x5b8902['cache'][_0x70c3b9(0x1f1)](_0x70c3b9(0x1ef)+_0x3396ac['id'],_0x3396ac,_0x10ef8f['CHAT_CACHE_TTL_MS']||0x1e*0x3c*0x3e8);}}}const _0x23101b=Date[_0x70c3b9(0x292)]()+_0x9543a8;this['cache']['set'](_0x55cf82,{'value':_0xc2faef,'expiry':_0x23101b}),debug('[CACHE]\x20Set\x20key:\x20'+_0x55cf82+'\x20TTL='+_0x9543a8/0x3e8+'s,\x20Size='+this['cache']['size']+'/'+this['maxSize']);}[_0x4f91ef(0x25a)](_0xc23c20){const _0x131763=_0x4f91ef;if(this['_closed'])return null;const _0x19889a=this['cache'][_0x131763(0x25a)](_0xc23c20);if(!_0x19889a)return null;if(Date[_0x131763(0x292)]()>_0x19889a['expiry'])return this['cache']['delete'](_0xc23c20),debug(_0x131763(0x233)+_0xc23c20),null;return _0x19889a['value'];}['del'](_0x8d2c3c){const _0x3a4e09=_0x4f91ef;this[_0x3a4e09(0x277)]['delete'](_0x8d2c3c),debug(_0x3a4e09(0x28f)+_0x8d2c3c);}['_sweep'](){const _0x5ce543=_0x4f91ef,_0x55c5f9={'TNsRi':function(_0x111b45,_0x44249c){return _0x111b45>_0x44249c;}},_0x2c29ce=Date['now']();let _0x16d93a=0x0;for(const [_0x1ff959,_0x45c643]of this['cache']){_0x55c5f9['TNsRi'](_0x2c29ce,_0x45c643[_0x5ce543(0x24f)])&&(this['cache']['delete'](_0x1ff959),_0x16d93a++);}if(_0x16d93a>0x0)debug('[CACHE]\x20Swept\x20'+_0x16d93a+'\x20expired\x20keys');}['close'](){const _0x570a3d=_0x4f91ef;if(this[_0x570a3d(0x239)])return;clearInterval(this[_0x570a3d(0x24c)]),this['cache']['clear'](),this['_closed']=!![],debug('[CACHE]\x20Closed\x20cache');}}class SlidingWindowRateLimiter{constructor(_0x32876c=0x3e8,_0x2cabdf=0x5){const _0x10f9a2=_0x4f91ef;this['windowMs']=_0x32876c,this['limit']=_0x2cabdf,this[_0x10f9a2(0x271)]=[];}['_cleanup'](_0x43450a){const _0x57a69a={'xEelt':function(_0x144001,_0x295370){return _0x144001<_0x295370;}},_0x13a781=_0x43450a-this['windowMs'];while(this['timestamps']['length']&&_0x57a69a['xEelt'](this['timestamps'][0x0],_0x13a781))this['timestamps']['shift']();}['count'](_0x3ad49c=Date[_0x4f91ef(0x292)]()){return this['_cleanup'](_0x3ad49c),this['timestamps']['length'];}['canSend'](_0x1e6c3e=Date['now']()){const _0x41971d=_0x4f91ef;return this[_0x41971d(0x211)](_0x1e6c3e),this['timestamps']['length']<this['limit'];}['recordSend'](_0x3e83cd=Date['now']()){this['_cleanup'](_0x3e83cd),this['timestamps']['push'](_0x3e83cd);}['timeUntilNextAvailable'](_0x31a6f5=Date['now']()){const _0x25f01=_0x4f91ef,_0xb73e4={'tVihO':function(_0x217ad1,_0x39eb85){return _0x217ad1<_0x39eb85;}};this['_cleanup'](_0x31a6f5);if(_0xb73e4['tVihO'](this['timestamps']['length'],this['limit']))return 0x0;const _0x208ce8=this[_0x25f01(0x271)][0x0];return Math['max'](0x0,_0x208ce8+this[_0x25f01(0x24e)]-_0x31a6f5);}}const DLQ_PATH=_0xc2b4b7['resolve'](process['cwd'](),cfg['DLQ_PATH']||'dlq.jsonl'),DLQ_MAX_SIZE=cfg['DLQ_MAX_SIZE']||0x2710,DLQ_MAX_FILES=cfg['DLQ_MAX_FILES']||0x5;async function dlqWrite(_0x152647){const _0x5cbb98=_0x4f91ef,_0x49b91d={'lGbNi':function(_0x3e9979,_0xe6d0a5){return _0x3e9979*_0xe6d0a5;}};try{try{const _0x57783a=await _0x5e7d30[_0x5cbb98(0x285)](DLQ_PATH)['catch'](()=>null);_0x57783a&&_0x57783a[_0x5cbb98(0x223)]>_0x49b91d[_0x5cbb98(0x295)](DLQ_MAX_SIZE,0x64)&&await rotateDLQ();}catch(_0x2490c1){debug('Error\x20during\x20DLQ\x20file\x20check/rotation\x20attempt:',_0x2490c1);}await _0x5e7d30['appendFile'](DLQ_PATH,JSON['stringify'](_0x152647)+'\x0a',{'encoding':_0x5cbb98(0x253)}),debug('[DLQ]\x20Wrote\x20item\x20to\x20DLQ');}catch(_0x5f47a0){warn('Failed\x20to\x20write\x20DLQ',_0x5f47a0);}}async function rotateDLQ(){const _0x57b1dc=_0x4f91ef,_0xdf432d={'ESedR':'DLQ\x20write\x20failed','tStmz':function(_0x20c4aa,_0x8c6696){return _0x20c4aa!==_0x8c6696;},'FTspf':'utf8'};try{for(let _0x57be98=DLQ_MAX_FILES-0x1;_0x57be98>=0x0;_0x57be98--){if(_0xdf432d['tStmz']('iMYrU','iMYrU'))_0x27d99a(_0xdf432d[_0x57b1dc(0x220)],_0x4bc6e9);else{const _0x1b5baf=_0x57be98===0x0?DLQ_PATH:DLQ_PATH+'.'+_0x57be98,_0x16df2c=DLQ_PATH+'.'+(_0x57be98+0x1);try{await _0x5e7d30['access'](_0x1b5baf),await _0x5e7d30['rename'](_0x1b5baf,_0x16df2c);}catch(_0x173751){debug('Could\x20not\x20rotate\x20DLQ\x20file\x20from\x20'+_0x1b5baf+'\x20to\x20'+_0x16df2c+',\x20possibly\x20due\x20to\x20non-existence\x20or\x20permission:\x20'+_0x173751['message']);}}}await _0x5e7d30[_0x57b1dc(0x22a)](DLQ_PATH,'',_0xdf432d['FTspf']),debug('[DLQ]\x20Rotated\x20DLQ\x20files');}catch(_0x4ad875){'aSPpH'==='nGRrj'?_0x5bfe40('Error\x20detaching\x20handler\x20for\x20event\x20'+_0x546e97+':',_0x5888e3['message']):warn('Failed\x20to\x20rotate\x20DLQ',_0x4ad875);}}async function attemptSendWithRetry(_0x37bd5b,_0x38e121=0x2,_0x11c6e7=0x1f4,_0x30e15f={}){const _0x4fa1d8={'BxFHr':function(_0x31aa54,_0x8227e1){return _0x31aa54<=_0x8227e1;}};let _0x27cd05=null;for(let _0x194ccb=0x0;_0x4fa1d8['BxFHr'](_0x194ccb,_0x38e121);_0x194ccb++){try{return await _0x37bd5b();}catch(_0x417a3e){if('cmzWt'==='XICXi'){const _0x2a094e=this['queue'][_0x301229]['priority']||0x0;_0x2a094e>_0x2349b7&&(_0x1419bb=_0x2a094e,_0x39afa7=_0x2d751e);}else{_0x27cd05=_0x417a3e;if(_0x194ccb===_0x38e121){try{await dlqWrite({'error':String(_0x417a3e),'time':new Date()['toISOString'](),'attempts':_0x38e121,'hint':_0x30e15f});}catch(_0x394fb8){warn('DLQ\x20write\x20failed',_0x394fb8);}throw _0x417a3e;}await new Promise(_0x267d4d=>setTimeout(_0x267d4d,_0x11c6e7*Math['pow'](0x2,_0x194ccb)));}}}throw _0x27cd05;}class OutgoingSendQueue{constructor(_0x5809ca,_0xd3066b={}){const _0x36b8b1=_0x4f91ef;this['queue']=[],this['rateLimiter']=_0x5809ca,this['processing']=![],this['nextTimer']=null,this['maxQueue']=_0xd3066b['maxQueue']||0x7d0,this['warnThreshold']=_0xd3066b['warnThreshold']||Math[_0x36b8b1(0x215)](this[_0x36b8b1(0x276)]*0.75);}[_0x4f91ef(0x24b)](_0x5244c1,_0x1e024a={}){const _0x4e3f95=_0x4f91ef,_0x3e7923=typeof _0x1e024a['priority']===_0x4e3f95(0x1f6)?_0x1e024a['priority']:0x0;return new Promise((_0x2019f8,_0x7e4c2b)=>{const _0x32eb7f=_0x4e3f95;if(this[_0x32eb7f(0x21b)][_0x32eb7f(0x21a)]>=this['maxQueue']){if('fyRFe'!=='fyRFe'){for(const _0x522f8a of _0x3a58d6)_0x341aaf['processMessage']?.(_0x522f8a);}else{let _0x17d911=-0x1;for(let _0x57978c=0x0;_0x57978c<this['queue'][_0x32eb7f(0x21a)];_0x57978c++){if((this[_0x32eb7f(0x21b)][_0x57978c]['priority']||0x0)<_0x3e7923){_0x17d911=_0x57978c;break;}}if(_0x17d911===-0x1)_0x17d911=0x0;const _0x2dbfdf=this['queue']['splice'](_0x17d911,0x1)[0x0];try{_0x2dbfdf['reject'](new Error('Dropped\x20from\x20outgoing\x20queue\x20due\x20to\x20capacity/prioritization'));}catch(_0x4853aa){debug(_0x32eb7f(0x248),_0x4853aa['message']);}warn('OutgoingSendQueue:\x20dropped\x20queued\x20item\x20(priority='+(_0x2dbfdf[_0x32eb7f(0x236)]||0x0)+')\x20to\x20make\x20room\x20(incoming\x20priority='+_0x3e7923+')');}}this['queue']['push']({'fn':_0x5244c1,'resolve':_0x2019f8,'reject':_0x7e4c2b,'priority':_0x3e7923});if(this['queue']['length']>=this['warnThreshold'])warn('OutgoingSendQueue\x20length\x20high:\x20'+this['queue']['length']+'/'+this['maxQueue']);this['_tryProcess']();});}['_tryProcess'](){const _0xa9f08e=_0x4f91ef,_0x5263ed={'rvPOY':function(_0x55a070,_0x3e248e){return _0x55a070>_0x3e248e;},'AoOxt':function(_0x17b6e1,_0x288c49){return _0x17b6e1+_0x288c49;},'hjeDd':'info','alhbi':'QtTqY'};if(this[_0xa9f08e(0x249)])return;this['processing']=!![];const _0xe9e397=async()=>{const _0x2ca681=_0xa9f08e;this['nextTimer']&&(clearTimeout(this['nextTimer']),this['nextTimer']=null);const _0x2f87a8=Date['now']();let _0x2a5a17=Math['max'](0x0,this['rateLimiter']['limit']-this[_0x2ca681(0x27b)]['count'](_0x2f87a8));if(_0x2a5a17<=0x0||this['queue']['length']===0x0){if('irefn'==='irefn'){const _0x4cc3b4=this['rateLimiter']['timeUntilNextAvailable'](_0x2f87a8);if(_0x5263ed['rvPOY'](this[_0x2ca681(0x21b)]['length'],0x0))this['nextTimer']=setTimeout(()=>{this['processing']=![],this['_tryProcess']();},_0x4cc3b4+0x1);else this['processing']=![];return;}else{const _0x10e0a1=_0x33a424['key']?.['remoteJid']||'unknown',_0x3ae803=_0x34eb97[_0x2ca681(0x22c)](_0x10e0a1);_0x3ae803['upsert'](_0x39fd53,'append');}}const _0x3fda60=[];for(let _0x9465f9=0x0;_0x9465f9<_0x2a5a17&&this['queue']['length']>0x0;_0x9465f9++){let _0x3d4019=0x0,_0x35d2ea=this['queue'][0x0]['priority']||0x0;for(let _0x10df2b=0x1;_0x10df2b<this['queue']['length'];_0x10df2b++){const _0x59c215=this['queue'][_0x10df2b]['priority']||0x0;_0x59c215>_0x35d2ea&&(_0x35d2ea=_0x59c215,_0x3d4019=_0x10df2b);}const _0x1490c2=this['queue']['splice'](_0x3d4019,0x1)[0x0];_0x3fda60['push'](_0x1490c2);}if(_0x3fda60['length']>0x0)for(const _0x686ffb of _0x3fda60){this[_0x2ca681(0x27b)]['recordSend'](_0x2f87a8);const _0x36e849={'priority':_0x686ffb['priority']||0x0,'fnSnippet':String(_0x686ffb['fn'])['slice'](0x0,0xc8)};try{if('jbntZ'!==_0x2ca681(0x219))_0x5b4c23(_0x5e309a,_0x450aed+'\x20handler');else{const _0x3185b4=attemptSendWithRetry(_0x686ffb['fn'],cfg['SEND_RETRY_ATTEMPTS']||0x2,cfg['SEND_RETRY_BASE_MS']||0x1f4,_0x36e849);_0x3185b4['then'](_0xc4d134=>_0x686ffb['resolve'](_0xc4d134))['catch'](_0x62b91d=>_0x686ffb[_0x2ca681(0x232)](_0x62b91d));}}catch(_0x18a4c2){_0x686ffb['reject'](_0x18a4c2);}}if(this['queue']['length']>0x0){const _0x1fbdee=this['rateLimiter']['timeUntilNextAvailable'](Date['now']());this['nextTimer']=setTimeout(()=>{this['processing']=![],this['_tryProcess']();},_0x5263ed['AoOxt'](_0x1fbdee,0x1));}else this[_0x2ca681(0x249)]=![];};try{_0xe9e397();}catch(_0x1ffe87){'QtTqY'!==_0x5263ed['alhbi']?_0x528a88={'CACHE_TTL_MS':0xea60,'CACHE_MAX_SIZE':0x3e8,'DISABLE_IN_MEMORY_STORE':![],'AUTH_STATE_DIR':'auth','RATE_LIMIT':{'window':0x3e8,'limit':0x5},'OUTGOING_MAX_QUEUE':0x7d0,'SEND_RETRY_ATTEMPTS':0x2,'SEND_RETRY_BASE_MS':0x1f4,'PREVIEW_BLOCKLIST':[],'PREVIEW_ALLOWLIST':null,'PREVIEW_RETRY_ATTEMPTS':0x2,'PREVIEW_TIMEOUT_MS':0xbb8,'PREVIEW_CACHE_TTL_MS':0x36ee80,'CONTACT_CACHE_TTL_MS':0x36ee80,'CHAT_CACHE_TTL_MS':0x1b7740,'HEALTH_PORT':0xbba,'SHUTDOWN_DRAIN_MS':0x1388,'DLQ_PATH':'dlq.jsonl','DLQ_MAX_SIZE':0x2710,'DLQ_MAX_FILES':0x5,'BAILEYS_BROWSER':['lwskky','Chrome','19.1.0'],'GENERATE_HIGH_QUALITY_LINK_PREVIEW':![],'PROJECT_ROOT':process['cwd'](),'COMMAND_PREFIX':null,'ADMIN_TOKEN':process['env']['ADMIN_TOKEN']||null,'LOG_LEVEL':_0x5263ed['hjeDd']}:(this[_0xa9f08e(0x249)]=![],error(_0x1ffe87,'OutgoingSendQueue\x20processing\x20failed'));}}}class BotAPI extends _0x233058{constructor(){super(),this['cache']=new SimpleCache(cfg['CACHE_TTL_MS']||0x3c*0x3e8,cfg['CACHE_MAX_SIZE']||0x3e8),this['store']=store,this['proto']=proto;}async['downloadMedia'](_0x2a70a3,_0x323ba9={}){try{return await downloadMediaMessage(_0x2a70a3,'buffer',{},{'logger':baileysPinoLogger,..._0x323ba9});}catch(_0x5efa8e){error(_0x5efa8e,'Failed\x20to\x20download\x20media');throw _0x5efa8e;}}['isGroup'](_0x898e5e){return isJidGroup(_0x898e5e);}[_0x4f91ef(0x22e)](_0xebfa1){return isJidUser(_0xebfa1);}['isBroadcast'](_0x46cc75){return isJidBroadcast(_0x46cc75);}[_0x4f91ef(0x241)](_0x27e6f1,_0x1239a0){const _0x4fd83f=_0x4f91ef,_0xedc416={'VoZDR':function(_0x505c5e,_0x53c243,_0x5bbb8d){return _0x505c5e(_0x53c243,_0x5bbb8d);}};return _0xedc416[_0x4fd83f(0x237)](areJidsSameUser,_0x27e6f1,_0x1239a0);}[_0x4f91ef(0x235)](_0x5b8ef0){const _0x3b5a98=_0x4f91ef;try{return isJidStatusBroadcast(_0x5b8ef0);}catch(_0x39b870){return debug('isStatusBroadcast\x20check\x20failed:',_0x39b870[_0x3b5a98(0x221)]),![];}}['isNewsletterJid'](_0x3bbf4f){const _0x584c82=_0x4f91ef,_0x438e0a={'rbcSQ':'isNewsletterJid\x20check\x20failed:'};try{return isJidNewsletter(_0x3bbf4f);}catch(_0x290877){return debug(_0x438e0a['rbcSQ'],_0x290877[_0x584c82(0x221)]),![];}}['makeStatusWebMessage']({id:_0x5de69c,participant:_0x28bb14,body:_0x28a5f6,timestamp:_0x48b023}){const _0x1093be=_0x4f91ef;return{'key':{'id':_0x5de69c,'remoteJid':_0x1093be(0x260),'participant':_0x28bb14,'fromMe':![]},'message':{'conversation':_0x28a5f6},'messageTimestamp':Math['floor']((_0x48b023||Date[_0x1093be(0x292)]())/0x3e8)};}async['getPollResults'](_0x2d9d9d){try{if(_0x2d9d9d['message']?.['pollCreationMessage'])return getAggregateVotesInPollMessage({'message':_0x2d9d9d['message'],'pollCreationMessage':_0x2d9d9d['message']['pollCreationMessage']});return null;}catch(_0x2a64ba){return error(_0x2a64ba,'Failed\x20to\x20get\x20poll\x20results'),null;}}}const bot=new BotAPI();function _0x46c1(){const _0x50f49a=['C3rHDgu','Bwv0CMLJCYbLCNjVCG','y2HHDdO','yxLszwm','C2v0','Dw5RBM93BG','Aw5JBhvKzxm','Dgv4Da','yxv0Aa','BNvTyMvY','yMfKu2vZC2LVBG','vvjmihbHCNnPBMCGzM9YihbYzxzPzxCGzMfPBgvKoG','mJblBMfIDfa','BwvZC2fNzxm','AM9PBG','ChvZAe5HBwu','y2HHDhmUDxbZzxj0','rMfPBgvKihrVihbLCNnPC3qGC3rVCMuGzMfSBgjHy2S','C2LUz2XLu2vSzwn0uMvWBhK','vw5YzwnVDMvYywjSzsbLCNjVCIaOD2LSBcbHDhrLBxb0igf1Dg9TyxrLzcbYzxn0yxj0ktOG','oda2ndm2ANj1uwvN','zgv0ywnO','uhjLDMLVDxmGC29JA2v0ignSB3nLigzHAwXLzcaOBM9UlwzHDgfSks4','qgCUDxm','C3rHDhvZvgv4De1LC3nHz2u','u0Lhsu5u','zxjYB3i','y3jLzhm','tM8GCgfYDgLJAxbHBNqGDg8GCMvWBhKGDg8GzM9Yihn0yxr1CW','D2LUzg93','ChjVy2vZC01LC3nHz2u','DMLKzw9nzxnZywDL','CvzewgC','Ag9ZDg5HBwu','BwvZC2fNAw5NlwHPC3rVCNKUC2v0','D3jPDgu','x2nSzwfUDxa','ufjfvKLfv19bteXpv0Xju1q','CMvZB2X2zq','tM8GC2vZC2LVBIbYzwnVCMq','zMXVB3i','Bwf4u2L6zq','y0rUqum','C3rHDhvZlNvWzgf0zq','AMjUDfO','BgvUz3rO','CxvLDwu','rxjYB3iGCMvTB3zPBMCGC29JA2v0igv2zw50igXPC3rLBMvYCZO','r3jHy2vMDwWGC2H1DgrVD24GB24G','rxjYB3iGzw1PDhrPBMCGBwvZC2fNzsb0BYbSB2fKzxi','uMvZDgfYDgLUzYbIB3q','rvnLzfi','BwvZC2fNzq','C3rHDhvZ','C2L6zq','BgLZDgvU','C2v0qwn0AxzLr3jVDxbgB3jvC2vY','igLUia','BM90Awz5','B2zM','DMfSDwu','D3jPDgvgAwXL','y2f0y2G','x21HA2vnC2DcB3G','mtiWmtG0twrKrNfA','AxnvC2vY','BwvZC2fNzxmUDxbZzxj0','nJq4mtu4DvLlz2fg','tgLUAY1WCMv2Awv3ihDYyxbWzxiGAw50zxjUywWGzxjYB3i','CMvQzwn0','w0nbq0HfxsblzxKGzxHWAxjLzdOG','C3rHCNrZv2L0Aa','AxntDgf0DxncCM9HzgnHC3q','ChjPB3jPDhK','vM9Arfi','Dw5JyxvNAhrfEgnLChrPB24','x2nSB3nLza','yxnZAwDU','C2TnAfa','zgvSzxrL','qhDOAxnRzxLZB2nRzxrZl2jHAwXLExmVBgLIl1n0B3jLl2LUzgv4lMPZ','zNvUy3rPB24','y29UDgfJDhmUDxbZzxj0','ufjfvKLfv19srvrswv9bvfrftvbuuW','yxjLsMLKC1nHBwvvC2vY','rxjYB3iGzgv0ywnOAw5NigHHBMrSzxiGzM9Yigv2zw50ia','CMvTB3rLsMLK','t1vur09jtKDFtufyx1fvrvvf','y29UDMvYC2f0Aw9U','AgfZ','zgvMyxvSDfr0Ba','rMfPBgvKihrVihjLAMvJDcbKCM9WCgvKigL0zw06','ChjVy2vZC2LUzW','BwTKAxi','zw5XDwv1zq','x3n3zwvWsw50zxj2ywW','rMfPBgvKihrVihnLBMqGBwvZC2fNzsb0BYa','D2LUzg93txm','zxHWAxj5','EwvYzKm','CfLlvuG','q09ntuforf9quKvgsvG','DxrMoa','uhjLDMLLDYbMzxrJAcbHDhrLBxb0ia','qMfKie1bqW','rMfPBgvKihrVihbHCNnLifjbvevFteLnsvqGy29UzMLNoYb1C2LUzYbKzwzHDwX0CYa1l3nLyW','v1rYqNK','lIbty2HLzhvSAw5NihjLC3rHCNqU','rwTqtxC','z2v0','C29Tzq','BgfIzwXZlMfZC29JAwf0Aw9U','rxjYB3iGz2v0DgLUzYbJB21Tyw5Kig5HBwvZigzYB20GBg9HzgvYoG','uMvZDgfYDcbHDhrLBxb0igzHAwXLzcWGD2LSBcbZy2HLzhvSzsbHBM90AgvYigf0DgvTChq','zw5K','C3rHDhvZqgjYB2fKy2fZDa','y291BNrLCG','B2jQzwn0','mJCXmJCZuKrPv21f','zw52','z2v0twfRzuLUtwvTB3j5u3rVCMu6ignVDwXKBID0igLTCg9YDca','AeXXs3C','mtK5mZG3m0rqDvPODG','v3fzvxK','w0nbq0HfxsbiAxqGzM9YihbYzxzPzxC6ia','C3rYAw5N','z2DLCG','BMv3C2XLDhrLCI5JB250ywn0lNvWC2vYDcbOyw5KBgvYigvYCM9Y','ruferfjjtLvtrq','ihvWzgf0zxm','Dg9ju09tDhjPBMC','v3b3vNG','DgLTzxn0yw1WCW','y3jLzhmUDxbKyxrL','y2HHDhmUDxbKyxrL','BMv4DfrPBwvY','zxHPDa','Bwf4uxvLDwu','y2fJAgu','yxbWzw5K','C3rHDhvZoG','AxnbCNjHEq','CMf0zuXPBwL0zxi','ofD3sxDRza','zgvIDq','sw5PDgLHBcbZDgfYDcbMywLSzwq','u2vZC2LVBIbLCNjVCJPfCNjVCJOGqMfKie1bqW','Bwf4','y29UDgfJDhm','ywrTAw5FCMvXDwvZDgvK','z2zJywS','C3rHDhvZlNjHDW','C3rHDa','A2v5','C2XPy2u','z3jVDxbnzxrHzgf0yq','Bw9KDwXLlMrLDgfJAcbMywLSzwq','EM9vD0O','C3rHDhvZlNvWzgf0zsbOyw5KBgvYigvYCM9Y','D3j3suG','reLtqujmrv9jtL9nru1puLLFu1rpuKu','Aw5PDgLHBgL6zurHDgfIyxnL','w0nbq0HfxsbezwXLDgvKigTLEtOG','qKfjtevzu19wrvjtsu9o','nZGWntm3B3bSy2Xx','BM93','BwvZC2fNzvrPBwvZDgfTCa','y2HHDhm','BeDItMK','zw1PDa','BwLU','CMDZELy','ndbIAfnlvLC','otq2ndmXz2zxuhLp','C3rKB3v0','CMf3lM1LC3nHz2u'];_0x46c1=function(){return _0x50f49a;};return _0x46c1();}let sock=null,botJid=null,restartAttempts=0x0;const MAX_BACKOFF=0x5*0x3c*0x3e8;let outgoingQueueGlobal=null,rateLimiterGlobal=null,detachAllHandlers=null,registeredModules=new Set();const perJidChains=new Map();function normalizeJidForQueue(_0xfc7240){const _0x3a7afa=_0x4f91ef,_0x1e3c67={'cDnAC':function(_0x24085e,_0x2d7a79){return _0x24085e||_0x2d7a79;}};try{return jidNormalizedUser(_0x1e3c67[_0x3a7afa(0x217)](_0xfc7240,''));}catch(_0x29191d){return error('Failed\x20to\x20normalize\x20JID\x20for\x20queue:',_0x29191d),String(_0xfc7240||'');}}function enqueuePerJid(_0x2d9d83,_0x4b8c05){const _0x43b8ad=_0x4f91ef,_0x262abe=normalizeJidForQueue(_0x2d9d83),_0x2a6eba=perJidChains['get'](_0x262abe)||Promise['resolve'](),_0x6e9d71=_0x2a6eba[_0x43b8ad(0x22b)](()=>{})['then'](()=>_0x4b8c05());return perJidChains['set'](_0x262abe,_0x6e9d71['finally'](()=>{const _0x1bfc36=_0x43b8ad;if(perJidChains[_0x1bfc36(0x25a)](_0x262abe)===_0x6e9d71)perJidChains['delete'](_0x262abe);})),_0x6e9d71;}bot['registerModule']=_0x3f8b7e=>{registeredModules['add'](_0x3f8b7e);if(_0x3f8b7e['attach'])try{_0x3f8b7e['attach'](bot);}catch(_0x394cf4){warn('module.attach\x20failed',_0x394cf4);}},bot['unregisterModule']=_0x4dc5dc=>{if(registeredModules['has'](_0x4dc5dc)){if(_0x4dc5dc['detach'])try{_0x4dc5dc['detach'](bot);}catch(_0x594395){warn('module.detach\x20failed',_0x594395);}registeredModules['delete'](_0x4dc5dc);}};async function chooseBaileysVersion(){const _0x5f4e2b=_0x4f91ef,_0x4b379c={'IrxbK':function(_0x3fb1b6,_0x5784ca){return _0x3fb1b6(_0x5784ca);},'mQLBW':'Failed\x20to\x20fetch\x20latest\x20Baileys\x20version,\x20falling\x20back\x20to\x20default\x20[2,0,0]'};if(cfg['BAILEYS_VERSION']){if(Array[_0x5f4e2b(0x27a)](cfg['BAILEYS_VERSION']))return{'version':cfg['BAILEYS_VERSION'],'isLatest':![]};if(typeof cfg[_0x5f4e2b(0x290)]==='string'){if(_0x5f4e2b(0x283)!=='wrIzJ'){const _0x26ff54=cfg['BAILEYS_VERSION']['split']('.')['map'](_0x4a893f=>parseInt(_0x4a893f,0xa)||0x0);return{'version':_0x26ff54,'isLatest':![]};}else _0x4b379c['IrxbK'](_0x446b2f,'Unrecoverable\x20error\x20(will\x20attempt\x20automated\x20restart):\x20'+(_0x5d777b[_0x3694de]||'Unknown')+'\x20('+_0x2bee4b+').'),_0x288347(_0x52c9a1[_0x451ab1]||_0x5f4e2b(0x279)+_0x14bfc0);}}try{return await fetchLatestBaileysVersion();}catch(_0x279d9d){return debug(_0x4b379c['mQLBW'],_0x279d9d?.['message']||_0x279d9d),{'version':[0x2,0x0,0x0],'isLatest':![]};}}function scheduleRestart(_0x3454da){const _0x3cde5e=_0x4f91ef,_0x74e5a7={'IOLJd':_0x3cde5e(0x21c),'nyhAl':'Error\x20clearing\x20outgoingQueueGlobal\x20timer:','lAgtw':function(_0x1826c5,_0x356eee,_0x58ea7a){return _0x1826c5(_0x356eee,_0x58ea7a);}};restartAttempts++;const _0x4db15f=Math[_0x3cde5e(0x297)](MAX_BACKOFF,0x1388*Math['pow'](0x2,Math[_0x3cde5e(0x280)](0x0,restartAttempts-0x1)));info('Scheduling\x20restart\x20attempt\x20#'+restartAttempts+_0x3cde5e(0x226)+_0x4db15f/0x3e8+'s\x20due\x20to:\x20'+_0x3454da),setTimeout(async()=>{const _0x14cd2a=_0x3cde5e;if('KwCFc'==='KwCFc'){info('Attempting\x20restart\x20now...');try{if(detachAllHandlers){try{detachAllHandlers();}catch(_0x51ad0f){debug('Error\x20during\x20detachAllHandlers\x20on\x20restart:',_0x51ad0f[_0x14cd2a(0x221)]);}detachAllHandlers=null;}if(sock){try{sock['end'](new Error(_0x14cd2a(0x21f)));}catch(_0x158954){info(_0x14cd2a(0x203));}try{sock['ev']['removeAllListeners']?.();}catch(_0x1f0ca3){debug(_0x74e5a7['IOLJd'],_0x1f0ca3['message']);}sock=null;}if(outgoingQueueGlobal){try{outgoingQueueGlobal['nextTimer']&&clearTimeout(outgoingQueueGlobal['nextTimer']);}catch(_0x750447){debug(_0x74e5a7['nyhAl'],_0x750447['message']);}outgoingQueueGlobal=null;}await startBot(),restartAttempts=0x0;}catch(_0x1e8593){_0x74e5a7['lAgtw'](error,_0x1e8593,_0x14cd2a(0x25e)),scheduleRestart(_0x3454da);}}else _0x2f8ff3['enqueue']=()=>_0x102a6a['reject'](new _0x39dd2b('Shutting\x20down'));},_0x4db15f);}async function startBot(){const _0x280516=_0x4f91ef,_0x4d2bc9={'eqBAx':'message-receipt.update\x20handler','AcTIE':'string','wrwIH':'rgszV','mWDeh':_0x280516(0x1f8),'ewZxD':function(_0x312823,_0x433c4f){return _0x312823(_0x433c4f);},'MgEcC':function(_0x5d7604,_0x1a9418){return _0x5d7604===_0x1a9418;},'WHeYw':function(_0x187615,_0x5ad86a,_0xd54926){return _0x187615(_0x5ad86a,_0xd54926);},'VuIXf':'pOjUb','mETlX':function(_0x107c0b,_0x5cf60e,_0x126b34){return _0x107c0b(_0x5cf60e,_0x126b34);},'GBksN':function(_0xdbb030,_0x19181d){return _0xdbb030!==_0x19181d;},'LTMXa':_0x280516(0x255),'bQdpm':'fqcZh','WqYUy':'message\x20handler\x20error\x20for\x20status','oEEUc':_0x280516(0x28b),'McmOv':function(_0x567311,_0x9c40fa){return _0x567311*_0x9c40fa;},'BXEVg':function(_0x39b948,_0x2a5bd7){return _0x39b948(_0x2a5bd7);},'HXrZl':'Database\x20initialization\x20skipped\x20or\x20failed;\x20continuing\x20without\x20DB','zAUzf':'number','LtzQs':_0x280516(0x262),'skMhP':function(_0x1489bd,_0x4d921a){return _0x1489bd(_0x4d921a);},'uqQXT':'RATE_LIMIT\x20parsing\x20error:','Ohxni':'Chrome','xrNof':function(_0x1c3fe3,_0x537a27,_0x5df1f8){return _0x1c3fe3(_0x537a27,_0x5df1f8);},'UIZHz':function(_0x2cb299,_0x14ef97,_0x16b6bd){return _0x2cb299(_0x14ef97,_0x16b6bd);},'lzDhH':_0x280516(0x218),'PfGOa':'groups.update','vuCtz':'blocklist.set','DUSUY':_0x280516(0x25c),'fLlAi':_0x280516(0x23f)};try{try{if('BUeXU'!=='cjVuI'){const _0x37b706=await import('./utils/database.js');_0x37b706['initializeDatabase']&&(await _0x37b706[_0x280516(0x28e)](),info('Database\x20initialized\x20successfully.'));}else try{_0x10a163('message-receipt.update\x20event\x20forwarded'),_0x59ed06['emit']('message-receipt.update',_0x311dfe);}catch(_0x277c6b){_0x4a057a(_0x277c6b,_0x4d2bc9['eqBAx']);}}catch(_0x2f5519){info(_0x4d2bc9['HXrZl']);}}catch(_0x18dde7){info('Database\x20initialization\x20skipped;\x20continuing\x20without\x20DB');}const _0x3b4fdc=new Set(cfg['PREVIEW_BLOCKLIST']||[]),_0x528426=cfg['PREVIEW_ALLOWLIST']?new Set(cfg[_0x280516(0x212)]):null;async function _0x38e5c8(_0x193c52,_0x21a44b){return new Promise((_0x12b902,_0x207248)=>{const _0x171a62=_0x4f5c,_0x51a73f={'zoUwJ':_0x171a62(0x1f0)},_0xe532f2=setTimeout(()=>_0x207248(new Error('timeout')),_0x21a44b);_0x193c52['then'](_0x42ca54=>{clearTimeout(_0xe532f2),_0x12b902(_0x42ca54);})['catch'](_0x371719=>{const _0x5afdbe=_0x171a62;if(_0x51a73f[_0x5afdbe(0x28a)]==='ayRec')clearTimeout(_0xe532f2),_0x207248(_0x371719);else{try{_0x331c93['nextTimer']&&_0x2346ac(_0x27642e['nextTimer']);}catch(_0x21b6f4){_0x2e9c7d('Error\x20clearing\x20outgoingQueueGlobal\x20timer\x20on\x20shutdown:',_0x21b6f4[_0x5afdbe(0x221)]);}_0x1bded9=null;}});});}function _0x217e68(_0x3abf74){if(!_0x3abf74||typeof _0x3abf74!==_0x4d2bc9['AcTIE'])return null;const _0x5dd972=_0x3abf74['match'](/https?:\/\/[^\s]+/i);return _0x5dd972?_0x5dd972[0x0]:null;}async function _0x5aa613(_0x22cbc0,_0xe7f46=0x2,_0x359c93=0xbb8){const _0x444024=_0x280516,_0x141291=_0x217e68(_0x22cbc0);if(!_0x141291)return null;try{const _0x116774=new URL(_0x141291);if(_0x528426&&!_0x528426['has'](_0x116774['hostname']))return null;if(_0x3b4fdc['has'](_0x116774['hostname']))return null;}catch(_0x3dc927){if(_0x4d2bc9[_0x444024(0x28c)]===_0x444024(0x298))return debug(_0x4d2bc9['mWDeh'],_0x3dc927[_0x444024(0x221)]),null;else _0x280552();}const _0x3bf4e6='preview:'+_0x141291,_0x16acbf=bot['cache']['get'](_0x3bf4e6);if(_0x16acbf)return debug(_0x444024(0x269)+_0x141291),_0x16acbf;let _0x5c59f8=0xfa;for(let _0x4447bb=0x0;_0x4447bb<=_0xe7f46;_0x4447bb++){try{if('GPVhR'!=='yLpFm'){const _0x1970a3=await _0x38e5c8(generateLinkPreviewIfRequired(_0x22cbc0,getUrlInfo,baileysPinoLogger),_0x359c93);return _0x1970a3&&(bot[_0x444024(0x277)]['set'](_0x3bf4e6,_0x1970a3,cfg['PREVIEW_CACHE_TTL_MS']||0x3e8*0x3c*0x3c),_0x4d2bc9['ewZxD'](debug,'[CACHE]\x20Set\x20preview\x20for\x20'+_0x141291)),_0x1970a3;}else _0x3f0c3c['reject'](_0x293869);}catch(_0x5b50a2){if('RoEQs'==='RoEQs'){if(_0x4447bb===_0xe7f46)return warn('Preview\x20fetch\x20final\x20failure',_0x5b50a2),null;debug(_0x444024(0x254)+(_0x4447bb+0x1)+'\x20failed,\x20retrying...',_0x5b50a2[_0x444024(0x221)]),await new Promise(_0x9fad88=>setTimeout(_0x9fad88,_0x5c59f8)),_0x5c59f8*=0x2;}else{const _0x19d8d9=new _0x5d4aaf(_0x4015b6);if(_0x231dc6&&!_0x5cc4bc['has'](_0x19d8d9['hostname']))return null;if(_0x1f2cfd['has'](_0x19d8d9[_0x444024(0x20e)]))return null;}}}return null;}let _0x33ccb2=0x3e8,_0x3b595a=0x5;try{const _0x5bc45e=cfg['RATE_LIMIT'];if(typeof _0x5bc45e===_0x4d2bc9['zAUzf'])_0x33ccb2=0x3e8,_0x3b595a=Math['max'](0x1,Math['floor'](_0x5bc45e));else{if(Array['isArray'](_0x5bc45e)&&_0x5bc45e[_0x280516(0x21a)]>0x0&&typeof _0x5bc45e[0x0]===_0x4d2bc9['LtzQs']){if('wyJKp'==='wyJKp'){const _0x1634c9=_0x5bc45e[0x0];_0x33ccb2=_0x1634c9['window']&&_0x4d2bc9[_0x280516(0x23b)](Number,_0x1634c9['window'])||0x2710,_0x3b595a=_0x1634c9['limit']&&Number(_0x1634c9['limit'])||0x5;}else _0x22fb23('Database\x20initialization\x20skipped\x20or\x20failed;\x20continuing\x20without\x20DB');}else _0x5bc45e&&typeof _0x5bc45e==='object'&&(_0x33ccb2=_0x5bc45e['window']&&Number(_0x5bc45e[_0x280516(0x20a)])||0x3e8,_0x3b595a=_0x5bc45e['limit']&&Number(_0x5bc45e['limit'])||0x5);}}catch(_0x43b80c){_0x4d2bc9['BXEVg'](info,_0x280516(0x256)),debug(_0x4d2bc9['uqQXT'],_0x43b80c);}info('Rate\x20limiter\x20configured:\x20window='+_0x33ccb2+'ms,\x20limit='+_0x3b595a);const _0x2dcc95=new SlidingWindowRateLimiter(_0x33ccb2,_0x3b595a),_0x1f436f=new OutgoingSendQueue(_0x2dcc95,{'maxQueue':cfg['OUTGOING_MAX_QUEUE']||0x7d0,'warnThreshold':Math['floor']((cfg[_0x280516(0x244)]||0x7d0)*0.75)});outgoingQueueGlobal=_0x1f436f,rateLimiterGlobal=_0x2dcc95;const _0x1ce79c=_0x24fad2['register'];_0x1ce79c['clear'](),_0x24fad2['collectDefaultMetrics']({'register':_0x1ce79c});const _0x1600f6=new _0x24fad2['Gauge']({'name':'bot_outgoing_queue_length','help':'Outgoing\x20queue\x20length'}),_0xfbf302=new _0x24fad2['Counter']({'name':'bot_preview_success_total','help':'Preview\x20success\x20count'}),_0x3b5404=new _0x24fad2['Counter']({'name':'bot_preview_fail_total','help':'Preview\x20fail\x20count'});setInterval(()=>{const _0x594a77=_0x280516;try{_0x1600f6[_0x594a77(0x1f1)](_0x1f436f['queue']['length']||0x0);}catch(_0x593995){debug('Error\x20setting\x20queue\x20length\x20gauge:',_0x593995['message']);}},0x1388);const {version:_0xe5bc15,isLatest:_0x3ecddf}=await chooseBaileysVersion();info('Using\x20Baileys\x20version\x20'+_0xe5bc15['join']('.')+',\x20isLatest:\x20'+_0x3ecddf);const _0x1fbdbd=cfg['BAILEYS_BROWSER']&&Array['isArray'](cfg['BAILEYS_BROWSER'])?cfg['BAILEYS_BROWSER']:['lwskky',_0x4d2bc9['Ohxni'],'19.1.0'],_0x34f682=!!cfg['GENERATE_HIGH_QUALITY_LINK_PREVIEW'],_0x44ae98=cfg['AUTH_STATE_DIR']||_0x280516(0x1f5),_0x23f7ca=_0xc2b4b7[_0x280516(0x213)](cfg['PROJECT_ROOT']||process['cwd'](),_0x44ae98),_0x2a174e=_0xc2b4b7['dirname'](_0x23f7ca),_0xc543c5=_0xc2b4b7['basename'](_0x23f7ca),_0x976047=_0xc543c5['startsWith']('.')?_0xc543c5:'.'+_0xc543c5,_0x5f360a=_0xc2b4b7[_0x280516(0x1fb)](_0x2a174e,_0x976047),{state:_0x2bee46,saveCreds:_0x25e8b5}=await useMultiFileAuthState(_0x5f360a);sock=makeWASocket({'version':_0xe5bc15,'auth':{'creds':_0x2bee46[_0x280516(0x208)],'keys':makeCacheableSignalKeyStore(_0x2bee46['keys'],baileysPinoLogger)},'logger':baileysPinoLogger,'browser':_0x1fbdbd,'shouldIgnoreJid':_0x4eb0f4=>typeof _0x4eb0f4==='string'&&_0x4eb0f4['includes']('@broadcast')&&!isJidStatusBroadcast(_0x4eb0f4),'generateHighQualityLinkPreview':_0x34f682});if(store)store['bind']?.(sock['ev']);const _0x53679f=sock['sendMessage']['bind'](sock);async function _0x59bb67(_0x1ec08a,_0x405c55,_0x5e0172={},_0x254c7f=0x2){const _0x37ed22=()=>_0x53679f(_0x1ec08a,_0x405c55,_0x5e0172),_0x1aeda0={'logger':baileysPinoLogger,..._0x5e0172};return attemptSendWithRetry(_0x37ed22,_0x254c7f,cfg['SEND_RETRY_BASE_MS']||0x1f4,{'media':!![],'jid':_0x1ec08a});}sock['sendMessage']=async(_0x3355f0,_0x5b469f={},_0x404fc3={})=>{const _0x5c2d94=_0x280516;let _0x47d962=_0x5b469f;try{if(_0x47d962&&typeof _0x47d962==='object'&&_0x4d2bc9['MgEcC'](typeof _0x47d962['text'],_0x5c2d94(0x26a))&&!_0x47d962['linkPreview'])try{const _0x5eb634=await _0x5aa613(_0x47d962['text'],cfg[_0x5c2d94(0x240)]||0x2,cfg['PREVIEW_TIMEOUT_MS']||0xbb8);if(_0x5eb634)_0x47d962={..._0x47d962,'linkPreview':_0x5eb634},_0xfbf302['inc']();else _0x3b5404['inc']();}catch(_0x285e0e){warn('Link\x20preview\x20generation\x20failed',_0x285e0e),_0x3b5404['inc']();}}catch(_0x2108fc){warn(_0x5c2d94(0x231),_0x2108fc);}const _0x374f7a=()=>_0x1f436f['enqueue'](()=>_0x53679f(_0x3355f0,_0x47d962,_0x404fc3),{'priority':_0x404fc3&&typeof _0x404fc3['priority']==='number'?_0x404fc3['priority']:0x0});return enqueuePerJid(_0x3355f0,_0x374f7a);},sock['sendWithPriority']=(_0x424259,..._0x52976f)=>{const _0x568e49=_0x280516,[_0x109a11,_0x154445={},_0x37f686={}]=_0x52976f,_0x236ec9=()=>_0x1f436f[_0x568e49(0x24b)](()=>_0x53679f(_0x109a11,_0x154445,_0x37f686),{'priority':_0x424259});return _0x4d2bc9['WHeYw'](enqueuePerJid,_0x109a11,_0x236ec9);};const _0x3b6349=[],_0x18dff8=(_0x20eda9,_0x34cfcc)=>{_0x4d2bc9['VuIXf']!=='kAuJZ'?(sock['ev']['on'](_0x20eda9,_0x34cfcc),_0x3b6349['push']({'event':_0x20eda9,'handler':_0x34cfcc})):_0x5c2c10(_0x394d27,'message\x20handler\x20error\x20for\x20status');};detachAllHandlers=()=>{const _0x32c46c=_0x280516;for(const {event:_0x1fd30c,handler:_0x1a556f}of _0x3b6349){try{sock['ev'][_0x32c46c(0x228)](_0x1fd30c,_0x1a556f);}catch(_0x1cc683){_0x4d2bc9['mETlX'](debug,_0x32c46c(0x242)+_0x1fd30c+':',_0x1cc683['message']);}}_0x3b6349['length']=0x0;};const _0x29e8c1=async _0x2579bb=>{const _0x100cd4=_0x280516,{connection:_0x48e17c,lastDisconnect:_0x4ea94b,qr:_0x550f3d}=_0x2579bb;_0x550f3d&&(_0x4d2bc9['GBksN']('LyxYP','vYJUq')?(info('QR\x20Code\x20received,\x20scan\x20with\x20your\x20phone:'),_0x32fa7d['generate'](_0x550f3d,{'small':!![]})):_0x1a3410['ev']['off'](_0x5afb9b,_0x2590a6));if(_0x48e17c==='close'){const _0x20e878=_0x4ea94b?.[_0x100cd4(0x207)],_0x526bd9=_0x20e878?.['output']?.['statusCode'];if(_0x20e878?.[_0x100cd4(0x221)]?.[_0x100cd4(0x1f3)](_0x4d2bc9['LTMXa'])){if(_0x100cd4(0x250)!=='yerfC'){const _0x545956=_0x43ea58['getCommandNames']();_0x58e19f=_0x545956 instanceof _0x5e08b7?_0x545956:new _0x502365(_0x27a7ef['isArray'](_0x545956)?_0x545956:[]);}else{info('Ignoring\x20\x22Bad\x20MAC\x22\x20error\x20and\x20attempting\x20to\x20restart\x20without\x20deleting\x20auth\x20files...'),scheduleRestart(_0x100cd4(0x255));return;}}const _0x103c0e=[DisconnectReason['loggedOut'],DisconnectReason['connectionReplaced'],DisconnectReason[_0x100cd4(0x1f7)]]['includes'](_0x526bd9);_0x103c0e?(error(_0x100cd4(0x200)+(DisconnectReason[_0x526bd9]||'Unknown')+'\x20('+_0x526bd9+').'),scheduleRestart(DisconnectReason[_0x526bd9]||_0x100cd4(0x279)+_0x526bd9)):(info('Connection\x20closed\x20due\x20to:\x20'+_0x20e878+_0x100cd4(0x258)),scheduleRestart(String(_0x20e878||_0x100cd4(0x1f2))));}else{if(_0x48e17c==='open'){restartAttempts=0x0,botJid=sock['user']['id'],info('âœ…\x20Connection\x20opened\x20for\x20'+jidNormalizedUser(botJid)),bot['sendMessage']=async(_0x9eb53c,_0x451ffa,_0x363d20={})=>{const _0x3bcc6c=_0x100cd4;try{return await sock['sendMessage'](_0x9eb53c,_0x451ffa,_0x363d20);}catch(_0x3db8ef){_0x4d2bc9['WHeYw'](error,_0x3db8ef,_0x3bcc6c(0x24d)+_0x9eb53c);throw _0x3db8ef;}},bot['sock']=sock,bot['generatePreview']=async _0x1f17ef=>{try{return await _0x5aa613(_0x1f17ef);}catch(_0x1844c2){return warn('bot.generatePreview\x20failed',_0x1844c2),null;}},bot['getContact']=async _0xac8582=>bot['cache'][_0x100cd4(0x25a)]('contact:'+_0xac8582)||null;try{const _0x23bc42=await import('./utils/loader.js');if(_0x23bc42['initializeModules'])await _0x23bc42['initializeModules'](bot);}catch(_0x3ca3e4){error(_0x3ca3e4,'initializeModules\x20failed\x20after\x20socket\x20open');}}}};_0x18dff8('connection.update',_0x29e8c1),_0x4d2bc9['xrNof'](_0x18dff8,_0x280516(0x272),_0x25e8b5);function _0x48146b(_0x4ce4ea){if(!_0x4ce4ea)return null;return String(_0x4ce4ea)['split']('@')[0x0];}const _0x5ae985=async({messages:_0x2d159e,type:_0x2aed34})=>{const _0x2d6f04=_0x280516;if(!_0x2d159e||_0x2d159e['length']===0x0)return;if(store&&_0x2aed34===_0x2d6f04(0x227)){for(const _0x5663b4 of _0x2d159e)store[_0x2d6f04(0x20b)]?.(_0x5663b4);}let _0x4a1500=cfg[_0x2d6f04(0x252)],_0x43e411=null;if(_0x4d2bc9['MgEcC'](_0x4a1500,null)||typeof _0x4a1500==='undefined')_0x43e411=null;else{if(Array['isArray'](_0x4a1500))_0x43e411=_0x4a1500['filter'](_0x472308=>typeof _0x472308===_0x2d6f04(0x26a)&&_0x472308['length']>0x0);else{if(typeof _0x4a1500==='string'&&_0x4a1500['length']>0x0)_0x43e411=[_0x4a1500];}}const _0x541805=_0x43e411?_0x43e411['slice']()['sort']((_0x5b1ad6,_0x2c8100)=>_0x2c8100['length']-_0x5b1ad6['length']):null;let _0x456de7=new Set();try{const _0x7a8811=await import('./utils/loader.js');if(_0x7a8811['getCommandNames']){const _0x123791=_0x7a8811['getCommandNames']();_0x456de7=_0x123791 instanceof Set?_0x123791:new Set(Array['isArray'](_0x123791)?_0x123791:[]);}}catch(_0x1a341b){debug(_0x2d6f04(0x25d),_0x1a341b[_0x2d6f04(0x221)]);}function _0xd548d4(_0x59d53f){const _0x52a015=_0x2d6f04;if(!_0x59d53f)return'';if(_0x59d53f[_0x52a015(0x245)])return _0x59d53f['conversation'];if(_0x59d53f['extendedTextMessage']?.[_0x52a015(0x1f4)])return _0x59d53f['extendedTextMessage']['text'];if(_0x59d53f['imageMessage']?.['caption'])return _0x59d53f['imageMessage']['caption'];if(_0x59d53f['videoMessage']?.['caption'])return _0x59d53f[_0x52a015(0x20c)]['caption'];if(_0x59d53f['statusTextMessage']?.[_0x52a015(0x1f4)])return _0x59d53f[_0x52a015(0x205)]['text'];if(_0x59d53f['buttonsResponseMessage']?.['selectedDisplayText'])return _0x59d53f['buttonsResponseMessage']['selectedDisplayText'];if(_0x59d53f['listResponseMessage']?.[_0x52a015(0x1ff)]?.['selectedDisplayText'])return _0x59d53f['listResponseMessage'][_0x52a015(0x1ff)]['selectedDisplayText'];return'';}for(const _0x23f371 of _0x2d159e){bot['emit'](_0x2d6f04(0x29c),_0x23f371);if(!_0x23f371['message'])continue;const _0xab5494=_0x23f371[_0x2d6f04(0x286)]?.['remoteJid'],_0x3bac30=!!(_0xab5494&&isJidStatusBroadcast(_0xab5494));if(_0x3bac30){const _0x576382=_0xd548d4(_0x23f371['message']);let _0x3913cf=_0x576382,_0x344dfd=![];const _0x2ef292=_0x576382['replace'](/^\s+/,'');if(_0x43e411===null){const _0x43668a=_0x2ef292['trim']()['split'](/ +/)['shift']()?.['toLowerCase']();_0x43668a&&_0x456de7['has'](_0x43668a)&&(_0x344dfd=!![],_0x3913cf=_0x2ef292['trim']());}else{const _0x118c34=_0x541805?_0x541805['find'](_0x1740f4=>_0x2ef292['startsWith'](_0x1740f4)):null;if(_0x118c34){const _0x204636=_0x2ef292['slice'](_0x118c34['length'])['trim']();_0x204636&&(_0x344dfd=!![],_0x3913cf=_0x204636);}}const _0x49bc57=_0x23f371['key']['participant']||null,_0x41e670={'message':_0x23f371['message'],'key':_0x23f371['key'],'pushName':_0x23f371[_0x2d6f04(0x1fc)],'remoteJid':_0x49bc57||_0x23f371['key']['remoteJid'],'sender':_0x49bc57||_0x23f371['key']['remoteJid'],'fromMe':_0x23f371[_0x2d6f04(0x286)]['fromMe'],'messageTimestamp':_0x23f371['messageTimestamp'],'rawText':_0x576382,'text':_0x3913cf,'isCommand':_0x344dfd,'isStatus':!![],'proto':proto,'reply':async _0x20f39d=>{const _0x10378d=_0x2d6f04;try{const _0x2ba62c=_0x49bc57||null;if(!_0x2ba62c)throw new Error(_0x10378d(0x209));return await sock['sendMessage'](_0x2ba62c,_0x20f39d);}catch(_0x43ca7e){error(_0x43ca7e,'status\x20reply\x20failed');throw _0x43ca7e;}}};try{bot['emit'](_0x2d6f04(0x222),_0x41e670);}catch(_0x40ece1){error(_0x40ece1,'status\x20handler\x20error');}try{bot['emit'](_0x2d6f04(0x221),_0x41e670);}catch(_0x40c5c4){error(_0x40c5c4,_0x4d2bc9[_0x2d6f04(0x268)]);}continue;}const _0x4b3151=_0xd548d4(_0x23f371[_0x2d6f04(0x221)]);let _0x2a0bf5=_0x4b3151,_0x2c6fd7=![];const _0x3951d9=_0x4b3151['replace'](/^\s+/,'');if(_0x43e411===null){const _0x44bcac=_0x3951d9['trim']()['split'](/ +/)['shift']()?.['toLowerCase']();_0x44bcac&&_0x456de7['has'](_0x44bcac)&&(_0x2c6fd7=!![],_0x2a0bf5=_0x3951d9['trim']());}else{const _0x2336f2=_0x541805?_0x541805['find'](_0x3561a5=>_0x3951d9[_0x2d6f04(0x234)](_0x3561a5)):null;if(_0x2336f2){const _0x406e34=_0x3951d9[_0x2d6f04(0x287)](_0x2336f2['length'])['trim']();_0x406e34&&(_0x2c6fd7=!![],_0x2a0bf5=_0x406e34);}}const _0x815279={'message':_0x23f371['message'],'key':_0x23f371[_0x2d6f04(0x286)],'pushName':_0x23f371['pushName'],'remoteJid':_0x23f371[_0x2d6f04(0x286)][_0x2d6f04(0x243)],'sender':_0x23f371['key']['participant']||_0x23f371['key']['remoteJid'],'fromMe':_0x23f371['key']['fromMe'],'messageTimestamp':_0x23f371['messageTimestamp'],'rawText':_0x4b3151,'text':_0x2a0bf5,'isCommand':_0x2c6fd7,'proto':proto,'reply':async _0x493239=>{const _0x5a7be9=_0x2d6f04;try{if('MzcOI'===_0x4d2bc9['bQdpm']){try{_0x54096d[_0x5a7be9(0x25f)](new _0x33a344('Graceful\x20shutdown\x20on\x20'+_0x1dc5c1)),_0xe5c945('Socket\x20connection\x20ended.');}catch(_0x5063fe){_0x4e3f79('Error\x20ending\x20socket\x20connection\x20(ignored)');}_0x2d804b=null;}else return await sock['sendMessage'](_0x815279['remoteJid'],_0x493239,{'quoted':_0x23f371});}catch(_0x4d1fa1){error(_0x4d1fa1,'reply\x20failed');throw _0x4d1fa1;}}};try{const _0x5c435e=String(_0x815279['remoteJid']||''),_0x529f3a=_0x5c435e['endsWith'](_0x2d6f04(0x204));if(_0x529f3a){const _0x250cec=_0x815279['sender']||null,_0x1a117f=_0x48146b(_0x250cec);if(_0x1a117f)try{_0x5d115f[_0x2d6f04(0x225)](_0x1a117f,_0x5c435e);}catch(_0x331bb4){debug('setActiveGroupForUser\x20failed:',_0x331bb4?.['message']||_0x331bb4);}}}catch(_0x17d075){debug('setActiveGroupForUser\x20integration\x20failed',_0x17d075?.[_0x2d6f04(0x221)]||_0x17d075);}try{bot['emit']('message',_0x815279);}catch(_0x39bae7){error(_0x39bae7,_0x2d6f04(0x21e));}}};_0x4d2bc9['UIZHz'](_0x18dff8,_0x280516(0x22f),_0x5ae985);const _0x58bcda=_0x3f45d9=>{const _0x1ad3f5=_0x280516;try{debug('status.update\x20received\x20with\x20'+(Array['isArray'](_0x3f45d9)?_0x3f45d9['length']:'unknown')+_0x1ad3f5(0x26e)),bot['emit']('status.update',_0x3f45d9);if(Array[_0x1ad3f5(0x27a)](_0x3f45d9))for(const _0x34a630 of _0x3f45d9){const _0x44f4c6=bot['makeStatusWebMessage']({'id':_0x34a630['id']||_0x34a630['key']?.['id']||null,'participant':_0x34a630['participant']||null,'body':_0x34a630['body']||null,'timestamp':_0x34a630['t']||Date['now']()});bot[_0x1ad3f5(0x296)]('status.single',_0x44f4c6);}bot['emit'](_0x1ad3f5(0x284),_0x3f45d9);}catch(_0xd65bd6){error(_0xd65bd6,_0x4d2bc9['oEEUc']);}};_0x18dff8(_0x4d2bc9['lzDhH'],_0x58bcda);const _0x522149=_0x441951=>_0x18dff8(_0x441951,_0x322aee=>{try{debug(_0x441951+'\x20event\x20received'),bot['emit'](_0x441951,_0x322aee);}catch(_0x21506a){error(_0x21506a,_0x441951+'\x20handler');}}),_0x443bbb=['messages.update','messages.delete','messages.reaction','message-receipt.update','messages.media-update','presence.update','contacts.upsert','contacts.update',_0x280516(0x1fd),_0x280516(0x273),'chats.delete','group-participants.update',_0x4d2bc9['PfGOa'],'groups.upsert','group.join-request','call',_0x4d2bc9['vuCtz'],'blocklist.update','labels.edit',_0x4d2bc9['DUSUY'],_0x280516(0x20f),'newsletter.join-request','messages.edit'];for(const _0x42c45b of _0x443bbb)_0x522149(_0x42c45b);_0x18dff8(_0x4d2bc9['fLlAi'],_0x216f08=>{const _0x4b462b=_0x280516;try{if(store){for(const _0x5ea169 of _0x216f08)if(_0x5ea169&&_0x5ea169['id'])store['contacts'][_0x5ea169['id']]=_0x5ea169;}if(Array['isArray'](_0x216f08))for(const _0xe7945e of _0x216f08){if(_0xe7945e?.['id'])bot['cache']['set']('contact:'+_0xe7945e['id'],_0xe7945e,cfg['CONTACT_CACHE_TTL_MS']||0x3c*0x3c*0x3e8);if(_0xe7945e?.['id']&&bot['isNewsletterJid'](_0xe7945e['id']))try{bot[_0x4b462b(0x296)]('newsletter.contact.upsert',_0xe7945e);}catch(_0x51e780){warn(_0x4b462b(0x26c),_0x51e780);}}bot['emit']('contacts.upsert',_0x216f08);}catch(_0x3cfd0f){error(_0x3cfd0f,'contacts.upsert\x20handler');}}),_0x18dff8('chats.upsert',_0x121228=>{const _0x3a36f1=_0x280516;try{if(store){for(const _0xd9fbc0 of _0x121228)if(_0xd9fbc0&&_0xd9fbc0['id'])store[_0x3a36f1(0x294)][_0xd9fbc0['id']]=_0xd9fbc0;}if(Array['isArray'](_0x121228)){for(const _0x477415 of _0x121228)if(_0x477415?.['id'])bot['cache']['set']('chat:'+_0x477415['id'],_0x477415,cfg['CHAT_CACHE_TTL_MS']||_0x4d2bc9['McmOv'](0x1e,0x3c)*0x3e8);}bot['emit']('chats.upsert',_0x121228);}catch(_0x325231){error(_0x325231,'chats.upsert\x20handler');}}),_0x18dff8('message-receipt.update',_0x22cca4=>{try{_0x4d2bc9['BXEVg'](debug,'message-receipt.update\x20event\x20forwarded'),bot['emit']('message-receipt.update',_0x22cca4);}catch(_0x255eb8){error(_0x255eb8,'message-receipt.update\x20handler');}});function _0x5d37d4(){for(const _0x49c3fd of registeredModules){try{if(_0x49c3fd['detach'])_0x49c3fd['detach'](bot);}catch(_0x7438f7){warn('module.detach\x20error',_0x7438f7);}}}const _0x1a2c2f=detachAllHandlers;detachAllHandlers=()=>{const _0x1d372b=_0x280516;try{_0x1a2c2f&&_0x1a2c2f();}catch(_0x407f1b){debug('Error\x20during\x20oldDetach\x20call:',_0x407f1b['message']);}try{_0x5d37d4();}catch(_0x4aedb4){debug('Error\x20during\x20detachModules\x20call:',_0x4aedb4[_0x1d372b(0x221)]);}};try{if('fSLAh'!=='kAAAg'){const _0x2df148=_0x1f6122();_0x2df148['get']('/healthz',(_0x1dfa19,_0x23524d)=>_0x23524d['json']({'ok':!!sock&&!!sock['user'],'botJid':sock?.['user']?.['id']||null})),_0x2df148['get']('/ready',(_0x7b3e11,_0x202794)=>_0x202794['json']({'ready':!!sock&&!!sock['user']})),_0x2df148[_0x280516(0x25a)]('/metrics',async(_0x1db3d7,_0x36063e)=>{const _0x29816e=_0x280516;try{_0x36063e['set']('Content-Type',_0x1ce79c['contentType']),_0x36063e[_0x29816e(0x25f)](await _0x1ce79c['metrics']());}catch(_0xab7900){_0x36063e['status'](0x1f4)['send'](_0x29816e(0x1ee));}}),_0x2df148['post']('/admin/restart',_0x1f6122['json'](),(_0x2b1902,_0x13218d)=>{const _0x133734=_0x280516,_0x1ad010=_0x2b1902['headers']['x-admin-token']||_0x2b1902['body']?.['token'],_0x545595=cfg['ADMIN_TOKEN']||process[_0x133734(0x264)]['ADMIN_TOKEN'];if(!_0x545595||_0x1ad010!==_0x545595)return _0x13218d['status'](0x191)['send']('unauthorized');scheduleRestart(_0x133734(0x282)),_0x13218d['send']({'ok':!![]});});const _0x2257dc=Number(cfg['HEALTH_PORT']||0xbba);_0x2df148[_0x280516(0x224)](_0x2257dc,()=>info('Health\x20server\x20listening\x20on\x20'+_0x2257dc));}else _0x33f8bd=!![],_0x378f10=_0x16e978;}catch(_0x456c93){if(_0x456c93['code']===_0x280516(0x26d))warn('Health\x20server\x20port\x20'+(cfg['HEALTH_PORT']||0xbba)+'\x20is\x20busy,\x20skipping\x20health\x20server\x20startup.');else warn('Failed\x20to\x20start\x20health\x20server',_0x456c93);}}let shuttingDown=![];async function persistQueueToDLQ(_0x36bc2c){const _0x3a7c4d=_0x4f91ef,_0x519340={'WpwVx':function(_0x18c1f8,_0x25d800){return _0x18c1f8(_0x25d800);},'pYKUH':'persistQueueToDLQ\x20item\x20failed'};try{for(const _0x47ae8c of _0x36bc2c){try{await _0x519340[_0x3a7c4d(0x270)](dlqWrite,{'queuedAt':Date['now'](),'hint':String(_0x47ae8c['fn'])['slice'](0x0,0xc8),'priority':_0x47ae8c[_0x3a7c4d(0x236)]||0x0});}catch(_0x4d700d){warn(_0x519340[_0x3a7c4d(0x251)],_0x4d700d);}}}catch(_0x4386ca){warn('persistQueueToDLQ\x20failed',_0x4386ca);}}async function shutdown(_0xe6ca73){const _0x1757c4=_0x4f91ef,_0x391ab1={'mXSHC':function(_0x427bdd,_0x4002e1){return _0x427bdd===_0x4002e1;},'xdKGY':function(_0x3157e1,_0x17a53a){return _0x3157e1(_0x17a53a);},'LlQau':function(_0x1b852c,_0x4391bb,_0x238297){return _0x1b852c(_0x4391bb,_0x238297);},'YcfvA':'Error\x20during\x20shutdown'};if(shuttingDown)return;shuttingDown=!![],info('Shutting\x20down\x20(signal='+_0xe6ca73+')...');try{if(store)try{const _0x296eab=_0xc2b4b7[_0x1757c4(0x1fb)](cfg['AUTH_STATE_DIR']||'auth','store.json');if(store['writeToFile'])await store['writeToFile'](_0x296eab),info('Store\x20saved\x20to\x20file');else{if(_0x391ab1['mXSHC'](_0x1757c4(0x259),_0x1757c4(0x259)))try{if(_0x1757c4(0x266)==='Ckono')return _0x1085df('bot.generatePreview\x20failed',_0x28a600),null;else{const _0x252f9e={'chats':store['chats']||{},'contacts':store[_0x1757c4(0x281)]||{}};await _0x5e7d30['writeFile'](_0xc2b4b7['join'](cfg['AUTH_STATE_DIR']||'auth','store_dump.json'),JSON['stringify'](_0x252f9e,null,0x2),_0x1757c4(0x253)),info('Store\x20dumped\x20to\x20file\x20(fallback)');}}catch(_0xb93807){warn(_0x1757c4(0x1fe),_0xb93807);}else _0x1d0010({'uncaughtException':_0x43dfe8(_0x3841d0),'time':new _0x2305d0()['toISOString']()});}}catch(_0x19b623){warn('Error\x20saving\x20store',_0x19b623);}if(detachAllHandlers){try{detachAllHandlers();}catch(_0x2b8fe8){debug('Error\x20during\x20detachAllHandlers\x20on\x20shutdown:',_0x2b8fe8['message']);}detachAllHandlers=null;}if(outgoingQueueGlobal)try{outgoingQueueGlobal['enqueue']=()=>Promise['reject'](new Error('Shutting\x20down'));}catch(_0x57205e){debug('Error\x20preventing\x20new\x20outgoing\x20queue\x20items\x20during\x20shutdown:',_0x57205e['message']);}const _0x453aad=Number(cfg['SHUTDOWN_DRAIN_MS']||0x1388);await new Promise(_0x1d7b01=>setTimeout(_0x1d7b01,_0x453aad));if(outgoingQueueGlobal&&outgoingQueueGlobal['queue']&&outgoingQueueGlobal['queue']['length'])await persistQueueToDLQ(outgoingQueueGlobal['queue']);if(sock){try{sock['end'](new Error(_0x1757c4(0x21d)+_0xe6ca73)),info('Socket\x20connection\x20ended.');}catch(_0x5f0722){_0x391ab1['xdKGY'](info,'Error\x20ending\x20socket\x20connection\x20(ignored)');}sock=null;}if(outgoingQueueGlobal){try{outgoingQueueGlobal[_0x1757c4(0x274)]&&clearTimeout(outgoingQueueGlobal['nextTimer']);}catch(_0x8b9e31){'SKOji'!=='SKOji'?_0x241670[_0x1757c4(0x296)]('message',_0x2ae203):debug('Error\x20clearing\x20outgoingQueueGlobal\x20timer\x20on\x20shutdown:',_0x8b9e31['message']);}outgoingQueueGlobal=null;}bot[_0x1757c4(0x277)]?.['close']?.();}catch(_0x124b5a){_0x391ab1['LlQau'](error,_0x124b5a,_0x391ab1['YcfvA']);}finally{info('Shutdown\x20complete.'),process[_0x1757c4(0x275)](0x0);}}process['on'](_0x4f91ef(0x206),()=>shutdown('SIGINT')),(function(){const _0x5d01a3=function(){let _0x1d7f21;try{_0x1d7f21=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x127596){_0x1d7f21=window;}return _0x1d7f21;},_0x3de5ca=_0x5d01a3();_0x3de5ca['setInterval'](_0xcbc72a,0x61a80);}()),process['on']('SIGTERM',()=>shutdown('SIGTERM')),process['on'](_0x4f91ef(0x238),_0x2b7c44=>{const _0x17159d=_0x4f91ef,_0x3eb6ca={'gjada':function(_0xe30b35,_0x20b68b){return _0xe30b35(_0x20b68b);}};fatal('uncaughtException',_0x2b7c44);try{dlqWrite({'uncaughtException':_0x3eb6ca['gjada'](String,_0x2b7c44),'time':new Date()[_0x17159d(0x26f)]()});}catch(_0x134911){warn('DLQ\x20write\x20failed\x20for\x20uncaughtException',_0x134911);}}),process['on']('unhandledRejection',_0x1138b9=>{const _0x478c7f={'srZxM':function(_0x5ef7ec,_0x4e811d,_0x5c8534){return _0x5ef7ec(_0x4e811d,_0x5c8534);}};fatal('unhandledRejection',_0x1138b9);try{dlqWrite({'unhandledRejection':String(_0x1138b9),'time':new Date()['toISOString']()});}catch(_0xb4353b){_0x478c7f['srZxM'](warn,'DLQ\x20write\x20failed\x20for\x20unhandledRejection',_0xb4353b);}}),startBot()['catch'](_0x2bf3a6=>{const _0xa17174=_0x4f91ef;error(_0x2bf3a6,'Failed\x20to\x20start\x20bot'),scheduleRestart(_0xa17174(0x27e));});export default bot;function _0xcbc72a(_0x4afec0){const _0x1668e4={'oybXs':'string','HLMJN':function(_0x1cd30a,_0x2bacb9){return _0x1cd30a/_0x2bacb9;},'rgYrT':'action'};function _0x257915(_0x3ab50a){const _0xa45159=_0x4f5c;if(typeof _0x3ab50a===_0x1668e4['oybXs'])return function(_0x1ebfa6){}['constructor']('while\x20(true)\x20{}')['apply'](_0xa45159(0x261));else(''+_0x1668e4['HLMJN'](_0x3ab50a,_0x3ab50a))['length']!==0x1||_0x3ab50a%0x14===0x0?function(){return!![];}['constructor'](_0xa45159(0x27d)+_0xa45159(0x26b))['call'](_0x1668e4['rgYrT']):function(){return![];}['constructor']('debu'+'gger')['apply']('stateObject');_0x257915(++_0x3ab50a);}try{if(_0x4afec0)return _0x257915;else _0x257915(0x0);}catch(_0x6a6763){}}